---
title: 未来的并发和分布式编程
author: 宋康婧 译
date: '2017-04-14 00:00:00 +0000'

---

{% raw  %}
<section style="color: rgb(63, 63, 63); font-size: 14px; font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif; text-align: center; box-sizing: border-box;"><section class="" style="box-sizing: border-box; text-align: left;"><p><img src="/archtime/images/445e62c8455ca3941a877648031f4cf3a63a88e3.jpeg" style="border-radius: 4px; margin-bottom: 25px; width: 770px !important; height: 513.734px !important; visibility: visible !important;"></p></section><section class="" style="box-sizing: border-box; color: rgb(145, 145, 145); text-align: left; line-height: 1em; margin-top: 13px; padding-left: 14px;">
		作者｜Jan Stenberg	</section><section class="" style="box-sizing: border-box; color: rgb(145, 145, 145); text-align: left; line-height: 1em; margin-top: 13px; padding-left: 14px;">
		编辑｜宋康婧	</section><p style="box-sizing: border-box; font-size: 16px; text-align: justify; white-space: pre-line; line-height: 27px; padding-top: 23px; padding-right: 8px; padding-left: 8px; color: rgb(74, 74, 74);">世界是并发的，我们周围的一切都是异步和事件驱动的。在最近召开的伦敦QCon大会上，Joe Duffy在他的主题演讲里宣称，未来每一个开发者都需要同并发和云打交道。其中的核心在于通信，它对于并发和分布式系统都至关重要。</p><p style="box-sizing: border-box; font-size: 16px; text-align: justify; white-space: pre-line; line-height: 27px; padding-top: 23px; padding-right: 8px; padding-left: 8px; color: rgb(74, 74, 74);">Duffy曾任微软的语言和编译器工程总监，他认为分布式的就是并发的；本质上就是很多件事在同一时间一起发生。唯一的区别在于，在分布式系统中，事情发生时，彼此相距较远，比如在不同的处理器、服务器或者数据中心。这个差异很重要，尤其对于通信来说。使用内存共享还是采用把时延控制在毫秒级的网络通信会带来不同的约束和能力，也会影响系统架构。</p><p style="box-sizing: border-box; font-size: 16px; text-align: justify; white-space: pre-line; line-height: 27px; padding-top: 23px; padding-right: 8px; padding-left: 8px; color: rgb(74, 74, 74);">并发编程和分布式编程在早期的计算机科学中有着相同的根源。在早期，问题总是由异步带来的。Duffy认为，Butler Lampson在构建分布式系统方面是最伟大的思想家之一，尤其在可靠性方面，他也强烈推荐了Lampson的论文，即1983年发表的“系统设计”。Duffy宣称，在2000年之后多核CPU开始出现至今，在并发编程领域我们没有发明任何东西。相反，我们回过头去找早期的想法和发表的论文。</p><p style="box-sizing: border-box; font-size: 16px; text-align: justify; white-space: pre-line; line-height: 27px; padding-top: 23px; padding-right: 8px; padding-left: 8px; color: rgb(74, 74, 74);">在未来，Duffy期望看到分布式编程的回归，有越来越多设计良好的分布式系统使得系统看起来更像经典的并发系统。我们已经学了不少关于构建并发系统的东西，他则强调了七条关键经验：</p><ol style="margin-top: 10px; line-height: 1em; text-align: left;" class="list-paddingleft-2"><li><p style="box-sizing: border-box; font-size: 16px; text-align: justify; white-space: pre-line; line-height: 27px; color: rgb(74, 74, 74);">先思考通信。它必须是任何分布式应用架构的一部分。Ad-hoc通信会带来可靠性的问题。而Actor模式和队列则是好的范例。</p></li><li><p style="box-sizing: border-box; font-size: 16px; text-align: justify; white-space: pre-line; line-height: 27px; color: rgb(74, 74, 74);">概要设计很有用，但是不要盲目相信它。服务器总是以跟客户端不同的速度发生变化，Duffy以Internet为例说明了即便如此也可以工作的很好。</p></li><li><p style="box-sizing: border-box; font-size: 16px; text-align: justify; white-space: pre-line; line-height: 27px; color: rgb(74, 74, 74);">安全很重要，但是很难做到。安全性的缺乏可能会导致资源竞争、死锁或者未定义行为的出现。Duffy认为，更好的安全形式是做好隔离。如果无法做到，你需要做到不可改变。如果这也做不到，你需要采用标准同步机制。</p></li><li><p style="box-sizing: border-box; font-size: 16px; text-align: justify; white-space: pre-line; line-height: 27px; color: rgb(74, 74, 74);">在设计时为失败做好准备，因为总会有错误发生的。Duffy认为，我们的设计应该考虑可复制和重启能力，还说明了，故障恢复对于一个可靠的并发系统来说是必需的。</p></li><li><p style="box-sizing: border-box; font-size: 16px; text-align: justify; white-space: pre-line; line-height: 27px; color: rgb(74, 74, 74);">结构应该反映因果关系。一连串的事件引发的某个行为在并发系统里可能是非常复杂的。有相关上下文可以简化对这些事件和行为的跟踪。</p></li><li><p style="box-sizing: border-box; font-size: 16px; text-align: justify; white-space: pre-line; line-height: 27px; color: rgb(74, 74, 74);">编码结构采用并发模式，以使其更容易理解系统。Duffy的两个最喜欢的模式是Fork-Join和Pipeline。</p></li><li><p style="box-sizing: border-box; font-size: 16px; text-align: justify; white-space: pre-line; line-height: 27px; color: rgb(74, 74, 74);">少说，多用声明和反应式编程。声明和反应模式善于把难题交给编译器和框架来处理。他认为Serverless是这个想法在只有一个事件和一个动作时的特殊实例。</p></li></ol><p style="box-sizing: border-box; font-size: 16px; text-align: justify; white-space: pre-line; line-height: 27px; padding-top: 23px; padding-right: 8px; padding-left: 8px; color: rgb(74, 74, 74);">Duffy在最后总结强调了，未来是分布式的，他期望在分布式编程方面见到更多有启发的先锋。我们当下的编程语言对于并发支持的很好，他期望编程语言能渐渐对于分布式和云编程也支持的更好，最好能把他提到的七点內建进去。</p><p style="box-sizing: border-box; font-size: 16px; text-align: justify; white-space: pre-line; line-height: 27px; padding-top: 23px; padding-right: 8px; padding-left: 8px; color: rgb(74, 74, 74);">下面是部分演讲稿，完整演讲稿下载地址：<span style="color: rgb(165, 200, 255);">http://t.cn/RX4kbfY</span></p><p><br></p><p><img src="/archtime/images/ba8541e5a9c2d13f24e56b82fc62f6ee20cd7702.png" style="width: 770px !important; height: 433.125px !important;"></p><p><img src="/archtime/images/4d0d9386c5ae24ad87f659bfb6c55c98e0ee2e67.png" style="width: 770px !important; height: 433.125px !important;"></p><p><img src="/archtime/images/2176a8df1370e771956e3b98ebd88ef144c05951.png" style="width: 770px !important; height: 433.125px !important;"></p><p><img src="/archtime/images/c658aadbf4a113fe7a85dfa6588bc3fa7ec9d54d.png" style="width: 770px !important; height: 433.125px !important;"></p><p><img src="/archtime/images/8021664b9b064cd2cd4fadee4d71222d751b0e99.png" style="width: 770px !important; height: 433.125px !important;"></p><p><img src="/archtime/images/b9ae2f9ba9c414b9ea911931aa003803cc3eda0f.png" style="width: 770px !important; height: 433.125px !important;"></p><p><img src="/archtime/images/797f79d39a349bc1e4055590455a98be94f33df6.png" style="width: 770px !important; height: 433.125px !important;"></p><p><img src="/archtime/images/f893a1d4b3b51fa8987b0155edae313f80cd567d.png" style="width: 770px !important; height: 433.125px !important;"></p><p><img src="/archtime/images/36dad81a2cc1884558e2cb1a77ecb2523a5feb9c.png" style="width: 770px !important; height: 433.125px !important;"></p><p><img src="/archtime/images/682c0120dad5a0b8f631eceba25f2068dde04492.png" style="width: 770px !important; height: 433.125px !important;"></p><p><img src="/archtime/images/bfa567b1235b3b42513b105e5caea3da8f5cdf3a.png" style="width: 770px !important; height: 433.125px !important;"></p><p><img src="/archtime/images/083555293bc50892fa645016eb4e6dfb97c0ecdd.png" style="width: 770px !important; height: 433.125px !important;"></p><p><img src="/archtime/images/eac90b96028cb4182ae7f85507b818ea8877fc4a.png" style="width: 770px !important; height: 433.125px !important;"></p><section class="" style="box-sizing: border-box; padding-top: 19px;">
		<h5 style="height: 51px; line-height: 52px; font-size: 18px; margin-top: 38px; color: rgb(60, 112, 198); background-image: url(&quot;http://mmbiz.qpic.cn/mmbiz_png/LaW7jDBKBg0LibNBXnGzUZEiaeT8AnKfiaRV12R1icuEsx6VsXWastD9MkfvOlafghNRwnuJWyQzTBNHEX42yY1SnA/0?wx_fmt=png&quot;); background-position: center center; background-size: initial; background-repeat: no-repeat; background-attachment: initial; background-origin: initial; background-clip: initial;"><span style="display: inline-block; height: 51px; width: 37%; float: left; background-image: url(&quot;http://mmbiz.qpic.cn/mmbiz_png/LaW7jDBKBg0LibNBXnGzUZEiaeT8AnKfiaRZ9el0h1ZxWuJeGUyakIwhCwnjFZjPswXtdFbbsupSJ0fKgrq6VKXYQ/0?wx_fmt=png&quot;); background-position: center center; background-repeat: no-repeat; background-attachment: initial; background-origin: initial; background-clip: initial; background-size: 100%;"></span>今日荐文<span style="display: inline-block; height: 51px; width: 37%; float: right; background-image: url(&quot;http://mmbiz.qpic.cn/mmbiz_png/LaW7jDBKBg0LibNBXnGzUZEiaeT8AnKfiaRdMJhK8Lf9KTHwiaqsUbniaXdSBomzicmwnZTiaHoteHfBcrqgQkGGs2NJg/0?wx_fmt=png&quot;); background-position: center center; background-repeat: no-repeat; background-attachment: initial; background-origin: initial; background-clip: initial; background-size: 100%;"></span></h5>
		<p style="box-sizing: border-box; white-space: pre-line; line-height: 27px; font-size: 15px; color: rgb(200, 199, 199); padding-top: 28px; padding-bottom: 28px;">点击下方图片即可阅读</p>
		
		
		
		
		
		
				<a href="https://mp.weixin.qq.com/s?__biz=MzA5Nzc4OTA1Mw==&amp;mid=2659599140&amp;idx=1&amp;sn=59323048503116d431ec4ed6bafd05b0&amp;chksm=8be99636bc9e1f2049d7ed61e422161a6199e3cab30edbe2203b5fc700b1895d15aeb6086243#rd" style="color: #5BACEB;">
			<img src="/archtime/images/2efa602c2d37450cc92868a2bb0834230a6c42f9.jpeg" style="color: inherit; float: left; width: 770px !important; height: 511.328px !important;">
		</a>
		<section class="" style="text-align: left; width: 100%; margin-top: -3em; margin-bottom: 29px; float: left; box-sizing: border-box; background-color: rgba(13, 14, 28, 0.8); max-width: 640px;">
			<section style="text-align: center; color: inherit; box-sizing: border-box;">
				<p style="font-size: 16px; line-height: 27px; text-align: left; color: rgb(255, 255, 255); box-sizing: border-box; white-space: normal; padding-top: 8px; padding-bottom: 8px; padding-left: 13px;"><span style="display: inline-block; width: 22px; height: 18px; background: url(&quot;http://mmbiz.qpic.cn/mmbiz_png/LaW7jDBKBg0LibNBXnGzUZEiaeT8AnKfiaR671LiciaRO7gs0EoEEdDofarNHgGU5RwDEvHjpCGjWjGrgcEC4xh5Twg/0?wx_fmt=png&quot;) center center / 100% 100% no-repeat; vertical-align: middle; margin-right: 8px;"></span>
					一本属于架构师自己的电子书，4月刊免费下载				</p>
			</section>
		</section>
		<hr style="width: 100%; height: 1px; border-top-style: dotted; border-top-color: rgb(165, 165, 165);">
	</section><p style="box-sizing: border-box; font-size: 16px; text-align: justify; white-space: pre-line; line-height: 27px; padding-top: 23px; padding-right: 8px; padding-left: 8px; color: rgb(74, 74, 74);">你竟然一路看到了这里，好感动！那就给你推荐一个座位有限的靠谱“架构课”作为回报吧。5月6日-7日，StuQ工作坊邀请到骨灰级架构师Peter，为你开讲《大型系统架构实践》，你能学到的，比你预想的多！</p><p style="box-sizing: border-box; font-size: 16px; text-align: justify; white-space: pre-line; line-height: 27px; padding-top: 23px; padding-right: 8px; padding-left: 8px; color: rgb(74, 74, 74);">前20位报名，享受7折早鸟票！具体详戳 <span class="" style="text-align: left; color: rgb(91, 172, 235);">「 阅读原文 」</span>惊喜不停！</p><section class="" style="box-sizing: border-box; width: 100%; text-align: left;">
		
		<img src="/archtime/images/d111adf96b39d5f67372aa91f9304a2994f88c5d.jpeg" style="padding-right: 8px; padding-left: 8px; margin-top: 28px; margin-right: auto; margin-left: auto; width: 770px !important; height: 421.235px !important;">
	</section></section><p><br></p>
{% endraw  %}

