---
title: 城市计算如何玩转住房选址？
author: 学术合作部
wechat_source: >-
  http://mp.weixin.qq.com/s?timestamp=1515989672&src=3&ver=1&signature=yyLj*6br2FUtW3BtBE3siENdpZD0heN-V3Kq05uBMqBZEkIlLlG*40UYD2BXBocG66bQlm-Y5HytVRRlbtw7WD*cOEQQSm5KC*SvKMTuYIFvoUlBlgbsUUFB5C42R*qFlbcaPm2ZHd2CI9Qvpd5bi1uhSrVPJFMGfjkBDeuygfc=
date: '2018-01-11 00:00:00 +0000'

---

{% raw  %}
<p style="white-space: normal;text-align: center;"><img src="https://mmbiz.qpic.cn/mmbiz_gif/1ejckdoRibFVb5Yltibk0BY6eu8fJ1uOTw3l0icHwDM4lx3wlEPcAaqbGUImFBfaGdbucKLvVm09ybic3hyKRcn2tA/0?wx_fmt=gif" style="color: rgb(62, 62, 62); font-size: 16px; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important; visibility: visible !important; width: 770px !important; height: 270.783px !important;"></p><p style="white-space: normal;line-height: 1.5em;"><span class="s1"><br></span></p><blockquote style="white-space: normal;"><p style="text-align: justify;line-height: 1.5em;"><span style="font-size: 15px;"><strong><span style="color: rgb(136, 136, 136);">丹棱君有话说：</span></strong></span><span style="color: rgb(136, 136, 136);font-size: 15px;">你是不是也有同样的经历？在买房或租房时，希望锁定距离公司、某商圈或学区几公里范围内的房子，打开中介公司的在线选房系统，输入距离参数后，得出的却是按照直线距离筛选出的结果，与复杂城市环境中的实际通勤距离相差较大。怎样才能更精准地计算出地标位置的可达距离？微软的城市计算团队和浙江大学可视化研究小组，联合开发了一套在线住房选址可视分析系统。这一选址神器有多高效可靠？快跟随丹棱君一探究竟~</span></p></blockquote><p><br></p><p style="text-align: justify;">购房、租房者在挑选住房时通常有两类需求，一类与<strong>价格、面积、楼层等住宅的内部属性相关</strong>；另一类则与<strong>居住地点与目标地点间的可达性（Reachability）等地理属性相关</strong>。</p><p style="text-align: justify;">&nbsp;</p><p style="text-align: justify;">第二类需求非常重要，而现有的在线租售房系统往往是以机械的方式来满足这类需求，譬如筛选出距离某个地点几公里内的住宅。但是，直线距离在复杂城市环境中并无太多应用价值，多变的路况使得城市两点之间的通勤时间会以一天或一周为周期发生变化，这在北上广深等城市更为明显。</p><p style="text-align: justify;"><br></p><p style="text-align: justify;"><strong>由巫英才老师率领的浙江大学 ZJUVIS 可视化研究小组，与郑宇博士率领的微软亚洲研究院城市计算组联手，为第二类需求开发了一套在线住房选址可视分析系统</strong>&nbsp;<strong>ReACH&nbsp;</strong><strong>。</strong>将价格、面积、卧室数量等要包括在内的同时，重点考虑了在地理决策中占据重要地位的地标位置可达性。</p><p style="text-align: justify;"><br></p><p style="text-align: justify;">如何让用户清晰、自然地表达在可达性方面的需求呢？研究团队利用时间线的形式，允许用户通过滚动、点击、拖拽等直观的交互方式建立自己的行程，如 “8:30 从家出发，8:45 到达学校，9:00 到达上班地点”。同时，用户可指定诸如“只考虑工作日”的日期限制。家和学校的位置无需被指定，系统会自动基于可达性，推荐所有满足行程的位置集合。</p><p style="text-align: justify;"><br></p><p style="text-align: center;"><img src="https://mmbiz.qpic.cn/mmbiz_jpg/1ejckdoRibFWKc8J5fah74aDOickp1DdQtk1qUkrRsR2UJ2lAtU4LtRbeczTmlkxOEvNcw5gLDic666vz122mQtkw/0?wx_fmt=jpeg" style="width: 770px !important; height: 392.13px !important;"></p><p style="text-align: justify;"><span style="font-size: 14px;color: rgb(136, 136, 136);">ReACH 使用界面，包括时间线（左）、地图（上）、排序（下）、愿望单（右） 四个视图。</span></p><p><br></p><p style="text-align: justify;">基于系统推荐，用户还可自行筛选符合行程的地点，缩小位置集合。针对第一类需求，用户可就价格、面积、完成行程所需时间等属性的范围进行调整，并按照个人偏好进行组合排序，从而找到自己的最佳住宅。<br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></p><p style="text-align: justify;">&nbsp;</p><p style="text-align: justify;">通过案例分析和用户研究，系统的有效性已被验证。</p><p style="text-align: justify;"><br></p><section class="_wxbEditor" style="white-space: normal;"><section class="pEditor " helvetica="helvetica" neue="neue" yahei="yahei" px="px" normal="normal" break-all="break-all" style="line-height: 22.4px;"><section class="pBrush p_variable_border p_variable_color p_variable_bg" style="padding: 0.45em 0.6em 0.45em 0.9em;background-color: rgb(255, 255, 255);border-color: rgb(55, 184, 250);color: rgb(51, 51, 51);border-left-width: 10px;border-left-style: solid;word-break: break-all;"><p><span style="font-size: 18px;"><strong><span style="text-align: justify;font-family: 微软雅黑;"><strong style="text-align: center;"><strong>后端数据挖掘</strong></strong></span></strong></span></p></section></section></section><p><br></p><p style="text-align: justify;">上述过程的关键，在于高效可靠地计算出两个位置之间的可达性，并实现可视分析系统的即时反馈。这并非易事，后端的数据挖掘模块主要有两个技术难点，包括<strong>海量数据带来计算效率的难题</strong>，以及<strong>庞大数据的局部冗余和全局稀疏</strong>。</p><p style="text-align: justify;"><br></p><p style="text-align: justify;">为了支持可达性的计算，为了支持可达性的计算，研究团队搜集了两个地点之间数据量以十亿计的出租车行驶记录数据。在此前研究中，即使利用三台服务器进行并行计算，也需要 20 多秒的时间，远不能满足可视分析系统即时流畅反馈的用户需求。</p><p><br></p><p style="text-align: justify;">模型需通过指定时间内两个地点间是否有直接连接的交通轨迹来判断其可达性，但是有限的出租车无法实现城市中每一条道路的全天全时覆盖，这种数据的稀疏性阻碍了可达性预测在整个城市范围内的稳定性。倘若增加数据规模，又会遇到存储和计算效率的瓶颈。</p><p><br></p><p style="text-align: justify;">为了解决这些难点，研究团队创新性地利用了图结构存储和索引海量轨迹数据，革新了先前的可达性计算模型。可达区域的查询时间被压缩到 3 秒以内。</p><p style="text-align: justify;">&nbsp;</p><p style="text-align: justify;">Microsoft Azure 云计算平台与服务亦在本研究中有很好的应用。出租车约每 25 秒记录一次状态，这样的离散记录并不能直接用于可达性计算。研究团队将这些记录投影到连续的路网上并补齐缺失的数据，使之成为连续轨迹。在这个过程中，Azure 强大的并行计算能力被充分发挥。此前在单机上运行模型处理两个月的数据，约需要连续计算一个多月，在迁移到 Azure 的 Spark 多机计算平台上后，处理完整的数据集只需数天，极大地提高了研究初期迭代可达性模型时的设计效率。在后期，研究团队将可视分析系统部署到 Azure 云服务器上，进一步加快了后端可达性数据挖掘模块的计算效率，其成果也可从世界各地流畅地访问。</p><p style="text-align: justify;"><br></p><section class="_wxbEditor" style="white-space: normal;"><section class="pEditor " helvetica="helvetica" neue="neue" yahei="yahei" px="px" normal="normal" break-all="break-all" style="line-height: 22.4px;"><section class="pBrush p_variable_border p_variable_color p_variable_bg" style="padding: 0.45em 0.6em 0.45em 0.9em;background-color: rgb(255, 255, 255);border-color: rgb(55, 184, 250);color: rgb(51, 51, 51);border-left-width: 10px;border-left-style: solid;word-break: break-all;"><p><span style="font-size: 18px;"><strong><span style="text-align: justify;font-family: 微软雅黑;"><strong style="text-align: center;"><strong>前端可视化设计</strong></strong></span></strong></span></p></section></section></section><p><br></p><p style="text-align: justify;">研究团队设计和开发的是一个新颖的可视分析系统，它基于时间线进行可视表达与交互。前端的可视化设计，也有两大难点，包括<strong>清晰直观地将可达性集成到可视化设计</strong>，及<strong>基于用户个人偏好，综合考虑多种属性帮助他们做出决策</strong>，研究团队亦将其一一消化。</p><p style="text-align: justify;"><br></p><p style="text-align: center;"><img src="https://mmbiz.qpic.cn/mmbiz_jpg/1ejckdoRibFWKc8J5fah74aDOickp1DdQtoWozZQFWpNO9nDnK5Krv3wsdDa6W6pSdppmFwzlibxQn4cJoibx8ibmfQ/0?wx_fmt=jpeg" style="width: 770px !important; height: 361.472px !important;"></p><p style="text-align: justify;"><span style="font-size: 14px;color: rgb(136, 136, 136);">ReACH 系统的可视化设计。时间线视图（左）帮助用户直观地建立可达性限制条件，地图视图（上）帮助用户清晰地理解可达性计算结果，排序视图（下）帮助用户高效地筛选理想住宅。</span></p><p><br></p><p style="text-align: justify;">可达性是一个抽象概念，理解它和背后的计算过程对于普通用户来说并不容易。研究团队选择隐藏模型细节，创新性地以安排日程的形式来间接引导模型计算出满足条件的住房。在时间线视图中，用户借由直观交互建立某段时间内的行程，指定到达时间、到达地点的类型、出发时间等参数，以此来作为模型的输入，从而计算得到可达区域，筛选出满足条件的住房，可达性概率信息也以热力图的形式呈现在地图上，十分直观。</p><p><br></p><p style="text-align: justify;">研究团队扩展了基于表格的 LineUp 多属性可视排序技术，加入所有住宅在单个属性上分布的可视化，并允许用户直观地对这些属性的范围进行筛选，避免用户在对数据集一无所知的情况下设定过宽或过严的过滤条件。此外，系统还支持用户将心仪住宅加入愿望单，以便进一步对比分析。</p><p style="text-align: justify;"><br></p><p style="text-align: justify;">目前，微软的城市计算团队和浙江大学可视化研究小组共同完成的关于在线住房选址可视分析系统 ReACH 的论文，已被人机交互领域的顶级会议之一 ACM CHI 2018 大会接受。</p><p style="text-align: justify;"><br></p><p style="text-align: justify;">本文转自微信公众号：微软学术合作</p><p><br></p><p><span style="text-align: justify;"></span></p><p style="text-align: justify;">了解更多：<br></p><ul class=" list-paddingleft-2" style=""><li><p><a href="http://mp.weixin.qq.com/s?__biz=MzIwMTI4MzExMw==&amp;mid=2650675414&amp;idx=1&amp;sn=b0689b303a6c324d9c5a1e4740be340e&amp;chksm=8efafb90b98d728666df799d877ae123419c2ce17df0dab1e52465a48c6a8d2e6b82e55089c7&amp;scene=21#wechat_redirect" target="_blank">媒体 | 郑宇：用大数据预测雾霾是如何做到的？</a><br></p></li><li><p style="text-align: justify;"><a href="http://mp.weixin.qq.com/s?__biz=MzIwMTI4MzExMw==&amp;mid=2650676173&amp;idx=1&amp;sn=32752f4cc2956672f900ed72cf6aad07&amp;chksm=8efaf88bb98d719d1c71dbb85194fea3ce2296c9919a86a68748f9233296dcc31b9c86cdd805&amp;scene=21#wechat_redirect" target="_blank">观点 | 郑宇：这个时代不缺数据，缺的是足够开放的思维</a><br></p></li><li><p style="text-align: justify;"><a href="http://mp.weixin.qq.com/s?__biz=MzIwMTI4MzExMw==&amp;mid=2650678408&amp;idx=1&amp;sn=1ef3652c83c3536a86676f10943fb677&amp;chksm=8efac7ceb98d4ed8fd571451298ca6992dd8dec017ef1fa4f250a9e8216e3227ec1175fa1582&amp;scene=21#wechat_redirect" target="_blank">我在微软做研发 | 洪小文：在研究院这件事上，微软是“少数派”</a><br></p></li></ul><p style="font-size: 16px;white-space: normal;line-height: 25.6px;color: rgb(62, 62, 62);font-family: 微软雅黑;text-align: justify;background-color: rgb(255, 255, 255);"><br></p><hr style="font-size: 16px;white-space: normal;line-height: 25.6px;color: rgb(62, 62, 62);font-family: 微软雅黑;background-color: rgb(255, 255, 255);"><p style="font-size: 16px;white-space: normal;line-height: 25.6px;color: rgb(62, 62, 62);font-family: 微软雅黑;background-color: rgb(255, 255, 255);"><br></p><p style="font-size: 16px;white-space: normal;line-height: 25.6px;color: rgb(62, 62, 62);font-family: 微软雅黑;max-width: 100%;min-height: 1em;text-align: center;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;"><img src="http://mmbiz.qpic.cn/mmbiz_png/1ejckdoRibFWhI1CBsicicS03icp2HqXZt7Sk4jKfMy9gxL8MtCYEPNicTz5H4mKsBDqn6UPnnpZVYuNw3kYibmvTCdA/640?wx_fmt=png" style="box-sizing: border-box !important; word-wrap: break-word !important; visibility: visible !important; width: 124px !important; height: 124px !important;"></p><p style="font-size: 16px;white-space: normal;line-height: 25.6px;color: rgb(62, 62, 62);font-family: 微软雅黑;max-width: 100%;min-height: 1em;text-align: center;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;">后台入驻微软小冰</p><p style="font-size: 16px;white-space: normal;line-height: 25.6px;color: rgb(62, 62, 62);font-family: 微软雅黑;max-width: 100%;min-height: 1em;text-align: center;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;">如果你很萌，请跟她一决高下！</p><p style="font-size: 16px;white-space: normal;line-height: 25.6px;color: rgb(62, 62, 62);font-family: 微软雅黑;max-width: 100%;min-height: 1em;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></p><p style="font-size: 16px;white-space: normal;line-height: 25.6px;color: rgb(62, 62, 62);font-family: 微软雅黑;max-width: 100%;min-height: 1em;text-align: center;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;"><img src="https://mmbiz.qpic.cn/mmbiz_gif/1ejckdoRibFVb5Yltibk0BY6eu8fJ1uOTw0ZOyS8ibtpiajCcBskic2HtoEGicVx7PxPicJcS0F3PeHHibjlpMLJ6RQhGg/0?wx_fmt=gif" style="box-sizing: border-box !important; word-wrap: break-word !important; visibility: visible !important; width: 550px !important; height: 232px !important;"></p><hr/><a href="http://mp.weixin.qq.com/s?timestamp=1515989672&src=3&ver=1&signature=yyLj*6br2FUtW3BtBE3siENdpZD0heN-V3Kq05uBMqBZEkIlLlG*40UYD2BXBocG66bQlm-Y5HytVRRlbtw7WD*cOEQQSm5KC*SvKMTuYIFvoUlBlgbsUUFB5C42R*qFlbcaPm2ZHd2CI9Qvpd5bi1uhSrVPJFMGfjkBDeuygfc=">微信地址</a>
{% endraw  %}

