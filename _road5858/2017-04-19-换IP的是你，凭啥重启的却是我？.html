---
title: 换IP的是你，凭啥重启的却是我？
author: 58沈剑
date: '2017-04-19 00:00:00 +0000'

---

{% raw  %}
<p><span style="font-size: 16px;"><strong><span style="font-family: 宋体;">一、缘起</span></strong></span></p><p><span style="font-family: 宋体; font-size: 14px;">很多公司，技术经常遇到这样的场景：</span></p><p><span style="font-size: 14px;">1<span style="font-size: 14px; font-family: 宋体;">）硬件升级，要换一台高配机器</span></span></p><p><span style="font-size: 14px;">2<span style="font-size: 14px; font-family: 宋体;">）网络重新规划，若干服务器要调整<span style="font-family: 宋体; font-size: 14px; line-height: 22.4px;">机架</span></span></span></p><p><span style="font-size: 14px;">3<span style="font-size: 14px; font-family: 宋体;">）服务器当机，要重新部署恢复服务</span></span></p><p><span style="font-size: 14px;">…</span></p><p><span style="font-size: 14px;">&nbsp;</span></p><p><img src="/road5858/images/2a5657f8f500d0ded1506f69631f166384f1ef4a.png" style="width: 195px !important; height: 129px !important; visibility: visible !important;"></p><p><span style="font-size: 14px;"><span style="font-size: 14px; font-family: 宋体;">更具体的，如上图：</span><span style="font-size: 14px; color: rgb(255, 104, 39);"><span style="font-size: 14px; font-family: 宋体;">数据库换了一个</span>ip<span style="font-size: 14px; font-family: 宋体;">，此时往往连接此数据库的上游需要修改配置重启</span></span><span style="font-size: 14px; font-family: 宋体;">，如果数据库有很多上游调用方，改配置重启的调用方会很多，每次换</span>ip<span style="font-size: 14px; font-family: 宋体;">的成本往往很高，成为大家共性的痛点。</span></span></p><p><span style="font-size: 14px;">&nbsp;</span></p><p><span style="font-size: 14px;"><span style="font-size: 14px; font-family: 宋体;">由</span>A<span style="font-size: 14px; font-family: 宋体;">的调整（数据库换</span>ip<span style="font-size: 14px; font-family: 宋体;">），配合修改和调整的却是</span>BCDE<span style="font-size: 14px; font-family: 宋体;">（改配置重启），</span>BCDE<span style="font-size: 14px; font-family: 宋体;">内心非常的郁闷：明明换</span>ip<span style="font-size: 14px; font-family: 宋体;">的是你，凭什么配合重启的却是我？</span></span></p><p><span style="font-size: 14px;">&nbsp;</span></p><p><span style="font-family: 宋体; font-size: 14px;">根本上，这是一个“架构耦合”的问题，是一个<strong>架构设计上“反向依赖”的问题</strong>，本文将讨论的是架构设计中常见的“反向依赖”的设计，以及对应的优化方案，希望对大伙有所启示。</span></p><p><span style="font-size: 14px;">&nbsp;</span></p><p><span style="font-size: 16px;"><strong><span style="font-family: 宋体;">二、如何寻找不合理“反向依赖”</span></strong></span></p><p><strong><span style="font-size: 14px;"><span style="font-size: 14px; font-family: 宋体;">方法论</span></span></strong><span style="font-size: 14px;"><span style="font-size: 14px; font-family: 宋体;">：</span></span></p><p><span style="font-size: 14px; color: rgb(255, 104, 39);"><span style="font-size: 14px; font-family: 宋体;">变动方是</span>A<span style="font-size: 14px; font-family: 宋体;">，配合方却是</span>BCDE</span></p><p><span style="font-size: 14px;"><span style="font-size: 14px; font-family: 宋体;">（或者说</span><span style="font-size: 14px; color: rgb(255, 104, 39);"><span style="font-size: 14px; font-family: 宋体;">需求方是</span>A<span style="font-size: 14px; font-family: 宋体;">，改动方确是</span>BCDE</span><span style="font-size: 14px; font-family: 宋体;">）</span></span></p><p><span style="font-size: 14px;"><span style="font-size: 14px; font-family: 宋体;">想想“换</span>IP<span style="font-size: 14px; font-family: 宋体;">的是你，配合重启的却是我”更好理解。</span></span></p><p><span style="font-size: 14px;"><span style="font-size: 14px; font-family: 宋体;"><br></span></span></p><p><span style="font-family: 宋体; font-size: 14px;">如果系统中经常出现了这类情况，就是“反向依赖”的特征，往往架构上有优化的空间。</span></p><p><span style="font-size: 14px;">&nbsp;</span></p><p><span style="font-size: 16px;"><strong><span style="font-family: 宋体;">三、常见的“反向依赖”与优化方案</span></strong></span></p><p><strong><span style="font-size: 14px;"><span style="font-size: 14px; font-family: 宋体;">【</span>case1<span style="font-size: 14px; font-family: 宋体;">：公共库导致耦合】</span></span></strong></p><p><img src="/road5858/images/8c17e9dcfc4e03f20f780b3050916c21cf5c46ad.png" style="width: 299px !important; height: 150px !important;"></p><p><span style="font-size: 14px;"><span style="font-size: 14px; font-family: 宋体;">三个服务</span>s1/s2/s3<span style="font-size: 14px; font-family: 宋体;">，通过一个公共的库</span>biz.jar<span style="font-size: 14px; font-family: 宋体;">来实现一段业务逻辑，</span>s1/s2/s3<span style="font-size: 14px; font-family: 宋体;">其实间接通过</span>biz.jar<span style="font-size: 14px; font-family: 宋体;">耦合在了一起，</span><span style="font-size: 14px; color: rgb(255, 104, 39);"><span style="font-size: 14px; font-family: 宋体;">一个业务</span>s1<span style="font-size: 14px; font-family: 宋体;">修改一块公共的代码，导致影响其他业务</span>s2/s3</span><span style="font-size: 14px; font-family: 宋体;">，架构上是不合理的。</span></span></p><p><span style="font-size: 14px;">&nbsp;</span></p><p><strong><span style="font-size: 14px;"><span style="font-size: 14px; font-family: 宋体;">优化方案</span>1<span style="font-size: 14px; font-family: 宋体;">：业务垂直拆分</span></span></strong></p><p><img src="/road5858/images/6d7c666ee9e434a551571ef84bf3083e4b0bd949.png" style="width: 456px !important; height: 152px !important;"></p><p><span style="font-size: 14px;"><span style="font-size: 14px; font-family: 宋体;">如果</span>biz.jar<span style="font-size: 14px; font-family: 宋体;">中实现的逻辑“业务特性”很强，可以拆分为</span>biz1.jar/biz2.jar/biz3.jar<span style="font-size: 14px; font-family: 宋体;">，来对</span>s1/s2/s3<span style="font-size: 14px; font-family: 宋体;">进行解耦。这样的话，<span style="font-size: 14px; font-family: 宋体; color: rgb(255, 104, 39);">任何业务的改动，影响范围只是自己，不会影响其他人</span>。</span></span></p><p><span style="font-size: 14px;">&nbsp;</span></p><p><strong><span style="font-size: 14px;"><span style="font-size: 14px; font-family: 宋体;">优化方案</span>2<span style="font-size: 14px; font-family: 宋体;">：服务化</span></span></strong></p><p><img src="/road5858/images/ce1e175eb6f63e422a3da03bade1e3c4f90f3258.png" style="width: 296px !important; height: 154px !important;"></p><p><span style="font-size: 14px;"><span style="font-size: 14px; font-family: 宋体;">如果</span>biz.jar<span style="font-size: 14px; font-family: 宋体;">中实现的逻辑“业务共性”很强，可以将</span>biz.jar<span style="font-size: 14px; font-family: 宋体;">优化为</span>biz.service<span style="font-size: 14px; font-family: 宋体;">服务，来对</span>s1/s2/s3<span style="font-size: 14px; font-family: 宋体;">进行解耦。</span></span><span style="font-family: 宋体; font-size: 14px; line-height: 1.6;">服务化之后，兼容性能更好的通过接口自动化回归测试来保证。</span></p><p><span style="font-family: 宋体; font-size: 14px;"><br></span></p><p><span style="font-family: 宋体; font-size: 14px;">基础服务的抽象，本身是一种共性聚焦，是系统解耦常见的方案。</span></p><p><span style="font-size: 14px;">&nbsp;</span></p><p><strong><span style="font-size: 14px;"><span style="font-size: 14px; font-family: 宋体;">【</span>case2<span style="font-size: 14px; font-family: 宋体;">：服务化不彻底导致耦合】</span></span></strong></p><p><img src="/road5858/images/739d6efeeb33019025244816c3443495dd4abcf3.png" style="width: 331px !important; height: 154px !important;"></p><p><span style="font-size: 14px;"><span style="font-size: 14px; font-family: 宋体;">服务化是解决“业务共性”组件库导致系统耦合的常见方案之一，但如果服务化不彻底，</span>service<span style="font-size: 14px; font-family: 宋体;">本身也容易成为业务耦合点。</span></span></p><p><span style="font-size: 14px;">&nbsp;</span></p><p><span style="font-family: 宋体; font-size: 14px;">典型的服务化不彻底导致的业务耦合的特征是，共性服务中，包含大量“根据不同业务，执行不同个性分支”的代码。</span></p><p><span style="font-size: 14px;">switch (biz-type)</span></p><p><span style="font-size: 14px;">case biz-1 : exec1</span></p><p><span style="font-size: 14px;">case biz-2 : exec2</span></p><p><span style="font-size: 14px;">case biz-3 : exec3</span></p><p><span style="font-size: 14px;">…</span></p><p><span style="font-size: 14px;">&nbsp;</span></p><p><span style="font-size: 14px;"><span style="font-size: 14px; font-family: 宋体;">在这种架构下，</span><span style="font-size: 14px; color: rgb(255, 104, 39);">biz-1/biz-2/biz-3<span style="font-size: 14px; font-family: 宋体;">有个性的业务需求，可能导致修改代码的是共性的</span>biz-service<span style="font-size: 14px; font-family: 宋体;">，使其成为研发瓶颈</span></span><span style="font-size: 14px; font-family: 宋体;">，架构上也是不合理的。</span></span></p><p><span style="font-size: 14px;">&nbsp;</span></p><p><strong><span style="font-family: 宋体; font-size: 14px;">优化方案：业务特性代码上浮，业务共性代码下沉，彻底解耦</span></strong></p><p><img src="/road5858/images/f9d3a5f59e53a8da3c8d9ab4f05e5cb7e95270b6.png" style="width: 464px !important; height: 192px !important;"></p><p><span style="font-size: 14px;"><span style="font-size: 14px; font-family: 宋体;">把</span>swithc case<span style="font-size: 14px; font-family: 宋体;">中业务<span style="font-size: 14px; font-family: 宋体; color: rgb(255, 104, 39);">特性代码放到业务层实现</span>，这样</span>biz-1/biz-2/biz-3<span style="font-size: 14px; font-family: 宋体;">有个性的业务需求，升级的是自己的业务系统。</span></span></p><p><span style="font-size: 14px;">&nbsp;</span></p><p><strong><span style="font-size: 14px;"><span style="font-size: 14px; font-family: 宋体;">【</span>case3<span style="font-size: 14px; font-family: 宋体;">：</span>notify<span style="font-size: 14px; font-family: 宋体;">的不合理实现导致的耦合】</span></span></strong></p><p><img src="/road5858/images/b120ee06cedc3c7eda03a0dafbee2be1340621b9.png" style="width: 302px !important; height: 117px !important;"></p><p><span style="font-size: 14px;"><span style="font-size: 14px; font-family: 宋体;">《</span><a href="http://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==&amp;mid=2651960012&amp;idx=1&amp;sn=c6af5c79ecead98daa4d742e5ad20ce5&amp;chksm=bd2d07108a5a8e0624ae6ad95001c4efe09d7ba695f2ddb672064805d771f3f84bee8123b8a6&amp;scene=21#wechat_redirect" target="_blank" data_ue_src="http://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==&amp;mid=2651960012&amp;idx=1&amp;sn=c6af5c79ecead98daa4d742e5ad20ce5&amp;chksm=bd2d07108a5a8e0624ae6ad95001c4efe09d7ba695f2ddb672064805d771f3f84bee8123b8a6&amp;scene=21#wechat_redirect"><span style="font-size: 14px; font-family: 宋体;">究竟什么时候该使用</span>MQ</a><span style="font-size: 14px; font-family: 宋体;">》一文中有一类业务场景，<span style="font-size: 14px; font-family: 宋体; color: rgb(255, 104, 39);">消息发送方不关注消息接收方的执行结果</span>，如果采用调用的方式来实现通知，会导<span style="font-size: 14px; font-family: 宋体; color: rgb(255, 104, 39);">消息发送方和消息接收方耦合</span>。</span></span></p><p><span style="font-size: 14px;">&nbsp;</span></p><p><span style="font-size: 14px; color: rgb(255, 104, 39);"><span style="font-size: 14px; font-family: 宋体;">如何新增消息接收方</span>biz-4<span style="font-size: 14px; font-family: 宋体;">，会发现修改代码的是消息发送方</span></span><span style="font-size: 14px;"><span style="font-size: 14px; font-family: 宋体;">，新增一个对</span>biz-4<span style="font-size: 14px; font-family: 宋体;">的调用，极不合理。</span></span></p><p><span style="font-size: 14px;">&nbsp;</span></p><p><strong><span style="font-size: 14px;"><span style="font-size: 14px; font-family: 宋体;">优化方案：通过</span>MQ<span style="font-size: 14px; font-family: 宋体;">实现解耦</span></span></strong></p><p><img src="/road5858/images/c6e9fb7844a5e177755cdbe757889236cb474efd.png" style="width: 304px !important; height: 173px !important;"></p><p><span style="font-size: 14px;"><span style="font-size: 14px; font-family: 宋体;">消息发送方</span>upper<span style="font-size: 14px; font-family: 宋体;">将消息发布给</span>MQ<span style="font-size: 14px; font-family: 宋体;">，消息接收方从</span>MQ<span style="font-size: 14px; font-family: 宋体;">去订阅，</span><span style="font-size: 14px; color: rgb(255, 104, 39);"><span style="font-size: 14px; font-family: 宋体;">任何新增对消息的消费，</span>upper<span style="font-size: 14px; font-family: 宋体;">都不需要修改代码</span></span><span style="font-size: 14px; font-family: 宋体;">。</span></span></p><p><span style="font-size: 14px;">&nbsp;</span></p><p><strong><span style="font-size: 14px;"><span style="font-size: 14px; font-family: 宋体;">【</span>case4<span style="font-size: 14px; font-family: 宋体;">：配置中的</span>ip<span style="font-size: 14px; font-family: 宋体;">导致上下游耦合】</span></span></strong></p><p><img src="/road5858/images/1ae4237a9b9dc40f1f552788846e08256662240e.png" style="width: 430px !important; height: 125px !important;"></p><p><span style="font-size: 14px;"><span style="font-size: 14px; font-family: 宋体;">即“缘起”中举的例子，</span><span style="font-size: 14px; color: rgb(255, 104, 39);"><span style="font-size: 14px; font-family: 宋体;">下游服务换</span>ip<span style="font-size: 14px; font-family: 宋体;">，可能导致多个服务调用方修改配置重启</span></span><span style="font-size: 14px; font-family: 宋体;">。</span></span><span style="font-size: 14px; line-height: 1.6; font-family: 宋体;">上下游间接的通过</span><span style="font-size: 14px; line-height: 1.6;">ip</span><span style="font-size: 14px; line-height: 1.6; font-family: 宋体;">这个配置耦合在了一起，架构不合理。</span></p><p><span style="font-size: 14px;">&nbsp;</span></p><p><strong><span style="font-size: 14px;"><span style="font-size: 14px; font-family: 宋体;">优化方案：通过内网域名而不是</span>ip<span style="font-size: 14px; font-family: 宋体;">来进行下游连接</span></span></strong></p><p><img src="/road5858/images/8c615f87fd15d8571ca1841dbeb84d0c10e5b42c.png" style="width: 300px !important; height: 124px !important;"></p><p><span style="font-size: 14px;"><span style="font-size: 14px; font-family: 宋体;">如果在配置中<span style="font-size: 14px; font-family: 宋体; color: rgb(255, 104, 39);">使用内网域名来进行下游连接</span>，当下游服务或者数据库更换</span>ip<span style="font-size: 14px; font-family: 宋体;">时，只需要</span><strong><span style="font-size: 14px; font-family: 宋体;">运维层面将内网域名指向新的</span>ip<span style="font-size: 14px; font-family: 宋体;">，然后统一切断原有旧的连接</span></strong><span style="font-size: 14px; font-family: 宋体;">，<span style="font-family: 宋体; font-size: 14px; line-height: 22.4px;">连接</span>就能够<span style="font-size: 14px; font-family: 宋体; color: rgb(255, 104, 39);">自动切换</span>到新的</span>ip<span style="font-size: 14px; font-family: 宋体;">上来。这个过程不需要所有上游配合，非常帅气，强烈推荐！</span></span></p><p><span style="font-size: 14px;">&nbsp;</span></p><p><strong><span style="font-size: 14px;"><span style="font-size: 14px; font-family: 宋体;">【</span>case5<span style="font-size: 14px; font-family: 宋体;">：下游扩容导致上下游耦合】</span></span></strong></p><p><img src="/road5858/images/907806b6cdbfd2870d97c23cae688bf95d7377be.png" style="width: 663px !important; height: 226px !important;"></p><p><span style="font-size: 14px;"><span style="font-size: 14px; font-family: 宋体;">这次不是换换</span>ip<span style="font-size: 14px; font-family: 宋体;">这么简单了，下游服务提供方原来是集群（</span>ip1/ip2/ip3<span style="font-size: 14px; font-family: 宋体;">，当然，上游配置的是内网域名），现在</span><span style="font-size: 14px; color: rgb(255, 104, 39);"><span style="font-size: 14px; font-family: 宋体;">集群要扩容为（</span>ip1/ip2/ip3/ip4/ip5<span style="font-size: 14px; font-family: 宋体;">）</span></span><span style="font-size: 14px; font-family: 宋体;">，如果没有特殊的架构设计，上游往往需要修改配置，新增扩容后的节点，再重启，导致上下游耦合。</span></span></p><p><span style="font-size: 14px;">&nbsp;</span></p><p><span style="font-size: 14px;"><span style="font-size: 14px; font-family: 宋体;">这类</span>case<span style="font-size: 14px; font-family: 宋体;">，大伙有什么好的方案解耦么？</span></span></p><p><span style="font-family: 宋体; font-size: 14px;">技术细节，且听下回分解。</span></p><p><span style="font-size: 14px;">&nbsp;</span></p><p><span style="font-size: 16px;"><strong><span style="font-family: 宋体;">四、总结</span></strong></span></p><p><strong><span style="font-family: 宋体; font-size: 14px;">如何发现系统架构中不合理的“反向依赖”设计？</span></strong></p><p><span style="font-family: 宋体; font-size: 14px;">回答：</span></p><p><span style="font-size: 14px;"><span style="font-size: 14px; font-family: 宋体;">（</span>1<span style="font-size: 14px; font-family: 宋体;">）变动方是</span>A<span style="font-size: 14px; font-family: 宋体;">，配合方却是</span>BCDE</span></p><p><span style="font-size: 14px;"><span style="font-size: 14px; font-family: 宋体;">（</span>2<span style="font-size: 14px; font-family: 宋体;">）需求方是</span>A<span style="font-size: 14px; font-family: 宋体;">，改动方确是</span>BCDE</span></p><p><span style="font-size: 14px;"><span style="font-size: 14px; font-family: 宋体;">想想“换</span>IP<span style="font-size: 14px; font-family: 宋体;">的是你，配合重启的却是我”，此时往往架构上可以进行解耦优化。</span></span></p><p><span style="font-size: 14px;">&nbsp;</span></p><p><strong><span style="font-family: 宋体; font-size: 14px;">常见反向依赖及优化方案？</span></strong></p><p><span style="font-size: 14px;"><span style="font-size: 14px; font-family: 宋体;">（</span>1<span style="font-size: 14px; font-family: 宋体;">）<span style="font-size: 14px; font-family: 宋体; color: rgb(255, 104, 39);">公共库导致耦合</span></span></span></p><p><strong><span style="font-family: 宋体; font-size: 14px;">优化一</span></strong><span style="font-family: 宋体; font-size: 14px;">：如果公共库是<span style="font-family: 宋体; font-size: 14px; color: rgb(255, 104, 39);">业务特性代码</span>，进行公共库<strong>垂直拆分</strong></span></p><p><strong><span style="font-family: 宋体; font-size: 14px;">优化二</span></strong><span style="font-family: 宋体; font-size: 14px;">：如果公共库是<span style="font-family: 宋体; font-size: 14px; color: rgb(255, 104, 39);">业务共性代码</span>，进行<strong>服务化</strong>下沉抽象</span></p><p><span style="font-family: 宋体; font-size: 14px;"><br></span></p><p><span style="font-size: 14px;"><span style="font-size: 14px; font-family: 宋体;">（</span>2<span style="font-size: 14px; font-family: 宋体;">）<span style="font-size: 14px; font-family: 宋体; color: rgb(255, 104, 39);">服务化不彻底导致耦合</span></span></span></p><p><strong><span style="font-family: 宋体; font-size: 14px;">特征</span></strong><span style="font-family: 宋体; font-size: 14px;">：服务中<span style="font-family: 宋体; font-size: 14px; color: rgb(255, 104, 39);">包含大量“根据不同业务，执行不同个性分支”的代码</span></span></p><p><strong><span style="font-family: 宋体; font-size: 14px;">优化方案</span></strong><span style="font-family: 宋体; font-size: 14px;">：个性代码放到业务层实现，<strong>将服务化更彻底更纯粹</strong></span></p><p><span style="font-family: 宋体; font-size: 14px;"><br></span></p><p><span style="font-size: 14px;"><span style="font-size: 14px; font-family: 宋体;">（</span>3<span style="font-size: 14px; font-family: 宋体;">）</span><span style="font-size: 14px; color: rgb(255, 104, 39);">notify<span style="font-size: 14px; font-family: 宋体;">的不合理实现导致的耦合</span></span></span></p><p><strong><span style="font-family: 宋体; font-size: 14px;">特征</span></strong><span style="font-family: 宋体; font-size: 14px;">：调用方不关注执行结果，<span style="font-family: 宋体; font-size: 14px; color: rgb(255, 104, 39);">以调用的方式去实现通知</span>，新增订阅者，修改代码的是发布者</span></p><p><strong><span style="font-size: 14px;"><span style="font-size: 14px; font-family: 宋体;">优化方案</span></span></strong><span style="font-size: 14px;"><span style="font-size: 14px; font-family: 宋体;">：</span><strong><span style="font-size: 14px; font-family: 宋体;">通过</span>MQ<span style="font-size: 14px; font-family: 宋体;">解耦</span></strong></span></p><p><span style="font-size: 14px;"><span style="font-size: 14px; font-family: 宋体;"><br></span></span></p><p><span style="font-size: 14px;"><span style="font-size: 14px; font-family: 宋体;">（</span>4<span style="font-size: 14px; font-family: 宋体;">）</span><span style="font-size: 14px; color: rgb(255, 104, 39);"><span style="font-size: 14px; font-family: 宋体;">配置中的</span>ip<span style="font-size: 14px; font-family: 宋体;">导致上下游耦合</span></span></span></p><p><strong><span style="font-family: 宋体; font-size: 14px;">特征</span></strong><span style="font-family: 宋体; font-size: 14px;">：<span style="font-family: 宋体; font-size: 14px; color: rgb(255, 104, 39);">多个上游需要修改配置重启</span></span></p><p><strong><span style="font-size: 14px;"><span style="font-size: 14px; font-family: 宋体;">优化方案</span></span></strong><span style="font-size: 14px;"><span style="font-size: 14px; font-family: 宋体;">：</span><strong><span style="font-size: 14px; font-family: 宋体;">使用内网域名替代内网</span>ip</strong><span style="font-size: 14px; font-family: 宋体;">，通过“修改</span>DNS<span style="font-size: 14px; font-family: 宋体;">指向，统一切断旧连接”的方式来上游无感切换</span></span></p><p><span style="font-size: 14px;"><span style="font-size: 14px; font-family: 宋体;"><br></span></span></p><p><span style="font-size: 14px;"><span style="font-size: 14px; font-family: 宋体;">（</span>5<span style="font-size: 14px; font-family: 宋体;">）<span style="font-size: 14px; font-family: 宋体; color: rgb(255, 104, 39);">下游扩容导致上下游耦合</span></span></span></p><p><span style="font-family: 宋体; font-size: 14px;">特性：<span style="font-family: 宋体; font-size: 14px; color: rgb(255, 104, 39);">多个上游需要修改配置重启</span></span></p><p><span style="font-size: 14px;">&nbsp;</span></p><p><span style="font-size: 14px;"><span style="font-size: 14px; font-family: 宋体;">换</span>IP<span style="font-size: 14px; font-family: 宋体;">的是你，凭啥配合重启的却是我。</span></span></p><p><span style="font-size: 14px;"><span style="font-size: 14px; font-family: 宋体;"></span></span><span style="font-family: 宋体; font-size: 14px; line-height: 22.4px;">大伙碰到过类似的“反向依赖”耦合么？<span style="font-family: 宋体; font-size: 14px; line-height: 22.4px; color: rgb(255, 104, 39);">欢迎补充</span>。</span></p><p><span style="font-size: 14px;"><span style="font-size: 14px; font-family: 宋体;"><span style="font-family: 宋体; font-size: 14px; line-height: 22.4px;"><br></span></span></span></p><p><span style="font-size: 14px;"><span style="font-size: 14px; font-family: 宋体;"><span style="font-family: 宋体; font-size: 14px; line-height: 22.4px;">==【完】==</span></span></span></p><p><span style="font-size: 14px;"><span style="font-size: 14px; font-family: 宋体;"><span style="font-family: 宋体; font-size: 14px; line-height: 22.4px;">推荐阅读：</span></span></span></p><p><span style="font-size: 14px;"><span style="font-size: 14px; font-family: 宋体;"><span style="font-family: 宋体; font-size: 14px; line-height: 22.4px;"><a href="http://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==&amp;mid=2651960012&amp;idx=1&amp;sn=c6af5c79ecead98daa4d742e5ad20ce5&amp;chksm=bd2d07108a5a8e0624ae6ad95001c4efe09d7ba695f2ddb672064805d771f3f84bee8123b8a6&amp;scene=21#wechat_redirect" target="_blank" data_ue_src="http://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==&amp;mid=2651960012&amp;idx=1&amp;sn=c6af5c79ecead98daa4d742e5ad20ce5&amp;chksm=bd2d07108a5a8e0624ae6ad95001c4efe09d7ba695f2ddb672064805d771f3f84bee8123b8a6&amp;scene=21#wechat_redirect">到底什么时候该使用MQ？</a><br></span></span></span></p><p><span style="font-size: 14px;"><span style="font-size: 14px; font-family: 宋体;"><span style="font-family: 宋体; font-size: 14px; line-height: 22.4px;"><a href="http://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==&amp;mid=2651959992&amp;idx=1&amp;sn=eb2fbd7d7922db42a593c304e50a65b7&amp;chksm=bd2d07648a5a8e72d489022ec6006274d7e43ab48449b255d5661658c2af8e9221977a9609ed&amp;scene=21#wechat_redirect" target="_blank" data_ue_src="http://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==&amp;mid=2651959992&amp;idx=1&amp;sn=eb2fbd7d7922db42a593c304e50a65b7&amp;chksm=bd2d07648a5a8e72d489022ec6006274d7e43ab48449b255d5661658c2af8e9221977a9609ed&amp;scene=21#wechat_redirect">100亿数据平滑数据迁移,不影响服务</a><br></span></span></span></p><p><span style="font-size: 14px;"><span style="font-size: 14px; font-family: 宋体;"><span style="font-family: 宋体; font-size: 14px; line-height: 22.4px;"><a href="http://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==&amp;mid=2651959886&amp;idx=1&amp;sn=03e45a5014053607eff5e55ed2c660d7&amp;chksm=bd2d07928a5a8e8454d395e176fa9d346682abfe9dfbf3244f1dead83ee4508aa25121f9b811&amp;scene=21#wechat_redirect" target="_blank" data_ue_src="http://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==&amp;mid=2651959886&amp;idx=1&amp;sn=03e45a5014053607eff5e55ed2c660d7&amp;chksm=bd2d07928a5a8e8454d395e176fa9d346682abfe9dfbf3244f1dead83ee4508aa25121f9b811&amp;scene=21#wechat_redirect">架构师之路16年精选50篇</a><br></span></span></span></p>
{% endraw  %}

