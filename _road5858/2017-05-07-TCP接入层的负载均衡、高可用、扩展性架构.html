---
title: TCP接入层的负载均衡、高可用、扩展性架构
author: 58沈剑
wechat_source: >-
  http://mp.weixin.qq.com/s?timestamp=1494425765&src=3&ver=1&signature=T3pUTKCUVTFXYE3cOj0PN2-SlhrKghx2YkJzz9KGGglGTw8L2nnRZ-fpLUYfw7vCk-4VMHwRTeuV8tt0khpeiQwZoQTefCho6nFmM3iqGjJsPiqkvhwJQ-gbX-izHndGZ*T16YUoYFqjYab5EyymUfrSq*MtWFFcMkh46LxJstc=
date: '2017-05-07 00:00:00 +0000'

---

{% raw  %}
<p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 16px;"><strong>一、web-server的负载均衡</strong></span></p><p style="margin-top: 5px; line-height: normal; text-align: justify;"><img src="/road5858/images/92fc3e9b87da990f43e5f187c93f045723635251.png" style="width: 389px !important; height: 166px !important; visibility: visible !important;"></p><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px;">互联网架构中，<span style="font-size: 14px; color: rgb(255, 104, 39);">web-server接入一般使用nginx来做反向代理</span>，实施负载均衡。整个架构分三层：</span></p><ul class="list-paddingleft-2" style="list-style-type: disc;"><li><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px;"><strong>上游调用层</strong>，一般是browser或者APP</span></p></li><li><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px;"><strong>中间反向代理层</strong>，nginx</span></p></li><li><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px;"><strong>下游真实接入集群</strong>，web-server，常见web-server的有tomcat，apache</span></p></li></ul><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px;">&nbsp;</span></p><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px;">整个访问过程为：</span></p><ul class="list-paddingleft-2" style="list-style-type: disc;"><li><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px;">browser向daojia.com发起请求</span></p></li><li><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px;">DNS服务器将daojia.com解析为<span style="font-size: 14px; color: rgb(255, 104, 39);">外网IP</span>(1.2.3.4)</span></p></li><li><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px;">browser通过外网IP(1.2.3.4)访问nginx</span></p></li><li><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px;">nginx实施负载均衡策略，常见策略有轮询，随机，IP-hash等</span></p></li><li><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px;">nginx将请求转发给<span style="font-size: 14px; color: rgb(255, 104, 39);">内网IP</span>(192.168.0.1)的web-server</span></p></li></ul><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px;">&nbsp;</span></p><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px;">由于<span style="font-size: 14px; color: rgb(255, 104, 39);">http短连接，以及web应用无状态</span>的特性，理论上<strong>任何一个http请求落在任意一台web-server都应该得到正常处理</strong>（如果必须落在一台，说明架构不合理，不能水平扩展）。</span></p><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px;">&nbsp;</span></p><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px;">问题来了，<span style="font-size: 14px; color: rgb(255, 104, 39);">tcp是有状态的连接</span>，客户端和服务端一旦建立连接，<strong>一个client发起的请求必须落在同一台tcp-server上</strong>，此时如何做负载均衡，如何保证水平扩展呢？</span></p><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px;">&nbsp;</span></p><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 16px;"><strong>二、单机法tcp-server</strong></span></p><p style="margin-top: 5px; line-height: normal; text-align: justify;"><img src="/road5858/images/7ef53f04fd2a0c00123e5e547b41184fe8c47f28.png" style="width: 255px !important; height: 85px !important;"></p><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px;">单个tcp-server显然是可以保证请求一致性：</span></p><ul class="list-paddingleft-2" style="list-style-type: disc;"><li><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px;">client向tcp.daojia.com发起tcp请求</span></p></li><li><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px;">DNS服务器将tcp.daojia.com解析为外网IP(1.2.3.4)</span></p></li><li><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px;">client通过外网IP(1.2.3.4)向tcp-server发起请求</span></p></li></ul><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px;">&nbsp;</span></p><p style="margin-top: 5px; line-height: normal; text-align: justify;"><strong><span style="font-size: 14px;">方案的缺点？</span></strong></p><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px; color: rgb(255, 104, 39);">无法保证高可用。</span></p><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px;">&nbsp;</span></p><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 16px;"><strong>三、集群法tcp-server</strong></span></p><p style="margin-top: 5px; line-height: normal; text-align: justify;"><img src="/road5858/images/cb9c8d3699fd532819f0c1b294e327183a12dafe.png" style="width: 407px !important; height: 126px !important;"></p><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px; color: rgb(255, 104, 39);">通过搭建tcp-server集群来保证高可用</span><span style="font-size: 14px;">，<strong>客户端来实现负载均衡</strong>：</span></p><ul class="list-paddingleft-2" style="list-style-type: disc;"><li><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px;">client内配置有tcp1/tcp2/tcp3.daojia.com三个tcp-server的外网IP</span></p></li><li><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px;">客户端通过“随机”的方式选择tcp-server，假设选择到的是tcp1.daojia.com</span></p></li><li><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px;">通过DNS解析tcp1.daojia.com</span></p></li><li><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px;">通过外网IP连接真实的tcp-server</span></p></li></ul><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px;">&nbsp;</span></p><p style="margin-top: 5px; line-height: normal; text-align: justify;"><strong><span style="font-size: 14px;">如何保证高可用呢？</span></strong></p><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px; color: rgb(255, 104, 39);">如果client发现某个tcp-server连接不上，则选择另一个。</span></p><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px;">&nbsp;</span></p><p style="margin-top: 5px; line-height: normal; text-align: justify;"><strong><span style="font-size: 14px;">潜在的缺点？</span></strong></p><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px;">每次连接前，需要多实施一次DNS访问：</span></p><ul class="list-paddingleft-2" style="list-style-type: disc;"><li><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px;"><span style="font-size: 14px; color: rgb(255, 104, 39);">难以预防DNS劫持</span></span></p></li><li><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px;">多一次DNS访问意味着<span style="font-size: 14px; color: rgb(255, 104, 39);">更长的连接时间</span>，这个不足在手机端更为明显</span></p></li></ul><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px;">&nbsp;</span></p><p style="margin-top: 5px; line-height: normal; text-align: justify;"><strong><span style="font-size: 14px;">如何解决DNS的问题？</span></strong></p><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px;">直接将IP配置在客户端，可以解决上述两个问题，很多公司也就是这么做的（俗称“<strong>IP直通车</strong>”）。</span></p><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px;">&nbsp;</span></p><p style="margin-top: 5px; line-height: normal; text-align: justify;"><strong><span style="font-size: 14px;">“IP直通车”有什么新问题？</span></strong></p><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px;">将IP写死在客户端，在客户端实施负载均衡，<span style="font-size: 14px; color: rgb(255, 104, 39);">扩展性很差</span>：</span></p><ul class="list-paddingleft-2" style="list-style-type: disc;"><li><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px;"><span style="font-size: 14px; color: rgb(255, 104, 39);">如果原有IP发生变化</span>，客户端得不到实时通知</span></p></li><li><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px;"><span style="font-size: 14px; color: rgb(255, 104, 39);">如果新增IP</span>，即tcp-sever扩容，客户端也得不到实时通知</span></p></li><li><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px;"><span style="font-size: 14px; color: rgb(255, 104, 39);">如果负载均衡策略变化</span>，需要升级客户端</span></p></li></ul><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px;">&nbsp;</span></p><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 16px;"><strong>四、服务端实施负载均衡</strong></span></p><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px; color: rgb(255, 104, 39);">只有将复杂的策略下沉到服务端，才能根本上解决扩展性的问题</span><span style="font-size: 14px;">。</span></p><p style="margin-top: 5px; line-height: normal; text-align: justify;"><img src="/road5858/images/8091d46f55505c334cefd20353ce5a151b35b96d.png" style="width: 520px !important; height: 125px !important;"></p><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px; color: rgb(255, 104, 39);">增加一个http接口，将客户端的“IP配置”与“均衡策略”放到服务端</span><span style="font-size: 14px;">是一个不错的方案：</span></p><ul class="list-paddingleft-2" style="list-style-type: disc;"><li><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px;">client每次访问tcp-server前，先调用一个<strong>新增的get-tcp-ip接口</strong>，对于client而言，<span style="font-size: 14px; color: rgb(255, 104, 39);">这个http接口只返回一个tcp-server的IP</span></span></p></li><li><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px;">这个http接口，实现的是原client的IP均衡策略</span></p></li><li><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px;">拿到tcp-server的IP后，和原来一样向tcp-server发起TCP长连接</span></p></li></ul><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px;">&nbsp;</span></p><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px;">这样的话，扩展性问题就解决了：</span></p><ul class="list-paddingleft-2" style="list-style-type: disc;"><li><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px;">如果原有IP发生变化，只需要修改get-tcp-ip接口的配置</span></p></li><li><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px;">如果新增IP，也是修改get-tcp-ip接口的配置</span></p></li><li><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px;">如果负载均衡策略变化，需要升级客户端</span></p></li></ul><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px;">&nbsp;</span></p><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px;">然而，<strong>新的问题</strong>又产生了，如果所有IP放在客户端，当有一个IP挂掉的时候，client可以再换一个IP连接，保证可用性，而get-tcp-ip接口只是维护静态的tcp-server集群IP，对于这些<span style="font-size: 14px; color: rgb(255, 104, 39);">IP对应的tcp-server是否可用</span>，是完全不知情的，怎么办呢？</span></p><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px;">&nbsp;</span></p><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 16px;"><strong>五、tcp-server状态上报</strong></span></p><p style="margin-top: 5px; line-height: normal; text-align: justify;"><img src="/road5858/images/eb7b0e56210a041d2129b5552564c2ef64415261.png" style="width: 357px !important; height: 187px !important;"></p><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px;">get-tcp-ip接口怎么知道tcp-server集群中各台服务器是否可用呢，<span style="font-size: 14px; color: rgb(255, 104, 39);">tcp-server主动上报是一个潜在方案</span>，如果某一个tcp-server挂了，则会终止上报，对于停止上报状态的tcp-server，get-tcp-ip接口，将不返回给client相应的tcp-server的外网IP。</span></p><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px;">&nbsp;</span></p><p style="margin-top: 5px; line-height: normal; text-align: justify;"><strong><span style="font-size: 14px;">该设计的存在的问题？</span></strong></p><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px;">诚然，状态上报解决了tcp-server高可用的问题，但这个设计犯了一个<span style="font-size: 14px; color: rgb(255, 104, 39);">“反向依赖”的耦合小错误</span>：使得tcp-server要依赖于一个与本身业务无关的web-server。</span></p><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px;">&nbsp;</span></p><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 16px;"><strong>六、tcp-server状态拉取</strong></span></p><p style="margin-top: 5px; line-height: normal; text-align: justify;"><img src="/road5858/images/68c187a5677e45d29106bb85e51596496aa20e07.png" style="width: 358px !important; height: 192px !important;"></p><p style="margin-top: 5px; line-height: normal; text-align: justify;"><strong><span style="font-size: 14px;">更优的方案</span></strong><span style="font-size: 14px;">是：<span style="font-size: 14px; color: rgb(255, 104, 39);">web-server通过“拉”的方式获取各个tcp-server的状态</span>，而不是tcp-server通过“推”的方式上报自己的状态。</span></p><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px;">&nbsp;</span></p><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px;">这样的话，<span style="font-size: 14px; color: rgb(255, 104, 39);">每个tcp-server都独立与解耦</span>，只需专注于资深的tcp业务功能即可。</span></p><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px;"><br></span></p><p style="margin-top: 5px; line-height: normal; text-align: justify;"><strong><span style="font-size: 14px;">高可用、负载均衡、扩展性</span></strong><span style="font-size: 14px;">等任务<span style="font-size: 14px; color: rgb(255, 104, 39);">由get-tcp-ip的web-server专注来执行</span>。</span></p><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px;">&nbsp;</span></p><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px;">多说一句，<span style="font-size: 14px; color: rgb(255, 104, 39);">将负载均衡实现在服务端</span>，还有一个<strong>好处</strong>，可以实现<span style="font-size: 14px; color: rgb(255, 104, 39);">异构tcp-server的负载均衡</span>，以及<span style="font-size: 14px; color: rgb(255, 104, 39);">过载保护</span>：</span></p><ul class="list-paddingleft-2" style="list-style-type: disc;"><li><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px;"><strong>静态实施</strong>：web-server下的多个tcp-server的IP可以配置负载权重，根据tcp-server的机器配置分配负载（nginx也有类似的功能）</span></p></li><li><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px;"><strong>动态实施</strong>：web-server可以根据“拉”回来的tcp-server的状态，动态分配负载，并在tcp-server性能极具下降时实施过载保护</span></p></li></ul><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px;">&nbsp;</span></p><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 16px;"><strong>七、总结</strong></span></p><p style="margin-top: 5px; line-height: normal; text-align: justify;"><strong><span style="font-size: 14px;">web-server如何实施负载均衡？</span></strong></p><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px; color: rgb(255, 104, 39);">利用nginx反向代理来轮询、随机、ip-hash。</span></p><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px;">&nbsp;</span></p><p style="margin-top: 5px; line-height: normal; text-align: justify;"><strong><span style="font-size: 14px;">tcp-server怎么快速保证请求一致性？</span></strong></p><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px; color: rgb(255, 104, 39);">单机。</span></p><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px;">&nbsp;</span></p><p style="margin-top: 5px; line-height: normal; text-align: justify;"><strong><span style="font-size: 14px;">如何保证高可用？</span></strong></p><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px; color: rgb(255, 104, 39);">客户配置多个tcp-server的域名。</span></p><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px;">&nbsp;</span></p><p style="margin-top: 5px; line-height: normal; text-align: justify;"><strong><span style="font-size: 14px;">如何防止DNS劫持，以及加速？</span></strong></p><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px; color: rgb(255, 104, 39);">IP直通车，客户端配置多个tcp-server的IP。</span></p><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px;">&nbsp;</span></p><p style="margin-top: 5px; line-height: normal; text-align: justify;"><strong><span style="font-size: 14px;">如何保证扩展性？</span></strong></p><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px; color: rgb(255, 104, 39);">服务端提供get-tcp-ip接口</span><span style="font-size: 14px;">，向client屏屏蔽负载均衡策略，并实施便捷扩容。</span></p><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px;">&nbsp;</span></p><p style="margin-top: 5px; line-height: normal; text-align: justify;"><strong><span style="font-size: 14px;">如何保证高可用？</span></strong></p><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px; color: rgb(255, 104, 39);">tcp-server“推”</span><span style="font-size: 14px;">状态给get-tcp-ip接口，</span></p><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px;">or</span></p><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px; color: rgb(255, 104, 39);">get-tcp-ip接口“拉”</span><span style="font-size: 14px;">tcp-server状态。</span></p><p style="margin-top: 5px; line-height: normal; text-align: justify;"><img src="/road5858/images/85723ee99085c1fa1802544ee164b24b378d9f21.png" style="line-height: 1.6; width: 500px !important; height: 186px !important;"><br></p><p style="margin-top: 5px; line-height: normal; text-align: left;"><br></p><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px; color: rgb(255, 104, 39);">细节重要，思路比细节更重要</span></p><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px;"><br></span></p><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px;">相关阅读：</span></p><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px;">&nbsp;<a href="http://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==&amp;mid=2651959585&amp;idx=1&amp;sn=0a9222cbfeb62a662edffafb7f0b43ae&amp;scene=21#wechat_redirect" target="_blank" data_ue_src="http://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==&amp;mid=2651959585&amp;idx=1&amp;sn=0a9222cbfeb62a662edffafb7f0b43ae&amp;scene=21#wechat_redirect">一分钟了解负载均衡的一切</a></span></p><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px;"><a href="http://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==&amp;mid=2651960049&amp;idx=1&amp;sn=2787e73be4ea31f52213a2b934a16e09&amp;chksm=bd2d072d8a5a8e3b71cef58f313743a6db6f83889748deb7f8f866817511df98adc5e03db39c&amp;scene=21#wechat_redirect" target="_blank" data_ue_src="http://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==&amp;mid=2651960049&amp;idx=1&amp;sn=2787e73be4ea31f52213a2b934a16e09&amp;chksm=bd2d072d8a5a8e3b71cef58f313743a6db6f83889748deb7f8f866817511df98adc5e03db39c&amp;scene=21#wechat_redirect">架构设计中的“反向依赖”</a><br></span></p><p style="margin-top: 5px; line-height: normal; text-align: justify;"><span style="font-size: 14px;"><a href="http://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==&amp;mid=2651959595&amp;idx=1&amp;sn=5f0633afd24c547b895f29f6538baa99&amp;scene=21#wechat_redirect" target="_blank" data_ue_src="http://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==&amp;mid=2651959595&amp;idx=1&amp;sn=5f0633afd24c547b895f29f6538baa99&amp;scene=21#wechat_redirect">lvs为何不能完全替代DNS轮询</a><br></span></p><hr/><a href="http://mp.weixin.qq.com/s?timestamp=1494425765&src=3&ver=1&signature=T3pUTKCUVTFXYE3cOj0PN2-SlhrKghx2YkJzz9KGGglGTw8L2nnRZ-fpLUYfw7vCk-4VMHwRTeuV8tt0khpeiQwZoQTefCho6nFmM3iqGjJsPiqkvhwJQ-gbX-izHndGZ*T16YUoYFqjYab5EyymUfrSq*MtWFFcMkh46LxJstc=">微信地址</a> | <a href="https://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==&amp;mid=2651960049&amp;idx=1&amp;sn=2787e73be4ea31f52213a2b934a16e09&amp;chksm=bd2d072d8a5a8e3b71cef58f313743a6db6f83889748deb7f8f866817511df98adc5e03db39c#rd">阅读原文</a>
{% endraw  %}

