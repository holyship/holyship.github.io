---
title: 线上操作与线上问题排查实战
author: 58到家
wechat_source: >-
  http://mp.weixin.qq.com/s?timestamp=1503366049&src=3&ver=1&signature=OYewMZH60kmig22U24i7m6sKVnTwzt3UPW4YGe4v-5baZmWG6eeyYwlgndoMQvEZ2rCh6bD1GFvpiI6UKWdhjRSOqCU6WR-Lr5Pi*98uD4JOR6zA1C1N5v7J8xKWc*P7QLoSXml4ayRkxOCKHrxpj136FBKS26blJs-mNcUkYTY=
date: '2017-08-16 00:00:00 +0000'

---

{% raw  %}
<p style="margin-left: 0px; margin-right: 0px;"><span style="font-size: 14px; letter-spacing: 0.5px;"><span style="font-size: 14px; font-family: 宋体;">技术同学需要经常登录线上的服务器进行操作，</span>58<span style="font-size: 14px; font-family: 宋体;">到家架构部/运维部/</span>58<span style="font-size: 14px; font-family: 宋体;">速运技术部，联合进行了一次<span style="letter-spacing: 0.5px; font-size: 14px; font-family: 宋体; color: rgb(255, 76, 0);">线上操作与线上问题排查实战演练</span>，同学们反馈有收获，特将实战演练的问题和答案公布出来，希望对大家也有帮助。</span></span></p><p style="margin-left: 0px; margin-right: 0px;"><span style="font-size: 14px; letter-spacing: 0.5px;">&nbsp;</span></p><p style="margin-left: 0px; margin-right: 0px;"><span style="letter-spacing: 0.5px; font-size: 16px;"><strong><span style="letter-spacing: 0.5px; font-family: 宋体;">一、了解机器连接数情况</span></strong></span></p><p style="margin-left: 0px; margin-right: 0px;"><strong><span style="font-size: 14px; letter-spacing: 0.5px;"><span style="letter-spacing: 0.5px; font-size: 14px; font-family: 宋体;">问题</span></span></strong><span style="font-size: 14px; letter-spacing: 0.5px;"><span style="letter-spacing: 0.5px; font-size: 14px; font-family: 宋体;">：</span>1.2.3.4<span style="letter-spacing: 0.5px; font-size: 14px; font-family: 宋体;">的</span>sshd<span style="letter-spacing: 0.5px; font-size: 14px; font-family: 宋体;">的监听端口是</span>22<span style="letter-spacing: 0.5px; font-size: 14px; font-family: 宋体;">，如何统计</span>1.2.3.4<span style="letter-spacing: 0.5px; font-size: 14px; font-family: 宋体;">的</span>sshd<span style="letter-spacing: 0.5px; font-size: 14px; font-family: 宋体;">服务各种连接状态(</span>TIME_WAIT/ CLOSE_WAIT/ ESTABLISHED<span style="letter-spacing: 0.5px; font-size: 14px; font-family: 宋体;">)的连接数。</span></span></p><p style="margin-left: 0px; margin-right: 0px;"><span style="font-size: 14px; letter-spacing: 0.5px;">&nbsp;</span></p><p style="margin-left: 0px; margin-right: 0px;"><strong><span style="font-family: 宋体; font-size: 14px; letter-spacing: 0.5px;">参考答案</span></strong><span style="font-family: 宋体; font-size: 14px; letter-spacing: 0.5px;">：</span></p><ul class="list-paddingleft-2" style="list-style-type: disc; margin-left: 0px; margin-right: 0px;"><li><p style="margin-left: 8px; margin-right: 8px;"><span style="font-size: 14px; letter-spacing: 0.5px;">netstat -n | grep 1.2.3.4:22 | awk '/^tcp/ {++S[$NF]} END {for(a in S) print a, S[a]}’</span></p></li><li><p style="margin-left: 8px; margin-right: 8px;"><span style="font-size: 14px; letter-spacing: 0.5px;">netstat -lnpta | grep ssh | egrep “TIME_WAIT | CLOSE_WAIT | ESTABLISHED”</span></p></li><li><p style="margin-left: 8px; margin-right: 8px;"><span style="font-size: 14px; letter-spacing: 0.5px;">n [<span style="letter-spacing: 0.5px; font-size: 14px; font-family: 宋体;">仅限于阿里云</span>] </span></p></li></ul><p style="margin-left: 0px; margin-right: 0px;"><span style="font-size: 14px; letter-spacing: 0.5px;">&nbsp;</span></p><p style="margin-left: 0px; margin-right: 0px;"><strong><span style="font-size: 14px; letter-spacing: 0.5px;"><span style="letter-spacing: 0.5px; font-size: 14px; font-family: 宋体;">说明</span></span></strong><span style="font-size: 14px; letter-spacing: 0.5px;"><span style="letter-spacing: 0.5px; font-size: 14px; font-family: 宋体;">：</span>netstat<span style="letter-spacing: 0.5px; font-size: 14px; font-family: 宋体;">是追查网络连接问题常用工具，和</span>grep/awk<span style="letter-spacing: 0.5px; font-size: 14px; font-family: 宋体;">结合更是神器，当然如果在阿里云上，还有更方便的方法。</span></span></p><p style="margin-left: 0px; margin-right: 0px;"><span style="font-size: 14px; letter-spacing: 0.5px;">&nbsp;</span></p><p style="margin-left: 0px; margin-right: 0px;"><span style="letter-spacing: 0.5px; font-size: 16px;"><strong><span style="letter-spacing: 0.5px; font-family: 宋体;">二、从已经备份好的日志中查询数据</span></strong></span></p><p style="margin-left: 0px; margin-right: 0px;"><strong><span style="font-size: 14px; letter-spacing: 0.5px;"><span style="letter-spacing: 0.5px; font-size: 14px; font-family: 宋体;"><span style="font-family: 宋体; font-size: 14px; letter-spacing: 0.5px; line-height: 22.4px;">问题</span></span></span></strong><span style="font-size: 14px; letter-spacing: 0.5px;"><span style="letter-spacing: 0.5px; font-size: 14px; font-family: 宋体;"><span style="font-family: 宋体; font-size: 14px; letter-spacing: 0.5px; line-height: 22.4px;"></span>：从已备份的</span>suyun.2017-06-26.log.bz2<span style="letter-spacing: 0.5px; font-size: 14px; font-family: 宋体;">日志中，找出包含关键字</span>1.2.3.4<span style="letter-spacing: 0.5px; font-size: 14px; font-family: 宋体;">的日志有多少条。</span></span></p><p style="margin-left: 0px; margin-right: 0px;"><span style="font-size: 14px; letter-spacing: 0.5px;">&nbsp;</span></p><p style="margin-left: 0px; margin-right: 0px;"><strong><span style="font-family: 宋体; font-size: 14px; letter-spacing: 0.5px;">参考答案</span></strong><span style="font-family: 宋体; font-size: 14px; letter-spacing: 0.5px;">：</span></p><ul class="list-paddingleft-2" style="list-style-type: disc; margin-left: 0px; margin-right: 0px;"><li><p style="margin-left: 8px; margin-right: 8px;"><span style="font-size: 14px; letter-spacing: 0.5px; color: rgb(255, 76, 0);">bzcat </span><span style="font-size: 14px; letter-spacing: 0.5px;">suyun.2017-06-26.log.bz2 | grep '1.2.3.4' | wc -l</span></p></li><li><p style="margin-left: 8px; margin-right: 8px;"><span style="font-size: 14px; letter-spacing: 0.5px; color: rgb(255, 76, 0);">bzgrep</span><span style="font-size: 14px; letter-spacing: 0.5px;"> '1.2.3.4' suyun.2017-06-26.log.bz2 | wc -l</span></p></li><li><p style="margin-left: 8px; margin-right: 8px;"><span style="font-size: 14px; letter-spacing: 0.5px;">less suyun.2017-06-26.log.bz2 | grep '10.37.9.11' | wc -l</span></p></li></ul><p style="margin-left: 0px; margin-right: 0px;"><span style="font-size: 14px; letter-spacing: 0.5px;">&nbsp;</span></p><p style="margin-left: 0px; margin-right: 0px;"><strong><span style="font-size: 14px; letter-spacing: 0.5px;"><span style="letter-spacing: 0.5px; font-size: 14px; font-family: 宋体;">说明</span></span></strong><span style="font-size: 14px; letter-spacing: 0.5px;"><span style="letter-spacing: 0.5px; font-size: 14px; font-family: 宋体;">：线上日志文件一般以</span>bz2 <span style="letter-spacing: 0.5px; font-size: 14px; font-family: 宋体;">压缩之后保留，如果解压查询，非常耗空间与时间，</span>bzcat<span style="letter-spacing: 0.5px; font-size: 14px; font-family: 宋体;">和</span>bzgrep<span style="letter-spacing: 0.5px; font-size: 14px; font-family: 宋体;">是研发同学必须掌握的工具。</span></span></p><p style="margin-left: 0px; margin-right: 0px;"><span style="font-size: 14px; letter-spacing: 0.5px;">&nbsp;</span></p><p style="margin-left: 0px; margin-right: 0px;"><span style="letter-spacing: 0.5px; font-size: 16px;"><strong><span style="letter-spacing: 0.5px; font-family: 宋体;">三、备份服务的技巧</span></strong></span></p><p style="margin-left: 0px; margin-right: 0px;"><strong><span style="font-size: 14px; letter-spacing: 0.5px;"><span style="letter-spacing: 0.5px; font-size: 14px; font-family: 宋体;"><span style="font-family: 宋体; font-size: 14px; letter-spacing: 0.5px; line-height: 22.4px;">问题</span></span></span></strong><span style="font-size: 14px; letter-spacing: 0.5px;"><span style="letter-spacing: 0.5px; font-size: 14px; font-family: 宋体;"><span style="font-family: 宋体; font-size: 14px; letter-spacing: 0.5px; line-height: 22.4px;"></span>：打包备份</span>/opt/web/suyun_web<span style="letter-spacing: 0.5px; font-size: 14px; font-family: 宋体;">目录，排除掉目录中的</span>logs<span style="letter-spacing: 0.5px; font-size: 14px; font-family: 宋体;">和目录，打包好的文件存放在</span>/opt/backup<span style="letter-spacing: 0.5px; font-size: 14px; font-family: 宋体;">目录下。</span></span></p><p style="margin-left: 0px; margin-right: 0px;"><span style="font-size: 14px; letter-spacing: 0.5px;">&nbsp;</span></p><p style="margin-left: 0px; margin-right: 0px;"><strong><span style="font-family: 宋体; font-size: 14px; letter-spacing: 0.5px;">参考答案</span></strong><span style="font-family: 宋体; font-size: 14px; letter-spacing: 0.5px;">：</span></p><p style="margin-left: 0px; margin-right: 0px;"><span style="font-size: 14px; letter-spacing: 0.5px;">tar -zcvf /opt/backup/shenjian.tar.gz \</span></p><p style="margin-left: 0px; margin-right: 0px;"><span style="font-size: 14px; letter-spacing: 0.5px;">&nbsp; &nbsp; -<span style="font-size: 14px; letter-spacing: 0.5px; color: rgb(255, 76, 0);">exclude </span>/opt/web/suyun_web/logs \</span></p><p style="margin-left: 0px; margin-right: 0px;"><span style="font-size: 14px; letter-spacing: 0.5px;">&nbsp; &nbsp; /opt/web/suyun_web</span></p><p style="margin-left: 0px; margin-right: 0px;"><span style="font-size: 14px; letter-spacing: 0.5px;">&nbsp;</span></p><p style="margin-left: 0px; margin-right: 0px;"><strong><span style="font-size: 14px; letter-spacing: 0.5px;"><span style="letter-spacing: 0.5px; font-size: 14px; font-family: 宋体;">说明</span></span></strong><span style="font-size: 14px; letter-spacing: 0.5px;"><span style="letter-spacing: 0.5px; font-size: 14px; font-family: 宋体;">：这个命令线上应用较为频繁，在项目需要打包迁移时，常常需要排除掉日志目录，</span>exclude<span style="letter-spacing: 0.5px; font-size: 14px; font-family: 宋体;">是需要掌握的参数。</span></span></p><p style="margin-left: 0px; margin-right: 0px;"><span style="font-size: 14px; letter-spacing: 0.5px;">&nbsp;</span></p><p style="margin-left: 0px; margin-right: 0px;"><span style="letter-spacing: 0.5px; font-size: 16px;"><strong><span style="letter-spacing: 0.5px; font-family: 宋体;">四、查询线程数</span></strong></span></p><p style="margin-left: 0px; margin-right: 0px;"><strong><span style="font-size: 14px; letter-spacing: 0.5px;"><span style="letter-spacing: 0.5px; font-size: 14px; font-family: 宋体;"><span style="font-family: 宋体; font-size: 14px; letter-spacing: 0.5px; line-height: 22.4px;">问题</span></span></span></strong><span style="font-size: 14px; letter-spacing: 0.5px;"><span style="letter-spacing: 0.5px; font-size: 14px; font-family: 宋体;"><span style="font-family: 宋体; font-size: 14px; letter-spacing: 0.5px; line-height: 22.4px;"></span>：查询</span><span style="letter-spacing: 0.5px; font-size: 14px; font-family: 宋体;">服务器运行服务的总线程数，当机器线程数超报警阀值时，能快速查出相关进程及线程信息。</span></span></p><p style="margin-left: 0px; margin-right: 0px;"><span style="font-size: 14px; letter-spacing: 0.5px;">&nbsp;</span></p><p style="margin-left: 0px; margin-right: 0px;"><strong><span style="font-family: 宋体; font-size: 14px; letter-spacing: 0.5px;">参考答案</span></strong><span style="font-family: 宋体; font-size: 14px; letter-spacing: 0.5px;">：</span></p><ul class="list-paddingleft-2" style="list-style-type: disc; margin-left: 0px; margin-right: 0px;"><li><p style="margin-left: 8px; margin-right: 8px;"><span style="font-size: 14px; letter-spacing: 0.5px; color: rgb(255, 76, 0);">ps </span><span style="font-size: 14px; letter-spacing: 0.5px;">-eLf | wc -l</span></p></li><li><p style="margin-left: 8px; margin-right: 8px;"><span style="font-size: 14px; letter-spacing: 0.5px; color: rgb(255, 76, 0);">pstree </span><span style="font-size: 14px; letter-spacing: 0.5px;">-p | wc -l</span></p></li></ul><p style="margin-left: 0px; margin-right: 0px;"><span style="font-size: 14px; letter-spacing: 0.5px;">&nbsp;</span></p><p style="margin-left: 0px; margin-right: 0px;"><span style="letter-spacing: 0.5px; font-size: 16px;"><strong><span style="letter-spacing: 0.5px; font-family: 宋体;">五、磁盘报警，清空最大文件</span></strong></span></p><p style="margin-left: 0px; margin-right: 0px;"><strong><span style="font-size: 14px; letter-spacing: 0.5px;"><span style="letter-spacing: 0.5px; font-size: 14px; font-family: 宋体;"><span style="font-family: 宋体; font-size: 14px; letter-spacing: 0.5px; line-height: 22.4px;">问题</span></span></span></strong><span style="font-size: 14px; letter-spacing: 0.5px;"><span style="letter-spacing: 0.5px; font-size: 14px; font-family: 宋体;"><span style="font-family: 宋体; font-size: 14px; letter-spacing: 0.5px; line-height: 22.4px;"></span>：找出服务器上，某个正在运行的</span>tomcat<span style="letter-spacing: 0.5px; font-size: 14px; font-family: 宋体;">产生的大量异常日志<span style="font-family: 宋体; font-size: 14px; letter-spacing: 0.5px; line-height: 22.4px;">，</span></span><span style="letter-spacing: 0.5px; font-size: 14px; font-family: 宋体;">找出该文件，并释放空间。不妨设该文件包含</span>log<span style="letter-spacing: 0.5px; font-size: 14px; font-family: 宋体;">关键字，并且大于</span>1G<span style="letter-spacing: 0.5px; font-size: 14px; font-family: 宋体;">。</span></span></p><p style="margin-left: 0px; margin-right: 0px;"><span style="font-size: 14px; letter-spacing: 0.5px;">&nbsp;</span></p><p style="margin-left: 0px; margin-right: 0px;"><strong><span style="font-family: 宋体; font-size: 14px; letter-spacing: 0.5px;">参考答案</span></strong><span style="font-family: 宋体; font-size: 14px; letter-spacing: 0.5px;">：</span></p><p style="margin-left: 0px; margin-right: 0px;"><strong><span style="font-family: 宋体; font-size: 14px; letter-spacing: 0.5px;">第一步，找到该文件</span></strong></p><ul class="list-paddingleft-2" style="list-style-type: disc; margin-left: 0px; margin-right: 0px;"><li><p style="margin-left: 8px; margin-right: 8px;"><span style="font-size: 14px; letter-spacing: 0.5px; color: rgb(255, 76, 0);">find </span><span style="font-size: 14px; letter-spacing: 0.5px;">/ -type f -name "*log*" | <span style="font-size: 14px; letter-spacing: 0.5px; color: rgb(255, 76, 0);">xargs </span>ls -lSh | more&nbsp; </span></p></li><li><p style="margin-left: 8px; margin-right: 8px;"><span style="font-size: 14px; letter-spacing: 0.5px; color: rgb(255, 76, 0);">du </span><span style="font-size: 14px; letter-spacing: 0.5px;">-a / | sort -rn | grep log | more</span></p></li><li><p style="margin-left: 8px; margin-right: 8px;"><span style="font-size: 14px; letter-spacing: 0.5px; color: rgb(255, 76, 0);">find </span><span style="font-size: 14px; letter-spacing: 0.5px;">/ -name '*log*' -size +1000M -exec du -h {} \;</span></p></li></ul><p style="margin-left: 0px; margin-right: 0px;"><span style="font-size: 14px; letter-spacing: 0.5px;">&nbsp;</span></p><p style="margin-left: 0px; margin-right: 0px;"><strong><span style="font-family: 宋体; font-size: 14px; letter-spacing: 0.5px;">第二步，将文件清空</span></strong></p><p style="margin-left: 0px; margin-right: 0px;"><span style="font-size: 14px; letter-spacing: 0.5px;"><span style="letter-spacing: 0.5px; font-size: 14px; font-family: 宋体;">假设找到的文件为</span>a.log</span></p><p style="margin-left: 0px; margin-right: 0px;"><span style="font-size: 14px; letter-spacing: 0.5px; color: rgb(255, 76, 0);"><span style="letter-spacing: 0.5px; font-size: 14px; font-family: 宋体;">正确的情况方式应该为：</span>echo ""&gt;a.log<span style="letter-spacing: 0.5px; font-size: 14px; font-family: 宋体;">，文件空间会立刻释放。</span></span></p><p style="margin-left: 0px; margin-right: 0px;"><span style="font-size: 14px; letter-spacing: 0.5px;"><span style="letter-spacing: 0.5px; font-size: 14px; font-family: 宋体;">很多同学：</span><span style="font-size: 14px; letter-spacing: 0.5px; color: rgb(255, 76, 0);">rm -rf a.log<span style="letter-spacing: 0.5px; font-size: 14px; font-family: 宋体;">，这样文件虽然删除，但是因</span>tomcat<span style="letter-spacing: 0.5px; font-size: 14px; font-family: 宋体;">服务仍在运行，空间不会立刻释放</span></span><span style="letter-spacing: 0.5px; font-size: 14px; font-family: 宋体;">，需要重启</span>tomcat<span style="letter-spacing: 0.5px; font-size: 14px; font-family: 宋体;">才能将空间释放。</span></span></p><p style="margin-left: 0px; margin-right: 0px;"><span style="font-size: 14px; letter-spacing: 0.5px;">&nbsp;</span></p><p style="margin-left: 0px; margin-right: 0px;"><span style="letter-spacing: 0.5px; font-size: 16px;"><strong><span style="letter-spacing: 0.5px; font-family: 宋体;">六、显示文件，过滤注释</span></strong></span></p><p style="margin-left: 0px; margin-right: 0px;"><strong><span style="font-size: 14px; letter-spacing: 0.5px;"><span style="letter-spacing: 0.5px; font-size: 14px; font-family: 宋体;"><span style="font-family: 宋体; font-size: 14px; letter-spacing: 0.5px; line-height: 22.4px;">问题</span></span></span></strong><span style="font-size: 14px; letter-spacing: 0.5px;"><span style="letter-spacing: 0.5px; font-size: 14px; font-family: 宋体;"><span style="font-family: 宋体; font-size: 14px; letter-spacing: 0.5px; line-height: 22.4px;"></span>：显示</span>server.conf <span style="letter-spacing: 0.5px; font-size: 14px; font-family: 宋体;">文件，屏蔽掉</span>#<span style="letter-spacing: 0.5px; font-size: 14px; font-family: 宋体;">号开头的注释行</span></span></p><p style="margin-left: 0px; margin-right: 0px;"><span style="font-size: 14px; letter-spacing: 0.5px;">&nbsp;</span></p><p style="margin-left: 0px; margin-right: 0px;"><strong><span style="font-family: 宋体; font-size: 14px; letter-spacing: 0.5px;">参考答案</span></strong><span style="font-family: 宋体; font-size: 14px; letter-spacing: 0.5px;">：</span></p><ul class="list-paddingleft-2" style="list-style-type: disc; margin-left: 0px; margin-right: 0px;"><li><p style="margin-left: 8px; margin-right: 8px;"><span style="font-size: 14px; letter-spacing: 0.5px; color: rgb(255, 76, 0);">sed</span><span style="font-size: 14px; letter-spacing: 0.5px;"> -n '/^[#]/!p' server.conf</span></p></li><li><p style="margin-left: 8px; margin-right: 8px;"><span style="font-size: 14px; letter-spacing: 0.5px;">sed -e '/^#/d' server.conf</span></p></li><li><p style="margin-left: 8px; margin-right: 8px;"><span style="font-size: 14px; letter-spacing: 0.5px; color: rgb(255, 76, 0);">grep -v </span><span style="font-size: 14px; letter-spacing: 0.5px;">"^#" server.conf</span></p></li></ul><p style="margin-left: 0px; margin-right: 0px;"><span style="font-size: 14px; letter-spacing: 0.5px;">&nbsp;</span></p><p style="margin-left: 0px; margin-right: 0px;"><span style="letter-spacing: 0.5px; font-size: 16px;"><strong><span style="letter-spacing: 0.5px; font-family: 宋体;">七、磁盘</span>IO</strong><strong><span style="letter-spacing: 0.5px; font-family: 宋体;">异常排查</span></strong></span></p><p style="margin-left: 0px; margin-right: 0px;"><strong><span style="font-size: 14px; letter-spacing: 0.5px;"><span style="letter-spacing: 0.5px; font-size: 14px; font-family: 宋体;"><span style="font-family: 宋体; font-size: 14px; letter-spacing: 0.5px; line-height: 22.4px;">问题</span></span></span></strong><span style="font-size: 14px; letter-spacing: 0.5px;"><span style="letter-spacing: 0.5px; font-size: 14px; font-family: 宋体;"><span style="font-family: 宋体; font-size: 14px; letter-spacing: 0.5px; line-height: 22.4px;"></span>：磁盘</span>IO<span style="letter-spacing: 0.5px; font-size: 14px; font-family: 宋体;">异常如何排查，类似写入慢或当前使用率较高，请查出导致磁盘</span>IO<span style="letter-spacing: 0.5px; font-size: 14px; font-family: 宋体;">异常高的</span><span style="letter-spacing: 0.5px; font-size: 14px; font-family: 宋体;">进程</span>ID<span style="letter-spacing: 0.5px; font-size: 14px; font-family: 宋体;">。</span></span></p><p style="margin-left: 0px; margin-right: 0px;"><span style="font-size: 14px; letter-spacing: 0.5px;">&nbsp;</span></p><p style="margin-left: 0px; margin-right: 0px;"><strong><span style="font-family: 宋体; font-size: 14px; letter-spacing: 0.5px;">参考答案</span></strong><span style="font-family: 宋体; font-size: 14px; letter-spacing: 0.5px;">：</span></p><p style="margin-left: 0px; margin-right: 0px;"><span style="font-size: 14px; letter-spacing: 0.5px;"><span style="letter-spacing: 0.5px; font-size: 14px; font-family: 宋体;">第一步：</span><span style="font-size: 14px; letter-spacing: 0.5px; color: rgb(255, 76, 0);">iotop -o </span><span style="letter-spacing: 0.5px; font-size: 14px; font-family: 宋体;">查看当前正在写磁盘操作的所有进程</span>ID<span style="letter-spacing: 0.5px; font-size: 14px; font-family: 宋体;">信息。</span></span></p><p style="margin-left: 0px; margin-right: 0px;"><span style="font-size: 14px; letter-spacing: 0.5px;"><span style="letter-spacing: 0.5px; font-size: 14px; font-family: 宋体;"><br></span></span></p><p style="margin-left: 0px; margin-right: 0px;"><span style="font-size: 14px; letter-spacing: 0.5px;"><span style="letter-spacing: 0.5px; font-size: 14px; font-family: 宋体;">第二步：如果此时各项写入指标都很低，基本没有大的写入操作，则需要排查磁盘自身。可以查看系统</span><span style="font-size: 14px; letter-spacing: 0.5px; color: rgb(255, 76, 0);">dmesg</span><span style="letter-spacing: 0.5px; font-size: 14px; font-family: 宋体;">或</span><span style="font-size: 14px; letter-spacing: 0.5px; color: rgb(255, 76, 0);">cat /var/log/message </span><span style="letter-spacing: 0.5px; font-size: 14px; font-family: 宋体;">看看是否有相关的磁盘异常报错，同时可以在写入慢的磁盘上</span><span style="font-size: 14px; letter-spacing: 0.5px; color: rgb(255, 76, 0);">touch </span><span style="letter-spacing: 0.5px; font-size: 14px; font-family: 宋体;">一个空文件看看，是否磁盘故障导致无法写入。</span></span></p><p style="margin-left: 0px; margin-right: 0px;"><br></p><p style="margin-left: 0px; margin-right: 0px;"><span style="font-size: 14px; letter-spacing: 0.5px; line-height: 22.4px;">==【完】==</span></p><p style="margin-left: 0px; margin-right: 0px;"><span style="font-family: 宋体; font-size: 14px; letter-spacing: 0.5px;">希望对经常进行线上操作的同学有帮助，<strong>到线上操作一把</strong>，印象更加深刻哟。</span></p><p style="margin-left: 0px; margin-right: 0px;"><span style="font-family: 宋体; font-size: 14px; letter-spacing: 0.5px;"><br></span></p><p style="margin-left: 0px; margin-right: 0px;"><span style="font-family: 宋体; font-size: 14px; letter-spacing: 0.5px;">如果有更好的实践，也欢迎分享。</span></p><p style="margin-left: 0px; margin-right: 0px;"><span style="font-family: 宋体; font-size: 14px; letter-spacing: 0.5px;"><br></span></p><p style="margin-left: 0px; margin-right: 0px;"><span style="font-family: 宋体; font-size: 14px; letter-spacing: 0.5px;">相关文章：</span></p><p style="margin-left: 0px; margin-right: 0px;"><a href="http://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==&amp;mid=205216499&amp;idx=1&amp;sn=656b5403f3be045772bb539c873e6bd0&amp;scene=21#wechat_redirect" target="_blank"><span style="font-family: 宋体; font-size: 14px; letter-spacing: 0.5px;">Linux追查线上问题常用命令</span></a></p><p style="margin-left: 0px; margin-right: 0px;"><a href="http://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==&amp;mid=400743254&amp;idx=1&amp;sn=147abc381ccd61e28f52699735c8748e&amp;scene=21#wechat_redirect" target="_blank"><span style="font-family: 宋体; font-size: 14px; letter-spacing: 0.5px;">一分钟awk够用</span></a><span style="font-family: 宋体; font-size: 14px; letter-spacing: 0.5px;"><br></span></p><p style="margin-left: 0px; margin-right: 0px;"><a href="http://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==&amp;mid=403340380&amp;idx=1&amp;sn=9b4ced5a19f60b0cebf6fd582f1d52ae&amp;scene=21#wechat_redirect" target="_blank"><span style="font-family: 宋体; font-size: 14px; letter-spacing: 0.5px;">一分钟sed够用</span></a></p><hr/><a href="http://mp.weixin.qq.com/s?timestamp=1503366049&src=3&ver=1&signature=OYewMZH60kmig22U24i7m6sKVnTwzt3UPW4YGe4v-5baZmWG6eeyYwlgndoMQvEZ2rCh6bD1GFvpiI6UKWdhjRSOqCU6WR-Lr5Pi*98uD4JOR6zA1C1N5v7J8xKWc*P7QLoSXml4ayRkxOCKHrxpj136FBKS26blJs-mNcUkYTY=">微信地址</a> | <a href="https://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==&amp;mid=2651960302&amp;idx=1&amp;sn=ba3d794bd9cc42bead23b7877ad54643&amp;chksm=bd2d06328a5a8f24d9d43a36093dc701c63393e61781ff7fa1e47e5d2ae0631edb7cf514bb6d#rd">阅读原文</a>
{% endraw  %}

