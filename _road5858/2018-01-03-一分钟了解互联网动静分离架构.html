---
title: 一分钟了解互联网动静分离架构
author: 58沈剑
wechat_source: >-
  http://mp.weixin.qq.com/s?timestamp=1515986097&src=3&ver=1&signature=yyLj*6br2FUtW3BtBE3siBo3oPDK8DK*88F4CWijxQ5EFX6jGrv3BrjQoFMwQzo-*jiN8gkDoGNv71FTxFvM1L0QK3FkBERT2pBcA5rAmmsJo1xkwbaifWYIvFg0Htyc*qOA*YaMGfDCCcMar1L8HHplJmXkoKCw6E-UFfCjPmc=
date: '2018-01-03 00:00:00 +0000'

---

{% raw  %}
<p><span style="font-size: 16px;"><strong><span style="letter-spacing: 1px;">一、静态页面</span></strong></span></p><p><span style="font-size: 14px;letter-spacing: 1px;color: rgb(255, 76, 0);">静态页面</span><span style="font-size: 14px;letter-spacing: 1px;">，是指互联网架构中，<span style="font-size: 14px;letter-spacing: 1px;color: rgb(255, 76, 0);">几乎不变的页面</span>(或者变化频率很低)，例如：</span></p><ul class="list-paddingleft-2" style="list-style-type: disc;"><li><p><span style="font-size: 14px;letter-spacing: 1px;">首页等html页面</span></p></li><li><p><span style="font-size: 14px;letter-spacing: 1px;">js/css等样式文件</span></p></li><li><p><span style="font-size: 14px;letter-spacing: 1px;">jpg/apk等资源文件</span></p></li></ul><p><img src="https://mmbiz.qpic.cn/mmbiz_png/YrezxckhYOyQzVH1e7N6dlFGV4aUNQoAiafnOTY1KuvXqyBp4ksZV0oL7GPeY6XGzyR0mwBYsutiaymVh5iaC5Tng/0?wx_fmt=png" style="width: 331px !important; height: 99px !important; visibility: visible !important;"></p><p><span style="font-size: 14px;letter-spacing: 1px;">静态页面，有<span style="font-size: 14px;letter-spacing: 1px;color: rgb(255, 76, 0);">与之匹配的技术架构来加速</span>，例如：</span></p><ul class="list-paddingleft-2" style="list-style-type: disc;"><li><p><span style="font-size: 14px;letter-spacing: 1px;">CDN</span></p></li><li><p><span style="font-size: 14px;letter-spacing: 1px;">nginx</span></p></li><li><p><span style="font-size: 14px;letter-spacing: 1px;">squid/varnish</span></p></li></ul><p><br></p><p><span style="font-size: 16px;"><strong><span style="letter-spacing: 1px;">二、动态页面</span></strong></span></p><p><span style="font-size: 14px;letter-spacing: 1px;color: rgb(255, 76, 0);">动态页面</span><span style="font-size: 14px;letter-spacing: 1px;">，是指互联网架构中，不同用户不同场景访问，都<span style="font-size: 14px;letter-spacing: 1px;color: rgb(255, 76, 0);">不一样的页面</span>，例如：</span></p><ul class="list-paddingleft-2" style="list-style-type: disc;"><li><p><span style="font-size: 14px;letter-spacing: 1px;">百度搜索结果页</span></p></li><li><p><span style="font-size: 14px;letter-spacing: 1px;">淘宝商品列表页</span></p></li><li><p><span style="font-size: 14px;letter-spacing: 1px;">速运个人订单中心页</span></p></li></ul><p><span style="font-size: 14px;letter-spacing: 1px;">这些页面，不同用户，不同场景访问，大都会动态生成不同的页面。</span></p><p><img src="https://mmbiz.qpic.cn/mmbiz_png/YrezxckhYOyQzVH1e7N6dlFGV4aUNQoADTtUzAxCWArvUBcrTdFKbNUu3sgd2888ibTuqKknICaCqfjzianOySqA/0?wx_fmt=png" style="width: 200px !important; height: 156px !important; visibility: visible !important;"></p><p><span style="font-size: 14px;letter-spacing: 1px;">动态页面，有<span style="font-size: 14px;letter-spacing: 1px;color: rgb(255, 76, 0);">与之匹配的技术架构</span>，例如：</span></p><ul class="list-paddingleft-2" style="list-style-type: disc;"><li><p><span style="font-size: 14px;letter-spacing: 1px;">分层架构</span></p></li><li><p><span style="font-size: 14px;letter-spacing: 1px;">服务化架构</span></p></li><li><p><span style="font-size: 14px;letter-spacing: 1px;">数据库，缓存架构</span></p></li></ul><p><span style="font-size: 14px;letter-spacing: 1px;">&nbsp;</span><br></p><p><span style="font-size: 16px;"><strong><span style="letter-spacing: 1px;">三、互联网动静分离架构</span></strong></span></p><p><span style="font-size: 14px;letter-spacing: 1px;color: rgb(255, 76, 0);">动静分离</span><span style="font-size: 14px;letter-spacing: 1px;">是指，静态页面与动态页面<span style="font-size: 14px;letter-spacing: 1px;color: rgb(255, 76, 0);">分开不同系统访问</span>的架构设计方法。</span></p><p><img src="https://mmbiz.qpic.cn/mmbiz_png/YrezxckhYOyQzVH1e7N6dlFGV4aUNQoAqRsLlR2ukymOibXyO8Lvleaw27jlicTIYnu9NSTMup5sT2joU3FHY8ibw/0?wx_fmt=png" style="width: 507px !important; height: 192px !important;"></p><p><span style="font-size: 14px;letter-spacing: 1px;">一般来说：</span></p><ul class="list-paddingleft-2" style="list-style-type: disc;"><li><p><strong><span style="font-size: 14px;letter-spacing: 1px;">静态页面</span></strong><span style="font-size: 14px;letter-spacing: 1px;">访问路径短，访问<span style="font-size: 14px;letter-spacing: 1px;color: rgb(255, 76, 0);">速度快</span>，几毫秒</span></p></li><li><p><strong><span style="font-size: 14px;letter-spacing: 1px;">动态页面</span></strong><span style="font-size: 14px;letter-spacing: 1px;">访问路径长，访问<span style="font-size: 14px;letter-spacing: 1px;color: rgb(255, 76, 0);">速度相对较慢</span>(数据库的访问，网络传输，业务逻辑计算)，几十毫秒甚至几百毫秒，对<span style="font-size: 14px;letter-spacing: 1px;color: rgb(255, 76, 0);">架构扩展性的要求更高</span></span></p></li><li><p><span style="font-size: 14px;letter-spacing: 1px;">静态页面与动态页面<span style="font-size: 14px;letter-spacing: 1px;color: rgb(255, 76, 0);">以不同域名区分</span></span></p></li></ul><p><span style="font-size: 14px;letter-spacing: 1px;">&nbsp;</span></p><p><span style="font-size: 16px;"><strong><span style="letter-spacing: 1px;">四、页面静态化</span></strong></span></p><p><span style="font-size: 14px;letter-spacing: 1px;">既然静态页面访问快，动态页面生成慢，有没有可能，<span style="font-size: 14px;letter-spacing: 1px;color: rgb(255, 76, 0);">将原本需要动态生成的站点提前生成好，使用静态页面加速技术来访问</span>呢？</span></p><p><span style="font-size: 14px;letter-spacing: 1px;">这就是互联网架构中的<strong>“页面静态化”</strong>优化技术。</span></p><p><br></p><p><span style="font-size: 14px;letter-spacing: 1px;">举例，如下图，58同城的帖子详情页，原本是需要动态生成的：</span></p><p><span style="font-size: 14px;letter-spacing: 1px;"></span></p><p><img src="https://mmbiz.qpic.cn/mmbiz_png/YrezxckhYOyQzVH1e7N6dlFGV4aUNQoAIBtqtk6iclsy51zQobDSmSqxyjur7RMtTzWHO9ibiabMDPPmP0hIicpPZg/0?wx_fmt=png" style="width: 341px !important; height: 224px !important;"></p><ul class="list-paddingleft-2" style="list-style-type: disc;"><li><p><span style="font-size: 14px;letter-spacing: 1px;">浏览器发起http请求，访问</span><span style="letter-spacing: 1px;font-size: 12px;">/detail/12348888x.shtml&nbsp;</span><strong><span style="font-size: 14px;letter-spacing: 1px;">详情页</span></strong></p></li><li><p><span style="font-size: 14px;letter-spacing: 1px;">web-server层从RESTful接口中，解析出帖子id是<strong><span style="letter-spacing: 1px;font-size: 12px;">12348888</span></strong></span></p></li><li><p><span style="font-size: 14px;letter-spacing: 1px;">service层通过DAO层拼装<strong>SQL语句</strong>，访问数据库</span></p></li><li><p><span style="font-size: 14px;letter-spacing: 1px;">最终获取数据，<strong>拼装html返回浏览器</strong></span></p></li></ul><p><br></p><p><span style="font-size: 14px;letter-spacing: 1px;">而“页面静态化”是指，<span style="font-size: 14px;letter-spacing: 1px;color: rgb(255, 76, 0);">将帖子ID为12348888的帖子<span style="letter-spacing: 1px;font-size: 12px;">12348888x.shtml</span>提前生成好</span>，由静态页面相关加速技术来加速：</span></p><p><img src="https://mmbiz.qpic.cn/mmbiz_png/YrezxckhYOyQzVH1e7N6dlFGV4aUNQoA4SvFN5pqaA6LONztSdEp0ia1GZIaUQ2MNmMhhFqqnREQNvVK4ibdI4Yw/0?wx_fmt=png" style="width: 412px !important; height: 129px !important;"></p><p><span style="font-size: 14px;letter-spacing: 1px;">这样的话，将<span style="font-size: 14px;letter-spacing: 1px;color: rgb(255, 76, 0);">极大提升访问速度</span>，减少访问时间，提高用户体验。</span></p><p><span style="font-size: 14px;letter-spacing: 1px;">&nbsp;</span></p><p><span style="font-size: 16px;"><strong><span style="letter-spacing: 1px;">五、页面静态化的适用场景</span></strong></span></p><p><span style="font-size: 14px;letter-spacing: 1px;">页面静态化优化后速度会加快，那能不能所有的场景都使用这个优化呢？<strong>哪些业务场景适合使用这个架构优化方案呢？</strong></span></p><p><span style="font-size: 14px;letter-spacing: 1px;">&nbsp;</span></p><p><strong><span style="font-size: 14px;letter-spacing: 1px;">一切脱离业务的架构设计都是耍流氓</span></strong><span style="font-size: 14px;letter-spacing: 1px;">，页面静态化，适用于：<span style="font-size: 14px;letter-spacing: 1px;color: rgb(255, 76, 0);">总数据量不大，生成静态页面数量不多的业务</span>。</span><span style="font-size: 14px;letter-spacing: 1px;">例如：</span></p><ul class="list-paddingleft-2" style="list-style-type: disc;"><li><p><span style="font-size: 14px;letter-spacing: 1px;">58速运的<span style="font-size: 14px;letter-spacing: 1px;color: rgb(255, 76, 0);">城市页只有几百个</span>，就可以用这个优化，只需提前生成几百个城市的“静态化页面”即可</span></p></li><li><p><span style="font-size: 14px;letter-spacing: 1px;">一些二手车业务，只有<span style="font-size: 14px;letter-spacing: 1px;color: rgb(255, 76, 0);">几万量二手车库存</span>，也可以提前生成这几万量二手车的静态页面</span></p></li><li><p><span style="font-size: 14px;letter-spacing: 1px;">像58同城这样的信息模式业务，有<span style="font-size: 14px;letter-spacing: 1px;color: rgb(255, 76, 0);">几十亿的帖子量，就<strong>不</strong>太适合于静态化（碎片文件多，反而访问慢）</span></span></p></li></ul><p><span style="font-size: 14px;letter-spacing: 1px;">&nbsp;</span></p><p><span style="font-size: 16px;"><strong><span style="letter-spacing: 1px;">六、总结</span></strong></span></p><p><strong><span style="font-size: 14px;letter-spacing: 1px;">“页面静态化”</span></strong><span style="font-size: 14px;letter-spacing: 1px;">是一种将原本需要动态生成的站点提前生成静态站点的优化技术。</span></p><p><span style="font-size: 14px;letter-spacing: 1px;">总数据量不大，<strong>生成静态页面数量不多的业务</strong>，非常适合于“页面静态化”优化。</span></p><p><span style="font-size: 14px;letter-spacing: 1px;"><br></span></p><p><span style="font-size: 14px;letter-spacing: 1px;">一分钟不长，希望逻辑清晰，希望大伙有收获。</span></p><p><span style="font-size: 14px;letter-spacing: 1px;">帮<span style="font-size: 14px;letter-spacing: 1px;color: rgb(255, 76, 0);">转</span>哈。</span></p><p><span style="font-size: 14px;letter-spacing: 1px;"><br></span></p><p><span style="font-size: 14px;letter-spacing: 1px;">相关文章：</span></p><p><span style="font-size: 14px;letter-spacing: 1px;"><a href="http://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==&amp;mid=2651960763&amp;idx=1&amp;sn=63da208faee72464fa11691215229bc4&amp;chksm=bd2d00678a5a8971fd2218247accac0f2367603c981c1d3c705d60d08a212ca2399f4bf076e0&amp;scene=21#wechat_redirect" target="_blank">配置中心，互联网架构解耦利器</a><br></span></p><p><span style="font-size: 14px;letter-spacing: 1px;"><a href="http://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==&amp;mid=2651960726&amp;idx=1&amp;sn=0fdaf0e7040318aabfeba553f815d691&amp;chksm=bd2d004a8a5a895ca80180443cc0f18e66b3d15dbbbd120dabaf3e6d4ef00fbc1030bf41c24b&amp;scene=21#wechat_redirect" target="_blank">MQ，互联网架构解耦神器</a><br></span></p><p><span style="font-size: 14px;letter-spacing: 1px;"><a href="http://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==&amp;mid=2651959855&amp;idx=1&amp;sn=f33abe8ec598c273f29cebb9365ece59&amp;chksm=bd2d07f38a5a8ee58a944507a134e1da1efc3ac9c4d1c4cff261137cd986e51f5fe7cee9de15&amp;scene=21#wechat_redirect" target="_blank">100亿数据1万属性数据架构设计</a><br></span></p><hr/><a href="http://mp.weixin.qq.com/s?timestamp=1515986097&src=3&ver=1&signature=yyLj*6br2FUtW3BtBE3siBo3oPDK8DK*88F4CWijxQ5EFX6jGrv3BrjQoFMwQzo-*jiN8gkDoGNv71FTxFvM1L0QK3FkBERT2pBcA5rAmmsJo1xkwbaifWYIvFg0Htyc*qOA*YaMGfDCCcMar1L8HHplJmXkoKCw6E-UFfCjPmc=">微信地址</a> | <a href="https://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==&amp;mid=2651960791&amp;idx=1&amp;sn=7b070e53b5890e08082ebf1bc2e65626&amp;chksm=bd2d000b8a5a891d7ed3bf83cd9c295ca6fa37a43f4ffedf762a21df17d27ebb3cfa071400cd#rd">阅读原文</a>
{% endraw  %}

