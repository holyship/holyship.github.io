---
title: 数据库中间件Atlas调研笔记
author: 58沈剑
wechat_source: >-
  http://mp.weixin.qq.com/s?timestamp=1512886848&src=3&ver=1&signature=0dsH*cvrb7sDcdE*f0PtKD4mxxcCZBqQCpMqS7HCyNBsct4LhNg8ttyk4jAVZh144v2Qu0nvlRoytzz4ujea-0HCNH2hzTkZSky5K411dp1I-hPzt6eVVvgPEWy*jK-*tPzVxtTCoMOr4WGPk4AZ555UlrZqnAOryVeou0D1BEE=
date: '2017-11-25 00:00:00 +0000'

---

{% raw  %}
<p><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;">前篇：</span></p><p><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;">《</span><a href="http://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==&amp;mid=2651960632&amp;idx=1&amp;sn=769f12c5180bdc37d71c99cdf7b4077f&amp;chksm=bd2d00e48a5a89f2fa42e0c360e31c28cfd9cce7ab31b425cb5ef8da43bef117c95d0ca8c2cd&amp;scene=21#wechat_redirect" target="_blank" style="font-size: 14px;letter-spacing: 1px;text-decoration: none;"><span style="font-size: 14px;letter-spacing: 1px;">假如让你来设计数据库中间件</span></a><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;">》</span></p><p><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;">《</span><a href="http://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==&amp;mid=2651960601&amp;idx=1&amp;sn=4ea55404a2fc96dc5a7bb613bb9e3d32&amp;chksm=bd2d00c58a5a89d307e062e4ad5fe5f0091d514b65881d0829e8f26c5aee965b225fd3eb1909&amp;scene=21#wechat_redirect" target="_blank" style="font-size: 14px;letter-spacing: 1px;text-decoration: none;"><span style="font-size: 14px;letter-spacing: 1px;">数据库中间件TDDL调研笔记</span></a><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;">》</span></p><p><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;">《</span><a href="http://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==&amp;mid=2651960594&amp;idx=1&amp;sn=b9d39a5591ceeee4e7896627482f05f6&amp;chksm=bd2d00ce8a5a89d885deb207bbdb4a265862888e62fd18c1091830a418b58d4dec1753c6fab9&amp;scene=21#wechat_redirect" target="_blank" style="font-size: 14px;letter-spacing: 1px;text-decoration: none;"><span style="font-size: 14px;letter-spacing: 1px;">数据库中间件cobar调研笔记</span></a><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;">》</span></p><p><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;">《</span><a href="http://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==&amp;mid=2651960133&amp;idx=1&amp;sn=07acfeac5306f92f81dfccf4c880da4f&amp;chksm=bd2d06998a5a8f8fc8c3bbb2c2ea01825ebe6576a35aa4d9789774dba0f7964baf4edf584f1b&amp;scene=21#wechat_redirect" target="_blank" style="font-size: 14px;letter-spacing: 1px;text-decoration: none;"><span style="font-size: 14px;letter-spacing: 1px;">数据库中间件mysql-proxy调研笔记</span></a><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;">》</span></p><p><br></p><p><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;">13年底负责数据库中间件设计时的调研笔记，拿出来和大家分享，轻拍。<br></span></p><p><br></p><h1><span style="font-size: 16px;"><strong><span style="letter-spacing: 1px;text-decoration: none;">一、Atlas是什么</span></strong></span></h1><ul class="list-paddingleft-2" style="list-style-type: disc;"><li><p><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;">奇虎360的一个mysql数据库中间层项目</span></p></li><li><p><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;">在mysql官方推出的mysql-proxy0.8.2的基础上改的</span></p></li><li><p><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;">基于服务端的中间件<br></span></p></li></ul><p><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;"><em style="max-width: 100%;color: rgb(0, 82, 255);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 14px;letter-spacing: 1px;box-sizing: border-box !important;word-wrap: break-word !important;">画外音：数据库中间件有基于服务端的，也有基于客户端的，TDDL属于后者；而cobar和Atlas是一个中间层服务，属于前者。</span></em></span></p><p><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;"><br></span></p><h1><span style="font-size: 16px;"><strong><span style="letter-spacing: 1px;text-decoration: none;">二、Atlas相对mysql-proxy的优势</span></strong></span></h1><p><strong><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;">既然Atlas是基于mysql-proxy改的，有一些什么优化呢？</span></strong></p><ul class="list-paddingleft-2" style="list-style-type: disc;"><li><p><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;">主流程中的Lua脚本用C重写</span></p></li><li><p><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;">网络模型，线程模型重写</span></p></li><li><p><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;">实现了“真正意义”上的连接池，真正连接复用</span></p></li><li><p><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;">优化了锁机制，性能提高数十倍</span></p></li></ul><p><span style="color: rgb(0, 82, 255);"><em><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;">画外音：性能提高数十倍是传说，用过的同学可以出来说一说。</span></em></span></p><ul class="list-paddingleft-2" style="list-style-type: disc;"><li><p><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;">官方mysql-proxy主库宕机从库亦不可用，Atlas优化为可读不可写&nbsp;</span></p></li></ul><p><strong><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;"><br></span></strong></p><p><strong><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;">优化之外，还新增了什么特性呢？</span></strong></p><ul class="list-paddingleft-2" style="list-style-type: disc;"><li><p><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;">ip过滤</span></p></li><li><p><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;">分表支持</span></p></li><li><p><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;">dba可平滑上下线db</span></p></li><li><p><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;">自动摘除宕机db</span></p></li><li><p><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;">…</span></p></li></ul><p><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;">&nbsp;</span></p><h1><span style="font-size: 16px;"><strong><span style="letter-spacing: 1px;text-decoration: none;">三、Atlas最吸引人的分表功能</span></strong></span></h1><p><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;color: rgb(255, 76, 0);">分表功能</span><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;">是Atlas相对于mysql-proxy最具有吸引力的功能。</span></p><p><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;"><br></span></p><p><strong><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;">分表设置</span></strong></p><p><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;">为了支持分表，需要增加分表设置</span></p><p><span style="letter-spacing: 1px;text-decoration: none;font-size: 12px;">tables = $db_name</span></p><p><span style="letter-spacing: 1px;text-decoration: none;font-size: 12px;">&nbsp; &nbsp; .$table_name</span></p><p><span style="letter-spacing: 1px;text-decoration: none;font-size: 12px;">&nbsp; &nbsp; .$partition_column_name</span></p><p><span style="letter-spacing: 1px;text-decoration: none;font-size: 12px;">&nbsp; &nbsp; .$table_count</span></p><p><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;"><br></span></p><p><strong><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;">例如</span></strong></p><p><span style="letter-spacing: 1px;text-decoration: none;font-size: 12px;">tables = school:stu:id:100</span></p><ul class="list-paddingleft-2" style="list-style-type: disc;"><li><p><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;">数据库名叫school</span></p></li><li><p><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;">表名叫stu</span></p></li><li><p><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;">分表字段叫id</span></p></li><li><p><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;">总共分为100张表</span></p></li></ul><p><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;">这100张子表需要用户手动逐个建立的，stu_0, stu_1, stu_2, … stu_99，并且所有的子表必须在一个数据库里。</span></p><p><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;"><em style="color: rgb(0, 82, 255);white-space: normal;"><span style="font-size: 14px;letter-spacing: 1px;">画外音：额，这个需要用户手动执行，还是有点坑的。</span></em></span></p><p><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;"><em style="color: rgb(0, 82, 255);white-space: normal;"><span style="font-size: 14px;letter-spacing: 1px;"><br></span></em></span></p><p><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;"><em style="color: rgb(0, 82, 255);white-space: normal;"><span style="font-size: 14px;letter-spacing: 1px;">画外音：分表并且要求子表在一个库里，如果数据量过大，无法通过扩展实例来扩容，不确定Atlas对于这个问题是如何考虑“扩展性”的。</span></em></span></p><p><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;">&nbsp;</span></p><p><strong><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;">操作支持</span></strong></p><p><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;">Atlas支持select, delete, update, insert, replace操作，它会根据<span style="letter-spacing: 1px;text-decoration: none;font-size: 12px;">$partition_column_name&nbsp;</span>的值来对表的个数进行取模，以定位到sql请求要落到哪个子表。</span></p><p><br></p><p><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;color: rgb(0, 0, 0);">需要注意的是，sql语句必须带上分表id作为查询条件，如果不带上id，则会提示stu<span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;">表不存在。</span></span></p><p><em><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;color: rgb(0, 82, 255);">画外音：不支持夸库分表，不支持非partition_column上的查询，应用场景应该会比较受限。</span></em></p><p><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;">&nbsp;</span></p><h1><span style="font-size: 16px;"><strong><span style="letter-spacing: 1px;text-decoration: none;">四、Atlas的参数扩展</span></strong></span></h1><p><strong><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;">min-idle-connections</span></strong></p><ul class="list-paddingleft-2" style="list-style-type: disc;"><li><p><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;">用来实现mysq<span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;color: rgb(255, 76, 0);">连接池</span>功能，进行连接限制</span></p></li><li><p><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;">Atlas为每台DB建立一个连接池</span></p></li><li><p><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;">当有客户端连接Atlas时，<strong>Atlas会先在第一台DB上建立连接，直到第一台DB连接池内的空闲连接数达到min-idle-connections，再在下一台DB上建立连接</strong>，直到所有DB连接池内的空闲连接数都达到min-idle-connections，便不再建立新连接，而开始复用连接池内的连接</span></p></li><li><p><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;">Atlas启动时，配置里的所有DB会按照主库在前从库在后的顺序在内存里排好次序，所以初始阶段<strong>会先在主库上建立连接</strong></span></p></li><li><p><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;">Atlas在运行过程中，某连接如果触发了DB的wait_timeout，Atlas会把该连接销毁，如果因此而导致连接池内的空闲连接数低于min-idle-connections，Atlas将在客户端下一次连接时重新在该DB上建立连接</span></p></li><li><p><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;">初使用者常常会误认为读写分离不起作用，其实是由于min-idle-connections设置得较大，而测试时只连接了一次或几次，这样的话建立的连接都在主库上，从库上还没有建立连接，此时发送读语句，自然也只能打向主库</span></p></li><li><p><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;">DB的wait_timeout建议不要设得太小，因为Atlas有连接池机制，不会一直新建连接导致DB上连接数过多，所以DB不需要依赖wait_timeout防止过多连接，如果wait_timeout太小会导致Atlas的一些不必要的销毁超时连接的开销</span><span style="font-size: 14px;letter-spacing: 1px;">&nbsp;</span></p></li></ul><p><span style="color: rgb(0, 82, 255);"><em><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;">画外音：并发量比较大的时候，连接几乎不会被销毁。</span></em></span></p><p><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;"><br></span></p><p><strong><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;">client-ips</span></strong></p><ul class="list-paddingleft-2" style="list-style-type: disc;"><li><p><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;">该参数用来实现多用户的<span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;color: rgb(255, 76, 0);">权限控制</span>功能</span></p></li></ul><p><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;">配置格式如下：</span></p><p><span style="letter-spacing: 1px;text-decoration: none;font-size: 12px;">client-ips : 127.0.0.1, 192.168.0.*</span></p><p><span style="color: rgb(0, 82, 255);"><em><span style="letter-spacing: 1px;text-decoration: none;font-size: 14px;">画外音：简单而实用的功能，多少事故是因为“线下将流量压到线上”或者“ SecureCRT 窗口太多，切换错了数据库”。</span></em></span></p><p><br></p><p><strong><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;">lvs-ips</span></strong></p><ul class="list-paddingleft-2" style="list-style-type: disc;"><li><p><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;">该参数是Atlas前面挂接的LVS的物理网卡的IP，不是虚IP</span></p></li><li><p><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;">该参数用来实现<span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;color: rgb(255, 76, 0);">平滑重启</span>功能，否则在重启Atlas的瞬间的那些SQL请求都会失败</span></p></li><li><p><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;">平滑重启的条件：至少有两台配置相同的Atlas，且挂接在LVS之后</span></p></li></ul><p><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;">&nbsp;</span></p><h1><span style="font-size: 16px;"><strong><span style="letter-spacing: 1px;text-decoration: none;">五、Atlas最受关注FAQ</span></strong></span></h1><p><strong><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;"><strong style="white-space: normal;"><span style="font-size: 14px;letter-spacing: 1px;">问：</span></strong>Atlas是否支持多字符集？</span></strong></p><p><strong><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;">答</span></strong><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;">：是，对多字符集的支持是Atlas对原版MySQL-Proxy的第一项改进。</span></p><p><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;"><br></span></p><p><strong><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;"><strong style="white-space: normal;"><span style="font-size: 14px;letter-spacing: 1px;">问：</span></strong>Atlas是否支持事务操作？</span></strong></p><p><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;"><strong style="white-space: normal;"><span style="font-size: 14px;letter-spacing: 1px;">答</span></strong><span style="font-size: 14px;letter-spacing: 1px;">：</span>支持，且处于事务状态的客户端中途退出时，Atlas会销毁该客户端使用的连接，让后台的mysql回滚事务，保证了事务的完整性。</span></p><p><span style="color: rgb(0, 82, 255);"><em><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;">画外音：单库多表。</span></em></span></p><p><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;"><br></span></p><p><strong><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;"><strong style="white-space: normal;"><span style="font-size: 14px;letter-spacing: 1px;">问：</span></strong>自动读写分离挺好，但有时候写完马上就想读，万一主从同步延迟怎么办?</span></strong></p><p><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;"><strong style="white-space: normal;"><span style="font-size: 14px;letter-spacing: 1px;">答</span></strong><span style="font-size: 14px;letter-spacing: 1px;">：</span>SQL语句前增加<span style="letter-spacing: 1px;text-decoration: none;font-size: 12px;"> /*master*/ </span>就可以将读请求强制发往主库，例如：</span></p><p><span style="letter-spacing: 1px;text-decoration: none;font-size: 12px;">/*master*/ select * from t;</span></p><p><span style="color: rgb(0, 82, 255);"><em><span style="font-size: 14px;letter-spacing: 1px;">画外音：额，需要调用方自己来强制读主，说实话，不是特别实用。</span></em></span></p><p><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;"><br></span></p><p><strong><span style="font-size: 14px;letter-spacing: 1px;"><strong style="white-space: normal;"><span style="font-size: 14px;letter-spacing: 1px;">问：</span></strong>主库宕机，读操作受影响么？</span></strong><br></p><p><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;"><strong style="white-space: normal;"><span style="font-size: 14px;letter-spacing: 1px;">答</span></strong><span style="font-size: 14px;letter-spacing: 1px;">：</span>不受影响，mysql-proxy不支持这个功能。</span></p><p><br></p><p><strong><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;">问：想下线一台DB, 又不想停掉server, 怎么办？</span></strong></p><p><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;"><strong style="white-space: normal;"><span style="font-size: 14px;letter-spacing: 1px;">答</span></strong><span style="font-size: 14px;letter-spacing: 1px;">：</span>可以通过管理接口手动上下线后端db：</span></p><p><span style="letter-spacing: 1px;text-decoration: none;font-size: 12px;">remove backend i</span></p><p><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;"><br></span></p><p><strong><span style="font-size: 14px;letter-spacing: 1px;"><strong style="white-space: normal;"><span style="font-size: 14px;letter-spacing: 1px;">问：</span></strong>想给集群中增加一台DB, 不想影响线上正常访问可以吗？</span></strong><br></p><p><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;"><strong style="white-space: normal;"><span style="font-size: 14px;letter-spacing: 1px;">答</span></strong><span style="font-size: 14px;letter-spacing: 1px;">：可以</span>通过管理接口可以实现：</span></p><p><span style="letter-spacing: 1px;text-decoration: none;font-size: 12px;">add master ip:port</span></p><p><span style="letter-spacing: 1px;text-decoration: none;font-size: 12px;">add slave ip:port@weight</span></p><p><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;"><br></span></p><p><strong><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;"><strong style="white-space: normal;"><span style="font-size: 14px;letter-spacing: 1px;">问：</span></strong>Atlas支持mysql的prepare特性吗？</span></strong></p><p><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;"><strong style="white-space: normal;"><span style="font-size: 14px;letter-spacing: 1px;">答</span></strong><span style="font-size: 14px;letter-spacing: 1px;">：</span>不支持，但打算在后续版本中支持。</span></p><p><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;"><br></span></p><p><strong><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;"><strong style="white-space: normal;"><span style="font-size: 14px;letter-spacing: 1px;">问：</span></strong>Altas支持多个主库的运行模式吗？</span></strong></p><p><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;"><strong style="white-space: normal;"><span style="font-size: 14px;letter-spacing: 1px;">答</span></strong><span style="font-size: 14px;letter-spacing: 1px;">：</span>目前还未对于Atlas后面挂接多个主库的情形进行测试过，不建议这样使用。建议使用一主一从或一主多从的模式。</span></p><p><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;"><br></span></p><p><strong><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;"><strong style="white-space: normal;"><span style="font-size: 14px;letter-spacing: 1px;">问：</span></strong>Altas支持SQL安全性过滤吗？</span></strong></p><p><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;"><strong style="white-space: normal;"><span style="font-size: 14px;letter-spacing: 1px;">答</span></strong><span style="font-size: 14px;letter-spacing: 1px;">：支持，不带where字句的delete可以过滤。</span></span></p><p><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;"><span style="font-size: 14px;letter-spacing: 1px;"><br></span></span></p><p><strong><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;"><span style="font-size: 14px;letter-spacing: 1px;"><strong style="white-space: normal;"><span style="font-size: 14px;letter-spacing: 1px;">问：</span></strong>Altas未来有什么发展规划？</span></span></strong></p><p><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;"><span style="font-size: 14px;letter-spacing: 1px;"><strong style="white-space: normal;"><span style="font-size: 14px;letter-spacing: 1px;">答</span></strong><span style="font-size: 14px;letter-spacing: 1px;">：支持跨机器的分库分表，将数据分不到多台机器上。</span></span></span></p><p><br></p><p><span style="font-size: 14px;letter-spacing: 1px;text-decoration: none;">13年底的调研笔记，文中的<strong>“画外音”是我当时的批注</strong>，希望能让大家对Atlas能有一个初步的认识，有疑问之处，欢迎交流。</span></p><p><span style="font-size: 14px;letter-spacing: 1px;"><br></span></p><p><span style="font-size: 14px;letter-spacing: 1px;">相关文章：</span><br></p><p style="white-space: normal;"><span style="font-size: 14px;letter-spacing: 1px;">《</span><a href="http://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==&amp;mid=2651960632&amp;idx=1&amp;sn=769f12c5180bdc37d71c99cdf7b4077f&amp;chksm=bd2d00e48a5a89f2fa42e0c360e31c28cfd9cce7ab31b425cb5ef8da43bef117c95d0ca8c2cd&amp;scene=21#wechat_redirect" target="_blank" style="font-size: 14px;letter-spacing: 1px;">假如让你来设计数据库中间件</a><span style="font-size: 14px;letter-spacing: 1px;">》 &lt;- 火</span></p><p style="white-space: normal;"><span style="font-size: 14px;letter-spacing: 1px;">《</span><a href="http://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==&amp;mid=2651960601&amp;idx=1&amp;sn=4ea55404a2fc96dc5a7bb613bb9e3d32&amp;chksm=bd2d00c58a5a89d307e062e4ad5fe5f0091d514b65881d0829e8f26c5aee965b225fd3eb1909&amp;scene=21#wechat_redirect" target="_blank" style="font-size: 14px;letter-spacing: 1px;">数据库中间件TDDL调研笔记</a><span style="font-size: 14px;letter-spacing: 1px;">》</span></p><p style="white-space: normal;"><span style="font-size: 14px;letter-spacing: 1px;">《</span><a href="http://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==&amp;mid=2651960594&amp;idx=1&amp;sn=b9d39a5591ceeee4e7896627482f05f6&amp;chksm=bd2d00ce8a5a89d885deb207bbdb4a265862888e62fd18c1091830a418b58d4dec1753c6fab9&amp;scene=21#wechat_redirect" target="_blank" style="font-size: 14px;letter-spacing: 1px;">数据库中间件cobar调研笔记</a><span style="font-size: 14px;letter-spacing: 1px;">》</span></p><p style="white-space: normal;"><span style="font-size: 14px;letter-spacing: 1px;">《</span><a href="http://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==&amp;mid=2651960133&amp;idx=1&amp;sn=07acfeac5306f92f81dfccf4c880da4f&amp;chksm=bd2d06998a5a8f8fc8c3bbb2c2ea01825ebe6576a35aa4d9789774dba0f7964baf4edf584f1b&amp;scene=21#wechat_redirect" target="_blank" style="font-size: 14px;letter-spacing: 1px;">数据库中间件mysql-proxy调研笔记</a><span style="font-size: 14px;letter-spacing: 1px;">》</span></p><hr/><a href="http://mp.weixin.qq.com/s?timestamp=1512886848&src=3&ver=1&signature=0dsH*cvrb7sDcdE*f0PtKD4mxxcCZBqQCpMqS7HCyNBsct4LhNg8ttyk4jAVZh144v2Qu0nvlRoytzz4ujea-0HCNH2hzTkZSky5K411dp1I-hPzt6eVVvgPEWy*jK-*tPzVxtTCoMOr4WGPk4AZ555UlrZqnAOryVeou0D1BEE=">微信地址</a> | <a href="https://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==&amp;mid=2651960632&amp;idx=1&amp;sn=769f12c5180bdc37d71c99cdf7b4077f&amp;chksm=bd2d00e48a5a89f2fa42e0c360e31c28cfd9cce7ab31b425cb5ef8da43bef117c95d0ca8c2cd#rd">阅读原文</a>
{% endraw  %}

