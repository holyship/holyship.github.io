---
title: 典型数据库架构设计与实践 | 架构师之路
author: 58沈剑
wechat_source: >-
  http://mp.weixin.qq.com/s?timestamp=1496307788&src=3&ver=1&signature=93SzgWWUmeel8Ref4eZJuAINw7RW66pKPEPOTbmZex4HOyPQTn0MjZ3QpBQlxffEoZlqLmzuXYDnS3RO5p84LNxI8mEVqjeEu8RsUJgwz44ygEs8RylJTQSMsiU2T1Avg7BqFdFRtmZeVUb2fx2xHiO5fBQcaEzi-OxMLIDbzvY=
date: '2017-05-31 00:00:00 +0000'

---

{% raw  %}
<p><span style="font-family: 宋体; font-size: 14px;">本文，将介绍数据库架构设计中的一些<span style="color: rgb(255, 76, 0); font-family: 宋体; font-size: 14px;">基本概念</span>，<span style="color: rgb(255, 76, 0); font-family: 宋体; font-size: 14px;">常见问题</span>以及对应<span style="color: rgb(255, 76, 0); font-family: 宋体; font-size: 14px;">解决方案</span>，为了便于读者理解，将以“用户中心”数据库为例，讲解数据库架构设计的常见玩法。</span></p><p><span style="font-family: Calibri; font-size: 14px;">&nbsp;</span></p><p><strong><span style="font-family: 宋体; font-size: 16px;">一、用户中心</span></strong></p><p><strong><span style="font-family: 宋体; font-size: 14px;">用户中心</span></strong><span style="font-family: 宋体; font-size: 14px;">是一个常见业务，主要提供用户注册、登录、信息查询与修改的服务，其核心元数据为：</span></p><p><span style="font-family: Calibri; font-size: 12px;">User(uid, uname, passwd, sex, age,nickname, …)</span></p><p><span style="font-family: 宋体; font-size: 14px;">其中：</span></p><ul class="list-paddingleft-2" style="list-style-type: disc;"><li><p><span style="font-size: 14px;"><span style="font-family: 宋体; font-size: 14px;"></span><span style="font-family: Calibri; font-size: 14px;">uid</span><span style="font-family: 宋体; font-size: 14px;">为用户</span><span style="font-family: Calibri; font-size: 14px;">ID</span><span style="font-family: 宋体; font-size: 14px;">，主键</span></span></p></li><li><p><span style="font-size: 14px;"><span style="font-family: 宋体; font-size: 14px;"></span><span style="font-family: Calibri; font-size: 14px;">uname, passwd, sex, age, nickname, …</span><span style="font-family: 宋体; font-size: 14px;">等为用户的属性</span></span></p></li></ul><p><span style="font-family: 宋体; font-size: 14px;">数据库设计上，一般来说在业务初期，单库单表就能够搞定这个需求。</span></p><p><span style="font-family: Calibri; font-size: 14px;">&nbsp;</span></p><p><span style="font-size: 16px;"><strong><span style="font-family: 宋体;">二、图示说明</span></strong></span></p><p><span style="font-family: 宋体; font-size: 14px;">为了方便大家理解，后文图片说明较多，其中：</span></p><ul class="list-paddingleft-2" style="list-style-type: disc;"><li><p><span style="font-size: 14px;"><span style="font-family: 宋体; font-size: 14px;">“灰色”方框，表示</span><span style="font-family: Calibri; font-size: 14px;">service</span><span style="font-family: 宋体; font-size: 14px;">，服务</span></span></p></li><li><p><span style="font-size: 14px;"><span style="font-family: 宋体; font-size: 14px;">“紫色”圆框，标识</span><span style="font-family: Calibri; font-size: 14px;">master</span><span style="font-family: 宋体; font-size: 14px;">，主库</span></span></p></li><li><p><span style="font-size: 14px;"><span style="font-family: 宋体; font-size: 14px;">“粉色”圆框，表示</span><span style="font-family: Calibri; font-size: 14px;">slave</span><span style="font-family: 宋体; font-size: 14px;">，从库</span></span></p></li></ul><p><span style="font-family: Calibri; font-size: 14px;">&nbsp;</span></p><p><span style="font-size: 16px;"><strong><span style="font-family: 宋体;">三、单库架构</span></strong></span></p><p><img src="/road5858/images/87957defea6c9e41b3d33f28d1cedd922ae062a4.png" style="width: 90px !important; height: 108px !important; visibility: visible !important;"></p><p><span style="font-family: 宋体; font-size: 14px;">最常见的架构设计如上：</span></p><ul class="list-paddingleft-2" style="list-style-type: disc;"><li><p><span style="font-size: 14px;"><span style="font-family: Calibri; font-size: 14px;">user-service</span><span style="font-family: 宋体; font-size: 14px;">：用户中心服务，对调用者提供友好的</span><span style="font-family: Calibri; font-size: 14px;">RPC</span><span style="font-family: 宋体; font-size: 14px;">接口</span></span></p></li><li><p><span style="font-size: 14px;"><span style="font-family: Calibri; font-size: 14px;">user-db</span><span style="font-family: 宋体; font-size: 14px;">：一个库进行数据存储</span></span></p></li></ul><p><span style="font-family: Calibri; font-size: 14px;">&nbsp;</span></p><p><span style="font-size: 16px;"><strong><span style="font-family: 宋体;">四、分组架构</span></strong></span></p><p><img src="/road5858/images/8c1f9575ff13a3dbfa705c3b5679596dab65998c.png" style="width: 233px !important; height: 182px !important;"></p><p><strong><span style="font-family: 宋体; font-size: 14px;">什么是分组？</span></strong></p><p><strong><span style="font-family: 宋体; font-size: 14px;">答</span></strong><span style="font-family: 宋体; font-size: 14px;">：分组架构是最常见的<span style="color: rgb(255, 76, 0); font-family: 宋体; font-size: 14px;">一主多从，主从同步，读写分离</span>数据库架构：</span></p><ul class="list-paddingleft-2" style="list-style-type: disc;"><li><p><span style="font-size: 14px;"><span style="font-family: Calibri; font-size: 14px;">user-service</span><span style="font-family: 宋体; font-size: 14px;">：依旧是用户中心服务</span></span></p></li><li><p><span style="font-size: 14px;"><span style="font-family: Calibri; font-size: 14px;">user-db-M(master)</span><span style="font-family: 宋体; font-size: 14px;">：主库，提供数据库写服务</span></span></p></li><li><p><span style="font-size: 14px;"><span style="font-family: Calibri; font-size: 14px;">user-db-S(slave)</span><span style="font-family: 宋体; font-size: 14px;">：从库，提供数据库读服务</span></span></p></li></ul><p><span style="color: rgb(255, 76, 0); font-family: 宋体; font-size: 14px;">主和从构成的数据库集群称为“组”</span><span style="font-family: 宋体; font-size: 14px;">。</span></p><p><span style="font-family: Calibri; font-size: 14px;">&nbsp;</span></p><p><strong><span style="font-family: 宋体; font-size: 14px;">分组有什么特点？</span></strong></p><p><strong><span style="font-family: 宋体; font-size: 14px;">答</span></strong><span style="font-family: 宋体; font-size: 14px;">：同一个组里的数据库集群：</span></p><ul class="list-paddingleft-2" style="list-style-type: disc;"><li><p><span style="font-size: 14px;"><span style="font-family: 宋体; font-size: 14px;">主从之间通过</span><span style="font-family: Calibri; font-size: 14px;">binlog</span><span style="font-family: 宋体; font-size: 14px;">进行数据同步</span></span></p></li><li><p><span style="font-family: 宋体; font-size: 14px;">多个实例数据库结构完全相同</span></p></li><li><p><span style="font-family: 宋体; font-size: 14px;">多个实例存储的数据也完全相同，本质上是将数据进行复制</span></p></li></ul><p><span style="font-family: Calibri; font-size: 14px;">&nbsp;</span></p><p><strong><span style="font-family: 宋体; font-size: 14px;">分组架构究竟解决什么问题？</span></strong></p><p><strong><span style="font-family: 宋体; font-size: 14px;">答</span></strong><span style="font-family: 宋体; font-size: 14px;">：<span style="color: rgb(255, 76, 0); font-family: 宋体; font-size: 14px;">大部分互联网业务读多写少</span>，<strong>数据库的读往往最先成为性能瓶颈</strong>，如果希望：</span></p><ul class="list-paddingleft-2" style="list-style-type: disc;"><li><p><span style="font-family: 宋体; font-size: 14px;">线性提升数据库读性能</span></p></li><li><p><span style="font-family: 宋体; font-size: 14px;">通过消除读写锁冲突提升数据库写性能</span></p></li><li><p><span style="font-family: 宋体; font-size: 14px;">通过冗余从库实现数据的“读高可用”</span></p></li></ul><p><span style="font-family: 宋体; font-size: 14px;">此时可以使用分组架构，需要注意的是，<span style="color: rgb(255, 76, 0); font-family: 宋体; font-size: 14px;">分组架构中，数据库的主库依然是写单点</span>。</span></p><p><span style="font-family: Calibri; font-size: 14px;">&nbsp;</span></p><p><span style="font-family: 宋体; font-size: 14px;">一句话总结，<strong>分组解决的是“数据库读写高并发量高”问题</strong>，所实施的架构设计。</span></p><p><span style="font-family: Calibri; font-size: 14px;">&nbsp;</span></p><p><span style="font-size: 16px;"><strong><span style="font-family: 宋体;">五、分片架构</span></strong></span></p><p><img src="/road5858/images/cf74c4f8acc571ddc0e2fa8883060d908d9b7dbd.png" style="width: 221px !important; height: 107px !important;"></p><p><strong><span style="font-family: 宋体; font-size: 14px;">什么是分片？</span></strong></p><p><strong><span style="font-family: 宋体; font-size: 14px;">答</span></strong><span style="font-size: 14px;"><span style="font-family: 宋体; font-size: 14px;">：分片架构是大伙常说的<span style="color: rgb(255, 76, 0); font-family: 宋体; font-size: 14px;">水平切分</span></span><span style="font-family: Calibri; font-size: 14px;">(sharding)</span><span style="font-family: 宋体; font-size: 14px;">数据库架构：</span></span></p><ul class="list-paddingleft-2" style="list-style-type: disc;"><li><p><span style="font-size: 14px;"><span style="font-family: Calibri; font-size: 14px;">user-service</span><span style="font-family: 宋体; font-size: 14px;">：依旧是用户中心服务</span></span></p></li><li><p><span style="font-size: 14px;"><span style="font-family: Calibri; font-size: 14px;">user-db1</span><span style="font-family: 宋体; font-size: 14px;">：水平切分成</span><span style="font-family: Calibri; font-size: 14px;">2</span><span style="font-family: 宋体; font-size: 14px;">份中的第一份</span></span></p></li><li><p><span style="font-size: 14px;"><span style="font-family: Calibri; font-size: 14px;">user-db2</span><span style="font-family: 宋体; font-size: 14px;">：水平切分成</span><span style="font-family: Calibri; font-size: 14px;">2</span><span style="font-family: 宋体; font-size: 14px;">份中的第二份</span></span></p></li></ul><p><span style="font-family: 宋体; font-size: 14px;">分片后，多个数据库实例也会构成一个数据库集群。</span></p><p><span style="font-family: Calibri; font-size: 14px;">&nbsp;</span></p><p><strong><span style="font-family: 宋体; font-size: 14px;">水平切分，到底是分库还是分表？</span></strong></p><p><strong><span style="font-family: 宋体; font-size: 14px;">答</span></strong><span style="font-family: 宋体; font-size: 14px;">：<span style="color: rgb(255, 76, 0); font-family: 宋体; font-size: 14px;">强烈建议分库</span>，而不是分表，因为：</span></p><ul class="list-paddingleft-2" style="list-style-type: disc;"><li><p><span style="font-size: 14px;"><span style="font-family: 宋体; font-size: 14px;">分表依然公用一个数据库文件，仍然有磁盘</span><span style="font-family: Calibri; font-size: 14px;">IO</span><span style="font-family: 宋体; font-size: 14px;">的竞争</span></span></p></li><li><p><span style="font-family: 宋体; font-size: 14px;">分库能够很容易的将数据迁移到不同数据库实例，甚至数据库机器上，扩展性更好</span></p></li></ul><p><span style="font-family: Calibri; font-size: 14px;">&nbsp;</span></p><p><strong><span style="font-family: 宋体; font-size: 14px;">水平切分，用什么算法？</span></strong></p><p><strong><span style="font-family: 宋体; font-size: 14px;">答</span></strong><span style="font-family: 宋体; font-size: 14px;">：常见的水平切分算法有<span style="color: rgb(255, 76, 0); font-family: 宋体; font-size: 14px;">“范围法”和“哈希法”</span>：</span></p><p><img src="/road5858/images/2f3c0324b2ca4491edacfced95b57758b026d08a.png" style="width: 217px !important; height: 106px !important;"></p><p><strong><span style="font-family: 宋体; font-size: 14px;">范围法</span></strong><span style="font-size: 14px;"><span style="font-family: 宋体; font-size: 14px;">如上图：以用户中心的业务主键</span><span style="font-family: Calibri; font-size: 14px;">uid</span><span style="font-family: 宋体; font-size: 14px;">为划分依据，将数据水平切分到两个数据库实例上去：</span></span></p><ul class="list-paddingleft-2" style="list-style-type: disc;"><li><p><span style="font-size: 14px;"><span style="font-family: Calibri; font-size: 14px;">user-db1</span><span style="font-family: 宋体; font-size: 14px;">：存储</span><span style="font-family: Calibri; font-size: 14px;">0</span><span style="font-family: 宋体; font-size: 14px;">到</span><span style="font-family: Calibri; font-size: 14px;">1</span><span style="font-family: 宋体; font-size: 14px;">千万的</span><span style="font-family: Calibri; font-size: 14px;">uid</span><span style="font-family: 宋体; font-size: 14px;">数据</span></span></p></li><li><p><span style="font-size: 14px;"><span style="font-family: Calibri; font-size: 14px;">user-db2</span><span style="font-family: 宋体; font-size: 14px;">：存储</span><span style="font-family: Calibri; font-size: 14px;">0</span><span style="font-family: 宋体; font-size: 14px;">到</span><span style="font-family: Calibri; font-size: 14px;">2</span><span style="font-family: 宋体; font-size: 14px;">千万的</span><span style="font-family: Calibri; font-size: 14px;">uid</span><span style="font-family: 宋体; font-size: 14px;">数据</span></span></p></li></ul><p><br></p><p><img src="/road5858/images/50687013f51747b716bbc85f9f67786220f93a04.png" style="width: 215px !important; height: 104px !important;"></p><p><strong><span style="font-family: 宋体; font-size: 14px;">哈希法</span></strong><span style="font-size: 14px;"><span style="font-family: 宋体; font-size: 14px;">如上图：也是以用户中心的业务主键</span><span style="font-family: Calibri; font-size: 14px;">uid</span><span style="font-family: 宋体; font-size: 14px;">为划分依据，将数据水平切分到两个数据库实例上去：</span></span></p><ul class="list-paddingleft-2" style="list-style-type: disc;"><li><p><span style="font-size: 14px;"><span style="font-family: Calibri; font-size: 14px;">user-db1</span><span style="font-family: 宋体; font-size: 14px;">：存储</span><span style="font-family: Calibri; font-size: 14px;">uid</span><span style="font-family: 宋体; font-size: 14px;">取模得</span><span style="font-family: Calibri; font-size: 14px;">1</span><span style="font-family: 宋体; font-size: 14px;">的</span><span style="font-family: Calibri; font-size: 14px;">uid</span><span style="font-family: 宋体; font-size: 14px;">数据</span></span></p></li><li><p><span style="font-size: 14px;"><span style="font-family: Calibri; font-size: 14px;">user-db2</span><span style="font-family: 宋体; font-size: 14px;">：存储</span><span style="font-family: Calibri; font-size: 14px;">uid</span><span style="font-family: 宋体; font-size: 14px;">取模得</span><span style="font-family: Calibri; font-size: 14px;">0</span><span style="font-family: 宋体; font-size: 14px;">的</span><span style="font-family: Calibri; font-size: 14px;">uid</span><span style="font-family: 宋体; font-size: 14px;">数据</span></span></p></li></ul><p><span style="font-family: 宋体; font-size: 14px;">这两种方法在互联网都有使用，其中<span style="color: rgb(255, 76, 0); font-family: 宋体; font-size: 14px;">哈希法使用较为广泛</span>。</span></p><p><span style="font-family: Calibri; font-size: 14px;">&nbsp;</span></p><p><strong><span style="font-family: 宋体; font-size: 14px;">分片有什么特点？</span></strong></p><p><strong><span style="font-family: 宋体; font-size: 14px;">答</span></strong><span style="font-family: 宋体; font-size: 14px;">：同一个分片里的数据库集群：</span></p><ul class="list-paddingleft-2" style="list-style-type: disc;"><li><p><span style="font-size: 14px;"><span style="font-family: 宋体; font-size: 14px;">多个实例之间本身不直接产生联系，不像主从间有</span><span style="font-family: Calibri; font-size: 14px;">binlog</span><span style="font-family: 宋体; font-size: 14px;">同步</span></span></p></li><li><p><span style="font-family: 宋体; font-size: 14px;">多个实例数据库结构，也完全相同</span></p></li><li><p><span style="font-family: 宋体; font-size: 14px;">多个实例存储的数据之间没有交集，所有实例间数据并集构成全局数据</span></p></li></ul><p><span style="font-family: Calibri; font-size: 14px;">&nbsp;</span></p><p><strong><span style="font-family: 宋体; font-size: 14px;">分片架构究竟解决什么问题？</span></strong></p><p><strong><span style="font-family: 宋体; font-size: 14px;">答</span></strong><span style="font-family: 宋体; font-size: 14px;">：大部分互联网业务数据量很大，<span style="color: rgb(255, 76, 0); font-family: 宋体; font-size: 14px;">单库容量容易成为瓶颈</span>，此时通过分片可以：</span></p><ul class="list-paddingleft-2" style="list-style-type: disc;"><li><p><span style="font-family: 宋体; font-size: 14px;">线性提升数据库写性能，需要注意的是，分组架构是不能线性提升数据库写性能的</span></p></li><li><p><span style="font-family: 宋体; font-size: 14px;">降低单库数据容量</span></p></li></ul><p><span style="font-family: Calibri; font-size: 14px;">&nbsp;</span></p><p><span style="font-family: 宋体; font-size: 14px;">一句话总结，<strong>分片解决的是“数据库数据量大”问题</strong>，所实施的架构设计。</span></p><p><span style="font-family: Calibri; font-size: 14px;">&nbsp;</span></p><p><span style="font-size: 16px;"><strong><span style="font-family: 宋体;">六、分组</span><span style="font-family: Calibri;">+</span></strong><strong><span style="font-family: 宋体;">分片架构</span></strong></span></p><p><img src="/road5858/images/e0304f55e366434e940a14b763eed3dd7a6e07c8.png" style="width: 353px !important; height: 154px !important;"></p><p><span style="font-size: 14px;"><span style="font-family: 宋体; font-size: 14px;">如果业务<strong>读写并发量很高，数据量也很大</strong>，通常需要实施</span><span style="color: rgb(255, 76, 0); font-size: 14px;"><span style="font-family: 宋体; font-size: 14px;">分组</span><span style="font-family: Calibri; font-size: 14px;">+</span><span style="font-family: 宋体; font-size: 14px;">分片</span></span><span style="font-family: 宋体; font-size: 14px;">的数据库架构：</span></span></p><ul class="list-paddingleft-2" style="list-style-type: disc;"><li><p><span style="font-family: 宋体; font-size: 14px;">通过分片来降低单库的数据量，线性提升数据库的写性能</span></p></li><li><p><span style="font-family: 宋体; font-size: 14px;">通过分组来线性提升数据库的读性能，保证读库的高可用</span></p></li></ul><p><span style="font-family: Calibri; font-size: 14px;">&nbsp;</span></p><p><span style="font-size: 16px;"><strong><span style="font-family: 宋体;">七、垂直切分</span></strong></span></p><p><span style="font-family: 宋体; font-size: 14px;">除了水平切分，垂直切分也是一类常见的数据库架构设计，<span style="color: rgb(255, 76, 0); font-family: 宋体; font-size: 14px;">垂直切分一般和业务结合比较紧密</span>。</span></p><p><img src="/road5858/images/c55505f87fe52cce181de191572d91d42e3cb3f5.png" style="width: 225px !important; height: 109px !important;"></p><p><span style="font-family: 宋体; font-size: 14px;">还是以用户中心为例，可以这么进行垂直切分：</span></p><p><span style="font-family: Calibri; font-size: 12px;">User(uid, uname, passwd, sex, age, …)</span></p><p><span style="font-family: Calibri; font-size: 12px;">User_EX(uid, intro, sign, …)</span></p><ul class="list-paddingleft-2" style="list-style-type: disc;"><li><p><span style="font-size: 14px;"><span style="font-family: 宋体; font-size: 14px;">垂直切分开的表，主键都是</span><span style="font-family: Calibri; font-size: 14px;">uid</span></span></p></li><li><p><span style="font-family: 宋体; font-size: 14px;">登录名，密码，性别，年龄等属性放在一个垂直表（库）里</span></p></li><li><p><span style="font-family: 宋体; font-size: 14px;">自我介绍，个人签名等属性放在另一个垂直表（库）里</span></p></li></ul><p><span style="font-family: Calibri; font-size: 14px;">&nbsp;</span></p><p><strong><span style="font-family: 宋体; font-size: 14px;">如何进行垂直切分？</span></strong></p><p><strong><span style="font-family: 宋体; font-size: 14px;">答</span></strong><span style="font-family: 宋体; font-size: 14px;">：根据业务对数据进行垂直切分时，一般要考虑属性的<span style="color: rgb(255, 76, 0); font-family: 宋体; font-size: 14px;">“长度”和“访问频度”</span>两个因素：</span></p><ul class="list-paddingleft-2" style="list-style-type: disc;"><li><p><span style="font-family: 宋体; font-size: 14px;">长度较短，访问频率较高的放在一起</span></p></li><li><p><span style="font-family: 宋体; font-size: 14px;">长度较长，访问频度较低的放在一起</span></p></li></ul><p><span style="font-size: 14px;"><span style="font-family: 宋体; font-size: 14px;">这是因为，数据库会以行</span><span style="font-family: Calibri; font-size: 14px;">(row)</span><span style="font-family: 宋体; font-size: 14px;">为单位，将数</span><span style="font-family: Calibri; font-size: 14px;">load</span><span style="font-family: 宋体; font-size: 14px;">到内存</span><span style="font-family: Calibri; font-size: 14px;">(buffer)</span><span style="font-family: 宋体; font-size: 14px;">里，在内存容量有限的情况下，长度短且访问频度高的属性，内存能够</span><span style="font-family: Calibri; font-size: 14px;">load</span><span style="font-family: 宋体; font-size: 14px;">更多的数据，命中率会更高，磁盘</span><span style="font-family: Calibri; font-size: 14px;">IO</span><span style="font-family: 宋体; font-size: 14px;">会减少，数据库的性能会提升。</span></span></p><p><span style="font-family: Calibri; font-size: 14px;">&nbsp;</span></p><p><strong><span style="font-family: 宋体; font-size: 14px;">垂直切分有什么特点？</span></strong></p><p><strong><span style="font-family: 宋体; font-size: 14px;">答</span></strong><span style="font-family: 宋体; font-size: 14px;">：垂直切分和水平切有相似的地方，又不太相同：</span></p><ul class="list-paddingleft-2" style="list-style-type: disc;"><li><p><span style="font-size: 14px;"><span style="font-family: 宋体; font-size: 14px;">多个实例之间也不直接产生联系，即没有</span><span style="font-family: Calibri; font-size: 14px;">binlog</span><span style="font-family: 宋体; font-size: 14px;">同步</span></span></p></li><li><p><span style="font-family: 宋体; font-size: 14px;">多个实例数据库结构，都不一样</span></p></li><li><p><span style="font-family: 宋体; font-size: 14px;">多个实例存储的数据之间至少有一列交集，一般来说是业务主键，所有实例间数据并集构成全局数据</span></p></li></ul><p><span style="font-family: Calibri; font-size: 14px;">&nbsp;</span></p><p><strong><span style="font-family: 宋体; font-size: 14px;">垂直切分解决什么问题？</span></strong></p><p><strong><span style="font-family: 宋体; font-size: 14px;">答</span></strong><span style="font-size: 14px;"><span style="font-family: 宋体; font-size: 14px;">：垂直切分即可以<span style="color: rgb(255, 76, 0); font-family: 宋体; font-size: 14px;">降低单库的数据量</span>，还可以</span><span style="color: rgb(255, 76, 0); font-size: 14px;"><span style="font-family: 宋体; font-size: 14px;">降低磁盘</span><span style="font-family: Calibri; font-size: 14px;">IO</span><span style="font-family: 宋体; font-size: 14px;">从而提升吞吐量</span></span><span style="font-family: 宋体; font-size: 14px;">，但它与业务结合比较紧密，并不是所有业务都能够进行垂直切分的。</span></span></p><p><span style="font-family: Calibri; font-size: 14px;">&nbsp;</span></p><p><span style="font-size: 16px;"><strong><span style="font-family: 宋体;">八、总结</span></strong></span></p><p><span style="font-family: 宋体; font-size: 14px;">文章较长，希望至少记住这么几点：</span></p><ul class="list-paddingleft-2" style="list-style-type: disc;"><li><p><span style="font-family: 宋体; font-size: 14px;">业务初期用<span style="color: rgb(255, 76, 0); font-family: 宋体; font-size: 14px;">单库</span></span></p></li><li><p><span style="font-family: 宋体; font-size: 14px;">读压力大，读高可用，用<span style="color: rgb(255, 76, 0); font-family: 宋体; font-size: 14px;">分组</span></span></p></li><li><p><span style="font-family: 宋体; font-size: 14px;">数据量大，写线性扩容，用<span style="color: rgb(255, 76, 0); font-family: 宋体; font-size: 14px;">分片</span></span></p></li><li><p><span style="font-family: 宋体; font-size: 14px;">属性短，访问频度高的属性，<span style="color: rgb(255, 76, 0); font-family: 宋体; font-size: 14px;">垂直拆分</span>到一起</span></p></li></ul><p><span style="font-family: Calibri; font-size: 14px;">&nbsp;</span></p><p><span style="font-family: 宋体; font-size: 14px;">希望大伙有收获。</span></p><p><span style="font-family: 宋体; font-size: 14px;">==</span></p><p><span style="font-family: 宋体; font-size: 14px;">相关文章：</span></p><p><span style="font-family: 宋体; font-size: 14px; text-decoration: none;">《</span><a style="font-family: 宋体; font-size: 14px; text-decoration: none;" href="http://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==&amp;mid=2651959855&amp;idx=1&amp;sn=f33abe8ec598c273f29cebb9365ece59&amp;chksm=bd2d07f38a5a8ee58a944507a134e1da1efc3ac9c4d1c4cff261137cd986e51f5fe7cee9de15&amp;scene=21#wechat_redirect" target="_blank" data_ue_src="http://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==&amp;mid=2651959855&amp;idx=1&amp;sn=f33abe8ec598c273f29cebb9365ece59&amp;chksm=bd2d07f38a5a8ee58a944507a134e1da1efc3ac9c4d1c4cff261137cd986e51f5fe7cee9de15&amp;scene=21#wechat_redirect"><span style="font-family: 宋体; font-size: 14px;">100亿数据量1万属性10万并发数据库架构设计</span></a><span style="font-family: 宋体; font-size: 14px; text-decoration: none;">》</span></p><p><span style="font-family: 宋体; font-size: 14px; text-decoration: none;">《</span><a style="font-family: 宋体; font-size: 14px; text-decoration: none;" href="http://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==&amp;mid=2651959883&amp;idx=1&amp;sn=e7df8510c7096a5b069e0f12eaaca010&amp;chksm=bd2d07978a5a8e815c2ae41b16b6b4c579923502fb919008a22bb108a1e920109f25387f8903&amp;scene=21#wechat_redirect" target="_blank" data_ue_src="http://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==&amp;mid=2651959883&amp;idx=1&amp;sn=e7df8510c7096a5b069e0f12eaaca010&amp;chksm=bd2d07978a5a8e815c2ae41b16b6b4c579923502fb919008a22bb108a1e920109f25387f8903&amp;scene=21#wechat_redirect"><span style="font-family: 宋体; font-size: 14px;">数据库秒级平滑扩容架构方案</span></a><span style="font-family: 宋体; font-size: 14px; text-decoration: none;">》</span></p><p><span style="font-family: 宋体; font-size: 14px; text-decoration: none;">《</span><a style="font-family: 宋体; font-size: 14px; text-decoration: none;" href="http://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==&amp;mid=2651959906&amp;idx=1&amp;sn=2cbdc66cfb5b53cf4327a1e0d18d9b4a&amp;chksm=bd2d07be8a5a8ea86dc3c04eced3f411ee5ec207f73d317245e1fefea1628feb037ad71531bc&amp;scene=21#wechat_redirect" target="_blank" data_ue_src="http://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==&amp;mid=2651959906&amp;idx=1&amp;sn=2cbdc66cfb5b53cf4327a1e0d18d9b4a&amp;chksm=bd2d07be8a5a8ea86dc3c04eced3f411ee5ec207f73d317245e1fefea1628feb037ad71531bc&amp;scene=21#wechat_redirect"><span style="font-family: 宋体; font-size: 14px;">58到家数据库30条军规</span></a><span style="font-family: 宋体; font-size: 14px; text-decoration: none;">》</span></p><p><span style="font-family: 宋体; font-size: 14px; text-decoration: none;">《</span><a style="font-family: 宋体; font-size: 14px; text-decoration: none;" href="http://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==&amp;mid=2651959942&amp;idx=1&amp;sn=e9d3fe111b8a1d44335f798bbb6b9eea&amp;chksm=bd2d075a8a5a8e4cad985b847778aa83056e22931767bb835132c04571b66d5434020fd4147f&amp;scene=21#wechat_redirect" target="_blank" data_ue_src="http://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==&amp;mid=2651959942&amp;idx=1&amp;sn=e9d3fe111b8a1d44335f798bbb6b9eea&amp;chksm=bd2d075a8a5a8e4cad985b847778aa83056e22931767bb835132c04571b66d5434020fd4147f&amp;scene=21#wechat_redirect"><span style="font-family: 宋体; font-size: 14px;">业界难题-“夸库分页”的四种方案</span></a><span style="font-family: 宋体; font-size: 14px; text-decoration: none;">》</span></p><p><span style="font-family: 宋体; font-size: 14px; text-decoration: none;">《</span><a style="font-family: 宋体; font-size: 14px; text-decoration: none;" href="http://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==&amp;mid=2651959992&amp;idx=1&amp;sn=eb2fbd7d7922db42a593c304e50a65b7&amp;chksm=bd2d07648a5a8e72d489022ec6006274d7e43ab48449b255d5661658c2af8e9221977a9609ed&amp;scene=21#wechat_redirect" target="_blank" data_ue_src="http://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==&amp;mid=2651959992&amp;idx=1&amp;sn=eb2fbd7d7922db42a593c304e50a65b7&amp;chksm=bd2d07648a5a8e72d489022ec6006274d7e43ab48449b255d5661658c2af8e9221977a9609ed&amp;scene=21#wechat_redirect"><span style="font-family: 宋体; font-size: 14px;">100亿数据平滑迁移却不影响服务</span></a><span style="font-family: 宋体; font-size: 14px; text-decoration: none;">》</span></p><hr/><a href="http://mp.weixin.qq.com/s?timestamp=1496307788&src=3&ver=1&signature=93SzgWWUmeel8Ref4eZJuAINw7RW66pKPEPOTbmZex4HOyPQTn0MjZ3QpBQlxffEoZlqLmzuXYDnS3RO5p84LNxI8mEVqjeEu8RsUJgwz44ygEs8RylJTQSMsiU2T1Avg7BqFdFRtmZeVUb2fx2xHiO5fBQcaEzi-OxMLIDbzvY=">微信地址</a> | <a href="https://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==&amp;mid=2651960128&amp;idx=1&amp;sn=8e0e409b10ab9db549432af461385314&amp;chksm=bd2d069c8a5a8f8ab5cdee602d4062bbdbb25da290668515d36682afa854e374d2a5ff02004b#rd">阅读原文</a>
{% endraw  %}

