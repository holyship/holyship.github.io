---
title: 我是如何 Python 一句话校验软件哈希值的
author: 余弦
wechat_source: >-
  http://mp.weixin.qq.com/s?timestamp=1495452209&src=3&ver=1&signature=l12Tij*JEXuplVxFRWdZeQxQY2ngx9LujvbLni8YNqKJGaXGq*fe8b5RcL0UU4j4NM97wHUO5KKxejD1E2hXuuzgyxj48Ls0*iNItpTsottAusuBdGTh8*khPDyEgQbZKzEG5uRHRdG*i1MCo0X51NcDUu7a0ToDdOfj1paJYRo=
date: '2017-05-21 00:00:00 +0000'

---

{% raw  %}
<p>我们经常要下载各种软件，你会注意到很多好软件的下载页面都会注明这个软件的哈希值，比如 Shadowsocks：</p><p><br></p><p><span style="color: rgb(192, 0, 0); max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; font-size: 16px;">https://github.com/shadowsocks/shadowsocks-windows/releases</span></p><p><br></p><p><img src="http://mmbiz.qpic.cn/mmbiz_png/kicMePHlP6TD4diasL58rbtgdt9An5YciahOqZBXO642gCxER2RicAs2XX01gn9rQB7Fpalw7QSw6XEj2fQvRqDq1g/0?wx_fmt=png" style="width: 761px !important; height: 392px !important; visibility: visible !important;"></p><p>你可以看到几个哈希值：MD5、SHA-1、SHA-256、SHA-512（这几个哈希的安全性也是如此递增的）。</p><p><br></p><p>现在，我们下载了 Shadowsocks，如何在本地校验呢？网上各种工具不少，但是放心的有多少？如果你和我一样是 Python 党，那就简单了，一句话就可以优雅地搞定这种校验。</p><p><br></p><p><strong><span style="color: rgb(192, 0, 0); max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; font-size: 16px;">MD5</span></strong><br></p><blockquote><p>python -c "import hashlib,sys;print hashlib.<span style="color: rgb(192, 0, 0); max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; font-size: 16px;">md5</span>(open(sys.argv[1],'rb').read()).hexdigest()" Shadowsocks.exe</p></blockquote><p><br></p><p><strong><span style="color: rgb(192, 0, 0); max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; font-size: 16px;">SHA-1</span></strong><br></p><blockquote><p>python -c "import hashlib,sys;print hashlib.<span style="color: rgb(192, 0, 0); max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; font-size: 16px;">sha1</span>(open(sys.argv[1],'rb').read()).hexdigest()" Shadowsocks.exe</p></blockquote><p><br></p><p><strong><span style="color: rgb(192, 0, 0); max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; font-size: 16px;">SHA-256</span></strong><br></p><blockquote><p>python -c "import hashlib,sys;print hashlib.<span style="color: rgb(192, 0, 0); max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; font-size: 16px;">sha256</span>(open(sys.argv[1],'rb').read()).hexdigest()" Shadowsocks.exe<br></p></blockquote><p><br></p><p><strong><span style="color: rgb(192, 0, 0); max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; font-size: 16px;">SHA-512</span></strong><br></p><blockquote><p>python -c "import hashlib,sys;print hashlib.<span style="color: rgb(192, 0, 0); max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; font-size: 16px;">sha512</span>(open(sys.argv[1],'rb').read()).hexdigest()" Shadowsocks.exe<br></p></blockquote><p><br></p><p>效果如图：</p><p><br></p><p><img src="http://mmbiz.qpic.cn/mmbiz_png/kicMePHlP6TD4diasL58rbtgdt9An5YciahtQXoeYeZZnGtXh6J1SwzMeiaKboOMZ9yZLkXDaQ6lepTSDzBxqVFUEw/0?wx_fmt=png" style="width: 770px !important; height: 194.468px !important;"></p><p><br></p><p>通过这样的一句话就可以生成对应的哈希值。一对比，如果哈希值不一样，那就知道你下载的软件被“中间人”动过手脚了:-)<br></p><p><br></p><p>这个小技巧我用了很久了，也写了个 Python 哈希校验小工具，不过有这样的一句话，小工具就无所谓了。<br></p><p><br></p><p>题外话下，之后无论发生什么大事，比如“方程式被泄露事件”下个月开始又会来些大招，如果有些东西放出了，记得校验下哈希值，因为这个江湖险恶。<br></p><p><br></p><p><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; overflow-wrap: break-word !important;">-----------------</span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background-color: rgb(255, 255, 255); box-sizing: border-box !important; overflow-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; overflow-wrap: break-word !important;">微信公众号「<span style="max-width: 100%; color: rgb(192, 0, 0); box-sizing: border-box !important; overflow-wrap: break-word !important;"><strong style="max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">Lazy-Thought</strong></span>」</span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background-color: rgb(255, 255, 255); box-sizing: border-box !important; overflow-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; overflow-wrap: break-word !important;">几个黑客在维护，都很懒，都想改变点什么</span></p><hr/><a href="http://mp.weixin.qq.com/s?timestamp=1495452209&src=3&ver=1&signature=l12Tij*JEXuplVxFRWdZeQxQY2ngx9LujvbLni8YNqKJGaXGq*fe8b5RcL0UU4j4NM97wHUO5KKxejD1E2hXuuzgyxj48Ls0*iNItpTsottAusuBdGTh8*khPDyEgQbZKzEG5uRHRdG*i1MCo0X51NcDUu7a0ToDdOfj1paJYRo=">微信地址</a>
{% endraw  %}

