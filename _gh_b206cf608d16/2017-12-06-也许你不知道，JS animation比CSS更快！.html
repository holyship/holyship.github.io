---
title: 也许你不知道，JS animation比CSS更快！
author: 凯小凯 译
wechat_source: >-
  http://mp.weixin.qq.com/s?timestamp=1512890585&src=3&ver=1&signature=nJHJ*lkpUmWR2w6oU7bDOsSS-8Q91g9q3gppAf*YzodGa8*kFsjsjxlxjgvUsxhcPuHPudx98CYtGO1llmvZoDiYwKh7BRXwc39sMY4DhI1tOgVYfRnLxLmrx49xXCrTNf6VoojQrPApBvgtTPMALfUV1ZpqHySweGVzq2eJ2tA=
date: '2017-12-05 00:00:00 +0000'

---

{% raw  %}
<p class="" style="margin: 15px auto;border-width: 0px;border-style: initial;border-color: initial;line-height: 1.5;white-space: normal;word-break: break-word;hyphens: auto;overflow: hidden;text-align: center;font-size: 16px;max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);"><img src="http://mmbiz.qpic.cn/mmbiz_gif/d8tibSEfhMMrjNKjEmoX7KR4FZKdwlrguCicepySoficvu2OMNxXQT0YbHdMcVtVV4P8ZqsqXBnegtw4VibYxhichMQ/0?wx_fmt=gif" style="border-width: 0px; border-style: initial; border-color: initial; vertical-align: middle; box-sizing: border-box !important; word-wrap: break-word !important; visibility: visible !important; width: 720px !important; height: 100px !important;"></p><p class="" style="margin-top: 1em;margin-bottom: 1em;border-width: 0px;border-style: initial;border-color: initial;line-height: 1.5;white-space: pre-wrap;word-break: break-word;hyphens: auto;max-width: 100%;color: rgb(51, 51, 51);"><span style="background-color: rgb(255, 254, 213);">编者按：本文由凯小凯在众成翻译平台上翻译。文中出现了很多代码例子，由于微信限制，建议你点击下方阅读原文查看哦！</span></p><p style="margin-top: 1em;margin-bottom: 1em;border-width: 0px;border-style: initial;border-color: initial;line-height: 1.5;white-space: pre-wrap;word-break: break-word;word-wrap: break-word;hyphens: auto;color: rgb(51, 51, 51);">基于JavaScript的动画竟然已经默默地比CSS的transition动画快了？而且，Adobe和 Google竟然一直在发布可以媲美原生应用的富媒体移动站点？</p><p style="margin-top: 1em;margin-bottom: 1em;border-width: 0px;border-style: initial;border-color: initial;line-height: 1.5;white-space: pre-wrap;word-break: break-word;word-wrap: break-word;hyphens: auto;color: rgb(51, 51, 51);">这篇文章将会逐点讲解基于JavaScript的DOM动画库，比如Velocity.js和GSAP，是如何比jQuery和基于CSS的动画库高效的。</p><h2 style="margin-top: 22px;margin-bottom: 12px;border-width: 0px 0px 1px;border-top-style: initial;border-right-style: initial;border-bottom-style: solid;border-left-style: initial;border-top-color: initial;border-right-color: initial;border-bottom-color: rgb(25, 128, 230);border-left-color: initial;font-weight: bold;word-break: break-all;word-wrap: break-word;font-size: 20px;color: rgb(25, 128, 230);text-align: center;">jQuery</h2><p style="margin-top: 8px;margin-bottom: 1em;border-width: 0px;border-style: initial;border-color: initial;line-height: 1.5;white-space: pre-wrap;word-break: break-word;word-wrap: break-word;hyphens: auto;color: rgb(51, 51, 51);">让我们先从这个事实开始：JavaScript和jQuery被错误的混淆了。JavaScript的动画是快的，但是jQuery的动画慢。为什么？因为虽然jQuery很强大，但是它的目标从来不是为了成为一个高效的动画引擎。</p><ul style="" class="list-paddingleft-2"><li><p style="margin-top: 1em;margin-bottom: 1em;border-width: 0px;border-style: initial;border-color: initial;line-height: 1.5;white-space: pre-wrap;word-break: break-word;word-wrap: break-word;hyphens: auto;">jQuery不能避免<span class="" style="border-width: 0px;border-style: initial;border-color: initial;word-break: break-word;word-wrap: break-word;hyphens: auto;">布局震荡</span>因为它的代码除了动画还提供了很多功能。</p></li><li><p style="margin-top: 1em;margin-bottom: 1em;border-width: 0px;border-style: initial;border-color: initial;line-height: 1.5;white-space: pre-wrap;word-break: break-word;word-wrap: break-word;hyphens: auto;">jQuery的内存消耗经常触发垃圾回收，导致<span class="" style="border-width: 0px;border-style: initial;border-color: initial;word-break: break-word;word-wrap: break-word;hyphens: auto;">动画卡住</span></p></li><li><p style="margin-top: 1em;margin-bottom: 1em;border-width: 0px;border-style: initial;border-color: initial;line-height: 1.5;white-space: pre-wrap;word-break: break-word;word-wrap: break-word;hyphens: auto;">jQuery使用setInterval而不是requestAnimationFrame (RAF)为了<span class="" style="border-width: 0px;border-style: initial;border-color: initial;word-break: break-word;word-wrap: break-word;hyphens: auto;">避免一些bug</span></p></li></ul><p style="margin-top: 1em;margin-bottom: 1em;border-width: 0px;border-style: initial;border-color: initial;line-height: 1.5;white-space: pre-wrap;word-break: break-word;word-wrap: break-word;hyphens: auto;color: rgb(51, 51, 51);">注意，布局震荡引起了动画<strong style="border-width: 0px;border-style: initial;border-color: initial;">开始</strong>处的卡顿，垃圾回收导致了动画<strong style="border-width: 0px;border-style: initial;border-color: initial;">进行</strong>中的卡顿，RAF的缺席导致了帧率低。</p><h2 style="margin-top: 22px;margin-bottom: 12px;border-width: 0px 0px 1px;border-top-style: initial;border-right-style: initial;border-bottom-style: solid;border-left-style: initial;border-top-color: initial;border-right-color: initial;border-bottom-color: rgb(25, 128, 230);border-left-color: initial;font-weight: bold;word-break: break-all;word-wrap: break-word;font-size: 20px;color: rgb(25, 128, 230);text-align: center;">实现的例子</h2><p style="margin-top: 8px;margin-bottom: 1em;border-width: 0px;border-style: initial;border-color: initial;line-height: 1.5;white-space: pre-wrap;word-break: break-word;word-wrap: break-word;hyphens: auto;color: rgb(51, 51, 51);">避免布局震荡，包括简单地合并DOM查询和DOM更新：</p><blockquote class="" style="border-width: 0px;border-style: initial;border-color: initial;padding-left: 0px;color: rgb(51, 51, 51);"><pre class="" style="border-width: 0px;border-style: initial;border-color: initial;padding: 1em;overflow: auto;background-color: rgb(39, 40, 34);color: rgb(248, 248, 242);"><p class="" style="margin-top: 3px;margin-bottom: 3px;border-width: 0px;border-style: initial;border-color: initial;line-height: 16px;word-break: break-word;word-wrap: break-word;hyphens: auto;font-size: 14px;white-space: nowrap !important;"><span class="" style="border-width: 0px;border-style: initial;border-color: initial;color: rgb(102, 217, 239);">var</span>&nbsp;currentTop<span class="" style="border-width: 0px;border-style: initial;border-color: initial;">,</span></p><p class="" style="margin-top: 3px;margin-bottom: 3px;border-width: 0px;border-style: initial;border-color: initial;line-height: 16px;word-break: break-word;word-wrap: break-word;hyphens: auto;font-size: 14px;white-space: nowrap !important;">&nbsp;&nbsp;currentLeft<span class="" style="border-width: 0px;border-style: initial;border-color: initial;">;</span></p><p class="" style="margin-top: 3px;margin-bottom: 3px;border-width: 0px;border-style: initial;border-color: initial;line-height: 0;word-break: break-word;word-wrap: break-word;hyphens: auto;font-size: 14px;height: 6px;white-space: nowrap !important;"><br style="border-width: 0px;border-style: initial;border-color: initial;"></p><p class="" style="margin-top: 3px;margin-bottom: 3px;border-width: 0px;border-style: initial;border-color: initial;line-height: 16px;word-break: break-word;word-wrap: break-word;hyphens: auto;font-size: 14px;white-space: nowrap !important;"><span class="" spellcheck="true" style="border-width: 0px;border-style: initial;border-color: initial;color: slategray;">/* 有布局震荡 */</span></p><p class="" style="margin-top: 3px;margin-bottom: 3px;border-width: 0px;border-style: initial;border-color: initial;line-height: 16px;word-break: break-word;word-wrap: break-word;hyphens: auto;font-size: 14px;white-space: nowrap !important;">currentTop&nbsp;<span class="" style="border-width: 0px;border-style: initial;border-color: initial;">=</span>&nbsp;element<span class="" style="border-width: 0px;border-style: initial;border-color: initial;">.</span>style<span class="" style="border-width: 0px;border-style: initial;border-color: initial;">.</span>top<span class="" style="border-width: 0px;border-style: initial;border-color: initial;">;</span>&nbsp;<span class="" spellcheck="true" style="border-width: 0px;border-style: initial;border-color: initial;color: slategray;">/* QUERY */</span></p><p class="" style="margin-top: 3px;margin-bottom: 3px;border-width: 0px;border-style: initial;border-color: initial;line-height: 16px;word-break: break-word;word-wrap: break-word;hyphens: auto;font-size: 14px;white-space: nowrap !important;">element<span class="" style="border-width: 0px;border-style: initial;border-color: initial;">.</span>style<span class="" style="border-width: 0px;border-style: initial;border-color: initial;">.</span>top&nbsp;<span class="" style="border-width: 0px;border-style: initial;border-color: initial;">=</span>&nbsp;currentTop&nbsp;<span class="" style="border-width: 0px;border-style: initial;border-color: initial;">+</span>&nbsp;<span class="" style="border-width: 0px;border-style: initial;border-color: initial;color: rgb(174, 129, 255);">1</span><span class="" style="border-width: 0px;border-style: initial;border-color: initial;">;</span>&nbsp;<span class="" spellcheck="true" style="border-width: 0px;border-style: initial;border-color: initial;color: slategray;">/* UPDATE */</span></p><p class="" style="margin-top: 3px;margin-bottom: 3px;border-width: 0px;border-style: initial;border-color: initial;line-height: 0;word-break: break-word;word-wrap: break-word;hyphens: auto;font-size: 14px;height: 6px;white-space: nowrap !important;"><br style="border-width: 0px;border-style: initial;border-color: initial;"></p><p class="" style="margin-top: 3px;margin-bottom: 3px;border-width: 0px;border-style: initial;border-color: initial;line-height: 16px;word-break: break-word;word-wrap: break-word;hyphens: auto;font-size: 14px;white-space: nowrap !important;">currentLeft&nbsp;<span class="" style="border-width: 0px;border-style: initial;border-color: initial;">=</span>&nbsp;element<span class="" style="border-width: 0px;border-style: initial;border-color: initial;">.</span>style<span class="" style="border-width: 0px;border-style: initial;border-color: initial;">.</span>left<span class="" style="border-width: 0px;border-style: initial;border-color: initial;">;</span>&nbsp;<span class="" spellcheck="true" style="border-width: 0px;border-style: initial;border-color: initial;color: slategray;">/* QUERY */</span></p><p class="" style="margin-top: 3px;margin-bottom: 3px;border-width: 0px;border-style: initial;border-color: initial;line-height: 16px;word-break: break-word;word-wrap: break-word;hyphens: auto;font-size: 14px;white-space: nowrap !important;">element<span class="" style="border-width: 0px;border-style: initial;border-color: initial;">.</span>style<span class="" style="border-width: 0px;border-style: initial;border-color: initial;">.</span>left&nbsp;<span class="" style="border-width: 0px;border-style: initial;border-color: initial;">=</span>&nbsp;currentLeft&nbsp;<span class="" style="border-width: 0px;border-style: initial;border-color: initial;">+</span>&nbsp;<span class="" style="border-width: 0px;border-style: initial;border-color: initial;color: rgb(174, 129, 255);">1</span><span class="" style="border-width: 0px;border-style: initial;border-color: initial;">;</span>&nbsp;<span class="" spellcheck="true" style="border-width: 0px;border-style: initial;border-color: initial;color: slategray;">/* UPDATE */</span></p><p class="" style="margin-top: 3px;margin-bottom: 3px;border-width: 0px;border-style: initial;border-color: initial;line-height: 0;word-break: break-word;word-wrap: break-word;hyphens: auto;font-size: 14px;height: 6px;white-space: nowrap !important;"><br style="border-width: 0px;border-style: initial;border-color: initial;"></p><p class="" style="margin-top: 3px;margin-bottom: 3px;border-width: 0px;border-style: initial;border-color: initial;line-height: 16px;word-break: break-word;word-wrap: break-word;hyphens: auto;font-size: 14px;white-space: nowrap !important;"><span class="" spellcheck="true" style="border-width: 0px;border-style: initial;border-color: initial;color: slategray;">/* 没有布局震荡 */</span></p><p class="" style="margin-top: 3px;margin-bottom: 3px;border-width: 0px;border-style: initial;border-color: initial;line-height: 16px;word-break: break-word;word-wrap: break-word;hyphens: auto;font-size: 14px;white-space: nowrap !important;">currentTop&nbsp;<span class="" style="border-width: 0px;border-style: initial;border-color: initial;">=</span>&nbsp;element<span class="" style="border-width: 0px;border-style: initial;border-color: initial;">.</span>style<span class="" style="border-width: 0px;border-style: initial;border-color: initial;">.</span>top<span class="" style="border-width: 0px;border-style: initial;border-color: initial;">;</span>&nbsp;<span class="" spellcheck="true" style="border-width: 0px;border-style: initial;border-color: initial;color: slategray;">/* QUERY */</span></p><p class="" style="margin-top: 3px;margin-bottom: 3px;border-width: 0px;border-style: initial;border-color: initial;line-height: 16px;word-break: break-word;word-wrap: break-word;hyphens: auto;font-size: 14px;white-space: nowrap !important;">currentLeft&nbsp;<span class="" style="border-width: 0px;border-style: initial;border-color: initial;">=</span>&nbsp;element<span class="" style="border-width: 0px;border-style: initial;border-color: initial;">.</span>style<span class="" style="border-width: 0px;border-style: initial;border-color: initial;">.</span>left<span class="" style="border-width: 0px;border-style: initial;border-color: initial;">;</span>&nbsp;<span class="" spellcheck="true" style="border-width: 0px;border-style: initial;border-color: initial;color: slategray;">/* QUERY */</span></p><p class="" style="margin-top: 3px;margin-bottom: 3px;border-width: 0px;border-style: initial;border-color: initial;line-height: 0;word-break: break-word;word-wrap: break-word;hyphens: auto;font-size: 14px;height: 6px;white-space: nowrap !important;"><br style="border-width: 0px;border-style: initial;border-color: initial;"></p><p class="" style="margin-top: 3px;margin-bottom: 3px;border-width: 0px;border-style: initial;border-color: initial;line-height: 16px;word-break: break-word;word-wrap: break-word;hyphens: auto;font-size: 14px;white-space: nowrap !important;">element<span class="" style="border-width: 0px;border-style: initial;border-color: initial;">.</span>style<span class="" style="border-width: 0px;border-style: initial;border-color: initial;">.</span>top&nbsp;<span class="" style="border-width: 0px;border-style: initial;border-color: initial;">=</span>&nbsp;currentTop&nbsp;<span class="" style="border-width: 0px;border-style: initial;border-color: initial;">+</span>&nbsp;<span class="" style="border-width: 0px;border-style: initial;border-color: initial;color: rgb(174, 129, 255);">1</span><span class="" style="border-width: 0px;border-style: initial;border-color: initial;">;</span>&nbsp;<span class="" spellcheck="true" style="border-width: 0px;border-style: initial;border-color: initial;color: slategray;">/* UPDATE */</span></p><p class="" style="margin-top: 3px;margin-bottom: 3px;border-width: 0px;border-style: initial;border-color: initial;line-height: 16px;word-break: break-word;word-wrap: break-word;hyphens: auto;font-size: 14px;white-space: nowrap !important;">element<span class="" style="border-width: 0px;border-style: initial;border-color: initial;">.</span>style<span class="" style="border-width: 0px;border-style: initial;border-color: initial;">.</span>left&nbsp;<span class="" style="border-width: 0px;border-style: initial;border-color: initial;">=</span>&nbsp;currentLeft&nbsp;<span class="" style="border-width: 0px;border-style: initial;border-color: initial;">+</span>&nbsp;<span class="" style="border-width: 0px;border-style: initial;border-color: initial;color: rgb(174, 129, 255);">1</span><span class="" style="border-width: 0px;border-style: initial;border-color: initial;">;</span>&nbsp;<span class="" spellcheck="true" style="border-width: 0px;border-style: initial;border-color: initial;color: slategray;">/* UPDATE */</span></p></pre></blockquote><p style="margin-top: 1em;margin-bottom: 1em;border-width: 0px;border-style: initial;border-color: initial;line-height: 1.5;white-space: pre-wrap;word-break: break-word;word-wrap: break-word;hyphens: auto;color: rgb(51, 51, 51);">发生在更新之后的查询会强制浏览器立马重新布局，并计算给出页面样式的计算值（把更新的影响考虑在内）。这对于运行于16ms间隔的动画来讲，会产生巨大的开销。</p><p style="margin-top: 1em;margin-bottom: 1em;border-width: 0px;border-style: initial;border-color: initial;line-height: 1.5;white-space: pre-wrap;word-break: break-word;word-wrap: break-word;hyphens: auto;color: rgb(51, 51, 51);">同样，实现RAF并不需要对既有代码改动很大。让我们来对比一下RAF的实现和setInterval的实现：</p><blockquote class="" style="border-width: 0px;border-style: initial;border-color: initial;padding-left: 0px;color: rgb(51, 51, 51);"><pre class="" style="border-width: 0px;border-style: initial;border-color: initial;padding: 1em;overflow: auto;background-color: rgb(39, 40, 34);color: rgb(248, 248, 242);"><p class="" style="margin-top: 3px;margin-bottom: 3px;border-width: 0px;border-style: initial;border-color: initial;line-height: 16px;word-break: break-word;word-wrap: break-word;hyphens: auto;font-size: 14px;white-space: nowrap !important;"><span class="" style="border-width: 0px;border-style: initial;border-color: initial;color: rgb(102, 217, 239);">var</span>&nbsp;startingTop&nbsp;<span class="" style="border-width: 0px;border-style: initial;border-color: initial;">=</span>&nbsp;<span class="" style="border-width: 0px;border-style: initial;border-color: initial;color: rgb(174, 129, 255);">0</span><span class="" style="border-width: 0px;border-style: initial;border-color: initial;">;</span></p><p class="" style="margin-top: 3px;margin-bottom: 3px;border-width: 0px;border-style: initial;border-color: initial;line-height: 0;word-break: break-word;word-wrap: break-word;hyphens: auto;font-size: 14px;height: 6px;white-space: nowrap !important;"><br style="border-width: 0px;border-style: initial;border-color: initial;"></p><p class="" style="margin-top: 3px;margin-bottom: 3px;border-width: 0px;border-style: initial;border-color: initial;line-height: 16px;word-break: break-word;word-wrap: break-word;hyphens: auto;font-size: 14px;white-space: nowrap !important;"><span class="" spellcheck="true" style="border-width: 0px;border-style: initial;border-color: initial;color: slategray;">/* setInterval: 每16ms运行一次来达到60fps (1000ms/60 ~= 16ms). */</span></p><p class="" style="margin-top: 3px;margin-bottom: 3px;border-width: 0px;border-style: initial;border-color: initial;line-height: 16px;word-break: break-word;word-wrap: break-word;hyphens: auto;font-size: 14px;white-space: nowrap !important;"><span class="" style="border-width: 0px;border-style: initial;border-color: initial;color: rgb(230, 219, 116);">setInterval</span><span class="" style="border-width: 0px;border-style: initial;border-color: initial;">(</span><span class="" style="border-width: 0px;border-style: initial;border-color: initial;color: rgb(102, 217, 239);">function</span><span class="" style="border-width: 0px;border-style: initial;border-color: initial;">(</span><span class="" style="border-width: 0px;border-style: initial;border-color: initial;">)</span>&nbsp;<span class="" style="border-width: 0px;border-style: initial;border-color: initial;">{</span></p><p class="" style="margin-top: 3px;margin-bottom: 3px;border-width: 0px;border-style: initial;border-color: initial;line-height: 16px;word-break: break-word;word-wrap: break-word;hyphens: auto;font-size: 14px;white-space: nowrap !important;">&nbsp;&nbsp;<span class="" spellcheck="true" style="border-width: 0px;border-style: initial;border-color: initial;color: slategray;">/* 由于这里的代码会在1s内执行60次，所以我们把top属性每秒1单位的增长分成60份 */</span></p><p class="" style="margin-top: 3px;margin-bottom: 3px;border-width: 0px;border-style: initial;border-color: initial;line-height: 16px;word-break: break-word;word-wrap: break-word;hyphens: auto;font-size: 14px;white-space: nowrap !important;">&nbsp;&nbsp;&nbsp;&nbsp;element<span class="" style="border-width: 0px;border-style: initial;border-color: initial;">.</span>style<span class="" style="border-width: 0px;border-style: initial;border-color: initial;">.</span>top&nbsp;<span class="" style="border-width: 0px;border-style: initial;border-color: initial;">=</span>&nbsp;<span class="" style="border-width: 0px;border-style: initial;border-color: initial;">(</span>startingTop&nbsp;<span class="" style="border-width: 0px;border-style: initial;border-color: initial;">+</span><span class="" style="border-width: 0px;border-style: initial;border-color: initial;">=</span>&nbsp;<span class="" style="border-width: 0px;border-style: initial;border-color: initial;color: rgb(174, 129, 255);">1</span><span class="" style="border-width: 0px;border-style: initial;border-color: initial;">/</span><span class="" style="border-width: 0px;border-style: initial;border-color: initial;color: rgb(174, 129, 255);">60</span><span class="" style="border-width: 0px;border-style: initial;border-color: initial;">)</span><span class="" style="border-width: 0px;border-style: initial;border-color: initial;">;</span></p><p class="" style="margin-top: 3px;margin-bottom: 3px;border-width: 0px;border-style: initial;border-color: initial;line-height: 16px;word-break: break-word;word-wrap: break-word;hyphens: auto;font-size: 14px;white-space: nowrap !important;"><span class="" style="border-width: 0px;border-style: initial;border-color: initial;">}</span><span class="" style="border-width: 0px;border-style: initial;border-color: initial;">,</span>&nbsp;<span class="" style="border-width: 0px;border-style: initial;border-color: initial;color: rgb(174, 129, 255);">16</span><span class="" style="border-width: 0px;border-style: initial;border-color: initial;">)</span><span class="" style="border-width: 0px;border-style: initial;border-color: initial;">;</span></p><p class="" style="margin-top: 3px;margin-bottom: 3px;border-width: 0px;border-style: initial;border-color: initial;line-height: 0;word-break: break-word;word-wrap: break-word;hyphens: auto;font-size: 14px;height: 6px;white-space: nowrap !important;"><br style="border-width: 0px;border-style: initial;border-color: initial;"></p><p class="" style="margin-top: 3px;margin-bottom: 3px;border-width: 0px;border-style: initial;border-color: initial;line-height: 16px;word-break: break-word;word-wrap: break-word;hyphens: auto;font-size: 14px;white-space: nowrap !important;"><span class="" spellcheck="true" style="border-width: 0px;border-style: initial;border-color: initial;color: slategray;">/* requestAnimationFrame: 不管浏览器是否处于最优状态，都试图运行在60fps */</span></p><p class="" style="margin-top: 3px;margin-bottom: 3px;border-width: 0px;border-style: initial;border-color: initial;line-height: 16px;word-break: break-word;word-wrap: break-word;hyphens: auto;font-size: 14px;white-space: nowrap !important;"><span class="" style="border-width: 0px;border-style: initial;border-color: initial;color: rgb(102, 217, 239);">function</span>&nbsp;tick&nbsp;<span class="" style="border-width: 0px;border-style: initial;border-color: initial;">(</span><span class="" style="border-width: 0px;border-style: initial;border-color: initial;">)</span>&nbsp;<span class="" style="border-width: 0px;border-style: initial;border-color: initial;">{</span></p><p class="" style="margin-top: 3px;margin-bottom: 3px;border-width: 0px;border-style: initial;border-color: initial;line-height: 16px;word-break: break-word;word-wrap: break-word;hyphens: auto;font-size: 14px;white-space: nowrap !important;">&nbsp;&nbsp;&nbsp;&nbsp;element<span class="" style="border-width: 0px;border-style: initial;border-color: initial;">.</span>style<span class="" style="border-width: 0px;border-style: initial;border-color: initial;">.</span>top&nbsp;<span class="" style="border-width: 0px;border-style: initial;border-color: initial;">=</span>&nbsp;<span class="" style="border-width: 0px;border-style: initial;border-color: initial;">(</span>startingTop&nbsp;<span class="" style="border-width: 0px;border-style: initial;border-color: initial;">+</span><span class="" style="border-width: 0px;border-style: initial;border-color: initial;">=</span>&nbsp;<span class="" style="border-width: 0px;border-style: initial;border-color: initial;color: rgb(174, 129, 255);">1</span><span class="" style="border-width: 0px;border-style: initial;border-color: initial;">/</span><span class="" style="border-width: 0px;border-style: initial;border-color: initial;color: rgb(174, 129, 255);">60</span><span class="" style="border-width: 0px;border-style: initial;border-color: initial;">)</span><span class="" style="border-width: 0px;border-style: initial;border-color: initial;">;</span></p><p class="" style="margin-top: 3px;margin-bottom: 3px;border-width: 0px;border-style: initial;border-color: initial;line-height: 16px;word-break: break-word;word-wrap: break-word;hyphens: auto;font-size: 14px;white-space: nowrap !important;"><span class="" style="border-width: 0px;border-style: initial;border-color: initial;">}</span></p><p class="" style="margin-top: 3px;margin-bottom: 3px;border-width: 0px;border-style: initial;border-color: initial;line-height: 0;word-break: break-word;word-wrap: break-word;hyphens: auto;font-size: 14px;height: 6px;white-space: nowrap !important;"><br style="border-width: 0px;border-style: initial;border-color: initial;"></p><p class="" style="margin-top: 3px;margin-bottom: 3px;border-width: 0px;border-style: initial;border-color: initial;line-height: 16px;word-break: break-word;word-wrap: break-word;hyphens: auto;font-size: 14px;white-space: nowrap !important;">window<span class="" style="border-width: 0px;border-style: initial;border-color: initial;">.</span><span class="" style="border-width: 0px;border-style: initial;border-color: initial;color: rgb(230, 219, 116);">requestAnimationFrame</span><span class="" style="border-width: 0px;border-style: initial;border-color: initial;">(</span>tick<span class="" style="border-width: 0px;border-style: initial;border-color: initial;">)</span><span class="" style="border-width: 0px;border-style: initial;border-color: initial;">;</span></p></pre></blockquote><p style="margin-top: 1em;margin-bottom: 1em;border-width: 0px;border-style: initial;border-color: initial;line-height: 1.5;white-space: pre-wrap;word-break: break-word;word-wrap: break-word;hyphens: auto;color: rgb(51, 51, 51);">RAF极大限度地提高了动画的性能。而您只需要修改为数不多的代码。</p><h2 style="margin-top: 22px;margin-bottom: 12px;border-width: 0px 0px 1px;border-top-style: initial;border-right-style: initial;border-bottom-style: solid;border-left-style: initial;border-top-color: initial;border-right-color: initial;border-bottom-color: rgb(25, 128, 230);border-left-color: initial;font-weight: bold;word-break: break-all;word-wrap: break-word;font-size: 20px;color: rgb(25, 128, 230);text-align: center;">CSS Transitions</h2><p style="margin-top: 8px;margin-bottom: 1em;border-width: 0px;border-style: initial;border-color: initial;line-height: 1.5;white-space: pre-wrap;word-break: break-word;word-wrap: break-word;hyphens: auto;color: rgb(51, 51, 51);">CSS transitions的动画性能优于jQuery，它把动画的逻辑交给了浏览器本身。这会有助于：1)优化DOM交互和内存消耗以避免卡顿，2)在底层借助RAF的特性，3)强制硬件加速（借助GPU的能力来提高动画性能）。</p><p style="margin-top: 1em;margin-bottom: 1em;border-width: 0px;border-style: initial;border-color: initial;line-height: 1.5;white-space: pre-wrap;word-break: break-word;word-wrap: break-word;hyphens: auto;color: rgb(51, 51, 51);">然而，实际情况是，这些优化可以直接通过JavaScript来实现，<span class="" style="border-width: 0px;border-style: initial;border-color: initial;word-break: break-word;word-wrap: break-word;hyphens: auto;">GSAP</span>已经致力于此多年。</p><p style="margin-top: 1em;margin-bottom: 1em;border-width: 0px;border-style: initial;border-color: initial;line-height: 1.5;white-space: pre-wrap;word-break: break-word;word-wrap: break-word;hyphens: auto;color: rgb(51, 51, 51);"><span class="" style="border-width: 0px;border-style: initial;border-color: initial;word-break: break-word;word-wrap: break-word;hyphens: auto;">Velocity.js</span>，一个新的动画引擎，不止借助于上述技术，还应用了其他方法--我们将很快探讨。</p><p style="margin-top: 1em;margin-bottom: 1em;border-width: 0px;border-style: initial;border-color: initial;line-height: 1.5;white-space: pre-wrap;word-break: break-word;word-wrap: break-word;hyphens: auto;color: rgb(51, 51, 51);">明白JavaScript动画可以媲美CSS动画库这一事实，只是我们计划的第一步。第二步是我们要明白JavaScript动画可以比CSS动画还快。</p><p style="margin-top: 1em;margin-bottom: 1em;border-width: 0px;border-style: initial;border-color: initial;line-height: 1.5;white-space: pre-wrap;word-break: break-word;word-wrap: break-word;hyphens: auto;color: rgb(51, 51, 51);">让我们从检查CSS动画库的缺陷开始：</p><ul style="" class="list-paddingleft-2"><li><p style="margin-top: 1em;margin-bottom: 1em;border-width: 0px;border-style: initial;border-color: initial;line-height: 1.5;white-space: pre-wrap;word-break: break-word;word-wrap: break-word;hyphens: auto;">Transitions的强制硬件加速是使GPU加速，然而这反而会导致GPU强压状况下动画的卡顿。这些影响在移动设备上更为严重。（特别地，这个卡顿是由于数据在浏览器的主线程和排序线程间传递的开销导致的。一些CSS属性，比如transforms和opacity，是不受这个开销影响的。）Adobe在<span class="" style="border-width: 0px;border-style: initial;border-color: initial;word-break: break-word;word-wrap: break-word;hyphens: auto;">这里</span>阐述了这个问题。</p></li><li><p style="margin-top: 1em;margin-bottom: 1em;border-width: 0px;border-style: initial;border-color: initial;line-height: 1.5;white-space: pre-wrap;word-break: break-word;word-wrap: break-word;hyphens: auto;">Transitions在IE10以下有兼容问题， 这在PC端站点会很容易导致问题发生，因为IE8和IE9依然<span class="" style="border-width: 0px;border-style: initial;border-color: initial;word-break: break-word;word-wrap: break-word;hyphens: auto;">很流行</span>。</p></li><li><p style="margin-top: 1em;margin-bottom: 1em;border-width: 0px;border-style: initial;border-color: initial;line-height: 1.5;white-space: pre-wrap;word-break: break-word;word-wrap: break-word;hyphens: auto;">因为transitions并不是被JavaScript控制（它们只是被JavaScript触发），浏览器并不知道如何同步地使用JavaScript代码来操控优化transitions。</p></li></ul><p style="margin-top: 1em;margin-bottom: 1em;border-width: 0px;border-style: initial;border-color: initial;line-height: 1.5;white-space: pre-wrap;word-break: break-word;word-wrap: break-word;hyphens: auto;color: rgb(51, 51, 51);">相反地：基于JavaScript的动画库，可以自己决定什么时候使用硬件加速，可以兼容所有版本的IE，并且它们非常适合批量动画优化。</p><p style="margin-top: 1em;margin-bottom: 1em;border-width: 0px;border-style: initial;border-color: initial;line-height: 1.5;white-space: pre-wrap;word-break: break-word;word-wrap: break-word;hyphens: auto;color: rgb(51, 51, 51);"><em style="border-width: 0px;border-style: initial;border-color: initial;">我的建议是，当您只是开发移动站点，并且您的动画只包含简单的状态变化时，可以使用原生CSS transitions。在这种情况下，transitions算是一种高效并且原生的解决方案，并且可以把所有的动画逻辑只放在css中，避免了因为引入JavaScript库而导致页面臃肿。但是，如果您正在设计复杂的UI，或者正在开发具有状态UI的应用程序，请使用JavaScript动画库，它可以使您的动画保持高性能，使您的工作流程保持可控。特别是在管理CSStransitions方面做得很棒的一个库是</em> <span class="" style="border-width: 0px;border-style: initial;border-color: initial;word-break: break-word;word-wrap: break-word;hyphens: auto;"><em style="border-width: 0px;border-style: initial;border-color: initial;">Transit</em></span><em style="border-width: 0px;border-style: initial;border-color: initial;">。</em></p><h2 style="margin-top: 22px;margin-bottom: 12px;border-width: 0px 0px 1px;border-top-style: initial;border-right-style: initial;border-bottom-style: solid;border-left-style: initial;border-top-color: initial;border-right-color: initial;border-bottom-color: rgb(25, 128, 230);border-left-color: initial;font-weight: bold;word-break: break-all;word-wrap: break-word;font-size: 20px;color: rgb(25, 128, 230);text-align: center;">JavaScript Animation</h2><p style="margin-top: 8px;margin-bottom: 1em;border-width: 0px;border-style: initial;border-color: initial;line-height: 1.5;white-space: pre-wrap;word-break: break-word;word-wrap: break-word;hyphens: auto;color: rgb(51, 51, 51);">Ok，所以JavaScript在性能上可以占上风。但是JavaScript究竟可以快多少呢？其实，它已经快到可以创建复杂的，通常只能用WebGL构建的<span class="" style="border-width: 0px;border-style: initial;border-color: initial;word-break: break-word;word-wrap: break-word;hyphens: auto;">3D animation demo</span>。已经快到可以创建通常只能用Flash或者影效处理做到的<span class="" style="border-width: 0px;border-style: initial;border-color: initial;word-break: break-word;word-wrap: break-word;hyphens: auto;">multimedia teaser</span>。已经快到可以创建通常只能用canvas构建的<span class="" style="border-width: 0px;border-style: initial;border-color: initial;word-break: break-word;word-wrap: break-word;hyphens: auto;">virtual world</span>。</p><p style="margin-top: 1em;margin-bottom: 1em;border-width: 0px;border-style: initial;border-color: initial;line-height: 1.5;white-space: pre-wrap;word-break: break-word;word-wrap: break-word;hyphens: auto;color: rgb(51, 51, 51);">为了直观比较动画库的领先性能，包括Transit（内部使用CSS transitions），请查阅Velocity的文档，在<span class="" style="border-width: 0px;border-style: initial;border-color: initial;word-break: break-word;word-wrap: break-word;hyphens: auto;">VelocityJS.org</span>。</p><p style="margin-top: 1em;margin-bottom: 1em;border-width: 0px;border-style: initial;border-color: initial;line-height: 1.5;white-space: pre-wrap;word-break: break-word;word-wrap: break-word;hyphens: auto;color: rgb(51, 51, 51);">依然存在问题：JavaScript究竟如何达到高性能？下面是基于JavaScript的动画库能实现的优化列表：</p><ul style="" class="list-paddingleft-2"><li><p style="margin-top: 1em;margin-bottom: 1em;border-width: 0px;border-style: initial;border-color: initial;line-height: 1.5;white-space: pre-wrap;word-break: break-word;word-wrap: break-word;hyphens: auto;">为了减小布局震荡，将整个动画中涉及到DOM同步化到堆栈中。</p></li><li><p style="margin-top: 1em;margin-bottom: 1em;border-width: 0px;border-style: initial;border-color: initial;line-height: 1.5;white-space: pre-wrap;word-break: break-word;word-wrap: break-word;hyphens: auto;">缓存链式调用中的属性值，以尽量减少DOM查询（它是影响DOM动画性能的致命弱点）的发生。</p></li><li><p style="margin-top: 1em;margin-bottom: 1em;border-width: 0px;border-style: initial;border-color: initial;line-height: 1.5;white-space: pre-wrap;word-break: break-word;word-wrap: break-word;hyphens: auto;">在同一个跨同级元素调用中缓存单位转换比率（例如PX到%、em等）。</p></li><li><p style="margin-top: 1em;margin-bottom: 1em;border-width: 0px;border-style: initial;border-color: initial;line-height: 1.5;white-space: pre-wrap;word-break: break-word;word-wrap: break-word;hyphens: auto;">当样式更新在视觉上不明显时，跳过更新。</p></li></ul><p style="margin-top: 1em;margin-bottom: 1em;border-width: 0px;border-style: initial;border-color: initial;line-height: 1.5;white-space: pre-wrap;word-break: break-word;word-wrap: break-word;hyphens: auto;color: rgb(51, 51, 51);">回顾之前讲的布局震荡，Velocity.js利用这些最佳实践来缓存动画的结束值，这些值会被重用为之后动画的开始值，从而避免再次查询DOM元素的初始值：</p><blockquote class="" style="border-width: 0px;border-style: initial;border-color: initial;padding-left: 0px;color: rgb(51, 51, 51);"><pre class="" style="border-width: 0px;border-style: initial;border-color: initial;padding: 1em;overflow: auto;background-color: rgb(39, 40, 34);color: rgb(248, 248, 242);"><p class="" style="margin-top: 3px;margin-bottom: 3px;border-width: 0px;border-style: initial;border-color: initial;line-height: 16px;word-break: break-word;word-wrap: break-word;hyphens: auto;font-size: 14px;white-space: nowrap !important;">$element</p><p class="" style="margin-top: 3px;margin-bottom: 3px;border-width: 0px;border-style: initial;border-color: initial;line-height: 16px;word-break: break-word;word-wrap: break-word;hyphens: auto;font-size: 14px;white-space: nowrap !important;">&nbsp;&nbsp;<span class="" spellcheck="true" style="border-width: 0px;border-style: initial;border-color: initial;color: slategray;">/* 将元素向下滑动到视图中。 */</span></p><p class="" style="margin-top: 3px;margin-bottom: 3px;border-width: 0px;border-style: initial;border-color: initial;line-height: 16px;word-break: break-word;word-wrap: break-word;hyphens: auto;font-size: 14px;white-space: nowrap !important;">&nbsp;&nbsp;<span class="" style="border-width: 0px;border-style: initial;border-color: initial;">.</span><span class="" style="border-width: 0px;border-style: initial;border-color: initial;color: rgb(230, 219, 116);">velocity</span><span class="" style="border-width: 0px;border-style: initial;border-color: initial;">(</span><span class="" style="border-width: 0px;border-style: initial;border-color: initial;">{</span>&nbsp;opacity<span class="" style="border-width: 0px;border-style: initial;border-color: initial;">:</span>&nbsp;<span class="" style="border-width: 0px;border-style: initial;border-color: initial;color: rgb(174, 129, 255);">1</span><span class="" style="border-width: 0px;border-style: initial;border-color: initial;">,</span>&nbsp;top<span class="" style="border-width: 0px;border-style: initial;border-color: initial;">:</span>&nbsp;<span class="" style="border-width: 0px;border-style: initial;border-color: initial;color: rgb(166, 226, 46);">"50%"</span>&nbsp;<span class="" style="border-width: 0px;border-style: initial;border-color: initial;">}</span><span class="" style="border-width: 0px;border-style: initial;border-color: initial;">)</span></p><p class="" style="margin-top: 3px;margin-bottom: 3px;border-width: 0px;border-style: initial;border-color: initial;line-height: 16px;word-break: break-word;word-wrap: break-word;hyphens: auto;font-size: 14px;white-space: nowrap !important;">&nbsp;&nbsp;<span class="" spellcheck="true" style="border-width: 0px;border-style: initial;border-color: initial;color: slategray;">/* 延迟1000ms，元素滑动出视图 */</span></p><p class="" style="margin-top: 3px;margin-bottom: 3px;border-width: 0px;border-style: initial;border-color: initial;line-height: 16px;word-break: break-word;word-wrap: break-word;hyphens: auto;font-size: 14px;white-space: nowrap !important;">&nbsp;&nbsp;<span class="" style="border-width: 0px;border-style: initial;border-color: initial;">.</span><span class="" style="border-width: 0px;border-style: initial;border-color: initial;color: rgb(230, 219, 116);">velocity</span><span class="" style="border-width: 0px;border-style: initial;border-color: initial;">(</span><span class="" style="border-width: 0px;border-style: initial;border-color: initial;">{</span>&nbsp;opacity<span class="" style="border-width: 0px;border-style: initial;border-color: initial;">:</span>&nbsp;<span class="" style="border-width: 0px;border-style: initial;border-color: initial;color: rgb(174, 129, 255);">0</span><span class="" style="border-width: 0px;border-style: initial;border-color: initial;">,</span>&nbsp;top<span class="" style="border-width: 0px;border-style: initial;border-color: initial;">:</span>&nbsp;<span class="" style="border-width: 0px;border-style: initial;border-color: initial;color: rgb(166, 226, 46);">"-50%"</span>&nbsp;<span class="" style="border-width: 0px;border-style: initial;border-color: initial;">}</span><span class="" style="border-width: 0px;border-style: initial;border-color: initial;">,</span>&nbsp;<span class="" style="border-width: 0px;border-style: initial;border-color: initial;">{</span>&nbsp;delay<span class="" style="border-width: 0px;border-style: initial;border-color: initial;">:</span>&nbsp;<span class="" style="border-width: 0px;border-style: initial;border-color: initial;color: rgb(174, 129, 255);">1000</span>&nbsp;<span class="" style="border-width: 0px;border-style: initial;border-color: initial;">}</span><span class="" style="border-width: 0px;border-style: initial;border-color: initial;">)</span><span class="" style="border-width: 0px;border-style: initial;border-color: initial;">;</span></p></pre></blockquote><p style="margin-top: 1em;margin-bottom: 1em;border-width: 0px;border-style: initial;border-color: initial;line-height: 1.5;white-space: pre-wrap;word-break: break-word;word-wrap: break-word;hyphens: auto;color: rgb(51, 51, 51);">在上面的例子中，第二个Velocity自动知道它应该从opacity为1，top为50%开始。</p><p style="margin-top: 1em;margin-bottom: 1em;border-width: 0px;border-style: initial;border-color: initial;line-height: 1.5;white-space: pre-wrap;word-break: break-word;word-wrap: break-word;hyphens: auto;color: rgb(51, 51, 51);">浏览器最终可以自己执行很多相同的优化，但这样做将需要极大地限制开发人员编写动画代码的方式。因此，同样的原因，jQuery不使用RAF（见上文），浏览器也永远不会强加优化，即使这些优化只有非常小的可能会打破规范或偏离预期的行为。</p><p style="margin-top: 1em;margin-bottom: 1em;border-width: 0px;border-style: initial;border-color: initial;line-height: 1.5;white-space: pre-wrap;word-break: break-word;word-wrap: break-word;hyphens: auto;color: rgb(51, 51, 51);">最后，让我们来比较一下这两个JavaScript动画库（Velocity.js和GSAP）。</p><ul style="" class="list-paddingleft-2"><li><p style="margin-top: 1em;margin-bottom: 1em;border-width: 0px;border-style: initial;border-color: initial;line-height: 1.5;white-space: pre-wrap;word-break: break-word;word-wrap: break-word;hyphens: auto;">GSAP是一种快速、功能丰富的动画平台。Velocit是一个轻量级工具，可以极大地提高UI动画性能和工作流程。</p></li><li><p style="margin-top: 1em;margin-bottom: 1em;border-width: 0px;border-style: initial;border-color: initial;line-height: 1.5;white-space: pre-wrap;word-break: break-word;word-wrap: break-word;hyphens: auto;">GSAP需要<span class="" style="border-width: 0px;border-style: initial;border-color: initial;word-break: break-word;word-wrap: break-word;hyphens: auto;">许可费</span>。Velocity是通过MIT开源的。</p></li><li><p style="margin-top: 1em;margin-bottom: 1em;border-width: 0px;border-style: initial;border-color: initial;line-height: 1.5;white-space: pre-wrap;word-break: break-word;word-wrap: break-word;hyphens: auto;">性能都很优异，GSAP和Velocity在真实项目中没有区别。</p></li></ul><p style="margin-top: 1em;margin-bottom: 1em;border-width: 0px;border-style: initial;border-color: initial;line-height: 1.5;white-space: pre-wrap;word-break: break-word;word-wrap: break-word;hyphens: auto;color: rgb(51, 51, 51);"><em style="border-width: 0px;border-style: initial;border-color: initial;">我的建议是：当您需要精确的控制（例如重映，暂停/恢复/搜索）、运动（例如Bezier曲线路径），或复杂的分组/排序时，使用GSAP。这些特性对于游戏开发和某些niche应用非常重要，但在Web应用程序的UI中并不常见。</em></p><h2 style="margin-top: 22px;margin-bottom: 12px;border-width: 0px 0px 1px;border-top-style: initial;border-right-style: initial;border-bottom-style: solid;border-left-style: initial;border-top-color: initial;border-right-color: initial;border-bottom-color: rgb(25, 128, 230);border-left-color: initial;font-weight: bold;word-break: break-all;word-wrap: break-word;font-size: 20px;color: rgb(25, 128, 230);text-align: center;">Velocity.js</h2><p style="margin-top: 8px;margin-bottom: 1em;border-width: 0px;border-style: initial;border-color: initial;line-height: 1.5;white-space: pre-wrap;word-break: break-word;word-wrap: break-word;hyphens: auto;color: rgb(51, 51, 51);">GSAP功能丰富，并不意味着Velocity功能单一。相反地，在压缩后只有7Kb的文件中，Velocity不仅提供了jQuery<span class="" style="margin-right: 2px;margin-left: 2px;border-width: 1px;border-style: solid;border-color: rgb(225, 225, 232);padding: 2px 4px;font-size: 14px;font-family: monospace;color: rgb(221, 17, 68);background-color: rgb(247, 247, 249);border-radius: 2px;word-break: break-word;word-wrap: break-word;hyphens: auto;">$.animate()</span>的所有功能，而且提供了color animation，transforms，loops，easings，class animation和scrolling。</p><p style="margin-top: 1em;margin-bottom: 1em;border-width: 0px;border-style: initial;border-color: initial;line-height: 1.5;white-space: pre-wrap;word-break: break-word;word-wrap: break-word;hyphens: auto;color: rgb(51, 51, 51);">简而言之，Velocity是jQuery、jQuery UI和CSStransitions的最佳组合。</p><p style="margin-top: 1em;margin-bottom: 1em;border-width: 0px;border-style: initial;border-color: initial;line-height: 1.5;white-space: pre-wrap;word-break: break-word;word-wrap: break-word;hyphens: auto;color: rgb(51, 51, 51);">进一步，从方便的角度，Velocity在底层使用jQuery的<span class="" style="margin-right: 2px;margin-left: 2px;border-width: 1px;border-style: solid;border-color: rgb(225, 225, 232);padding: 2px 4px;font-size: 14px;font-family: monospace;color: rgb(221, 17, 68);background-color: rgb(247, 247, 249);border-radius: 2px;word-break: break-word;word-wrap: break-word;hyphens: auto;">$.queue()</span>方法，因此可以无缝地与jQuery的<span class="" style="margin-right: 2px;margin-left: 2px;border-width: 1px;border-style: solid;border-color: rgb(225, 225, 232);padding: 2px 4px;font-size: 14px;font-family: monospace;color: rgb(221, 17, 68);background-color: rgb(247, 247, 249);border-radius: 2px;word-break: break-word;word-wrap: break-word;hyphens: auto;">$.animate()</span>, <span class="" style="margin-right: 2px;margin-left: 2px;border-width: 1px;border-style: solid;border-color: rgb(225, 225, 232);padding: 2px 4px;font-size: 14px;font-family: monospace;color: rgb(221, 17, 68);background-color: rgb(247, 247, 249);border-radius: 2px;word-break: break-word;word-wrap: break-word;hyphens: auto;">$.fade()</span>和<span class="" style="margin-right: 2px;margin-left: 2px;border-width: 1px;border-style: solid;border-color: rgb(225, 225, 232);padding: 2px 4px;font-size: 14px;font-family: monospace;color: rgb(221, 17, 68);background-color: rgb(247, 247, 249);border-radius: 2px;word-break: break-word;word-wrap: break-word;hyphens: auto;">$.delay()</span>函数交互。并且，由于Velocity的语法和<span class="" style="margin-right: 2px;margin-left: 2px;border-width: 1px;border-style: solid;border-color: rgb(225, 225, 232);padding: 2px 4px;font-size: 14px;font-family: monospace;color: rgb(221, 17, 68);background-color: rgb(247, 247, 249);border-radius: 2px;word-break: break-word;word-wrap: break-word;hyphens: auto;">$.animate()</span>一致，<strong style="border-width: 0px;border-style: initial;border-color: initial;">您页面的代码不需要修改</strong>。</p><p style="margin-top: 1em;margin-bottom: 1em;border-width: 0px;border-style: initial;border-color: initial;line-height: 1.5;white-space: pre-wrap;word-break: break-word;word-wrap: break-word;hyphens: auto;color: rgb(51, 51, 51);">让我们快速看一下Velocity.js。在基础动画上，Velocity和<span class="" style="margin-right: 2px;margin-left: 2px;border-width: 1px;border-style: solid;border-color: rgb(225, 225, 232);padding: 2px 4px;font-size: 14px;font-family: monospace;color: rgb(221, 17, 68);background-color: rgb(247, 247, 249);border-radius: 2px;word-break: break-word;word-wrap: break-word;hyphens: auto;">$.animate()</span>一样：</p><blockquote class="" style="border-width: 0px;border-style: initial;border-color: initial;padding-left: 0px;color: rgb(51, 51, 51);"><pre class="" style="border-width: 0px;border-style: initial;border-color: initial;padding: 1em;overflow: auto;background-color: rgb(39, 40, 34);color: rgb(248, 248, 242);"><p class="" style="margin-top: 3px;margin-bottom: 3px;border-width: 0px;border-style: initial;border-color: initial;line-height: 16px;word-break: break-word;word-wrap: break-word;hyphens: auto;font-size: 14px;white-space: nowrap !important;">$element</p><p class="" style="margin-top: 3px;margin-bottom: 3px;border-width: 0px;border-style: initial;border-color: initial;line-height: 16px;word-break: break-word;word-wrap: break-word;hyphens: auto;font-size: 14px;white-space: nowrap !important;">&nbsp;&nbsp;<span class="" style="border-width: 0px;border-style: initial;border-color: initial;">.</span><span class="" style="border-width: 0px;border-style: initial;border-color: initial;color: rgb(230, 219, 116);">delay</span><span class="" style="border-width: 0px;border-style: initial;border-color: initial;">(</span><span class="" style="border-width: 0px;border-style: initial;border-color: initial;color: rgb(174, 129, 255);">1000</span><span class="" style="border-width: 0px;border-style: initial;border-color: initial;">)</span></p><p class="" style="margin-top: 3px;margin-bottom: 3px;border-width: 0px;border-style: initial;border-color: initial;line-height: 16px;word-break: break-word;word-wrap: break-word;hyphens: auto;font-size: 14px;white-space: nowrap !important;">&nbsp;&nbsp;<span class="" spellcheck="true" style="border-width: 0px;border-style: initial;border-color: initial;color: slategray;">/* 使用Velocity的2000ms内改变元素top属性的动画*/</span></p><p class="" style="margin-top: 3px;margin-bottom: 3px;border-width: 0px;border-style: initial;border-color: initial;line-height: 16px;word-break: break-word;word-wrap: break-word;hyphens: auto;font-size: 14px;white-space: nowrap !important;">&nbsp;&nbsp;<span class="" style="border-width: 0px;border-style: initial;border-color: initial;">.</span><span class="" style="border-width: 0px;border-style: initial;border-color: initial;color: rgb(230, 219, 116);">velocity</span><span class="" style="border-width: 0px;border-style: initial;border-color: initial;">(</span><span class="" style="border-width: 0px;border-style: initial;border-color: initial;">{</span>&nbsp;top<span class="" style="border-width: 0px;border-style: initial;border-color: initial;">:</span>&nbsp;<span class="" style="border-width: 0px;border-style: initial;border-color: initial;color: rgb(166, 226, 46);">"50%"</span>&nbsp;<span class="" style="border-width: 0px;border-style: initial;border-color: initial;">}</span><span class="" style="border-width: 0px;border-style: initial;border-color: initial;">,</span>&nbsp;<span class="" style="border-width: 0px;border-style: initial;border-color: initial;color: rgb(174, 129, 255);">2000</span><span class="" style="border-width: 0px;border-style: initial;border-color: initial;">)</span></p><p class="" style="margin-top: 3px;margin-bottom: 3px;border-width: 0px;border-style: initial;border-color: initial;line-height: 16px;word-break: break-word;word-wrap: break-word;hyphens: auto;font-size: 14px;white-space: nowrap !important;">&nbsp;&nbsp;<span class="" spellcheck="true" style="border-width: 0px;border-style: initial;border-color: initial;color: slategray;">/* 当上面Velocity动画执行完时，使用标准的jQuery方法来使元素淡出*/</span></p><p class="" style="margin-top: 3px;margin-bottom: 3px;border-width: 0px;border-style: initial;border-color: initial;line-height: 16px;word-break: break-word;word-wrap: break-word;hyphens: auto;font-size: 14px;white-space: nowrap !important;">&nbsp;&nbsp;<span class="" style="border-width: 0px;border-style: initial;border-color: initial;">.</span><span class="" style="border-width: 0px;border-style: initial;border-color: initial;color: rgb(230, 219, 116);">fadeOut</span><span class="" style="border-width: 0px;border-style: initial;border-color: initial;">(</span><span class="" style="border-width: 0px;border-style: initial;border-color: initial;color: rgb(174, 129, 255);">1000</span><span class="" style="border-width: 0px;border-style: initial;border-color: initial;">)</span><span class="" style="border-width: 0px;border-style: initial;border-color: initial;">;</span></p></pre></blockquote><p style="margin-top: 1em;margin-bottom: 1em;border-width: 0px;border-style: initial;border-color: initial;line-height: 1.5;white-space: pre-wrap;word-break: break-word;word-wrap: break-word;hyphens: auto;color: rgb(51, 51, 51);">在高级动画上，复杂的滚动场景和三维动画都可以创建——只需要两行简单的代码：</p><blockquote class="" style="border-width: 0px;border-style: initial;border-color: initial;padding-left: 0px;color: rgb(51, 51, 51);"><pre class="" style="border-width: 0px;border-style: initial;border-color: initial;padding: 1em;overflow: auto;background-color: rgb(39, 40, 34);color: rgb(248, 248, 242);"><p class="" style="margin-top: 3px;margin-bottom: 3px;border-width: 0px;border-style: initial;border-color: initial;line-height: 16px;word-break: break-word;word-wrap: break-word;hyphens: auto;font-size: 14px;white-space: nowrap !important;">$element</p><p class="" style="margin-top: 3px;margin-bottom: 3px;border-width: 0px;border-style: initial;border-color: initial;line-height: 16px;word-break: break-word;word-wrap: break-word;hyphens: auto;font-size: 14px;white-space: nowrap !important;">&nbsp;&nbsp;<span class="" spellcheck="true" style="border-width: 0px;border-style: initial;border-color: initial;color: slategray;">/* 在1000ms内，浏览器滚动到这个元素的顶部 */</span></p><p class="" style="margin-top: 3px;margin-bottom: 3px;border-width: 0px;border-style: initial;border-color: initial;line-height: 16px;word-break: break-word;word-wrap: break-word;hyphens: auto;font-size: 14px;white-space: nowrap !important;">&nbsp;&nbsp;<span class="" style="border-width: 0px;border-style: initial;border-color: initial;">.</span><span class="" style="border-width: 0px;border-style: initial;border-color: initial;color: rgb(230, 219, 116);">velocity</span><span class="" style="border-width: 0px;border-style: initial;border-color: initial;">(</span><span class="" style="border-width: 0px;border-style: initial;border-color: initial;color: rgb(166, 226, 46);">"scroll"</span><span class="" style="border-width: 0px;border-style: initial;border-color: initial;">,</span>&nbsp;<span class="" style="border-width: 0px;border-style: initial;border-color: initial;color: rgb(174, 129, 255);">1000</span><span class="" style="border-width: 0px;border-style: initial;border-color: initial;">)</span></p><p class="" style="margin-top: 3px;margin-bottom: 3px;border-width: 0px;border-style: initial;border-color: initial;line-height: 16px;word-break: break-word;word-wrap: break-word;hyphens: auto;font-size: 14px;white-space: nowrap !important;">&nbsp;&nbsp;<span class="" spellcheck="true" style="border-width: 0px;border-style: initial;border-color: initial;color: slategray;">/* 之后使元素绕着它的Y轴旋转360度。 */</span></p><p class="" style="margin-top: 3px;margin-bottom: 3px;border-width: 0px;border-style: initial;border-color: initial;line-height: 16px;word-break: break-word;word-wrap: break-word;hyphens: auto;font-size: 14px;white-space: nowrap !important;">&nbsp;&nbsp;<span class="" style="border-width: 0px;border-style: initial;border-color: initial;">.</span><span class="" style="border-width: 0px;border-style: initial;border-color: initial;color: rgb(230, 219, 116);">velocity</span><span class="" style="border-width: 0px;border-style: initial;border-color: initial;">(</span><span class="" style="border-width: 0px;border-style: initial;border-color: initial;">{</span>&nbsp;rotateY<span class="" style="border-width: 0px;border-style: initial;border-color: initial;">:</span>&nbsp;<span class="" style="border-width: 0px;border-style: initial;border-color: initial;color: rgb(166, 226, 46);">"360deg"</span>&nbsp;<span class="" style="border-width: 0px;border-style: initial;border-color: initial;">}</span><span class="" style="border-width: 0px;border-style: initial;border-color: initial;">,</span>&nbsp;<span class="" style="border-width: 0px;border-style: initial;border-color: initial;color: rgb(174, 129, 255);">1000</span><span class="" style="border-width: 0px;border-style: initial;border-color: initial;">)</span><span class="" style="border-width: 0px;border-style: initial;border-color: initial;">;</span></p></pre></blockquote><h2 style="margin-top: 22px;margin-bottom: 12px;border-width: 0px 0px 1px;border-top-style: initial;border-right-style: initial;border-bottom-style: solid;border-left-style: initial;border-top-color: initial;border-right-color: initial;border-bottom-color: rgb(25, 128, 230);border-left-color: initial;font-weight: bold;word-break: break-all;word-wrap: break-word;font-size: 20px;color: rgb(25, 128, 230);text-align: center;">结束语</h2><p style="margin-top: 8px;margin-bottom: 1em;border-width: 0px;border-style: initial;border-color: initial;line-height: 1.5;white-space: pre-wrap;word-break: break-word;word-wrap: break-word;hyphens: auto;color: rgb(51, 51, 51);">Velocity的目标是保持领先的DOM动画性能和便捷。本文的重点是前者。请去<span class="" style="border-width: 0px;border-style: initial;border-color: initial;word-break: break-word;word-wrap: break-word;hyphens: auto;">VelocityJS.org</span>学习更多关于后者的知识。</p><p style="margin-top: 1em;margin-bottom: 1em;border-width: 0px;border-style: initial;border-color: initial;line-height: 1.5;white-space: pre-wrap;word-break: break-word;word-wrap: break-word;hyphens: auto;color: rgb(51, 51, 51);">在我们结束之前，记得<em style="border-width: 0px;border-style: initial;border-color: initial;">一个高性能的UI不仅仅是选择合适的动画库</em>。页面的其余部分也应该优化。从下面这些奇妙的Google话题中学习更多：</p><ul style="" class="list-paddingleft-2"><li><p style="margin-top: 1em;margin-bottom: 1em;border-width: 0px;border-style: initial;border-color: initial;line-height: 1.5;white-space: pre-wrap;word-break: break-word;word-wrap: break-word;hyphens: auto;"><span class="" style="border-width: 0px;border-style: initial;border-color: initial;word-break: break-word;word-wrap: break-word;hyphens: auto;">Jank Free</span></p></li><li><p style="margin-top: 1em;margin-bottom: 1em;border-width: 0px;border-style: initial;border-color: initial;line-height: 1.5;white-space: pre-wrap;word-break: break-word;word-wrap: break-word;hyphens: auto;"><span class="" style="border-width: 0px;border-style: initial;border-color: initial;word-break: break-word;word-wrap: break-word;hyphens: auto;">Rendering Without Lumps</span></p></li><li><p style="margin-top: 1em;margin-bottom: 1em;border-width: 0px;border-style: initial;border-color: initial;line-height: 1.5;white-space: pre-wrap;word-break: break-word;word-wrap: break-word;hyphens: auto;"><span class="" style="border-width: 0px;border-style: initial;border-color: initial;word-break: break-word;word-wrap: break-word;hyphens: auto;">Faster Websites</span></p></li></ul><p style="margin-top: 1em;margin-bottom: 1em;border-width: 0px;border-style: initial;border-color: initial;line-height: 25.6px;white-space: pre-wrap;word-break: break-word;hyphens: auto;"><span style="border-width: 0px;border-style: initial;border-color: initial;max-width: 100%;line-height: 1.6;color: rgb(68, 68, 68);box-sizing: border-box !important;word-wrap: break-word !important;"><br style="border-width: 0px;border-style: initial;border-color: initial;max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></span></p><p style="margin-top: 1em;margin-bottom: 1em;border-width: 0px;border-style: initial;border-color: initial;line-height: 25.6px;white-space: pre-wrap;word-break: break-word;hyphens: auto;"><span style="border-width: 0px;border-style: initial;border-color: initial;max-width: 100%;line-height: 1.6;color: rgb(68, 68, 68);box-sizing: border-box !important;word-wrap: break-word !important;"></span></p><p style="margin-top: 1em;margin-bottom: 1em;border-width: 0px;border-style: initial;border-color: initial;line-height: 25.6px;white-space: pre-wrap;word-break: break-word;hyphens: auto;text-align: center;"><span style="border-width: 0px;border-style: initial;border-color: initial;max-width: 100%;color: rgb(68, 68, 68);box-sizing: border-box !important;word-wrap: break-word !important;">奇舞周刊</span></p><p style="margin-top: 1em;margin-bottom: 1em;border-width: 0px;border-style: initial;border-color: initial;line-height: 25.6px;white-space: pre-wrap;word-break: break-word;hyphens: auto;text-align: center;"><span style="border-width: 0px;border-style: initial;border-color: initial;max-width: 100%;color: rgb(68, 68, 68);box-sizing: border-box !important;word-wrap: break-word !important;">———<span style="border-width: 0px;border-style: initial;border-color: initial;max-width: 100%;color: rgb(136, 136, 136);line-height: 25.6px;box-sizing: border-box !important;word-wrap: break-word !important;">————————————</span>———</span></p><p style="margin-top: 1em;margin-bottom: 1em;border-width: 0px;border-style: initial;border-color: initial;line-height: 25.6px;white-space: pre-wrap;word-break: break-word;hyphens: auto;text-align: center;"><span style="border-width: 0px;border-style: initial;border-color: initial;max-width: 100%;color: rgb(68, 68, 68);box-sizing: border-box !important;word-wrap: break-word !important;">领略前端技术 阅读奇舞周刊</span></p><p style="margin-top: 1em;margin-bottom: 1em;border-width: 0px;border-style: initial;border-color: initial;line-height: 25.6px;white-space: pre-wrap;word-break: break-word;hyphens: auto;"><br style="border-width: 0px;border-style: initial;border-color: initial;max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></p><p style="margin-top: 1em;margin-bottom: 1em;border-width: 0px;border-style: initial;border-color: initial;line-height: 1.5em;white-space: pre-wrap;word-break: break-word;hyphens: auto;text-align: center;"><span style="border-width: 0px;border-style: initial;border-color: initial;max-width: 100%;font-size: 13px;color: rgb(68, 68, 68);box-sizing: border-box !important;word-wrap: break-word !important;">长按二维码，关注奇舞周刊</span></p><p style="margin-top: 1em;margin-bottom: 1em;border-width: 0px;border-style: initial;border-color: initial;line-height: normal;white-space: pre-wrap;word-break: break-word;hyphens: auto;text-align: center;"><span style="border-width: 0px;border-style: initial;border-color: initial;max-width: 100%;font-size: 10px;color: rgb(68, 68, 68);box-sizing: border-box !important;word-wrap: break-word !important;"><strong style="border-width: 0px;border-style: initial;border-color: initial;max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;">▼</strong></span></p><p class="" style="margin: 15px auto;border-width: 0px;border-style: initial;border-color: initial;line-height: 25.6px;white-space: normal;word-break: break-word;hyphens: auto;overflow: hidden;text-align: center;"><img src="http://mmbiz.qpic.cn/mmbiz/d8tibSEfhMMpC84jhdw7cmZFzrDoG5IsHcpRcls0Ahx6PhRMAicM1gc2ZmG68Tb8t3cyaia5lFicoY8kWXWibCb609A/640?wx_fmt=jpeg" style="border-width: 0px; border-style: initial; border-color: initial; vertical-align: middle; box-sizing: border-box !important; word-wrap: break-word !important; visibility: visible !important; width: 200px !important; height: 200px !important;"></p><p><br></p><hr/><a href="http://mp.weixin.qq.com/s?timestamp=1512890585&src=3&ver=1&signature=nJHJ*lkpUmWR2w6oU7bDOsSS-8Q91g9q3gppAf*YzodGa8*kFsjsjxlxjgvUsxhcPuHPudx98CYtGO1llmvZoDiYwKh7BRXwc39sMY4DhI1tOgVYfRnLxLmrx49xXCrTNf6VoojQrPApBvgtTPMALfUV1ZpqHySweGVzq2eJ2tA=">微信地址</a> | <a href="http://zcfy.cc/article/css-vs-js-animation-which-is-faster-4635.html?t=new">阅读原文</a>
{% endraw  %}

