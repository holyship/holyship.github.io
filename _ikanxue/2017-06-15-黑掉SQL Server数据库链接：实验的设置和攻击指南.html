---
title: 黑掉SQL Server数据库链接：实验的设置和攻击指南
author: daemond
wechat_source: >-
  http://mp.weixin.qq.com/s?timestamp=1498051979&src=3&ver=1&signature=nULoNfhbsabgcFJEB9PUQyx1hdTxM6K*VNtcxOeUN354nW26WI5lTIy9FI3*gxCaEHwjjiMY16zPEkDRPZ*5EMLqfT2jUheAsEFt*1xoJGWcGSN4cgJkPin8YqylVMG*18DOzHL4uelFv4r-BrsaztkCzmh*XI7fRamJmnPriCM=
date: '2017-06-15 00:00:00 +0000'

---

{% raw  %}
<section label="Copyright © 2015 playhudong All Rights Reserved." style="border-width: medium; border-color: currentcolor; -moz-border-top-colors: none; -moz-border-right-colors: none; -moz-border-bottom-colors: none; -moz-border-left-colors: none; border-style: none; margin: 1em auto; text-align: center;"><span style="min-width: 92px; text-align: center; display: inline-block;"><span class="" style="background-color: rgb(34, 172, 56); border-radius: 50%; display: inline-block;"><section style="background-color: rgb(255, 255, 255); font-size: 18px; border-radius: 50%; height: 20px; width: 20px; line-height: 20px; text-align: center; margin: 5px; display: inline-block;"><p style="margin: 0px;">1</p></section></span><span class="" style="margin: -3px auto 0px; width: 4px; border-width: 11px 9px 9px; border-style: solid; border-color: rgb(34, 172, 56) transparent transparent; -moz-border-top-colors: none; -moz-border-right-colors: none; -moz-border-bottom-colors: none; -moz-border-left-colors: none; height: 3px; display: block;"></span></span><br><section class="" style="border-top: 2px solid rgb(34, 172, 56); padding: 5px 10px; font-size: 18px; display: inline-block;"><p style="margin: 0px;">链接服务器简介</p><p style="margin: 0px;"><br></p></section></section><h5 style="margin-top: 15px; margin-bottom: 15px; line-height: 1.5em;"><span style="font-size: 15px;"></span></h5><section style="border-width: 0px; border-color: currentcolor; -moz-border-top-colors: none; -moz-border-right-colors: none; -moz-border-bottom-colors: none; -moz-border-left-colors: none; margin: 0.8em 0px 0.5em; border-style: none;" label="Copyright Reserved by ipaiban.com."><section style="display: inline-block; vertical-align: top; box-sizing: border-box !important; max-width: 100% !important; overflow-wrap: break-word !important; text-align: center;"><section class="" style="display: inline-block; width: 2em; height: 2em; border-radius: 50%; text-align: center; font-weight: inherit; line-height: 2em; font-size: 20px; font-family: inherit; font-style: normal; text-decoration: inherit; color: rgb(90, 90, 90); border-width: 1px; border-style: solid; border-color: rgb(90, 90, 90); -moz-border-top-colors: none; -moz-border-right-colors: none; -moz-border-bottom-colors: none; -moz-border-left-colors: none;">1.1</section></section><section style="display: inline-block; margin-left: 0.7em; padding-top: 0em;"><section style="line-height: 2em; font-size: 20px; font-family: inherit; font-style: normal; font-weight: inherit; text-align: inherit; text-decoration: inherit; color: rgb(42, 52, 58);"><span style="font-size: 18px;">简介</span><br></section></section></section><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;">现代的应用程序驱动着我们的世界。
 
每天他们都习惯于访问银行帐户，管理医疗保健计划，并从互联网远程启动汽车。大多数人都知道存储类似于社会保障号码，信用证卡号和保健信息这些敏感数据的背后是一个数据库。
 然而，大多数人没有意识到的是泄露一个数据库，通常可以用最小的代价接管各种企业环境。 其中一种方法是通过“数据库链接”。</span></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;">数据库链接本质上是从一个数据库服务器到另一个数据库服务器的可信连接。
 数据库链接可以“爬网”，类似于抓取网站的超链接。 通过爬行从数据库服务器到数据库服务器的链接，可以访问通常不能被用户访问的数据和系统。 
在现代企业环境中，使用数据库链接抓取技术获取对数百个数据库服务器的未经授权的访问并不罕见。 这种访问通常导致敏感数据和网络的完全泄露。 
可以通过直接数据库连接和SQL注入攻击来启动数据库链接抓取。 更好地了解与这种数据库配置相关的风险变得更加重要。</span></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;">在本文中，我提供了创建可用于通过直接连接和各种类型的SQL注入对SQL
 Server数据库链接执行攻击的实验室环境的说明。 我还提供了数据库链接的一般介绍和如何利用它们的示例。 
这些内容应该有助于渗透测试人员，Web开发人员和数据库管理员尝试更好地了解与数据库服务器链接配置错误或过度使用相关的风险。 
尽管本文重点介绍SQL Server，但将涵盖的许多概念可以应用于其他数据库平台。</span></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.5em;"><br></p><h5 style="margin-top: 15px; margin-bottom: 15px; line-height: 1.5em;"><span style="font-size: 15px;"></span></h5><section style="border-width: 0px; border-color: currentcolor; -moz-border-top-colors: none; -moz-border-right-colors: none; -moz-border-bottom-colors: none; -moz-border-left-colors: none; margin: 0.8em 0px 0.5em; border-style: none;" label="Copyright Reserved by ipaiban.com."><section style="display: inline-block; vertical-align: top; box-sizing: border-box !important; max-width: 100% !important; overflow-wrap: break-word !important; text-align: center;"><section class="" style="display: inline-block; width: 2em; height: 2em; border-radius: 50%; text-align: center; font-weight: inherit; line-height: 2em; font-size: 20px; font-family: inherit; font-style: normal; text-decoration: inherit; color: rgb(90, 90, 90); border-width: 1px; border-style: solid; border-color: rgb(90, 90, 90); -moz-border-top-colors: none; -moz-border-right-colors: none; -moz-border-bottom-colors: none; -moz-border-left-colors: none;">1.2</section></section><section style="display: inline-block; margin-left: 0.7em; padding-top: 0em;"><section style="line-height: 2em; font-size: 20px; font-family: inherit; font-style: normal; font-weight: inherit; text-align: inherit; text-decoration: inherit; color: rgb(42, 52, 58);"><span style="font-size: 18px;">什么是数据库服务器链接？</span><br></section></section></section><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;">在我们动手之前，让我们简短的了解一下数据库链接。
 微软声称数据库链接可用于“使 SQL Server 数据库引擎能够针对 SQL Server 实例之外的 OLE DB 数据源执行命令”。 
这基本上意味着我们可以在数据库级别创建预配置的“链接”，以连接和查询各种数据存储，包括但不限于：</span></p><ul style="list-style-type: circle;" class="list-paddingleft-2"><li><h6 style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;">SQL Server</span></h6></li><li><h6 style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;">Oracle服务器</span></h6></li><li><h6 style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;">访问文件</span></h6></li><li><h6 style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;">Excel文件</span></h6></li><li><h6 style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;">文本文件</span></h6></li></ul><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;">如果你不是数据库管理员，可能不明白为什么有人想要配置数据库链接。 下面我提供了一些我们遇到的常见用例。</span></p><ul style="list-style-type: circle;" class="list-paddingleft-2"><li><h6 style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;">查询多个应用程序数据库以了解数据趋势</span></h6></li><li><h6 style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;">结合两个数据源的信息，避免数据库平台迁移</span></h6></li><li><h6 style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;">在SQL Server实例之间复制数据子集</span></h6></li><li><h6 style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;">集中管理数据库服务器配置</span></h6></li><li><h6 style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;">通常，数据库管理员使用它们来查询和更新远程异构数据来源</span></h6></li></ul><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;">对于有兴趣的人，我列出了在 SQL Server 上列出数据库链接的两种方法。 默认情况下，您应该看到自己的服务器。 但是，数据访问将被禁用，所以我不相信你可以查询它。</span></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.5em;"><img src="http://mmbiz.qpic.cn/mmbiz_png/1UG7KPNHN8Fx7IzBl4ibT7xZiaEauApjMBEibthBxNeU7ZkzPFkkTGkn4UTRjpYZ1qVWPFDxEVwSrNfDZNA9KeA8w/0?wx_fmt=png" style="width: 631px !important; height: 43px !important;"></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.5em;"><span style="font-size: 15px;">有关更多信息，您可以访问 Microsoft 的 Linked Server 页面，网址为http://msdn.microsoft.com/en-us/ library/ms188279.aspx。</span></p><p><br></p><h5 style="margin-top: 15px; margin-bottom: 15px; line-height: 1.5em;"><span style="font-size: 15px;"></span></h5><section style="border-width: 0px; border-color: currentcolor; -moz-border-top-colors: none; -moz-border-right-colors: none; -moz-border-bottom-colors: none; -moz-border-left-colors: none; margin: 0.8em 0px 0.5em; border-style: none;" label="Copyright Reserved by ipaiban.com."><section style="display: inline-block; vertical-align: top; box-sizing: border-box !important; max-width: 100% !important; overflow-wrap: break-word !important; text-align: center;"><section class="" style="display: inline-block; width: 2em; height: 2em; border-radius: 50%; text-align: center; font-weight: inherit; line-height: 2em; font-size: 20px; font-family: inherit; font-style: normal; text-decoration: inherit; color: rgb(90, 90, 90); border-width: 1px; border-style: solid; border-color: rgb(90, 90, 90); -moz-border-top-colors: none; -moz-border-right-colors: none; -moz-border-bottom-colors: none; -moz-border-left-colors: none;">1.3</section></section><section style="display: inline-block; margin-left: 0.7em; padding-top: 0em;"><section style="line-height: 2em; font-size: 20px; font-family: inherit; font-style: normal; font-weight: inherit; text-align: inherit; text-decoration: inherit; color: rgb(42, 52, 58);"><span style="font-size: 18px;">数据库服务器链接如何成为威胁？</span><br></section></section></section><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;">尽管数据库链接非常有用，但它们通常配置有过高的权限，可能导致多个数据库和系统的折中。 以下是数据库链接可能出现的风险的简短列表。</span></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;">过高的权限是很常见的。 大多数DBA使用静态用户名和密码来配置数据库链接，而不是配置数据库链接来继承执行查询的数据库用户的权限。 这意味着当数据库用户查询链接时，查询将使用预配置的链接权限运行，而不是数据库用户的。</span></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;">•默认情况下可以使用Openquery()。
 Openquery()是可用于查询链接服务器的本地SQL Server函数。 
默认情况下，属于PUBLIC固定服务器角色的任何SQL登录名都可以使用它查询数据库链接。 
所以与类似的openrowset（）函数不同，它通常允许所有数据库用户默认查询所有预配置的数据库链接。 下面是一个基本的Openquery示例：</span></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.5em;"><img src="http://mmbiz.qpic.cn/mmbiz_png/1UG7KPNHN8Fx7IzBl4ibT7xZiaEauApjMBeVlGhetJnkBkdkQv1ZUBLpJFjbic1DaFibAwMFYdUxY7oTTEp9XRMibicw/0?wx_fmt=png" style="width: 506px !important; height: 31px !important;"></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;">可以嵌套数据库链接查询。 所有数据库链接查询都可以通过openquery（）函数嵌套。 
因此，数据库链接可以从数据库服务器到数据库服务器，类似于网页抓取。 
在我们的测试期间，我们发现数据库链接抓取可能导致对我们称为“数据库链接网络”的数百个数据库服务器的未经授权的访问。 
抓取数据库链接网络时我们遇到的唯一限制是openquery（）函数允许的最大字符数。 
基于Microsoft的文档，openquery（）函数具有8000个字符的限制。 以下是通过嵌套数据库链接执行的查询的基本示例：</span></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.5em;"><img src="http://mmbiz.qpic.cn/mmbiz_png/1UG7KPNHN8Fx7IzBl4ibT7xZiaEauApjMBUvuoOqgOUbibvAxxNsVGETodn7XRwxiab3xoXRzfB6ibq34kxqou6Mo2w/0?wx_fmt=png" style="width: 770px !important; height: 21.8007px !important;"></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;">可以通过数据库链接执行存储过程。
 尽管Microsoft文档声明说，可以盲目执行openquery函数来执行存储过程。 
这意味着危险的程序（如xp_cmdshell）可以用于通过多个嵌套数据库链接在操作系统级别上执行任意命令。 
这在数据库社区已经有一段时间的社会化，但在信息安全界没有多少讨论。<br></span></p><h5><br></h5><section label="Copyright © 2015 playhudong All Rights Reserved." style="border-width: medium; border-color: currentcolor; -moz-border-top-colors: none; -moz-border-right-colors: none; -moz-border-bottom-colors: none; -moz-border-left-colors: none; border-style: none; margin: 1em auto; text-align: center;"><span style="min-width: 92px; text-align: center; display: inline-block;"><span class="" style="background-color: rgb(34, 172, 56); border-radius: 50%; display: inline-block;"><section style="background-color: rgb(255, 255, 255); font-size: 18px; border-radius: 50%; height: 20px; width: 20px; line-height: 20px; text-align: center; margin: 5px; display: inline-block;"><p style="margin: 0px;">2</p></section></span><span class="" style="margin: -3px auto 0px; width: 4px; border-width: 11px 9px 9px; border-style: solid; border-color: rgb(34, 172, 56) transparent transparent; -moz-border-top-colors: none; -moz-border-right-colors: none; -moz-border-bottom-colors: none; -moz-border-left-colors: none; height: 3px; display: block;"></span></span><br><section class="" style="border-top: 2px solid rgb(34, 172, 56); padding: 5px 10px; font-size: 18px; display: inline-block;"><p style="margin: 0px;">设置实验室<br></p></section></section><h4 style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;">本章将介绍如何构建可用于测试常见数据库链接攻击的实验室环境。 总而言之，你将设置三个SQL Server实例，在它们之间创建数据库链接，并安装连接到其中一个实例的Web应用程序。 以下是实验室完成后我们应该能够执行的攻击的概述。</span></h4><p><br></p><h5 style="margin-top: 15px; margin-bottom: 15px; line-height: 1.5em;"><span style="font-size: 15px;"></span></h5><section style="border-width: 0px; border-color: currentcolor; -moz-border-top-colors: none; -moz-border-right-colors: none; -moz-border-bottom-colors: none; -moz-border-left-colors: none; margin: 0.8em 0px 0.5em; border-style: none;" label="Copyright Reserved by ipaiban.com."><section style="display: inline-block; vertical-align: top; box-sizing: border-box !important; max-width: 100% !important; overflow-wrap: break-word !important; text-align: center;"><section class="" style="display: inline-block; width: 2em; height: 2em; border-radius: 50%; text-align: center; font-weight: inherit; line-height: 2em; font-size: 20px; font-family: inherit; font-style: normal; text-decoration: inherit; color: rgb(90, 90, 90); border-width: 1px; border-style: solid; border-color: rgb(90, 90, 90); -moz-border-top-colors: none; -moz-border-right-colors: none; -moz-border-bottom-colors: none; -moz-border-left-colors: none;">2.1</section></section><section style="display: inline-block; margin-left: 0.7em; padding-top: 0em;"><section style="line-height: 2em; font-size: 20px; font-family: inherit; font-style: normal; font-weight: inherit; text-align: inherit; text-decoration: inherit; color: rgb(42, 52, 58);"><span style="font-size: 18px;">安装三个SQL Server数据库实例</span><br></section></section></section><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;">安装名为“server1”，“server2”和“server3”的三个SQL Server命名实例。 这些实例可以安装在单个或多个服务器上。 确保记住每个SQL Server实例的sa帐户密码。 你将需要它们来设置数据库帐户和链接。</span></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;">安装SQL实例时，请确保设置了以下配置：</span></p><h6 style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;">1. 配置“混合模式”认证。<br>2. 配置所有服务作为LocalSystem运行。<br>3. 为每个实例启用TCP / IP和命名管道。</span></h6><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;">注意：如果所有实例都配置在同一台服务器上，则可能不需要。</span></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;">有关更多信息，请访问以下链接：http://msdn.microsoft.com/en-us/library/bb909712%28v=vs.90%29.aspx</span></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;">SQL Server 2008下载</span></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;">http://www.microsoft.com/en-us/download/details.aspx?id=1695</span></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;">SQL Server 2008安装</span></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;">http://blog.sqlauthority.com/2008/06/12/sql-server-2008-step-by-step-installation-guide-with-images/</span></p><p><br></p><h5 style="margin-top: 15px; margin-bottom: 15px; line-height: 1.5em;"><span style="font-size: 15px;"></span></h5><section style="border-width: 0px; border-color: currentcolor; -moz-border-top-colors: none; -moz-border-right-colors: none; -moz-border-bottom-colors: none; -moz-border-left-colors: none; margin: 0.8em 0px 0.5em; border-style: none;" label="Copyright Reserved by ipaiban.com."><section style="display: inline-block; vertical-align: top; box-sizing: border-box !important; max-width: 100% !important; overflow-wrap: break-word !important; text-align: center;"><section class="" style="display: inline-block; width: 2em; height: 2em; border-radius: 50%; text-align: center; font-weight: inherit; line-height: 2em; font-size: 20px; font-family: inherit; font-style: normal; text-decoration: inherit; color: rgb(90, 90, 90); border-width: 1px; border-style: solid; border-color: rgb(90, 90, 90); -moz-border-top-colors: none; -moz-border-right-colors: none; -moz-border-bottom-colors: none; -moz-border-left-colors: none;">2.2<br></section></section><section style="display: inline-block; margin-left: 0.7em; padding-top: 0em;"><section style="line-height: 2em; font-size: 20px; font-family: inherit; font-style: normal; font-weight: inherit; text-align: inherit; text-decoration: inherit; color: rgb(42, 52, 58);"><span style="font-size: 18px;">安装 SQL Server 登陆</span><br></section></section></section><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;">我已经提供了设置下面所需的SQL Server登录的说明。 但是，如果您需要其他帮助，请点击下面的几个链接来指导您创建数据库登录。</span></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;">有关更多信息，请访问http://msdn.microsoft.com/en-us/library/ms189751.aspx</span></p><h6 style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 16px;"><strong>设置SQL Server登录</strong></span></h6><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;">1. 打开SQL Server Management Studio并使用sa帐户登录到所有SQL Server实例。 通过打开三个独立的“对象探测器”，可以同时打开所有三个实例。 使用三个对象浏览器中的查询窗口在其余步骤中执行查询。</span></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;">2. 在server1上使用sysadmin角色创建名为“s1admin”，密码为“s1password”的数据库登录名。 注意：您可能需要禁用密码策略。</span></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.5em;"><img src="http://mmbiz.qpic.cn/mmbiz_png/1UG7KPNHN8Fx7IzBl4ibT7xZiaEauApjMB07qq9QyfbwvwHsQBDAX8oAGFJAdundddr5YraE77c7JACv7tTzmAng/0?wx_fmt=png" style="width: 596px !important; height: 72px !important;"></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.5em;"><span style="font-size: 15px;">3. 在server1上使用默认权限创建名为“s1user”的数据库登录名，密码为“s1password”。</span></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.5em;"><img src="http://mmbiz.qpic.cn/mmbiz_png/1UG7KPNHN8Fx7IzBl4ibT7xZiaEauApjMB9C8ia6sLcgxOicGcRg9D8qlAD2nhzX6bSN3v697Oa9UibqLfo8GfgmuSw/0?wx_fmt=png" style="width: 629px !important; height: 40px !important;"></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.5em;"><span style="font-size: 15px;">4. 在server2上使用默认权限创建一个名为“s2user”的数据库登录名，密码为“s2password”。</span></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.5em;"><img src="http://mmbiz.qpic.cn/mmbiz_png/1UG7KPNHN8Fx7IzBl4ibT7xZiaEauApjMBgMw9ibgnwiczFGKSI3I1ibtD2FwLjSA4YTibicQth7r0siaK4PUTHPKejrqA/0?wx_fmt=png" style="width: 590px !important; height: 41px !important;"></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.5em;"><span style="font-size: 15px;">5. 在server3上使用默认权限创建名为“s3user”的数据库登录名，密码为“s3password”。</span></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.5em;"><img src="http://mmbiz.qpic.cn/mmbiz_png/1UG7KPNHN8Fx7IzBl4ibT7xZiaEauApjMBN8rnugBDE88FOyia3ZLhJV5R1RkWFBehJOp7K1qBQUHpaanN8HspHwQ/0?wx_fmt=png" style="width: 543px !important; height: 40px !important;"></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.5em;"><span style="font-size: 15px;">6. 使用OSQL验证实例和登录是否正确设置。 检查实例是否响应广播请求：</span></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.5em;"><img src="http://mmbiz.qpic.cn/mmbiz_png/1UG7KPNHN8Fx7IzBl4ibT7xZiaEauApjMBf4sC5BR3Ka8k9XuAqlXCCepkY1HlKtiamA11Y3B5SKexYOr0lfFGdxA/0?wx_fmt=png" style="width: 473px !important; height: 23px !important;"></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.5em;"><span style="font-size: 15px;">在Windows cmd.exe控制台中，使用对象资源管理器或sqlcmd检查每个实例的数据库登录名是否可以登录：</span></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.5em;"><img src="http://mmbiz.qpic.cn/mmbiz_png/1UG7KPNHN8Fx7IzBl4ibT7xZiaEauApjMB3jD9tSLz7rpwMeTgIBolpmr6uo6xZ8PlLncWmYb7iaDkaBBmIxGnQSQ/0?wx_fmt=png" style="width: 519px !important; height: 74px !important;"></p><p><br></p><h5 style="margin-top: 15px; margin-bottom: 15px; line-height: 1.5em;"><span style="font-size: 15px;"></span></h5><section style="border-width: 0px; border-color: currentcolor; -moz-border-top-colors: none; -moz-border-right-colors: none; -moz-border-bottom-colors: none; -moz-border-left-colors: none; margin: 0.8em 0px 0.5em; border-style: none;" label="Copyright Reserved by ipaiban.com."><section style="display: inline-block; vertical-align: top; box-sizing: border-box !important; max-width: 100% !important; overflow-wrap: break-word !important; text-align: center;"><section class="" style="display: inline-block; width: 2em; height: 2em; border-radius: 50%; text-align: center; font-weight: inherit; line-height: 2em; font-size: 20px; font-family: inherit; font-style: normal; text-decoration: inherit; color: rgb(90, 90, 90); border-width: 1px; border-style: solid; border-color: rgb(90, 90, 90); -moz-border-top-colors: none; -moz-border-right-colors: none; -moz-border-bottom-colors: none; -moz-border-left-colors: none;">2.3<br></section></section><section style="display: inline-block; margin-left: 0.7em; padding-top: 0em;"><section style="line-height: 2em; font-size: 20px; font-family: inherit; font-style: normal; font-weight: inherit; text-align: inherit; text-decoration: inherit; color: rgb(42, 52, 58);"><span style="font-size: 18px;">安装XP_CMDSHELL</span><br></section></section></section><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.5em;"><span style="font-size: 15px;">以下是启用可以通过数据库执行本地操作系统命令的xp_cmdshell存储过程的说明。 只能在server1上启用它。</span></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.5em;"><img src="http://mmbiz.qpic.cn/mmbiz_png/1UG7KPNHN8Fx7IzBl4ibT7xZiaEauApjMB4e1tb01USwLibWseQO78VF3qvgQcyV68FnsW7th4VH13EtRV4xI2Law/0?wx_fmt=png" style="width: 360px !important; height: 108px !important;"></p><p><br></p><h5 style="margin-top: 15px; margin-bottom: 15px; line-height: 1.5em;"><span style="font-size: 15px;"></span></h5><section style="border-width: 0px; border-color: currentcolor; -moz-border-top-colors: none; -moz-border-right-colors: none; -moz-border-bottom-colors: none; -moz-border-left-colors: none; margin: 0.8em 0px 0.5em; border-style: none;" label="Copyright Reserved by ipaiban.com."><section style="display: inline-block; vertical-align: top; box-sizing: border-box !important; max-width: 100% !important; overflow-wrap: break-word !important; text-align: center;"><section class="" style="display: inline-block; width: 2em; height: 2em; border-radius: 50%; text-align: center; font-weight: inherit; line-height: 2em; font-size: 20px; font-family: inherit; font-style: normal; text-decoration: inherit; color: rgb(90, 90, 90); border-width: 1px; border-style: solid; border-color: rgb(90, 90, 90); -moz-border-top-colors: none; -moz-border-right-colors: none; -moz-border-bottom-colors: none; -moz-border-left-colors: none;">2.4</section></section><section style="display: inline-block; margin-left: 0.7em; padding-top: 0em;"><section style="line-height: 2em; font-size: 20px; font-family: inherit; font-style: normal; font-weight: inherit; text-align: inherit; text-decoration: inherit; color: rgb(42, 52, 58);"><span style="font-size: 18px;">安装SQL Server数据库链接</span><br></section></section></section><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;">以下是创建数据库的说明。 有关更多信息，可以在http://msdn.microsoft.com/en-us/library/ms190479.aspx中找到官方Microsoft页面。 我还建议使用Microsoft SQL Server Management Studio。 它能让人生不那么艰难。</span></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;">1. 使用s2user数据库登录创建一个从server1到server2的数据库链接。 添加数据库链接：</span></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.5em;"><img src="http://mmbiz.qpic.cn/mmbiz_png/1UG7KPNHN8Fx7IzBl4ibT7xZiaEauApjMBiag9sAc9NEcbxfYs7Uye1MSxMxPiatu6nmggx20icghcZ1Nd5iaibwTB3zw/0?wx_fmt=png" style="width: 543px !important; height: 89px !important;"></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.5em;"><span style="font-size: 15px;">添加将应用于数据库链接的数据库用户：</span></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.5em;"><img src="http://mmbiz.qpic.cn/mmbiz_png/1UG7KPNHN8Fx7IzBl4ibT7xZiaEauApjMBwrb2M5kJB4PhH8zeIgYOMG5mPwxC1I3kkII18n4ibTibg0p3YYC3mCsw/0?wx_fmt=png" style="width: 698px !important; height: 27px !important;"></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.5em;"><span style="font-size: 15px;">验证数据库链接已添加以下查询：</span></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.5em;"><img src="http://mmbiz.qpic.cn/mmbiz_png/1UG7KPNHN8Fx7IzBl4ibT7xZiaEauApjMBuVISWuTxqzkOkx0mPWIRREB8odm2S7Td3kYTdAemn8Brr1dMsengKg/0?wx_fmt=png" style="width: 329px !important; height: 25px !important;"></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.5em;"><span style="font-size: 15px;">通过向其发出查询来验证数据库链接的工作原理：</span></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.5em;"><img src="http://mmbiz.qpic.cn/mmbiz_png/1UG7KPNHN8Fx7IzBl4ibT7xZiaEauApjMBwhBfwOibMZl9lFbWvEB5zOVb2Zv8bMRhiaSHO7pibeeZ0aS9RZf2mzzUg/0?wx_fmt=png" style="width: 566px !important; height: 25px !important;"></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.5em;"><span style="font-size: 15px;">2. 使用s3user数据库登录创建一个从server2到server3的数据库链接。 添加数据库链接：</span></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.5em;"><img src="http://mmbiz.qpic.cn/mmbiz_png/1UG7KPNHN8Fx7IzBl4ibT7xZiaEauApjMBTlHsFWoVwPYquS1icjSeRVSGSScc9Qt2oz5ub4TwD8mjUnqTv1selkA/0?wx_fmt=png" style="width: 548px !important; height: 90px !important;"></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.5em;"><span style="font-size: 15px;">添加数据库用户的数据库链接：</span></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.5em;"><img src="http://mmbiz.qpic.cn/mmbiz_png/1UG7KPNHN8Fx7IzBl4ibT7xZiaEauApjMBxNE8AI0fwCDosqjEk28WFyBfyMyvRibEN5K8BfGMXwQcLibYBHZ408OQ/0?wx_fmt=png" style="width: 700px !important; height: 26px !important;"></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.5em;"><span style="font-size: 15px;">验证数据库链接已添加以下查询：<br></span></p><p>
			</p><p>
				</p><p>
					</p><blockquote><pre><p><span style="font-size: 14px;">select&nbsp;srvname&nbsp;from&nbsp;master..sysservers;</span></p></pre></blockquote><p>
				</p><p>
			</p><p>
		</p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.5em;"><span style="font-size: 15px;">通过向其发出查询来验证数据库链接的工作原理：</span></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.5em;"><img src="http://mmbiz.qpic.cn/mmbiz_png/1UG7KPNHN8Fx7IzBl4ibT7xZiaEauApjMBKsAEl82ZlmzmLn6fQbAEArOUsLOXaMYFthqWTiaK9yhkzGTxkGfNC3A/0?wx_fmt=png" style="width: 574px !important; height: 23px !important;"></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.5em;"><span style="font-size: 15px;">3. 使用s1admin数据库登录创建一个从server3到server1的数据库链接。 添加数据库链接：</span></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.5em;"><img src="http://mmbiz.qpic.cn/mmbiz_png/1UG7KPNHN8Fx7IzBl4ibT7xZiaEauApjMBIJ2LESh44gAWkCj2rT9V91jHfoMovjZBhDCn3k8FUhv9INGzoGgShw/0?wx_fmt=png" style="width: 582px !important; height: 106px !important;"></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.5em;"><span style="font-size: 15px;">添加数据库用户的数据库链接：</span></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.5em;"><img src="http://mmbiz.qpic.cn/mmbiz_png/1UG7KPNHN8Fx7IzBl4ibT7xZiaEauApjMBVSBSS70oEmQibuSvsUmr08u0BXFtL51aAypcbn6N6CefEHptKtq0ZSw/0?wx_fmt=png" style="width: 704px !important; height: 26px !important;"></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.5em;"><span style="font-size: 15px;">验证数据库链接已添加以下查询：</span></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.5em;"><img src="http://mmbiz.qpic.cn/mmbiz_png/1UG7KPNHN8Fx7IzBl4ibT7xZiaEauApjMBiaVq6kbpZW9ibdSsUOXhKnIaUQFzff3msDntAcia6cxQVr5zU3a3T4mBg/0?wx_fmt=png" style="width: 550px !important; height: 28px !important;"></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.5em;"><span style="font-size: 15px;">通过向其发出查询来验证数据库链接的工作原理：</span></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.5em;"><img src="http://mmbiz.qpic.cn/mmbiz_png/1UG7KPNHN8Fx7IzBl4ibT7xZiaEauApjMB5RG9xhpMRwEgwBpLGIZN8CxQaHTCFWvkjV3GgpXaJVjqxV2s7e4Yzg/0?wx_fmt=png" style="width: 577px !important; height: 25px !important;"></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.5em;"><span style="font-size: 15px;">验证用户是否具有sysadmin权限。 下面的查询应该返回1：</span></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.5em;"><img src="http://mmbiz.qpic.cn/mmbiz_png/1UG7KPNHN8Fx7IzBl4ibT7xZiaEauApjMB1tWhaOibzardriaNEX80CZcUhicdSGhRC5auPxv3pydNIibuLsoRianE7Tg/0?wx_fmt=png" style="width: 696px !important; height: 27px !important;"></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.5em;"><span style="font-size: 15px;">4. 使用任何凭据在server1，server2和server3上创建一个坏的链接到“BADSERVER”。 此链接旨在模拟不再存在的服务器的链接。<br></span></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.5em;"><span style="font-size: 15px;">添加数据库链接：</span></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.5em;"><img src="http://mmbiz.qpic.cn/mmbiz_png/1UG7KPNHN8Fx7IzBl4ibT7xZiaEauApjMBUPTKEoMXFicuOQvIDeHia2HlaaB1f1175HpTNtD4TFlYOC1yfdgiaGDtw/0?wx_fmt=png" style="width: 285px !important; height: 110px !important;"></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.5em;"><span style="font-size: 15px;">添加数据库用户的数据库链接。 凭证在这里并不重要，因为这是为了模拟到不再存在的服务器的链接。 所以'baduser'和'badpassword'可以是任何值。</span></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.5em;"><img src="http://mmbiz.qpic.cn/mmbiz_png/1UG7KPNHN8Fx7IzBl4ibT7xZiaEauApjMBAtzu2GQTQaHmmBGF0OY162eQWuVh2DsdYoLBPHaoLLKG2NiayjsCj5g/0?wx_fmt=png" style="width: 566px !important; height: 26px !important;"></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.5em;"><span style="font-size: 15px;">验证数据库链接已添加以下查询：</span></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.5em;"><img src="http://mmbiz.qpic.cn/mmbiz_png/1UG7KPNHN8Fx7IzBl4ibT7xZiaEauApjMB6fMRfibE9wDGoI9TbVcVwtcKVpEEJib5TMdffXLZt6DM4K9K5hLLK8Kg/0?wx_fmt=png" style="width: 452px !important; height: 24px !important;"></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.5em;"><span style="font-size: 15px;">验证访问坏链接的尝试超出预期。</span></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.5em;"><img src="http://mmbiz.qpic.cn/mmbiz_png/1UG7KPNHN8Fx7IzBl4ibT7xZiaEauApjMBQTKuGzo2XeicYLRIItiaPcX1F1KcAfG81GNKp5nibAsicGxYicWbrzNDTPQ/0?wx_fmt=png" style="width: 496px !important; height: 24px !important;"></p><p><br></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.5em;"><span style="font-size: 15px;"></span></p><section style="border-width: 0px; border-color: currentcolor; -moz-border-top-colors: none; -moz-border-right-colors: none; -moz-border-bottom-colors: none; -moz-border-left-colors: none; margin: 0.8em 0px 0.5em; border-style: none;" label="Copyright Reserved by ipaiban.com."><section style="display: inline-block; vertical-align: top; box-sizing: border-box !important; max-width: 100% !important; overflow-wrap: break-word !important; text-align: center;"><section class="" style="display: inline-block; width: 2em; height: 2em; border-radius: 50%; text-align: center; font-weight: inherit; line-height: 2em; font-size: 20px; font-family: inherit; font-style: normal; text-decoration: inherit; color: rgb(90, 90, 90); border-width: 1px; border-style: solid; border-color: rgb(90, 90, 90); -moz-border-top-colors: none; -moz-border-right-colors: none; -moz-border-bottom-colors: none; -moz-border-left-colors: none;">2.5</section></section><section style="display: inline-block; margin-left: 0.7em; padding-top: 0em;"><section style="line-height: 2em; font-size: 20px; font-family: inherit; font-style: normal; font-weight: inherit; text-align: inherit; text-decoration: inherit; color: rgb(42, 52, 58);">安装易受攻击的Web应用程序<br></section></section></section><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;">1. 在Server1上从Microsoft下载并安装AdventureWorks2008_Database.zip数据库。 它可以从http://msftdbprodsamples.codeplex.com/releases/view/93587下载。</span></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;">以下是安装步骤的概述。</span></p><h6 style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;">a. 将AdventureWorks2008_Database.zip解压到c：驱动器上的文件夹<br>b. 打开Microsoft SQL Server Management Studio并连接到server1实例<br>c. 右键单击数据库节点<br>d. 选择附加...<br>e. 从解压到的路径中选择AdventureWorks2008数据库文件<br>f. 使数据库登录s1user为AdventureWorks的数据库所有者。</span></h6><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.5em;"><img src="http://mmbiz.qpic.cn/mmbiz_png/1UG7KPNHN8Fx7IzBl4ibT7xZiaEauApjMBYXTAibYTHSeLgDhvMNLgqZIU4gMkmCxoLTcMrnYOYcjQTWyHlrZYJ0A/0?wx_fmt=png" style="width: 399px !important; height: 23px !important;"></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.5em;"><img src="http://mmbiz.qpic.cn/mmbiz_png/1UG7KPNHN8Fx7IzBl4ibT7xZiaEauApjMB0rgJAAacEK6MeAc5D3varG6j3HibeENufg7ibddt2ViantPcmricmss0VQ/0?wx_fmt=png" style="width: 401px !important; height: 27px !important;"></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;">有关更多信息，请访问http://msdn.microsoft.com/en-us/library/ms178630(v=sql.90).aspx。</span></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;">2. 安装IIS服务器并启用对asp页面的支持。</span></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;">a. 在Windows上安装IIS： http://www.howtogeek.com/howto/windows-vista/how-to-install-iis-on-windows-vista/</span></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;">b. 启用ASP页面的使用：http://www.iis.net/learn/application-frameworks/running-classic-asp-applications-on-iis-
 7-and-iis-8 / classic-asp-not-installed-by-default-on-IIS</span></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;">3.从GitHub下载并安装易受攻击的ASP页面到C：\ Inetpub \ wwwroot。 链接到易受攻击的页面下载列表如下。</span></p><ul style="list-style-type: disc;" class="list-paddingleft-2"><li><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;">employee.asp&nbsp;</span></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;">https://raw2.github.com/nullbind/Metasploit-Modules/master/employee.asp</span></p></li><li><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;">search.asp&nbsp;</span></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;">https://raw2.github.com/nullbind/Metasploit-Modules/master/search.asp</span></p></li></ul><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;">4.编辑empolyee.asp和search.asp页面。 将db_server变量更改为您为server1安装的服务器名称和实例。 它应该看起来像下面的例子。</span></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><img src="http://mmbiz.qpic.cn/mmbiz_png/1UG7KPNHN8Fx7IzBl4ibT7xZiaEauApjMBXriaxudtrlqo3eIunITCMuUrOR1QUQ0IpLpaGArPHWic6OJceribk3pWg/0?wx_fmt=png" style="width: 324px !important; height: 23px !important;"></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;">5.启用详细错误消息。 根据您的版本IIS详细错误可能会启用，但是如果他们不是下面的链接应该能够给你一些指导。<br></span></p><ul style="list-style-type: disc;" class="list-paddingleft-2"><li><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;">http://www.iis.net/learn/application-frameworks/running-classic-asp-applications-on-iis-7-and-
 
iis-8/classic-asp-script-error-messages-no-longer-shown-in-web-browser-by-default</span></p></li><li><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;">http://blogs.msdn.com/b/rakkimk/archive/2007/05/25/iis7-how-to-enable-the-detailed-error-
 
messages-for-the-website-while-browsed-from-for-the-client-browsers.aspx</span></p></li></ul><p><br></p><h4 style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;"></span></h4><section label="Copyright © 2015 playhudong All Rights Reserved." style="border-width: medium; border-color: currentcolor; -moz-border-top-colors: none; -moz-border-right-colors: none; -moz-border-bottom-colors: none; -moz-border-left-colors: none; border-style: none; margin: 1em auto; text-align: center;"><span style="min-width: 92px; text-align: center; display: inline-block;"><span class="" style="background-color: rgb(34, 172, 56); border-radius: 50%; display: inline-block;"><section style="background-color: rgb(255, 255, 255); font-size: 18px; border-radius: 50%; height: 20px; width: 20px; line-height: 20px; text-align: center; margin: 5px; display: inline-block;"><p style="margin: 0px;">3</p></section></span><span class="" style="margin: -3px auto 0px; width: 4px; border-width: 11px 9px 9px; border-style: solid; border-color: rgb(34, 172, 56) transparent transparent; -moz-border-top-colors: none; -moz-border-right-colors: none; -moz-border-bottom-colors: none; -moz-border-left-colors: none; height: 3px; display: block;"></span></span><br><section class="" style="border-top: 2px solid rgb(34, 172, 56); padding: 5px 10px; font-size: 18px; display: inline-block;"><p style="margin: 0px;">通过直接数据库连接手动攻击<br></p></section></section><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;">在本章中，您将使用SQL
 Server Management 
Studio连接到SERVER1，通过链接爬网将权限升级到sysadmin，并通过xp_cmdshell存储过程在OS级别接管服务器。 
在下面的示例中，10.2.9.183中已经安装了所有SQL Server实例。</span></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;">这是在发现没有sysadmin访问权限的登录后，在内部渗透测试中可能会发现的一个很好的例子。</span></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><br></p><section style="border-width: 0px; border-color: currentcolor; -moz-border-top-colors: none; -moz-border-right-colors: none; -moz-border-bottom-colors: none; -moz-border-left-colors: none; margin: 0.8em 0px 0.5em; border-style: none;" label="Copyright Reserved by ipaiban.com."><section style="display: inline-block; vertical-align: top; box-sizing: border-box !important; max-width: 100% !important; overflow-wrap: break-word !important; text-align: center;"><section class="" style="display: inline-block; width: 2em; height: 2em; border-radius: 50%; text-align: center; font-weight: inherit; line-height: 2em; font-size: 20px; font-family: inherit; font-style: normal; text-decoration: inherit; color: rgb(90, 90, 90); border-width: 1px; border-style: solid; border-color: rgb(90, 90, 90); -moz-border-top-colors: none; -moz-border-right-colors: none; -moz-border-bottom-colors: none; -moz-border-left-colors: none;">3.1</section></section><section style="display: inline-block; margin-left: 0.7em; padding-top: 0em;"><section style="line-height: 2em; font-size: 20px; font-family: inherit; font-style: normal; font-weight: inherit; text-align: inherit; text-decoration: inherit; color: rgb(42, 52, 58);"><span style="font-size: 18px;">以用户身份登录Server1</span><br></section></section></section><p class=""><span style="font-size: 15px;">SQL Server Management Studio Express可以作为SQL Server安装的一部分或单独安装。 安装完成后，使用它连接到SERVER1实例，如下所示。 但是，请注意，您的IP地址可能不同。</span></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><img src="http://mmbiz.qpic.cn/mmbiz_png/1UG7KPNHN8Fx7IzBl4ibT7xZiaEauApjMBYj6V9Pib8QbJcn1YpAj9sQ2icficns7dicriaRgNMda0SIPRvL3nEdnQgVA/0?wx_fmt=png" style="width: 770px !important; height: 594.183px !important;"><br></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;">单击“新建查询”按钮，并键入以下查询以确定s1user是否为系统管理员。</span></p><p><img src="http://mmbiz.qpic.cn/mmbiz_png/1UG7KPNHN8Fx7IzBl4ibT7xZiaEauApjMBH61HYlMGykHJecbyvOvKJRSPVvibm18I3dIwPxYQoM9bYv3dibjicpicsQ/0?wx_fmt=png" style="width: 344px !important; height: 28px !important;"></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;">结果应该类似于下面的截图。<br></span></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><img src="http://mmbiz.qpic.cn/mmbiz_png/1UG7KPNHN8Fx7IzBl4ibT7xZiaEauApjMBH67YAYyUWlJEhqLWQYOf4A9FQHEshxDwWySpsh7t6R6dQ7GicaibT68Q/0?wx_fmt=png" style="width: 770px !important; height: 582.633px !important;"><br></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;">“0”告诉我们，s1user没有sysadmin权限，所以让我们使用下面的查询找到一些爬网链接。</span></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;"></span></p><p><img src="http://mmbiz.qpic.cn/mmbiz_png/1UG7KPNHN8Fx7IzBl4ibT7xZiaEauApjMBKKoUUx1NqaskAbVvBUKBMYTvYZJknYOzGicdCVAFNGSYAWVH8M72AOg/0?wx_fmt=png" style="width: 344px !important; height: 24px !important;"></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;"></span><span style="font-size: 15px;">结果应该类似于下面的屏幕截图。<br></span></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><img src="http://mmbiz.qpic.cn/mmbiz_png/1UG7KPNHN8Fx7IzBl4ibT7xZiaEauApjMBs7FUl3hc8RjUKoXezKoOwoQWf9HnB7EbuFZiaice503WA8HOe1KwKtJw/0?wx_fmt=png" style="width: 770px !important; height: 597.392px !important;"><br></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;">它应该显示三个链接的服务器。 “BADSERVER”是一个死链接，“WIN-ODG2LLLUIPN”没有数据访问。 所以我们来关注“.\SERVER2”的链接。</span></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;"><br></span></p><section style="border-width: 0px; border-color: currentcolor; -moz-border-top-colors: none; -moz-border-right-colors: none; -moz-border-bottom-colors: none; -moz-border-left-colors: none; margin: 0.8em 0px 0.5em; border-style: none;" label="Copyright Reserved by ipaiban.com."><section style="display: inline-block; vertical-align: top; box-sizing: border-box !important; max-width: 100% !important; overflow-wrap: break-word !important; text-align: center;"><section class="" style="display: inline-block; width: 2em; height: 2em; border-radius: 50%; text-align: center; font-weight: inherit; line-height: 2em; font-size: 20px; font-family: inherit; font-style: normal; text-decoration: inherit; color: rgb(90, 90, 90); border-width: 1px; border-style: solid; border-color: rgb(90, 90, 90); -moz-border-top-colors: none; -moz-border-right-colors: none; -moz-border-bottom-colors: none; -moz-border-left-colors: none;">3.2</section></section><section style="display: inline-block; margin-left: 0.7em; padding-top: 0em;"><section style="line-height: 2em; font-size: 20px; font-family: inherit; font-style: normal; font-weight: inherit; text-align: inherit; text-decoration: inherit; color: rgb(42, 52, 58);"><span style="font-size: 18px;">作为用户从服务器1爬到服务器2</span><br></section></section></section><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;">使用下面的查询检查“.\SERVER2”这个链接配置是什么权限。</span></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;"></span></p><p><img src="http://mmbiz.qpic.cn/mmbiz_png/1UG7KPNHN8Fx7IzBl4ibT7xZiaEauApjMBTbdIRnHpiarO7Un6cMvzcnqsF5yOoVIky0uZmu4H2NInX28qTPFNIZg/0?wx_fmt=png" style="width: 414px !important; height: 55px !important;"></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;"></span><span style="font-size: 15px;">结果应该像下面的屏幕截图。</span></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><img src="http://mmbiz.qpic.cn/mmbiz_png/1UG7KPNHN8Fx7IzBl4ibT7xZiaEauApjMBsGIp3W3sbXfMTSH7fVZ2fguqdyAa9tQ45UpJlJdmvGucjs7rLmibc5g/0?wx_fmt=png" style="width: 770px !important; height: 587.125px !important;"><br></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;">又一次，我们没有sysadmin权限，所以让我们来看看SERVER2上的数据库链接。 使用下面的查询列出SERVER2上的链接服务器。</span></p><p><img src="http://mmbiz.qpic.cn/mmbiz_png/1UG7KPNHN8Fx7IzBl4ibT7xZiaEauApjMBeTvhJmIysUgylL1UBwDq6rnPTIlb8X045gHenYfUeRe7C1mo7dEsAQ/0?wx_fmt=png" style="width: 337px !important; height: 61px !important;"></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;">结果应该像下面的屏幕截图。</span></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><img src="http://mmbiz.qpic.cn/mmbiz_png/1UG7KPNHN8Fx7IzBl4ibT7xZiaEauApjMBb22W0Tu69qZvFztlcoicC48XvVfIgdSafEA4aJdGP1cfhRBYxAkOF4A/0?wx_fmt=png" style="width: 770px !important; height: 605.733px !important;"><br></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;">与SERVER1类似，您应该看到三个链接。 我们专注于链接到“。\ SERVER3”</span></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><br></p><section style="border-width: 0px; border-color: currentcolor; -moz-border-top-colors: none; -moz-border-right-colors: none; -moz-border-bottom-colors: none; -moz-border-left-colors: none; margin: 0.8em 0px 0.5em; border-style: none;" label="Copyright Reserved by ipaiban.com."><section style="display: inline-block; vertical-align: top; box-sizing: border-box !important; max-width: 100% !important; overflow-wrap: break-word !important; text-align: center;"><section class="" style="display: inline-block; width: 2em; height: 2em; border-radius: 50%; text-align: center; font-weight: inherit; line-height: 2em; font-size: 20px; font-family: inherit; font-style: normal; text-decoration: inherit; color: rgb(90, 90, 90); border-width: 1px; border-style: solid; border-color: rgb(90, 90, 90); -moz-border-top-colors: none; -moz-border-right-colors: none; -moz-border-bottom-colors: none; -moz-border-left-colors: none;">3.3</section></section><section style="display: inline-block; margin-left: 0.7em; padding-top: 0em;"><section style="line-height: 2em; font-size: 20px; font-family: inherit; font-style: normal; font-weight: inherit; text-align: inherit; text-decoration: inherit; color: rgb(42, 52, 58);"><span style="font-size: 18px;">作为用户从服务器2爬到服务器3</span><br></section></section></section><p class=""><span style="font-size: 15px;">使用下面的查询检查“.\SERVER3”的链接配置是什么权限。</span></p><p><img src="http://mmbiz.qpic.cn/mmbiz_png/1UG7KPNHN8Fx7IzBl4ibT7xZiaEauApjMBq2gwU57wDVQTf1kT4LyUia3KibRDWTSOHgzpVFB5Pjlhlek7euXjlHTA/0?wx_fmt=png" style="width: 389px !important; height: 75px !important;"></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;">结果应该像下面的屏幕截图。<br></span></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><img src="http://mmbiz.qpic.cn/mmbiz_png/1UG7KPNHN8Fx7IzBl4ibT7xZiaEauApjMBOUxOpvkeKlar0P5mtXRtT3zZ4JnQp8GcZSibvURmVw0Nz40uGPPqYVw/0?wx_fmt=png" style="width: 770px !important; height: 535.792px !important;"><br></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;">再次，我们没有sysadmin权限，所以让我们来看看SERVER3上的数据库链接，接下来使用下面的查询。</span></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;"></span></p><p><img src="http://mmbiz.qpic.cn/mmbiz_png/1UG7KPNHN8Fx7IzBl4ibT7xZiaEauApjMBwuPF4icpz6arBQZqAhRqjjr3QfbXcO8M6jXviaricohFJJWic253FxA79A/0?wx_fmt=png" style="width: 337px !important; height: 90px !important;"></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><img src="http://mmbiz.qpic.cn/mmbiz_png/1UG7KPNHN8Fx7IzBl4ibT7xZiaEauApjMBfppneXaCy3LXictiacEzo79V0UXGCwqibcictDLGlqxCIBZr8WM0tqnGOg/0?wx_fmt=png" style="width: 770px !important; height: 532.583px !important;"><br></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;">看起来我们有一个链接到SERVER1。 让我们看看我们可以从中得到什么</span></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><br></p><section style="border-width: 0px; border-color: currentcolor; -moz-border-top-colors: none; -moz-border-right-colors: none; -moz-border-bottom-colors: none; -moz-border-left-colors: none; margin: 0.8em 0px 0.5em; border-style: none;" label="Copyright Reserved by ipaiban.com."><section style="display: inline-block; vertical-align: top; box-sizing: border-box !important; max-width: 100% !important; overflow-wrap: break-word !important; text-align: center;"><section class="" style="display: inline-block; width: 2em; height: 2em; border-radius: 50%; text-align: center; font-weight: inherit; line-height: 2em; font-size: 20px; font-family: inherit; font-style: normal; text-decoration: inherit; color: rgb(90, 90, 90); border-width: 1px; border-style: solid; border-color: rgb(90, 90, 90); -moz-border-top-colors: none; -moz-border-right-colors: none; -moz-border-bottom-colors: none; -moz-border-left-colors: none;">3.4</section></section><section style="display: inline-block; margin-left: 0.7em; padding-top: 0em;"><section style="line-height: 2em; font-size: 20px; font-family: inherit; font-style: normal; font-weight: inherit; text-align: inherit; text-decoration: inherit; color: rgb(42, 52, 58);"><span style="font-size: 18px;">从Sysadmin从Server3爬到Server1</span><br></section></section></section><p class=""><span style="font-size: 15px;"><br></span></p><p class=""><span style="font-size: 15px;">让我们使用下面的查询检查链接到SERVER1的权限。</span></p><p><img src="http://mmbiz.qpic.cn/mmbiz_png/1UG7KPNHN8Fx7IzBl4ibT7xZiaEauApjMBjdmiau6sQH135UJdqvJxPeibgS5vFwteSnImE6lLvMIncp9GM3Jjo6jg/0?wx_fmt=png" style="width: 465px !important; height: 93px !important;"></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;">结果应该像下面的屏幕截图。</span></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><img src="http://mmbiz.qpic.cn/mmbiz_png/1UG7KPNHN8Fx7IzBl4ibT7xZiaEauApjMBqjYQ7axCeeIkylTQU1N825iasJXPCs2qfY6lvPR16pibGgHsiatXF9h2w/0?wx_fmt=png" style="width: 770px !important; height: 497.933px !important;"><br></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;">最后，它返回了“1”！ 您现在可以使用sysadmin访问SERVER1。</span></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><br></p><section style="border-width: 0px; border-color: currentcolor; -moz-border-top-colors: none; -moz-border-right-colors: none; -moz-border-bottom-colors: none; -moz-border-left-colors: none; margin: 0.8em 0px 0.5em; border-style: none;" label="Copyright Reserved by ipaiban.com."><section style="display: inline-block; vertical-align: top; box-sizing: border-box !important; max-width: 100% !important; overflow-wrap: break-word !important; text-align: center;"><section class="" style="display: inline-block; width: 2em; height: 2em; border-radius: 50%; text-align: center; font-weight: inherit; line-height: 2em; font-size: 20px; font-family: inherit; font-style: normal; text-decoration: inherit; color: rgb(90, 90, 90); border-width: 1px; border-style: solid; border-color: rgb(90, 90, 90); -moz-border-top-colors: none; -moz-border-right-colors: none; -moz-border-bottom-colors: none; -moz-border-left-colors: none;">3.5</section></section><section style="display: inline-block; margin-left: 0.7em; padding-top: 0em;"><section style="line-height: 2em; font-size: 20px; font-family: inherit; font-style: normal; font-weight: inherit; text-align: inherit; text-decoration: inherit; color: rgb(42, 52, 58);"><span style="font-size: 18px;">通过服务器3链接将OS管理员添加到服务器1</span><br></section></section></section><p class=""><span style="font-size: 15px;">现在我们有sysadmin访问SERVER1，我们可以向操作系统添加本地管理员。 我们先从使用下面的查询添加一个用户开始。</span></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;">注意：只要返回一个值，可以通过链接的OPENQUERY执行任何存储过程。 这就是为什么在调用xp_cmdshell之前使用“SELECT 1”。</span></p><p><img src="http://mmbiz.qpic.cn/mmbiz_png/1UG7KPNHN8Fx7IzBl4ibT7xZiaEauApjMBWdzufrbFhGGQ6bU9kVTb5tLia26W7X57zJVHh8z9JrKYbwkyzltypXw/0?wx_fmt=png" style="width: 549px !important; height: 108px !important;"></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;">结果应该像下面的屏幕截图。</span></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><img src="http://mmbiz.qpic.cn/mmbiz_png/1UG7KPNHN8Fx7IzBl4ibT7xZiaEauApjMBlvz4Iym7JJGt7pPjXWQn2U33ib2kyWJl9dpYkpJibphbWcXYvKc17ibiaQ/0?wx_fmt=png" style="width: 770px !important; height: 419.65px !important;"><br></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;">不幸的是，xp_cmdshell存储过程在通过OPENQUERY使用时不会显示输出，因为我们需要使用“SELECT 1”。 所以如果查询失败，返回“1”。 无论哪种方式，新操作系统用户都可以使用下面的查询添加到“管理员”组。</span></p><p><img src="http://mmbiz.qpic.cn/mmbiz_png/1UG7KPNHN8Fx7IzBl4ibT7xZiaEauApjMBTXjJgTqH3P22EXsuzG51UyUrfvOazFBC1l4sWwHGWXdVEuELB6bVeA/0?wx_fmt=png" style="width: 586px !important; height: 106px !important;"></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;">再次返回1，如下面的截图所示。<br></span></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><img src="http://mmbiz.qpic.cn/mmbiz_png/1UG7KPNHN8Fx7IzBl4ibT7xZiaEauApjMBHXcNLkibt3wRrJrxqmdfc0sicX3IIibvTGS9m4RpQBRhb0MwGP5Ng8aHg/0?wx_fmt=png" style="width: 770px !important; height: 422.217px !important;"><br></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;">如果一切正常，您现在应该可以通过远程桌面使用新帐户登录服务器。</span></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><img src="http://mmbiz.qpic.cn/mmbiz_png/1UG7KPNHN8Fx7IzBl4ibT7xZiaEauApjMBK7F3Ecjdhow0J93iatODKgMiapO8prtl3MHYrk5icpDxofOUGBZHkEkibA/0?wx_fmt=png" style="width: 770px !important; height: 582.633px !important;"></p><p style="line-height: normal; margin-top: 15px; margin-bottom: 15px; text-align: center;"><span style="font-size: 14px; color: rgb(136, 136, 136);">本文由 看雪翻译小组 Daemond 编译，来源 netspi</span><span style="font-size: 15px; color: rgb(136, 136, 136);"><br></span></p><p style="line-height: normal; margin-top: 15px; margin-bottom: 15px; text-align: center;"><span style="font-size: 14px; color: rgb(136, 136, 136);"></span><br></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em; text-align: center;"><span style="font-size: 15px; color: rgb(255, 104, 39);">如果你喜欢的话，不要忘记点个赞哦！</span><br></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><br></p><p style="margin-top: 15px; margin-bottom: 15px; line-height: 1.75em;"><span style="font-size: 15px;"></span></p><p style="margin-top: 15px; margin-bottom: 15px; max-width: 100%; min-height: 1em; line-height: 1.75em; box-sizing: border-box !important; overflow-wrap: break-word !important;"><span style="max-width: 100%; color: rgb(79, 138, 187); box-sizing: border-box !important; overflow-wrap: break-word !important;"><strong style="max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">热门阅读文章：<br></strong></span></p><hr style="max-width: 100%; line-height: 25.6px; box-sizing: border-box !important; overflow-wrap: break-word !important;"><p style="max-width: 100%; min-height: 1em; line-height: 25.6px; box-sizing: border-box !important; overflow-wrap: break-word !important;"><br style="max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;"></p><ul class="list-paddingleft-2" style="list-style-type: circle;"><li><p style="margin-top: 10px; margin-bottom: 10px; max-width: 100%; min-height: 1em; line-height: normal; box-sizing: border-box !important; overflow-wrap: break-word !important;"><span style="max-width: 100%; font-size: 15px; box-sizing: border-box !important; overflow-wrap: break-word !important;"><a href="http://mp.weixin.qq.com/s?__biz=MjM5NTc2MDYxMw==&amp;mid=2458283127&amp;idx=1&amp;sn=a456b8495b438499ab68d1a2c32e543c&amp;chksm=b1815cfd86f6d5eb01205cf7c3052d428b2e9105d34523a276bdfb774c7adbbcbd197210f286&amp;scene=21#wechat_redirect" target="_blank">看雪 CTF 2017 攻击篇 6月强势来袭！</a></span></p></li><li><p style="margin-top: 10px; margin-bottom: 10px; max-width: 100%; min-height: 1em; line-height: normal; box-sizing: border-box !important; overflow-wrap: break-word !important;"><span style="max-width: 100%; font-size: 15px; box-sizing: border-box !important; overflow-wrap: break-word !important;"><a href="http://mp.weixin.qq.com/s?__biz=MjM5NTc2MDYxMw==&amp;mid=2458283372&amp;idx=2&amp;sn=667897f27a1a4327164e179f7efd70ac&amp;chksm=b1815de686f6d4f0e42672beece10320af227b03091fc2b746d2bcee7b749502a33153b21aed&amp;scene=21#wechat_redirect" target="_blank">SQL注入新手教程（第一部分）2</a></span></p></li><li><p style="margin-top: 10px; margin-bottom: 10px; max-width: 100%; min-height: 1em; line-height: normal; box-sizing: border-box !important; overflow-wrap: break-word !important;"><span style="max-width: 100%; font-size: 15px; box-sizing: border-box !important; overflow-wrap: break-word !important;"><a href="http://mp.weixin.qq.com/s?__biz=MjM5NTc2MDYxMw==&amp;mid=2458283363&amp;idx=1&amp;sn=ab837d12482aa4092204664301720b31&amp;chksm=b1815de986f6d4fff83647e7ff6d85bc3c31ff58384fbdf5c43ec2b9ab35ba1dc657a8076119&amp;scene=21#wechat_redirect" target="_blank">SQL注入新手教程（第一部分）1</a></span></p></li><li><p style="margin-top: 10px; margin-bottom: 10px; max-width: 100%; min-height: 1em; line-height: normal; box-sizing: border-box !important; overflow-wrap: break-word !important;"><span style="max-width: 100%; font-size: 15px; box-sizing: border-box !important; overflow-wrap: break-word !important;"><a href="http://mp.weixin.qq.com/s?__biz=MjM5NTc2MDYxMw==&amp;mid=2458283357&amp;idx=3&amp;sn=28d3ad1dca38b1010b60c0413a0b3c24&amp;chksm=b1815dd786f6d4c1782465c6788e2e08a7578d1561c909899b500cda50a8396a61c36632d4a3&amp;scene=21#wechat_redirect" target="_blank">frame busting 各种姿势，防护总结（二）</a></span></p></li><li><p style="margin-top: 10px; margin-bottom: 10px; max-width: 100%; min-height: 1em; line-height: normal; box-sizing: border-box !important; overflow-wrap: break-word !important;"><span style="max-width: 100%; font-size: 15px; box-sizing: border-box !important; overflow-wrap: break-word !important;"><a href="http://mp.weixin.qq.com/s?__biz=MjM5NTc2MDYxMw==&amp;mid=2458283322&amp;idx=1&amp;sn=ac35a5a101382ed74fe8d4ef90662fa5&amp;chksm=b1815db086f6d4a65c92af5167d9a5a5e8dd565f5579d706f206fd6a6f7ac3c8c9ebbf544f82&amp;scene=21#wechat_redirect" target="_blank">frame busting 各种姿势，防护总结（一）</a><br></span></p></li><li><p style="margin-top: 10px; margin-bottom: 10px; max-width: 100%; min-height: 1em; line-height: normal; box-sizing: border-box !important; overflow-wrap: break-word !important;"><span style="max-width: 100%; font-size: 15px; box-sizing: border-box !important; overflow-wrap: break-word !important;">......<br style="max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;"></span></p></li></ul><p style="margin-top: 15px; margin-bottom: 15px; max-width: 100%; min-height: 1em; line-height: 1.75em; box-sizing: border-box !important; overflow-wrap: break-word !important;"><span style="max-width: 100%; font-size: 15px; box-sizing: border-box !important; overflow-wrap: break-word !important;">更多优秀文章，长按下方二维码，“<span style="max-width: 100%; color: rgb(0, 122, 170);">关注看雪学院公众号</span>”查看！</span></p><p style="margin-top: 15px; margin-bottom: 15px; max-width: 100%; min-height: 1em; line-height: 1.75em; box-sizing: border-box !important; overflow-wrap: break-word !important;"><span style="max-width: 100%; font-size: 15px; box-sizing: border-box !important; overflow-wrap: break-word !important;"></span></p><p style="max-width: 100%; min-height: 1em; box-sizing: border-box !important; overflow-wrap: break-word !important;"><img src="http://mmbiz.qpic.cn/mmbiz_jpg/1UG7KPNHN8E4ItLe4LX3YbLUffeV86icpcBApdQiakmEMuy4q8mVAaBjA0P1wez6NzO52zvKNlQQQ4siaztZDYhBg/640?wx_fmt=jpeg" style="box-sizing: border-box !important; overflow-wrap: break-word !important; visibility: visible !important; width: 640px !important; height: 426px !important;"></p><p style="margin-top: 15px; margin-bottom: 15px; max-width: 100%; min-height: 1em; line-height: 1.75em; box-sizing: border-box !important; overflow-wrap: break-word !important;"><span style="max-width: 100%; font-size: 15px; box-sizing: border-box !important; overflow-wrap: break-word !important;"></span><span style="max-width: 100%; color: rgb(178, 178, 178); box-sizing: border-box !important; overflow-wrap: break-word !important; font-size: 15px;">看雪论坛：http://bbs.pediy.com/</span><span style="max-width: 100%; color: rgb(178, 178, 178); font-size: 14px; box-sizing: border-box !important; overflow-wrap: break-word !important;"><br style="max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;"></span></p><p style="margin-top: 15px; margin-bottom: 15px; max-width: 100%; min-height: 1em; line-height: 1.75em; box-sizing: border-box !important; overflow-wrap: break-word !important;"><span style="max-width: 100%; color: rgb(178, 178, 178); font-size: 15px; box-sizing: border-box !important; overflow-wrap: break-word !important;">微信公众号 ID：ikanxue</span></p><p style="margin-top: 15px; margin-bottom: 15px; max-width: 100%; min-height: 1em; line-height: 1.75em; box-sizing: border-box !important; overflow-wrap: break-word !important;"><span style="max-width: 100%; color: rgb(178, 178, 178); font-size: 15px; box-sizing: border-box !important; overflow-wrap: break-word !important;">微博：看雪安全</span></p><p><span style="max-width: 100%; color: rgb(178, 178, 178); font-size: 15px; box-sizing: border-box !important; overflow-wrap: break-word !important;">投稿、合作：www.kanxue.com</span></p><hr/><a href="http://mp.weixin.qq.com/s?timestamp=1498051979&src=3&ver=1&signature=nULoNfhbsabgcFJEB9PUQyx1hdTxM6K*VNtcxOeUN354nW26WI5lTIy9FI3*gxCaEHwjjiMY16zPEkDRPZ*5EMLqfT2jUheAsEFt*1xoJGWcGSN4cgJkPin8YqylVMG*18DOzHL4uelFv4r-BrsaztkCzmh*XI7fRamJmnPriCM=">微信地址</a> | <a href="http://bbs.pediy.com/thread-218402.htm">阅读原文</a>
{% endraw  %}

