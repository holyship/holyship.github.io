---
title: 一石多鸟——击溃全线移动平台浏览器（看雪2017安全开发者峰会演讲回顾12）
author: 陈佳林
wechat_source: >-
  http://mp.weixin.qq.com/s?timestamp=1512886045&src=3&ver=1&signature=0dsH*cvrb7sDcdE*f0PtKJTfSmWmpGSr1bt6eLQusWUeX1D3PeY-hy0sLVqqzj8ewzefSEoH9llGPntsMnS0FOTEpnTKj0YhrGhxpiUxIi08srAkYdA9VhmRLsMqiJ2rsgv0PWCz1h3z6fmd8O4AF*qqdBOVmnedyQ*dapfyk4c=
date: '2017-12-04 00:00:00 +0000'

---

{% raw  %}
<section label="Copyright Reserved by PLAYHUDONG." style="padding: 0.5em 1em;max-width: 100%;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;border-style: none;background-image: none;background-attachment: scroll;background-color: rgb(235, 235, 235);box-sizing: border-box !important;overflow-wrap: break-word !important;background-position: 0% 0%;background-repeat: repeat repeat;"><p style="margin-right: 8px;margin-left: 8px;max-width: 100%;min-height: 1em;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;color: rgb(79, 79, 79);letter-spacing: 2px;box-sizing: border-box !important;overflow-wrap: break-word !important;">看雪编辑按：作为通向互联网世界的一扇窗，浏览器早已融入了我们的日常生活。然而近年来针对浏览器的攻击却不断增长，方式也更加多元化，一旦这方面的利用技术被意图不轨者掌握，那么后果会非常严重。另一方面，企业的业务很大程度上也依托于互联网来完成。因此，如何防止浏览器被攻击者利用成了安全人员不可回避的问题，同时也是不可推卸的责任。本次看雪安全开发者峰会，陈佳林从 Pegasus 间谍软件披露的漏洞开始谈起，由一个具体的 WebKit 中 JavaScript 内核漏洞出发，详细阐述了漏洞的成因、内核堆风水、垃圾回收及 JIT 编译机制，并通过综合利用地址泄漏、对象伪造、指针劫持、堆喷和 ROP 等技巧最终实现了任意代码执行，为我们展示了一套完整的浏览器漏洞利用过程。<br></span></p><p style="margin-right: 8px;margin-left: 8px;max-width: 100%;min-height: 1em;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;color: rgb(79, 79, 79);letter-spacing: 2px;box-sizing: border-box !important;overflow-wrap: break-word !important;">以下内容为陈佳林演讲实录，由看雪学院（微信公众号：ikanxue）整理。</span></p></section><p><br></p><section class="" style="max-width: 100%;box-sizing: border-box;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;vertical-align: middle;display: inline-block;overflow-wrap: break-word !important;overflow: hidden !important;"><img src="https://mmbiz.qpic.cn/mmbiz_jpg/1UG7KPNHN8HBpXdNPiavD2fC1zuspNhVOIT7icNBaaCdmRNuGviaEjibAmUTAWYDutMdfjtCIDNwI2IcBHcb5qIZsw/0?wx_fmt=jpeg" style="box-sizing: border-box; vertical-align: middle; background-color: rgba(1, 0, 0, 0); overflow-wrap: break-word !important; visibility: visible !important; width: 556px !important; height: 370.296px !important;"></section><section class="" style="padding: 10px;max-width: 100%;box-sizing: border-box;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;display: inline-block;width: 670px;vertical-align: top;background-color: rgb(246, 246, 246);overflow-wrap: break-word !important;"><section class="" style="max-width: 100%;box-sizing: border-box;overflow-wrap: break-word !important;"><section class="" style="max-width: 100%;box-sizing: border-box;background-color: rgba(1, 0, 0, 0);overflow-wrap: break-word !important;"><section class="" style="max-width: 100%;box-sizing: border-box;line-height: 1.8;overflow-wrap: break-word !important;"><p style="max-width: 100%;box-sizing: border-box;min-height: 1em;background-color: rgba(1, 0, 0, 0);overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box;overflow-wrap: break-word !important;">陈佳林 <br style="max-width: 100%;box-sizing: border-box;background-color: rgba(1, 0, 0, 0);overflow-wrap: break-word !important;"></strong></span></p></section></section></section><section class="" style="max-width: 100%;box-sizing: border-box;overflow-wrap: break-word !important;"><section class="" style="margin-top: 5px;margin-bottom: 5px;max-width: 100%;box-sizing: border-box;background-color: rgba(1, 0, 0, 0);overflow-wrap: break-word !important;"><p style="max-width: 100%;box-sizing: border-box;text-align: justify;font-size: 14px;color: rgb(107, 107, 107);line-height: 1.8;overflow-wrap: break-word !important;margin-left: 8px;margin-right: 8px;"><span style="color: rgb(63, 63, 63);font-size: 15px;letter-spacing: 2px;">看雪ID：Roysue，看雪iOS版块版主，iOS独立安全研究员，iOS系列书籍作者。《iOS黑客养成笔记：数据挖掘与提权基础》电子工业出版社今年11月出版。《越狱！越狱！》正在撰写中，预计明年6月上市。</span></p><section class="" style="box-sizing: border-box;background-color: rgba(1, 0, 0, 0);"><section class="" style="margin: 10px 0%;box-sizing: border-box;"><section class="" style="text-align: left;color: rgb(62, 62, 62);letter-spacing: 0px;padding: 0px 10px;line-height: 1.8;box-sizing: border-box;background-color: rgba(1, 0, 0, 0);"><p style="margin: 0px;padding: 0px;box-sizing: border-box;"><span style="color: rgb(63, 63, 63);font-size: 15px;letter-spacing: 2px;">从小酷爱计算机，在网络空间和单机游戏中度过青少年生涯；大学没能读到计算机是最大的遗憾，却依旧戒不掉对计算机的这份酷爱，长时间浸淫在国内外各大论坛和技术书籍之中，心之所向，身之所往！</span></p></section></section></section></section></section></section><p><br></p><p style="margin-left: 8px;margin-right: 8px;"><img src="http://mmbiz.qpic.cn/mmbiz_png/1UG7KPNHN8HBpXdNPiavD2fC1zuspNhVOQsniaoOWed6ZKsyBGERHZu1icodFq66mezB2xNKzmiaUz8EFAnGwu6wUA/0?wx_fmt=png" style="width: 738px !important; height: 322px !important;"></p><p style="margin-left: 8px;margin-right: 8px;"><br></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">首先聊一下为什么叫做“一石多鸟”，标题主要是受长亭科技在今年的BlackHat 2017上发表的《一石多鸟——击溃全线浏览器》所启发，他们讲的是挖到了一个sqlite的漏洞，这个sqlite可不简单，所有的浏览器、常用的App，基本上全部使用到了这款小巧精悍的微型数据库，这个情况就跟OpenSSL库出问题是一样的，所有的https都是用到了SSL协议，像去年的“心脏滴血”事件，在这种底层库这样的地基出现问题的情况下，所有上层协议、模块和产品的安全荡然无存，互联网上几乎百分百的https网站都要受到影响。Sqlite出问题的话，攻破所有的浏览器和网站也是轻而易举，我们这次所要研究的，正是另外一项移动平台浏览器的“基础建筑”——JavaScript的解释引擎：JavaScriptCore。</span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">&nbsp;</span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">首先自我介绍一下，我是看雪论坛iOS板块的版主，我叫陈佳林。刚刚听了很多大神的演讲，心之所向，身之所往，想要更多地与大神进行交流，我们看雪就是这样的一个平台。演讲的时间很短，但是日常的工作和学习生活很长，而看雪论坛是经历了十七年风风雨雨为大家服务的论坛，我们都在这里，等待你来相聚，希望大家在论坛里多多发帖，学习知识和分享经验。</span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;"><br></span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">我的新书《iOS黑客指南：数据挖掘和提权基础》将在今年年内出版，书中具体介绍了逆向的一般方法论及iOS逆向入门的方方面面，也是我个人在学习和成长过程中的经验和技巧的总结，希望大家可以喜欢。</span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">&nbsp;</span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;"><br></span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="color: rgb(0, 81, 171);"><strong><span style="letter-spacing: 2px;font-size: 18px;">“炙热”的“大”前端</span></strong></span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;"><br></span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">我们先从目录开始说起，首先是“炙热”的“大”前端，前端的火热程度想必在座的各位都是非常感同身受的。</span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;"></span></p><p style="margin-left: 8px;margin-right: 8px;"><img src="http://mmbiz.qpic.cn/mmbiz_png/1UG7KPNHN8HBpXdNPiavD2fC1zuspNhVOM3PdICLzChZvthAHHJOkC5hwzIEHX5HG5fwVgrLTL6k5FR1vs2vgBQ/0?wx_fmt=png" style="width: 739px !important; height: 273px !important;"></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;"></span><br></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">“全栈”语言——JavaScript，作为大前端的基础组件，如果没有JavaScript，那么所有的网页都“动”不起来，并且无法与用户进行交互，JavaScript一开始只是运行在客户端的浏览器中，现在也可以运行在服务器上，作为Server与数据库、HTTP、Router等协议进行沟通，因此称为“全栈”语言。</span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;"><br></span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">我们来介绍这次分享的主角——Webkit及其组件JavaScriptCore中存在的一个漏洞，介绍如分析、调试、和利用这个漏洞，完成我们任意代码执行，弹出计算器的目的。</span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">&nbsp;</span></p><p style="margin-left: 8px;margin-right: 8px;"><img src="http://mmbiz.qpic.cn/mmbiz_png/1UG7KPNHN8HBpXdNPiavD2fC1zuspNhVOgticmibceDRjjbpiaxDzJ1a4mkWqEaicRSK85vhCogUYWSDicguddOibQdZw/0?wx_fmt=png" style="width: 737px !important; height: 404px !important;"></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;"></span><br></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">“大”前端有多“炙热”，去年前年就已经出现产品经理不再雇佣安卓或者iOS程序员的倾向，做宣传推广也好、做活动也好，都以H5作为主要的传播介质，不知道大家有没有发现，但凡是一些“现象级”、“病毒式”的营销，大多是由一个H5页面作为“PoC”的概念验证，造成疯狂传播的现象。</span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;"><br></span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">产品经理非常重视这一点，他们会要求链接在微信里一点就可以打开，一点就能看，比如前年去年很火的直播，如果还要点开再点开，再下载App，这个转化率就非常低了，大多数产品经理都会要求“点开就能看”，什么广告呀、条幅呀都跟着弹出来，至少可以马上养活这个平台，像“点开点开再下载App”这个套路用户就会迅速损失一大批，这对于直播平台来说是无法接受的。</span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;"><br></span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">基于H5能做的事情还有很多，覆盖了日常生活中的方方面面，包括朋友圈、各种公众号，公众号已经事实上成为了众多新媒体·自媒体的主战场，“10万+”也已经成为一个专有名词，在如此巨大的装机量和传播能级下，没有哪一个商家、甚至是个人，能够忽略这一块。</span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">&nbsp;</span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">H5仅仅是一个网页，JavaScript在其中发挥的作用与普通浏览器并无二致。功能更加强大的“小程序”与今年年初正式发布，发布初期很多人并没有找到其正确的玩法，或者说没能理解到其精髓，小程序在发布之初并没有爆发，而是循序渐进、稳扎稳打、暗中渗透。</span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;"><br></span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;"></span></p><p style="margin-left: 8px;margin-right: 8px;"><img src="http://mmbiz.qpic.cn/mmbiz_png/1UG7KPNHN8HBpXdNPiavD2fC1zuspNhVOuOHDJ6WkCjtwn0hXHpRC084icuhoDcicnBT5LVrhvGuTcRPyMkkRqxiaw/0?wx_fmt=png" style="width: 707px !important; height: 432px !important;"></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;"></span><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">&nbsp;</span><br></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">时至今日，我们的日常生活又被小程序给包围了，不管走到哪里，“红包店”遍地都是，现在没有红包店的接入的店铺已经很少了，买个战斗鸡排都可以抢红包，更不提肯德基、全家这些“重量级”玩家了。</span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">&nbsp;</span></p><p style="margin-left: 8px;margin-right: 8px;"><img src="http://mmbiz.qpic.cn/mmbiz_png/1UG7KPNHN8HBpXdNPiavD2fC1zuspNhVOqhwWibYV00403PMLbTaI9RAYfmlyAKtxK9bkfBlfsbj8hhFS49ibtJeA/0?wx_fmt=png" style="width: 704px !important; height: 415px !important;"></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">&nbsp;</span><br></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">然后就是一些稍微“中度”、“重度”的应用，移动支付自不必说，成为中国的“新四大发明”。</span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">&nbsp;</span></p><p style="margin-left: 8px;margin-right: 8px;"><img src="http://mmbiz.qpic.cn/mmbiz_png/1UG7KPNHN8HBpXdNPiavD2fC1zuspNhVOiaWX40aMMDiajVDIiaH97WNicD31aNymFAdSicH3C9DlfDB1PfVNXd3MEkw/0?wx_fmt=png" style="width: 696px !important; height: 433px !important;"></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">&nbsp;</span><br></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">共享单车也是其中之一，饿了么的客户端我已经卸载了，用小程序足矣，腾讯企业邮等等，这些产品原先自己都是单独的一个App，现在都以“寄居”的方式，生存在微信、支付宝、淘宝等App中。</span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;"><br></span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">小程序虽然表面上采用的是腾讯独立开发的wx接口和MINA框架，但是其底层调用的还是iOS或者安卓的Native的JavaScript解析引擎，比较直白的一个例子就是每当Chomium发布漏洞披露的时候，腾讯应急中心也会发布相应的版本更新，因为用户时常不更新自己的安卓系统，微信必须做到规避漏洞带来的影响。当然这种现在在iOS上会好很多，新版系统的更新频率远远大于安卓系统。</span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">&nbsp;</span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;"><br></span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="color: rgb(0, 81, 171);font-size: 18px;"><strong><span style="color: rgb(0, 81, 171);letter-spacing: 2px;">“全栈”语言：JavaScript</span></strong></span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;"><br></span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">JavaScript其诞生之初，仅仅是Netscape（网景），也就是火狐的前身，为了让单调的网页活跃一点，动起来，而在其浏览器上加入的一种动态网页技术。</span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;"><br></span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">当这项技术越来越流行越来越广泛的时候，为了保护JavaScript不被微软抢走，因为微软是有名的把别人的idea抄过来，自己做一个来代替他的copycat。事实上他们也这么做了，同样这么做了，微软抄袭之后推出了<span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: normal;">Jscript，Macromedia</span>公司（后被Adobe收购）推出了<span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: normal;">ActionScript，Netscape</span>为了保护<span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: normal;">JavaScript</span>，将其提交给欧洲计算机制造商协会ECMA。</span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;"><br></span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">ECMA在博取众长的基础上，推出了ECMAScript标准，这只是一项标准，大家可以采用也可以不采用，这就是为什么IE会成为很多前端程序员的噩梦的原因，IE总是“特立独行”，或者干脆不兼容，有效地“狙击”了JavaScript的发展。</span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;"><br></span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">当时间进入到2010年往后，ECMA 5、6、7甚至8的发布，大家还是很给面子的，基本上做到了JavaScript这门语言的统一，尤其是谷歌在推出开源的v8解析引擎之后，在nodejs的帮助下，JavaScript这门语言完成了在客户端上执行代码，到在服务器上执行代码的蜕变，JavaScript成为了“全栈”语言。</span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">&nbsp;</span></p><p style="margin-left: 8px;margin-right: 8px;"><img src="http://mmbiz.qpic.cn/mmbiz_png/1UG7KPNHN8HBpXdNPiavD2fC1zuspNhVOkXqeJEAAfYuVYCMrNRv9o3iaMzBhfbvedBozbD92KGdcyibubBcssIzA/0?wx_fmt=png" style="width: 737px !important; height: 318px !important;"></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;"></span><br></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">目前开源世界主流的三大网页浏览器是Chrome、Mozilla、和Safari。Mozilla自然其本身就是JavaScript的发明者，其网页渲染引擎叫做Gecko，JavaScript解析引擎叫做SpinderMonkey。Safari的网页渲染引擎是Webkit，网页解析引擎叫做JavaScriptCore，这也是我们今天的主角。</span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;"><br></span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">Chrome的Blink渲染引擎最初脱胎于Webkit，后来Chrome为了更加激进地提高JavaScript的性能，另起炉灶，牟足了劲把所有黑科技都给安上，推出了完全性能优先的v8引擎，这也是为什么刚刚使用Chrome时，能够体验到无与伦比的速度的原因，但是其缺陷也很明显，Chrome带来的开销和占用太大了，老电脑根本不敢开，几个页面就可以把性能全部吃光。</span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;"><br></span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">今天的主角是聊JavaScriptCore，也就是Webkit的JavaScript解析引擎，Webkit是老牌的网页渲染引擎了，距今已经有十多年的历史，而且只要是与苹果相关的平台，都是强制使用Webkit渲染引擎的，比如说哪怕即使是Chrome，iOS版本的Chrome和Firefox其内核都是Webkit，因为苹果不允许其使用其自己的内容，比较iOS是“我的地盘我做主”嘛。当然安卓和PC平台苹果就管不到了。</span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">&nbsp;</span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;"><br></span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="color: rgb(0, 81, 171);font-size: 18px;"><strong><span style="color: rgb(0, 81, 171);letter-spacing: 2px;">主角：Webkit</span></strong></span></p><p style="margin-left: 8px;margin-right: 8px;"><br><span style="color: rgb(0, 81, 171);font-size: 18px;"><strong><span style="color: rgb(0, 81, 171);letter-spacing: 2px;"></span></strong></span><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;"></span></p><p style="margin-left: 8px;margin-right: 8px;"><img src="http://mmbiz.qpic.cn/mmbiz_png/1UG7KPNHN8HBpXdNPiavD2fC1zuspNhVOphHgqOiaekYorNL5cq9jMqWicbibhyxfRF7VXXKiatM2DOxlgRBvklVSXw/0?wx_fmt=png" style="width: 741px !important; height: 413px !important;"></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;"></span><br></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">Webkit由于其老牌，并且脱胎于KHTML、GNOME等linux社区的特性，收到了移动设备厂商的广泛欢迎，比如我们的游戏机PlayStation、任天堂Nintendo，都是采用的Webkit内核加个自己的皮肤就拿出来当做默认浏览器了，安卓在4.3之前其WebView也是采用的Webkit内核，因为大家知道Android这个项目是谷歌买过来的，要知道鲁宾领导的安卓团队可是诞生于2003年，那时候并没有什么更好的选择。</span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;"><br></span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">后来谷歌逐渐收紧对安卓的控制，一切以Chromium开源项目为基础，以v8引擎为核心，打造超高速度的WebView排版引擎。最后，Webkit在PC平台上当然也是全平台的，macOS自不必说，Linux和Windows上都有其相对应的实现和产品。</span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;"><br></span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">关键是在移动平台上，Webkit占据了全部浏览器和App市场的“半壁江山”，而移动平台在今年双十一中，占据了92%的市场份额，这就很能说明问题，Webkit漏洞的影响能力，究竟可以大到什么程度。</span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">&nbsp;</span></p><p style="margin-left: 8px;margin-right: 8px;"><img src="http://mmbiz.qpic.cn/mmbiz_png/1UG7KPNHN8HBpXdNPiavD2fC1zuspNhVObK7v512Pdb7Wy0UvPZlAicPnrx8iak7Q5lz4KFGsJPXDCxkwAu5xGl6g/0?wx_fmt=png" style="width: 741px !important; height: 324px !important;"></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;"></span><br></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">iOS/macOS设备越狱的典型流程，利用Webkit漏洞构造任意代码执行，再利用其XNU内核漏洞打穿内核，做好持久化之后越狱成功！</span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;"><br></span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">PlayStation、Nintendo设备破解的典型流程，利用Webkit漏洞构造任意代码执行，再利用FreeBSD漏洞打穿内核，持久化之后破解成功！</span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;"><br></span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">安卓也是一样的道理，安卓由于其基于规则的权限管理机制，跟Windows非常像，如果只要获取数据的话，在网页挂马就可以了，都不需要给设备进行root，就可以获得全套的敏感资料。</span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;"><br></span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">现在的很多Pwn类型的比赛中，获取Webkit漏洞都是第一步，以Webkit漏洞为跳板，只要访问一个他们提供的网站，先打穿Webkit，然后打穿内核，获取整个系统最高权限，最后弹计算，越狱是一模一样的流程。</span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;"><br></span></p><p style="margin-left: 8px;margin-right: 8px;"><img src="http://mmbiz.qpic.cn/mmbiz_png/1UG7KPNHN8HBpXdNPiavD2fC1zuspNhVOKgnlR5MIXXBQ3ib1vza8NGVUqUOgvh8MWXoAJWicFHrmmEiaroicOsQMmQ/0?wx_fmt=png" style="width: 740px !important; height: 404px !important;"></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;"></span><br></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">去年有一个三叉戟漏洞就是非常典型的一个案例，其首先利用CVE-2016-4657的Webkit漏洞达到任意代码执行，然后综合利用XNU的两个漏洞在后台“帮”机主静默越狱，全部过程机主完全不知情，越狱完成之后再“为”用户装上全套监听软件；</span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;"><br></span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">今年的Pwn2Own2017上爆出的CVE-2017-2533也是从Webkit的一个特殊的漏洞构造一个符号链接开始引爆攻击链，最终完成的全套内核提权操作。</span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;"><br></span></p><p style="margin-left: 8px;margin-right: 8px;"><img src="http://mmbiz.qpic.cn/mmbiz_png/1UG7KPNHN8HBpXdNPiavD2fC1zuspNhVOYKzIOwsczfpySGCbicY6iaes3YSCoZFeH5jPtgUaLnx1UPDIg9ywZtfg/0?wx_fmt=png" style="width: 739px !important; height: 495px !important;"></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;"></span><br></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">其作者Saelo去年曾经在Phrack上放出了一整套Webkit的JavaScriptCore引擎漏洞利用思路，介绍的非常详细，在这里我们对这个经典案例进行学习，来掌握一整套漏洞利用的经典技巧，并最终给它“安装”上Shellcode，在macOS平台上弹出计算器。</span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">&nbsp;</span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;"><br></span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="color: rgb(0, 81, 171);font-size: 18px;letter-spacing: normal;"><strong><span style="color: rgb(0, 81, 171);font-size: 18px;">CVE-2016-4622</span></strong></span></p><p style="margin-left: 8px;margin-right: 8px;"><br></p><p style="margin-left: 8px;margin-right: 8px;text-align: center;"><img src="http://mmbiz.qpic.cn/mmbiz_png/1UG7KPNHN8HBpXdNPiavD2fC1zuspNhVOvZsJqXibKRHiagIfRBvreVeLJQ06Oyjh3WgUibBxjPxw43CO4u123rDdA/0?wx_fmt=png" style="width: 690px !important; height: 351px !important;"></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">&nbsp;</span><br></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">接下来我们来看一下什么是JavaScript引擎？JavaScript引擎是专门处理JavaScript脚本并执行的虚拟机，一般会附带在网页浏览器之中。第一个JavaScript引擎由布兰登·艾克在网景公司开发，用于Netscape Navigator网页浏览器中。JavaScriptCore就是一个JavaScript引擎。</span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;"><br></span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">一个JavaScript引擎不外乎包括以下几个部分：</span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">1. 编译器：将源代码编译成为抽象语法树及字节码；</span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">2. 解释器：主要是接受字节码并且解释执行；</span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">3. JIT工具：可以将字节码或者语法树转化为本地机器码的工具；</span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">4. 垃圾回收器和其余配件：符合内存和堆中的垃圾回收，帮助改进引擎的性能和功效。</span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;"><br></span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">接下来我们来看看这个漏洞，由于JavaScriptCore的源代码是开源的，我们可以git clone到本地，然后逐行阅读和确认漏洞到底问题出在哪里。</span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;"><br></span></p><p style="margin-left: 8px;margin-right: 8px;text-align: center;"><img src="http://mmbiz.qpic.cn/mmbiz_png/1UG7KPNHN8HBpXdNPiavD2fC1zuspNhVOV8ibBor0xgltzuwlPRStjA3KsPGLL6qbia6yVhMj57080iaPWXJEqsicTA/0?wx_fmt=png" style="width: 496px !important; height: 576px !important;"></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;"></span><br></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">该漏洞于2016年初被`yours truly`团队发现，并且上报给ZDI团队（番号ZDI-16-485），利用该漏洞可以导致JavaScript对象地址泄漏以及伪造。结合一些其他的提权手段的话，攻击者可以做到浏览器中的任意代码执行。</span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;"><br></span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">这个bug的`650552a`的git提交版本中被修复，下文中引用的代码来自于320b1fc版本，也就是最后一个受影响的版本，也是前文我们一直在讨论和实验的版本。这个漏洞是在2fa4973版本中引入的，历时一年之久才被发现和修复，分配的CVE编码为CVE-2016-4622。</span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;"><br></span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">该漏洞主要存在于切片函数slice()之中。查询该函数引用关系可知该函数位于Array.prototype.slice()的实现过程中，然后我们来到源代码的相关位置，也就是<span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: normal;">./Source/JavaScriptCore/runtime/ArrayPrototype.cpp:848</span>行的位置。</span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;"><br></span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">在执行切片的时候，有两种方式。</span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;"><br></span></p><ul style="list-style-type: disc;" class="list-paddingleft-2"><li><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">如果数组是密集存储（FastPath）的本地数组，则使用快速切片——`fastSlice`，使用给定的索引和长度将内存值直接写入新的数组。</span></p></li><li><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">如果不是，则取不到快速路径，这时候只有使用简单的循环来获取每个元素并将其添加到新的数组。</span></p></li></ul><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;"><br></span></p><p style="margin-left: 8px;margin-right: 8px;"><img src="http://mmbiz.qpic.cn/mmbiz_png/1UG7KPNHN8HBpXdNPiavD2fC1zuspNhVOSrKicXYTFnjLSSAiaIiaRe6QtBSj9RwkC8pD2X0dGvDtIjPNqbgs0x1rA/0?wx_fmt=png" style="width: 521px !important; height: 476px !important;"></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">&nbsp;</span><br></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">然后，在第二种较慢的方法中，属性检查会检查数组的边界，而快速切片中却没有进行边界检查...这就有意思了，我们暂且不深入，先往下看，<span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: normal;">`result = constructEmptyArray(exec, nullptr, end - begin);`</span>这行代码在构造空的result数组的时候，用`end - begin`来的大小来构建数组的长度么？</span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;"><br></span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">那我们用脚趾头都能猜到程序猿的“臆测”绝对是这个差值肯定是小于原数组的长度的咯？对呀，切片之后的数组当然比切片之前的短的咯？然而，我们可以在JavaScript的类型转化过程中耍一些手段，来毁掉程序猿的美梦，我们继续往下看。</span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;"><br></span></p><p style="margin-left: 8px;margin-right: 8px;"><img src="http://mmbiz.qpic.cn/mmbiz_png/1UG7KPNHN8HBpXdNPiavD2fC1zuspNhVOkhZ1nvwgicYrsYScDTNrqKOjbTnb8jcjfibWIAoicQ9SbOEHqTeibqj3hA/0?wx_fmt=png" style="width: 551px !important; height: 336px !important;"></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;"></span><br></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">上文代码中，在执行具体切片的前方，有一个<span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: normal;">argumentClampedIndexFromStartOrEnd</span> 函数来决定end的大小，接受的参数是数组原先的长度length。大家也看到了，所有地方都不会对新的`length`进行检查。</span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">&nbsp;</span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">综上所述，在PoC代码中的这句话：<span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: normal;">`var b = a.slice(0, {valueOf: function() { a.length = 0; return 10; }});`</span>，如果我们在valueOf方法的内部修改数组的长度，slice()函数却会依旧使用之前的长度，导致指针访问到了本不该它能访问的内容，导致内存越界读。</span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">&nbsp;</span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">在完美利用这一点之前，我们还必须保证数组确实是可以被缩小的。怎样来缩小数组呢？使用数组的.length属性就好了，我们来看下`.length`方法的实现，在`JSArray::setLength`中（<span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: normal;">`./Source/JavaScriptCore/Runtime/JSArray.cpp`</span>文件的第431行）：</span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;"><br></span></p><p style="margin-left: 8px;margin-right: 8px;"><img src="http://mmbiz.qpic.cn/mmbiz_png/1UG7KPNHN8HBpXdNPiavD2fC1zuspNhVO1PiaWk6Dbm196cjicUMia8kRMBmjfibAjPbrgJpfoT6jKx0HR3Y3qtd9Ag/0?wx_fmt=png" style="width: 551px !important; height: 120px !important;"></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;"></span><br></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">为了节省开销，数组缩小的元素个数小于64，系统就不执行缩小了，折腾一下带来的性能损耗还不如不节约呢。也就是说我们得“显著”地缩小一下，系统才愿意为我们折腾一下。</span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;"><br></span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">这里我们进行一次从100个元素缩小到10个元素的实验，用Array.prototype.slice来切割数组，同时在内部修改其长度。再来看一眼PoC.js，PoC先使用setLength来缩小数组的长度，再使用ValueOf来返回固定的10，而在执行slice()方法的过程中不会再检查a数组的长度，因此取回的结果b，已经不再是a数组里的数字了，因为a数组早就被置0了。</span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;"><br></span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;"></span></p><p style="margin-left: 8px;margin-right: 8px;"><img src="http://mmbiz.qpic.cn/mmbiz_png/1UG7KPNHN8HBpXdNPiavD2fC1zuspNhVORoiaqNHU9T6gH2NT9LJ6eRdlX4iaqrM4JpPLP8M5XTbHia6eicnsibAicjicg/0?wx_fmt=png" style="width: 552px !important; height: 87px !important;"></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;"></span><br></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">取回的结果应该是10个**undefined**数据才对，但是最终结果却是一些浮点数，貌似我们的指针访问到了一些，本不该我们可以访问到的东西。这个东西是什么呢？其实就是内存中紧靠着它的下一个对象的地址。接下来我们只要在这个位置进行构造一个对象，就可以通过内存越界读直接获取到它的地址，如果构造的非常完美，通过这个对象来获取任意地址读写的能力。</span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">&nbsp;</span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;"><br></span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="color: rgb(0, 81, 171);font-size: 18px;"><strong><span style="color: rgb(0, 81, 171);letter-spacing: 2px;">Fake Object Injection</span></strong></span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="color: rgb(0, 81, 171);font-size: 18px;"><strong><span style="color: rgb(0, 81, 171);letter-spacing: 2px;"><br></span></strong></span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;"></span></p><p style="margin-left: 8px;margin-right: 8px;"><img src="http://mmbiz.qpic.cn/mmbiz_png/1UG7KPNHN8HBpXdNPiavD2fC1zuspNhVOYlPyD6Y09mBlYKWanM135CegVrz0NFQeE5W6rplABe0A66qQfxn5CQ/0?wx_fmt=png" style="width: 548px !important; height: 366px !important;"></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;"></span><br></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">在构造对象的过程中有几个难点，最为困难的是伪造SturctureID这个部分，我们就需要知道结构表中Float64Array的正确的结构ID。</span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">&nbsp;</span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">所以首先是预测结构ID，而结构ID是运行时动态产生和分配的，随着各个引擎、版本的不同，结构ID也会改变。而且更要命的是，我们也不能随便填个ID上去，因为ID有可能是字符串的、符号链接的、各种对象的，甚至结构ID自己的。</span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;"><br></span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">在MethodTable里调用方法的时候，ID不对，JavaScriptCore就Crash了。这些ID是在引擎启动的时候动态确定的，也就是说他们都会有ID，但是你就是不知道哪个是哪个的，总不能把受害人的电脑抢过来看一下吧。</span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">&nbsp;</span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">为了解决这个问题，我们想了个办法，结合堆喷和instanceof()函数，来猜测一下结构ID。我们在堆里喷几千个Float64Array对象，带着不同的结构ID。然后挨个检查下这个对象是否被引擎识别为Float64Array对象，如果是，那么它的结构ID肯定就是对的了。</span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;"><br></span></p><p style="margin-left: 8px;margin-right: 8px;"><img src="http://mmbiz.qpic.cn/mmbiz_png/1UG7KPNHN8HBpXdNPiavD2fC1zuspNhVO02KrahPu7ibZu6IwVSSXVrcP5Rz0ic7ia3LQQMohzLtBMg46iajicX2UaQw/0?wx_fmt=png" style="width: 549px !important; height: 95px !important;"></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;"></span><br></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">用instanceof()函数来判断对象是否是Float64Array，如果不是，下一个再上。Instanceof()是一个非常安全的函数，它只检查从结构ID里抽出属性来和默认的对比一下，其他没有任何操作。</span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;"><br></span></p><p style="margin-left: 8px;margin-right: 8px;"><img src="http://mmbiz.qpic.cn/mmbiz_png/1UG7KPNHN8HBpXdNPiavD2fC1zuspNhVO0f96FAmjmJkmQVVg5qhkXZR8AoBulr5iaxtQia9MucnlAyShePsdR4yg/0?wx_fmt=png" style="width: 549px !important; height: 67px !important;"></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;"></span><br></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">找到正确的结构ID之后，终于可以放心大胆的开始伪造对象以劫持指针(弄虚作假)了。然后要过垃圾回收也有点小小的问题，我们又采用了一点小小的手段，由于时间的关系，这里没办法做过多的深入，欢迎大家到bbs来参与学习和讨论。</span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">&nbsp;</span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;"><br></span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="color: rgb(0, 81, 171);font-size: 18px;"><strong><span style="color: rgb(0, 81, 171);letter-spacing: 2px;">JIT Function Overwrite</span></strong></span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;"><br></span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">在得到任意地址读写的能力之后，我们使用覆盖JIT编译之后的函数的方式，来触发我们的shellcode执行。由于现代浏览器全都采用JIT进行即时编译，这就意味着把指令写到内存、然后去执行这块指令，也就是说这块内存是可读也可写的，这就给我们运行shellcode帮了大忙。我们使用刚刚讲完的任意地址内存读写功能来找到一块经过JIT引擎编译之后的JavaScript函数的地址，然后使用shellcode来覆盖这块地址，最终调用这个函数的时候，执行的就是我们的shellcode。请看下面的这段代码。</span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;"><br></span></p><p style="margin-left: 8px;margin-right: 8px;"><img src="http://mmbiz.qpic.cn/mmbiz_png/1UG7KPNHN8HBpXdNPiavD2fC1zuspNhVOOYGibxAg8le4ZhnO5jpMZ8r1uyib10AxIFkNUtLQnxu358siaGaT1CzkQ/0?wx_fmt=png" style="width: 548px !important; height: 308px !important;"></p><p style="margin-left: 8px;margin-right: 8px;"><br></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;"> </span><br></p><p style="margin-left: 8px;margin-right: 8px;"><span style="color: rgb(0, 81, 171);font-size: 18px;"><strong><span style="color: rgb(0, 81, 171);letter-spacing: 2px;">Arbitrary Code Execution</span></strong></span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;"><br></span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">shellcode是从hacking team泄露的网络军火库中扒下来的。</span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;"><br></span></p><p style="margin-left: 8px;margin-right: 8px;"><img src="http://mmbiz.qpic.cn/mmbiz_png/1UG7KPNHN8HBpXdNPiavD2fC1zuspNhVOsJeASJkA5WkgpE6fJ5HD4mOgglI10hXCAN2O4uwHnuC2rKicFGib08vg/0?wx_fmt=png" style="width: 754px !important; height: 473.442px !important;"></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;"></span><br></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">给Expolit装上之后运行，立刻就弹出计算器了。</span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;"><br></span></p><p style="margin-left: 8px;margin-right: 8px;"><img src="http://mmbiz.qpic.cn/mmbiz_png/1UG7KPNHN8HBpXdNPiavD2fC1zuspNhVOnMBHqRq8iakuq6QOr9uHtGM0HYBfOgPq3LVvTVD3ROYPYV7YiaanZOng/0?wx_fmt=png" style="width: 754px !important; height: 567.695px !important;"></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;"><br></span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">当然，这才是通向内核的第一步，接下来我们只要手中拥有内核的漏洞，就可以进行内核的破解了，还有一个好消息就是，macOS/iOS的内核XNU也都是开源的。</span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">&nbsp;</span></p><p style="margin-left: 8px;margin-right: 8px;"><img src="http://mmbiz.qpic.cn/mmbiz_png/1UG7KPNHN8HBpXdNPiavD2fC1zuspNhVO2C3k6fhwxVtIZEwgzvHWV55bUCSgCia7gCVkcbySG71N7nnDNeXudWQ/0?wx_fmt=png" style="width: 522px !important; height: 258px !important;"></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;"></span><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">&nbsp;</span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">这次的分享就到这里，谢谢大家！</span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;"><br></span></p><p style="margin-right: 8px;margin-left: 8px;max-width: 100%;box-sizing: border-box;min-height: 1em;background-color: rgba(1, 0, 0, 0);text-align: center;overflow-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">想要获取本演讲PPT，</strong></p><p style="text-align: center;"><strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">点击阅读原文查看、下载哦！</strong></p><p style="text-align: center;"><strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><br></strong></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;"></span></p><section label="Copyright © 2014 playhudong All Rights Reserved." style="border-color: currentcolor;border-style: none;border-width: medium;-moz-border-top-colors: none;-moz-border-left-colors: none;-moz-border-bottom-colors: none;-moz-border-right-colors: none;margin: 5px 0px 0px;padding: 10px 0px;background: rgba(0, 0, 0, 0) none repeat scroll 0% 0%;"><img src="http://mmbiz.qpic.cn/mmbiz_gif/1UG7KPNHN8HBpXdNPiavD2fC1zuspNhVOS6Y0qgGPBytZWHiaIaXnSPFll2TDbkeJSzqkv3dNFDedhDlFYPq3mCw/0?wx_fmt=gif" style="margin: 0px auto; display: block; width: 22px !important; height: 10px !important;"></section><p style="margin-left: 8px;margin-right: 8px;text-align: center;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;"><br></span><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">至此，《看雪2017安全开发者峰会》的全部12个议题内容就回顾完毕了~</span></p><p style="margin-left: 8px;margin-right: 8px;text-align: center;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;">明年再会！<br></span></p><p style="margin-left: 8px;margin-right: 8px;"><span style="font-size: 15px;color: rgb(63, 63, 63);letter-spacing: 2px;"><br></span></p><p><br></p><p style="margin-right: 8px;margin-left: 8px;max-width: 100%;box-sizing: border-box;min-height: 1em;background-color: rgba(1, 0, 0, 0);overflow-wrap: break-word !important;"><span style="max-width: 100%;letter-spacing: 1px;box-sizing: border-box !important;overflow-wrap: break-word !important;">看雪安全开发者峰会回顾：</span></p><p style="max-width: 100%;box-sizing: border-box;min-height: 1em;background-color: rgba(1, 0, 0, 0);overflow-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"></p><ul class="list-paddingleft-2" style="margin-left: 8px;margin-right: 8px;"><li><p style="max-width: 100%;box-sizing: border-box;min-height: 1em;background-color: rgba(1, 0, 0, 0);overflow-wrap: break-word !important;"><a href="http://mp.weixin.qq.com/s?__biz=MjM5NTc2MDYxMw==&amp;mid=2458286402&amp;idx=1&amp;sn=8bbbbd1d05715acc805a8a135be3774a&amp;chksm=b18149c886f6c0de312cc78d11980bf3e3bd5a9e4b3be2efd7a4ab85135ead47bdf0d5ce691a&amp;scene=21#wechat_redirect" target="_blank" style="max-width: 100%;letter-spacing: 1px;font-size: 14px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">【明天震撼来袭！】2017看雪安全开发者峰会，终于等到你！</span></a></p></li><li><p style="max-width: 100%;box-sizing: border-box;min-height: 1em;background-color: rgba(1, 0, 0, 0);overflow-wrap: break-word !important;"><a href="http://mp.weixin.qq.com/s?__biz=MjM5NTc2MDYxMw==&amp;mid=2458286458&amp;idx=1&amp;sn=dbbbc779563ee55b775c2028288efd5b&amp;chksm=b18149f086f6c0e6f14f804f4123f47b2b9c6aa99d1e5140037dfd4a94388aac5447a4164a5f&amp;scene=21#wechat_redirect" target="_blank" style="max-width: 100%;letter-spacing: 1px;font-size: 14px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">2017 看雪安全开发者峰会 圆满结束！</span></a></p></li><li><p style="max-width: 100%;box-sizing: border-box;min-height: 1em;background-color: rgba(1, 0, 0, 0);overflow-wrap: break-word !important;"><a href="http://mp.weixin.qq.com/s?__biz=MjM5NTc2MDYxMw==&amp;mid=2458286491&amp;idx=1&amp;sn=1eac02f520e481fcbe76acd929180937&amp;chksm=b181491186f6c0078b7de442df037ec61d92f9b06cfb0053dbb17888a637be9b22e9893b7afa&amp;scene=21#wechat_redirect" target="_blank" style="max-width: 100%;font-size: 14px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">【看雪2017安全开发者峰会演讲回顾0x1】如何黑掉无人机</span></a></p></li><li><p style="max-width: 100%;box-sizing: border-box;min-height: 1em;background-color: rgba(1, 0, 0, 0);overflow-wrap: break-word !important;"><a href="http://mp.weixin.qq.com/s?__biz=MjM5NTc2MDYxMw==&amp;mid=2458286508&amp;idx=1&amp;sn=cfa6bc2fb917ccfdbfbceb0c3480b620&amp;chksm=b181492686f6c030c4734c4948c18ba6628a41c44b475c1014f9f3a37d74dda24a5ce6c664b9&amp;scene=21#wechat_redirect" target="_blank" style="max-width: 100%;font-size: 14px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">定制化对抗——游戏反外挂的安全实践（看雪2017安全开发者峰会演讲回顾0x2）</span></a></p></li><li><p style="max-width: 100%;box-sizing: border-box;min-height: 1em;background-color: rgba(1, 0, 0, 0);overflow-wrap: break-word !important;"><a href="http://mp.weixin.qq.com/s?__biz=MjM5NTc2MDYxMw==&amp;mid=2458286563&amp;idx=1&amp;sn=9d542e006d3fbd4cf79dc75f5dd47b54&amp;chksm=b181496986f6c07fa1cfeacc9ff22ddbae63fe4f9ae6cd57555c4544dcbf2fa39d78091d719e&amp;scene=21#wechat_redirect" target="_blank" style="max-width: 100%;font-size: 14px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">浅析WEB安全编程（看雪2017安全开发者峰会演讲回顾0x3）</span></a></p></li><li><p style="max-width: 100%;box-sizing: border-box;min-height: 1em;background-color: rgba(1, 0, 0, 0);overflow-wrap: break-word !important;"><a href="http://mp.weixin.qq.com/s?__biz=MjM5NTc2MDYxMw==&amp;mid=2458286588&amp;idx=1&amp;sn=3db2232f66db28416ee4e08a617a75d2&amp;chksm=b181497686f6c060a187f28d091793ec44c70713f06c1c3762b2798a46648485abd51a2cbeff&amp;scene=21#wechat_redirect" target="_blank" style="max-width: 100%;font-size: 14px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">业务安全发展趋势及对安全研发的挑战（看雪2017安全开发者峰会演讲回顾0x4）</span></a></p></li><li><p style="max-width: 100%;box-sizing: border-box;min-height: 1em;background-color: rgba(1, 0, 0, 0);overflow-wrap: break-word !important;"><a href="http://mp.weixin.qq.com/s?__biz=MjM5NTc2MDYxMw==&amp;mid=2458286600&amp;idx=1&amp;sn=1fe361b9b333b32068e19a70bf84f100&amp;chksm=b1814a8286f6c3940d7867e4f34d31e77d0c64ea7e705bc5ec0426a49d47eb6235c0c2417600&amp;scene=21#wechat_redirect" target="_blank" style="max-width: 100%;font-size: 14px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">Flash 之殇：漏洞之王 Flash Player 的末路</span></a></p></li><li><p style="max-width: 100%;box-sizing: border-box;min-height: 1em;background-color: rgba(1, 0, 0, 0);overflow-wrap: break-word !important;"><a href="http://mp.weixin.qq.com/s?__biz=MjM5NTc2MDYxMw==&amp;mid=2458286645&amp;idx=1&amp;sn=802d453ecb80946cfde5f97624b82cb3&amp;chksm=b1814abf86f6c3a97abfab2f24c943e2f63cf4bfdf8a0ded45ff65b01e3b4d13459a17e631fc&amp;scene=21#wechat_redirect" target="_blank" style="max-width: 100%;font-size: 14px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">智能化的安全: 设备&amp;应用&amp;ICS（看雪2017安全开发者峰会演讲回顾0x6）</span></a></p></li><li><p style="max-width: 100%;box-sizing: border-box;min-height: 1em;background-color: rgba(1, 0, 0, 0);overflow-wrap: break-word !important;"><a href="http://mp.weixin.qq.com/s?__biz=MjM5NTc2MDYxMw==&amp;mid=2458286661&amp;idx=1&amp;sn=85bce37fd71d77db8f49a3e649850d67&amp;chksm=b1814acf86f6c3d9312072d559be5c79555a58bc8cdd2a489d6b041308749152a61565c59ee0&amp;scene=21#wechat_redirect" target="_blank" style="max-width: 100%;font-size: 14px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">开启IoT设备的上帝模式（看雪2017安全开发者峰会演讲回顾0x7）</span></a></p></li><li><p style="max-width: 100%;box-sizing: border-box;min-height: 1em;background-color: rgba(1, 0, 0, 0);overflow-wrap: break-word !important;"><a href="http://mp.weixin.qq.com/s?__biz=MjM5NTc2MDYxMw==&amp;mid=2458286673&amp;idx=1&amp;sn=5a6d0dd55ce1644651505bf53005eede&amp;chksm=b1814adb86f6c3cdfb0f9d024ebe1b8d5ceacf641b55f37beb1bbdf4481297c6c86b1fc31e41&amp;scene=21#wechat_redirect" target="_blank" style="max-width: 100%;font-size: 14px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">那些年，你怎么写总会出现的漏洞（看雪2017安全开发者峰会演讲回顾0x8）</span></a></p></li><li><p style="max-width: 100%;box-sizing: border-box;min-height: 1em;background-color: rgba(1, 0, 0, 0);overflow-wrap: break-word !important;"><a href="http://mp.weixin.qq.com/s?__biz=MjM5NTc2MDYxMw==&amp;mid=2458286687&amp;idx=1&amp;sn=53f7848465288cfc0979998fc31767ce&amp;chksm=b1814ad586f6c3c3bfdf2706c896ecb4ea9e0c9d646763b067ab8bf59b9c6bd3024c627ec572&amp;scene=21#wechat_redirect" target="_blank" style="max-width: 100%;font-size: 14px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">Windows 10新子系统*新挑战（看雪2017安全开发者峰会演讲回顾0x9）</span></a></p></li><li><p style="max-width: 100%;box-sizing: border-box;min-height: 1em;background-color: rgba(1, 0, 0, 0);overflow-wrap: break-word !important;"><a href="http://mp.weixin.qq.com/s?__biz=MjM5NTc2MDYxMw==&amp;mid=2458286716&amp;idx=1&amp;sn=b72a6c6a6d6e73c81ba2fa9f5a61f617&amp;chksm=b1814af686f6c3e08bc5a1af369601ce7e8498fcaf3c40c67dd67711f03d5c3b9eb9253d2b26&amp;scene=21#wechat_redirect" target="_blank" style="font-size: 14px;text-decoration: none;"><span style="font-size: 14px;">移动APP灰色产业案例分析与防范 （看雪2017安全开发者峰会演讲回顾0xA）</span></a></p></li><li><p style="max-width: 100%;box-sizing: border-box;min-height: 1em;background-color: rgba(1, 0, 0, 0);overflow-wrap: break-word !important;"><a href="http://mp.weixin.qq.com/s?__biz=MjM5NTc2MDYxMw==&amp;mid=2458286745&amp;idx=1&amp;sn=1f33cf84a14193b54edd2568a7027232&amp;chksm=b1814a1386f6c3057d3775cf8e749ffb5db01dd17109ab9bf45ad44c260e0f68e17620e595a7&amp;scene=21#wechat_redirect" target="_blank" style="font-size: 14px;text-decoration: none;"><span style="font-size: 14px;">Java JSON 反序列化之殇（看雪2017安全开发者峰会演讲回顾11）</span></a><br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"></p></li></ul><p style="max-width: 100%;box-sizing: border-box;min-height: 1em;background-color: rgba(1, 0, 0, 0);overflow-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"></p><p style="margin-right: 8px;margin-left: 8px;max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><img src="https://mmbiz.qpic.cn/mmbiz_jpg/1UG7KPNHN8HTpGlibXdQ4YIynJnSjWwOjSroH8JkP00Cpl0TvGwSCibJpPmSmcartSbQUfodq49ulaLk1Yicrem3A/640?wx_fmt=jpeg" style="box-sizing: border-box !important; overflow-wrap: break-word !important; visibility: visible !important; width: 542px !important; height: 136.065px !important;"></p><p style="margin-right: 8px;margin-left: 8px;max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"></p><p style="margin: 5px 8px;max-width: 100%;min-height: 1em;border-color: currentcolor;border-style: none;border-width: medium;-moz-border-top-colors: none;-moz-border-left-colors: none;-moz-border-bottom-colors: none;-moz-border-right-colors: none;background-image: none;background-attachment: scroll;background-color: rgba(0, 0, 0, 0);width: 603px;box-sizing: border-box !important;overflow-wrap: break-word !important;background-position: 0% 0%;background-repeat: repeat repeat;"><img src="http://mmbiz.qpic.cn/mmbiz_gif/1UG7KPNHN8Gw4S5BwIVUvprIGo2jYKicP8DUx5ICvUuaDj3pnlV7L5usO6KiaIdwWfxIUhZWnEKribfiafUymtojibw/0?wx_fmt=gif" style="margin-right: auto; margin-left: auto; display: inline-block; vertical-align: middle; box-sizing: border-box !important; overflow-wrap: break-word !important; visibility: visible !important; width: 30px !important; height: 30px !important;"></p><section style="margin-left: 5px;max-width: 100%;display: inline-block;vertical-align: middle;font-size: 12px;box-sizing: border-box !important;overflow-wrap: break-word !important;">戳这里！</section><hr/><a href="http://mp.weixin.qq.com/s?timestamp=1512886045&src=3&ver=1&signature=0dsH*cvrb7sDcdE*f0PtKJTfSmWmpGSr1bt6eLQusWUeX1D3PeY-hy0sLVqqzj8ewzefSEoH9llGPntsMnS0FOTEpnTKj0YhrGhxpiUxIi08srAkYdA9VhmRLsMqiJ2rsgv0PWCz1h3z6fmd8O4AF*qqdBOVmnedyQ*dapfyk4c=">微信地址</a> | <a href="https://bbs.pediy.com/post-update-1507290.htm">阅读原文</a>
{% endraw  %}

