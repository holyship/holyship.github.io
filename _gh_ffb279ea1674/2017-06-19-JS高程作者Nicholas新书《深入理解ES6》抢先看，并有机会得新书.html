---
title: JS高程作者Nicholas新书《深入理解ES6》抢先看，并有机会得新书
author: 博文视点
wechat_source: >-
  http://mp.weixin.qq.com/s?timestamp=1498052478&src=3&ver=1&signature=nULoNfhbsabgcFJEB9PUQ4YQZyPtwDZOFsP0df7wWEoFqqfodm*XCkax*P8kROgMGi1FfkjBD5n9etaZoGHJFSxERZxarj*U2Mlc*aADkc1K-biJzMV0vYynARJj71Z-jt6XaX7xMOWUJtBDYLgfcBqJHwU5AwnXBY2Z717*idE=
date: '2017-06-19 00:00:00 +0000'

---

{% raw  %}
<h3 style=" margin-bottom: 20px; color: rgb(88, 90, 91); line-height: 1.8; word-break: break-all ; ; ; ; ; "><strong><span style="font-size: 16px;"></span></strong></h3><blockquote><p><span style="color: rgb(0, 0, 0);">《JavaScript高级程序设计》作者Nicholas新书《深入理解ES6》即将上市，现在已经进进预售阶段，在此，我们联系出版社给奇舞周刊的朋友们带来了福利，书中内容抢先看，不仅如此，大家参加写评论赢新书活动，还将有机会获得《深入理解ES6》图书一本。</span></p><p><br></p><p><strong>参与办法：</strong></p><p><br></p><p>1、活动时间：即时起至2017年7月10日截止</p><p>2、为本篇文章书写评论</p><p>3、我们将选择评论点赞数最多的三位，由博文视点出版社赠予《深入理解ES6》新书一本</p><p><br></p><p><strong>如果你想直接购买，可以到以下网站进行预定：</strong></p><p><br></p><p>亚马逊：http://t.cn/RoyKD29</p><p>京东：https://item.jd.com/12213616.html<br></p></blockquote><p><br></p><p><br></p><p><br></p><p><img src="http://mmbiz.qpic.cn/mmbiz_png/d8tibSEfhMMq0UPkvBkWIW7fCaCphBfoF2pFaqjVfpZSCBXbLaGyVENiadUAc5t2gkc6lBf2DSfh0lOUpz0APUNQ/0?wx_fmt=png" style="width: 770px !important; height: 999.075px !important; visibility: visible !important;"><br></p><h3 style=" margin-bottom: 20px; color: rgb(88, 90, 91); line-height: 1.8; word-break: break-all ; ; ; ; ; "><strong><span style="font-size: 16px;"></span></strong><br></h3><h3 style=" margin-bottom: 20px; color: rgb(88, 90, 91); line-height: 1.8; word-break: break-all ; ; ; ; ; "><strong><span style="font-size: 16px;"><br></span></strong></h3><h3 style=" margin-bottom: 20px; color: rgb(88, 90, 91); line-height: 1.8; word-break: break-all ; ; ; ; ; "><strong><span style="font-size: 16px;">Symbol的辨识方法</span></strong></h3><p style=" margin-bottom: 20px; color: rgb(88, 90, 91); font-size: 1.14286rem; line-height: 1.8; word-break: break-all ; ; ; ; ; "><span style="font-size: 16px;">Symbol是原始值，且ECMAScript 6同时扩展了typeof操作符，支持返回"Symbol"，所以可以用typeof来检测变量是否为Symbol类型。</span></p><pre class="" style="margin-top: 0px; margin-bottom: 20px; padding: 1em; background-color: rgb(56, 64, 71); border-radius: 0.3em; color: rgb(248, 248, 242); direction: ltr; hyphens: none; overflow: auto; tab-size: 4; text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; word-break: normal;"><code style=" background: none; border-width: 0px; border-style: none; border-color: initial; border-radius: 0px; font-stretch: normal; font-size: 0.8rem; line-height: 1.4; ; ; "><span style="font-size: 16px;"><span class="" style="font-size: 14px; color: rgb(241, 242, 243);">let symbol = </span><span class="" style="font-size: 14px; color: rgb(103, 140, 177);">Symbol</span><span class="" style="font-size: 14px; color: rgb(241, 242, 243);">(</span><span class="" style="font-size: 14px; color: rgb(236, 118, 0);">"test symbol"</span><span class="" style="font-size: 14px; color: rgb(241, 242, 243);">);<br>console.log(</span><span class="" style="font-size: 14px; color: rgb(147, 199, 99);">typeof</span><span class="" style="font-size: 14px; color: rgb(241, 242, 243);"> symbol); &nbsp; </span><span class="" style="font-size: 14px; color: rgb(102, 116, 123);">// "symbol"</span></span></code></pre><p style=" margin-bottom: 20px; color: rgb(88, 90, 91); font-size: 1.14286rem; line-height: 1.8; word-break: break-all ; ; ; ; ; "><span style="font-size: 16px;">通过其他间接方式也可以检测变量是否为Symbol类型，但是typeof操作符是最准确也是你最应首选的检测方式。</span></p><h3 style=" margin-bottom: 20px; color: rgb(88, 90, 91); line-height: 1.8; word-break: break-all ; ; ; ; ; "><strong><span style="font-size: 16px;">Symbol的使用方法</span></strong></h3><p style=" margin-bottom: 20px; color: rgb(88, 90, 91); font-size: 1.14286rem; line-height: 1.8; word-break: break-all ; ; ; ; ; "><span style="font-size: 16px;">所有使用可计算属性名的地方，都可以使用Symbol。前面我们看到的都是在括号中使用Symbol，事实上，Symbol也可以用于可计算对象字面量属性名、Object.defineProperty()方法和Object.defineProperties()方法的调用过程中。</span></p><pre class="" style="margin-top: 0px; margin-bottom: 20px; padding: 1em; background-color: rgb(56, 64, 71); border-radius: 0.3em; color: rgb(248, 248, 242); direction: ltr; hyphens: none; overflow: auto; tab-size: 4; text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; word-break: normal;"><code style=" background: none; border-width: 0px; border-style: none; border-color: initial; border-radius: 0px; font-stretch: normal; font-size: 0.8rem; line-height: 1.4; ; ; "><span style="font-size: 16px;"><span class="" style="font-size: 14px; color: rgb(241, 242, 243);">let firstName = </span><span class="" style="font-size: 14px; color: rgb(103, 140, 177);">Symbol</span><span class="" style="font-size: 14px; color: rgb(241, 242, 243);">(</span><span class="" style="font-size: 14px; color: rgb(236, 118, 0);">"first name"</span><span class="" style="font-size: 14px; color: rgb(241, 242, 243);">);<br><br></span><span class="" style="font-size: 14px; color: rgb(102, 116, 123);">// 使用一个可计算对象字面量属性<br></span><span class="" style="font-size: 14px; color: rgb(241, 242, 243);">let person = {
 &nbsp; &nbsp;[firstName]: </span><span class="" style="font-size: 14px; color: rgb(236, 118, 0);">"Nicholas"<br></span><span class="" style="font-size: 14px; color: rgb(241, 242, 243);">};<br><br></span><span class="" style="font-size: 14px; color: rgb(102, 116, 123);">// 将属性设置为只读<br></span><span class="" style="font-size: 14px; color: rgb(103, 140, 177);">Object</span><span class="" style="font-size: 14px; color: rgb(241, 242, 243);">.defineProperty(person, firstName, { writable: </span><span class="" style="font-size: 14px; color: rgb(147, 199, 99);">false</span><span class="" style="font-size: 14px; color: rgb(241, 242, 243);"> });<br><br>let lastName = </span><span class="" style="font-size: 14px; color: rgb(103, 140, 177);">Symbol</span><span class="" style="font-size: 14px; color: rgb(241, 242, 243);">(</span><span class="" style="font-size: 14px; color: rgb(236, 118, 0);">"last name"</span><span class="" style="font-size: 14px; color: rgb(241, 242, 243);">);<br><br></span><span class="" style="font-size: 14px; color: rgb(103, 140, 177);">Object</span><span class="" style="font-size: 14px; color: rgb(241, 242, 243);">.defineProperties(person, {
 &nbsp; &nbsp;[lastName]: {
 &nbsp; &nbsp; &nbsp; &nbsp;value: </span><span class="" style="font-size: 14px; color: rgb(236, 118, 0);">"Zakas"</span><span class="" style="font-size: 14px; color: rgb(241, 242, 243);">,
 &nbsp; &nbsp; &nbsp; &nbsp;writable: </span><span class="" style="font-size: 14px; color: rgb(147, 199, 99);">false</span><span class="" style="font-size: 14px; color: rgb(241, 242, 243);">
 &nbsp; &nbsp;}<br>});<br><br>console.log(person[firstName]); </span><span class="" style="font-size: 14px; color: rgb(102, 116, 123);">// "Nicholas"<br></span><span class="" style="font-size: 14px; color: rgb(241, 242, 243);">console.log(person[lastName]); </span><span class="" style="font-size: 14px; color: rgb(102, 116, 123);">// "Zakas"</span></span></code></pre><p style=" margin-bottom: 20px; color: rgb(88, 90, 91); font-size: 1.14286rem; line-height: 1.8; word-break: break-all ; ; ; ; ; "><span style="font-size: 16px;">在此示例中，首先通过可计算对象字面量属性语法为person对象创建了一个Symbol属性firstName。后面一行代码将这个属性设置为只读。随后，通过Object.defineProperties()方法创建一个只读的Symbol属性lastName，此处再次使用了对象字面量属性，但却是作为Object.defineProperties()方法的第二个参数使用。 尽管在所有使用可计算属性名的地方，都可以使用Symbol来代替，但是为了在不同代码片段间有效地共享这些Symbol，需要建立一个体系。</span></p><h3 style=" margin-bottom: 20px; color: rgb(88, 90, 91); line-height: 1.8; word-break: break-all ; ; ; ; ; "><strong><span style="font-size: 16px;">Symbol共享体系</span></strong></h3><p style=" margin-bottom: 20px; color: rgb(88, 90, 91); font-size: 1.14286rem; line-height: 1.8; word-break: break-all ; ; ; ; ; "><span style="font-size: 16px;">有时我们可能希望在不同的代码中共享同一个Symbol，例如，在你的应用中有两种不同的对象类型，但是你希望它们使用同一个Symbol属性来表示一个独特的标识符。一般而言，在很大的代码库中或跨文件追踪Symbol非常困难而且容易出错，出于这些原因，ECMAScript 6提供了一个可以随时访问的全局Symbol注册表。</span></p><p style=" margin-bottom: 20px; color: rgb(88, 90, 91); font-size: 1.14286rem; line-height: 1.8; word-break: break-all ; ; ; ; ; "><span style="font-size: 16px;">如果想创建一个可共享的Symbol，要使用Symbol.for()方法。它只接受一个参数，也就是即将创建的Symbol的字符串标识符，这个参数同样也被用作Symbol的描述，就像这样：</span></p><pre class="" style="margin-top: 0px; margin-bottom: 20px; padding: 1em; background-color: rgb(56, 64, 71); border-radius: 0.3em; color: rgb(248, 248, 242); direction: ltr; hyphens: none; overflow: auto; tab-size: 4; text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; word-break: normal;"><code style=" background: none; border-width: 0px; border-style: none; border-color: initial; border-radius: 0px; font-stretch: normal; font-size: 0.8rem; line-height: 1.4; ; ; "><span style="font-size: 16px;"><span class="" style="font-size: 14px; color: rgb(241, 242, 243);">let uid = </span><span class="" style="font-size: 14px; color: rgb(103, 140, 177);">Symbol</span><span class="" style="font-size: 14px; color: rgb(241, 242, 243);">.</span><span class="" style="font-size: 14px; color: rgb(147, 199, 99);">for</span><span class="" style="font-size: 14px; color: rgb(241, 242, 243);">(</span><span class="" style="font-size: 14px; color: rgb(236, 118, 0);">"uid"</span><span class="" style="font-size: 14px; color: rgb(241, 242, 243);">);<br>let </span><span class="" style="font-size: 14px; color: rgb(147, 199, 99);">object</span><span class="" style="font-size: 14px; color: rgb(241, 242, 243);"> = {};</span><span class="" style="font-size: 14px; color: rgb(147, 199, 99);">object</span><span class="" style="font-size: 14px; color: rgb(241, 242, 243);">[uid] = </span><span class="" style="font-size: 14px; color: rgb(236, 118, 0);">"12345"</span><span class="" style="font-size: 14px; color: rgb(241, 242, 243);">;<br>console.log(</span><span class="" style="font-size: 14px; color: rgb(147, 199, 99);">object</span><span class="" style="font-size: 14px; color: rgb(241, 242, 243);">[uid]); </span><span class="" style="font-size: 14px; color: rgb(102, 116, 123);">// "12345"<br></span><span class="" style="font-size: 14px; color: rgb(241, 242, 243);">console.log(uid); &nbsp; &nbsp;</span><span class="" style="font-size: 14px; color: rgb(102, 116, 123);">// "Symbol(uid)"</span></span></code></pre><p style=" margin-bottom: 20px; color: rgb(88, 90, 91); font-size: 1.14286rem; line-height: 1.8; word-break: break-all ; ; ; ; ; "><span style="font-size: 16px;">Symbol.for()方法首先在全局Symbol注册表中搜索键为"uid"的Symbol是否存在，如果存在，直接返回已有的Symbol；否则，创建一个新的Symbol，并使用这个键在Symbol全局注册表中注册，随即返回新创建的Symbol。</span></p><p style=" margin-bottom: 20px; color: rgb(88, 90, 91); font-size: 1.14286rem; line-height: 1.8; word-break: break-all ; ; ; ; ; "><span style="font-size: 16px;">后续如果再传入同样的键调用Symbol.for()会返回相同的Symbol，像这样：</span></p><pre class="" style="margin-top: 0px; margin-bottom: 20px; padding: 1em; background-color: rgb(56, 64, 71); border-radius: 0.3em; color: rgb(248, 248, 242); direction: ltr; hyphens: none; overflow: auto; tab-size: 4; text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; word-break: normal;"><code style=" background: none; border-width: 0px; border-style: none; border-color: initial; border-radius: 0px; font-stretch: normal; font-size: 0.8rem; line-height: 1.4; ; ; "><span style="font-size: 16px;"><span class="" style="font-size: 14px; color: rgb(241, 242, 243);">let uid = </span><span class="" style="font-size: 14px; color: rgb(103, 140, 177);">Symbol</span><span class="" style="font-size: 14px; color: rgb(241, 242, 243);">.</span><span class="" style="font-size: 14px; color: rgb(147, 199, 99);">for</span><span class="" style="font-size: 14px; color: rgb(241, 242, 243);">(</span><span class="" style="font-size: 14px; color: rgb(236, 118, 0);">"uid"</span><span class="" style="font-size: 14px; color: rgb(241, 242, 243);">);<br><br>let </span><span class="" style="font-size: 14px; color: rgb(147, 199, 99);">object</span><span class="" style="font-size: 14px; color: rgb(241, 242, 243);"> = {
 &nbsp; &nbsp;[uid]: </span><span class="" style="font-size: 14px; color: rgb(236, 118, 0);">"12345"<br></span><span class="" style="font-size: 14px; color: rgb(241, 242, 243);">};<br><br>console.log(</span><span class="" style="font-size: 14px; color: rgb(147, 199, 99);">object</span><span class="" style="font-size: 14px; color: rgb(241, 242, 243);">[uid]); &nbsp;</span><span class="" style="font-size: 14px; color: rgb(102, 116, 123);">// "12345"<br></span><span class="" style="font-size: 14px; color: rgb(241, 242, 243);">console.log(uid); &nbsp;</span><span class="" style="font-size: 14px; color: rgb(102, 116, 123);">// "Symbol(uid)"<br><br></span><span class="" style="font-size: 14px; color: rgb(241, 242, 243);">let uid2 = </span><span class="" style="font-size: 14px; color: rgb(103, 140, 177);">Symbol</span><span class="" style="font-size: 14px; color: rgb(241, 242, 243);">.</span><span class="" style="font-size: 14px; color: rgb(147, 199, 99);">for</span><span class="" style="font-size: 14px; color: rgb(241, 242, 243);">(</span><span class="" style="font-size: 14px; color: rgb(236, 118, 0);">"uid"</span><span class="" style="font-size: 14px; color: rgb(241, 242, 243);">);<br><br>console.log(uid === uid2); &nbsp; &nbsp; &nbsp;</span><span class="" style="font-size: 14px; color: rgb(102, 116, 123);">// true<br></span><span class="" style="font-size: 14px; color: rgb(241, 242, 243);">console.log(</span><span class="" style="font-size: 14px; color: rgb(147, 199, 99);">object</span><span class="" style="font-size: 14px; color: rgb(241, 242, 243);">[uid2]); &nbsp; &nbsp; &nbsp;</span><span class="" style="font-size: 14px; color: rgb(102, 116, 123);">// "12345"<br></span><span class="" style="font-size: 14px; color: rgb(241, 242, 243);">console.log(uid2); &nbsp; &nbsp;</span><span class="" style="font-size: 14px; color: rgb(102, 116, 123);">// "Symbol(uid)"</span></span></code></pre><p style=" margin-bottom: 20px; color: rgb(88, 90, 91); font-size: 1.14286rem; line-height: 1.8; word-break: break-all ; ; ; ; ; "><span style="font-size: 16px;">在这个示例中，uid和uid2包含相同的Symbol并且可以互换使用。第一次调用Symbol.for()方法创建这个Symbol，第二次调用可以直接从Symbol的全局注册表中检索到这个Symbol。</span></p><p style=" margin-bottom: 20px; color: rgb(88, 90, 91); font-size: 1.14286rem; line-height: 1.8; word-break: break-all ; ; ; ; ; "><span style="font-size: 16px;">还有一个与Symbol共享有关的特性：可以使用Symbol.keyFor()方法在Symbol全局注册表中检索与Symbol有关的键。举个例子：</span></p><pre class="" style="margin-top: 0px; margin-bottom: 20px; padding: 1em; background-color: rgb(56, 64, 71); border-radius: 0.3em; color: rgb(248, 248, 242); direction: ltr; hyphens: none; overflow: auto; tab-size: 4; text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; word-break: normal;"><code style=" background: none; border-width: 0px; border-style: none; border-color: initial; border-radius: 0px; font-stretch: normal; font-size: 0.8rem; line-height: 1.4; ; ; "><span style="font-size: 16px;"><span class="" style="font-size: 14px; color: rgb(241, 242, 243);">let uid = </span><span class="" style="font-size: 14px; color: rgb(103, 140, 177);">Symbol</span><span class="" style="font-size: 14px; color: rgb(241, 242, 243);">.</span><span class="" style="font-size: 14px; color: rgb(147, 199, 99);">for</span><span class="" style="font-size: 14px; color: rgb(241, 242, 243);">(</span><span class="" style="font-size: 14px; color: rgb(236, 118, 0);">"uid"</span><span class="" style="font-size: 14px; color: rgb(241, 242, 243);">);<br>console.log(</span><span class="" style="font-size: 14px; color: rgb(103, 140, 177);">Symbol</span><span class="" style="font-size: 14px; color: rgb(241, 242, 243);">.keyFor(uid)); &nbsp; &nbsp;</span><span class="" style="font-size: 14px; color: rgb(102, 116, 123);">// "uid"<br><br></span><span class="" style="font-size: 14px; color: rgb(241, 242, 243);">let uid2 = </span><span class="" style="font-size: 14px; color: rgb(103, 140, 177);">Symbol</span><span class="" style="font-size: 14px; color: rgb(241, 242, 243);">.</span><span class="" style="font-size: 14px; color: rgb(147, 199, 99);">for</span><span class="" style="font-size: 14px; color: rgb(241, 242, 243);">(</span><span class="" style="font-size: 14px; color: rgb(236, 118, 0);">"uid"</span><span class="" style="font-size: 14px; color: rgb(241, 242, 243);">);<br>console.log(</span><span class="" style="font-size: 14px; color: rgb(103, 140, 177);">Symbol</span><span class="" style="font-size: 14px; color: rgb(241, 242, 243);">.keyFor(uid2)); &nbsp; </span><span class="" style="font-size: 14px; color: rgb(102, 116, 123);">// "uid"<br><br></span><span class="" style="font-size: 14px; color: rgb(241, 242, 243);">let uid3 = </span><span class="" style="font-size: 14px; color: rgb(103, 140, 177);">Symbol</span><span class="" style="font-size: 14px; color: rgb(241, 242, 243);">(</span><span class="" style="font-size: 14px; color: rgb(236, 118, 0);">"uid"</span><span class="" style="font-size: 14px; color: rgb(241, 242, 243);">);<br>console.log(</span><span class="" style="font-size: 14px; color: rgb(103, 140, 177);">Symbol</span><span class="" style="font-size: 14px; color: rgb(241, 242, 243);">.keyFor(uid3)); &nbsp; </span><span class="" style="font-size: 14px; color: rgb(102, 116, 123);">// undefined</span></span></code></pre><p style=" margin-bottom: 20px; color: rgb(88, 90, 91); font-size: 1.14286rem; line-height: 1.8; word-break: break-all ; ; ; ; ; "><span style="font-size: 16px;">注意，uid和uid2都返回了"uid"这个键，而在Symbol全局注册表中不存在uid3这个Symbol，也就是不存在与之有关的键，所以最终返回undefined。</span></p><p style=" margin-bottom: 20px; color: rgb(88, 90, 91); font-size: 1.14286rem; line-height: 1.8; word-break: break-all ; ; ; ; ; "><span style="font-size: 16px;">Symbol全局注册表是一个类似全局作用域的共享环境，也就是说你不能假设目前环境中存在哪些键。当使用第三方组件时，尽量使用Symbol键的命名空间以减少命名冲突。举个例子，jQuery的代码可以为所有键添加"jquery"前缀，就像"jquery.element"或其他类似的键。</span></p><p><br></p><blockquote><p style="white-space: normal;">大家参加写评论赢新书活动，将有机会获得《深入理解ES6》图书一本。</p><p style="white-space: normal;"><br></p><p style="white-space: normal;"><strong>参与办法：</strong></p><p style="white-space: normal;"><br></p><p style="white-space: normal;">1、活动时间：即时起至2017年7月10日截止</p><p style="white-space: normal;">2、为本篇文章书写评论</p><p style="white-space: normal;">3、我们将选择评论点赞数最多的三位，由博文视点出版社赠予《深入理解ES6》新书一本</p></blockquote><p><br></p><p><br></p><hr/><a href="http://mp.weixin.qq.com/s?timestamp=1498052478&src=3&ver=1&signature=nULoNfhbsabgcFJEB9PUQ4YQZyPtwDZOFsP0df7wWEoFqqfodm*XCkax*P8kROgMGi1FfkjBD5n9etaZoGHJFSxERZxarj*U2Mlc*aADkc1K-biJzMV0vYynARJj71Z-jt6XaX7xMOWUJtBDYLgfcBqJHwU5AwnXBY2Z717*idE=">微信地址</a>
{% endraw  %}

