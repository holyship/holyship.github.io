---
title: 函数式 JavaScript：将方法从对象中解耦
author: 网络埋伏纪事 译
wechat_source: >-
  http://mp.weixin.qq.com/s?timestamp=1493115396&src=3&ver=1&signature=7Fh7FrPufgFYYsQdXKdJ2hwwX1xhAW7LeLZcw5Upss37AoH5Q-LM*j78I8BRxXS-pfD500vEsAMevZPkTd1fUHUqBXomxGKSJkSU6ZyDMk3RLH5gXpQ5XiNn4AvvXjudAjv143mwiPufCPU39DDQwi3lPfwe-RnPZ8A8fIQji3U=
date: '2017-04-25 00:00:00 +0000'

---

{% raw  %}
<p style=" margin-bottom: 20px; color: rgb(88, 90, 91); font-size: 1.14286rem; line-height: 1.8; word-break: break-all ; ; ; ; ; "><span style="background-color: rgb(255, 79, 121); color: rgb(255, 255, 255); font-size: 16px;">编者按：本文由网络埋伏纪事在众成翻译平台上翻译。</span></p><p style=" margin-bottom: 20px; color: rgb(88, 90, 91); font-size: 1.14286rem; line-height: 1.8; word-break: break-all ; ; ; ; ; "><span style="font-size: 16px;"></span></p><p><span style=" color: rgb(88, 90, 91) ; ; ; ; ">在项目中我一直做的一件事情就是把方法从其对象中解耦。</span><code style="color: rgb(88, 90, 91); padding: 1px 4px; background-color: rgb(242, 242, 242); border-width: 1px; border-style: solid; border-color: rgb(222, 222, 222); border-radius: 2px; font-stretch: normal; font-size: 0.8em; line-height: normal; font-family: Monaco, monospace;"><span style="font-size: 16px;">map</span></code><span style=" color: rgb(88, 90, 91) ; ; ; ; ">、</span><code style="color: rgb(88, 90, 91); padding: 1px 4px; background-color: rgb(242, 242, 242); border-width: 1px; border-style: solid; border-color: rgb(222, 222, 222); border-radius: 2px; font-stretch: normal; font-size: 0.8em; line-height: normal; font-family: Monaco, monospace;"><span style="font-size: 16px;">filter</span></code><span style=" color: rgb(88, 90, 91) ; ; ; ; ">&nbsp;以及&nbsp;</span><code style="color: rgb(88, 90, 91); padding: 1px 4px; background-color: rgb(242, 242, 242); border-width: 1px; border-style: solid; border-color: rgb(222, 222, 222); border-radius: 2px; font-stretch: normal; font-size: 0.8em; line-height: normal; font-family: Monaco, monospace;"><span style="font-size: 16px;">reduce</span></code><span style=" color: rgb(88, 90, 91) ; ; ; ; ">&nbsp;并非是全部，但是它们肯定是首先获得自由的。</span></p><p><span style=" color: rgb(88, 90, 91) ; ; ; ; "><br></span></p><blockquote style=" margin-bottom: 20px; padding: 10px 6px; quotes: none; background: rgb(229, 229, 229); border-left-width: 10px; border-left-color: rgb(204, 203, 203); color: rgb(99, 99, 101) ; ; ; ; ; "><p style="color: rgb(88, 90, 91); font-size: 1.14286rem; line-height: 1.8; word-break: break-all;"><span style="font-size: 16px;">解耦方法可以让方法摆脱父对象所施加的限制，同时在表示代码的方式上给了我们更多的自由。</span></p></blockquote><h3 style=" margin-bottom: 20px; color: rgb(88, 90, 91); line-height: 1.8; word-break: break-all ; ; ; ; ; "><strong><span style="font-size: 16px;">那么这到底是啥玩意呢？</span></strong></h3><p style=" margin-bottom: 20px; color: rgb(88, 90, 91); font-size: 1.14286rem; line-height: 1.8; word-break: break-all ; ; ; ; ; "><span style="font-size: 16px;">为简便起见，我们只从 Array 对象中抽取&nbsp;</span><code style="padding: 1px 4px; background-color: rgb(242, 242, 242); border-width: 1px; border-style: solid; border-color: rgb(222, 222, 222); border-radius: 2px; font-stretch: normal; font-size: 0.8em; line-height: normal; font-family: Monaco, monospace;"><span style="font-size: 16px;">map</span></code><span style="font-size: 16px;">&nbsp;方法。幸运的是 JavaScript 的原型继承让这变得很简单，因为我们想要的功能就在&nbsp;</span><code style="padding: 1px 4px; background-color: rgb(242, 242, 242); border-width: 1px; border-style: solid; border-color: rgb(222, 222, 222); border-radius: 2px; font-stretch: normal; font-size: 0.8em; line-height: normal; font-family: Monaco, monospace;"><span style="font-size: 16px;">Array.prototype.map</span></code><span style="font-size: 16px;">&nbsp;中。JavaScript 中一个很棒的事情就是我们可以直接调用这个方法，只不过要用&nbsp;</span><code style="padding: 1px 4px; background-color: rgb(242, 242, 242); border-width: 1px; border-style: solid; border-color: rgb(222, 222, 222); border-radius: 2px; font-stretch: normal; font-size: 0.8em; line-height: normal; font-family: Monaco, monospace;"><span style="font-size: 16px;">.call</span></code><span style="font-size: 16px;">&nbsp;来调用，因为&nbsp;</span><code style="padding: 1px 4px; background-color: rgb(242, 242, 242); border-width: 1px; border-style: solid; border-color: rgb(222, 222, 222); border-radius: 2px; font-stretch: normal; font-size: 0.8em; line-height: normal; font-family: Monaco, monospace;"><span style="font-size: 16px;">map</span></code><span style="font-size: 16px;">需要一个&nbsp;</span><code style="padding: 1px 4px; background-color: rgb(242, 242, 242); border-width: 1px; border-style: solid; border-color: rgb(222, 222, 222); border-radius: 2px; font-stretch: normal; font-size: 0.8em; line-height: normal; font-family: Monaco, monospace;"><span style="font-size: 16px;">this</span></code><span style="font-size: 16px;">&nbsp;参数。</span></p><p style=" margin-bottom: 20px; color: rgb(88, 90, 91); font-size: 1.14286rem; line-height: 1.8; word-break: break-all ; ; ; ; ; "><span style="font-size: 16px;">揉进点柯里化，一行代码就能搞定。</span></p><pre class="" style="margin-top: 0px; margin-bottom: 20px; padding: 1em; background-color: rgb(56, 64, 71); border-radius: 0.3em; color: rgb(248, 248, 242); direction: ltr; hyphens: none; overflow: auto; tab-size: 4; text-shadow: rgba(0, 0, 0, 0.298039) 0px 1px; word-break: normal;"><code style=" background: none; border-width: 0px; border-style: none; border-color: initial; border-radius: 0px; font-stretch: normal; font-size: 0.8rem; line-height: 1.4; ; ; "><span style="font-size: 16px;"><span class="" style="font-size: 16px; color: rgb(147, 199, 99);">const</span><span class="" style="font-size: 16px; color: rgb(241, 242, 243);"> map = f =&gt; x =&gt; </span><span class="" style="font-size: 16px; color: rgb(103, 140, 177);">Array</span><span class="" style="font-size: 16px; color: rgb(241, 242, 243);">.prototype.map.call(x, f)</span></span></code></pre><p style=" margin-bottom: 20px; color: rgb(88, 90, 91); font-size: 1.14286rem; line-height: 1.8; word-break: break-all ; ; ; ; ; "><span style="font-size: 16px;">现在我们就可以在没有 Array 对象的情况下调用&nbsp;</span><code style="padding: 1px 4px; background-color: rgb(242, 242, 242); border-width: 1px; border-style: solid; border-color: rgb(222, 222, 222); border-radius: 2px; font-stretch: normal; font-size: 0.8em; line-height: normal; font-family: Monaco, monospace;"><span style="font-size: 16px;">map</span></code><span style="font-size: 16px;">&nbsp;函数了！</span></p><h3 style=" margin-bottom: 20px; color: rgb(88, 90, 91); line-height: 1.8; word-break: break-all ; ; ; ; ; "><strong><span style="font-size: 16px;">调用 map 的替代方式</span></strong></h3><p style=" margin-bottom: 20px; color: rgb(88, 90, 91); font-size: 1.14286rem; line-height: 1.8; word-break: break-all ; ; ; ; ; "><span style="font-size: 16px;">调用&nbsp;</span><code style="padding: 1px 4px; background-color: rgb(242, 242, 242); border-width: 1px; border-style: solid; border-color: rgb(222, 222, 222); border-radius: 2px; font-stretch: normal; font-size: 0.8em; line-height: normal; font-family: Monaco, monospace;"><span style="font-size: 16px;">map</span></code><span style="font-size: 16px;">&nbsp;的方式有很多种，由于 V8 引擎的优化，这些调用方式在性能上其实没有多大差别。</span></p><p style=" margin-bottom: 20px; color: rgb(88, 90, 91); font-size: 1.14286rem; line-height: 1.8; word-break: break-all ; ; ; ; ; "><img src="/gh_ffb279ea1674/images/9b05a28f040839ba96155e888e6f5531427b605d.gif" style="border-width: 0px; border-style: none; border-color: initial; width: 381px !important; height: 225px !important;"></p><p style=" margin-bottom: 20px; color: rgb(88, 90, 91); font-size: 1.14286rem; line-height: 1.8; word-break: break-all ; ; ; ; ; "><span style="font-size: 16px;">有点性能上的差异没多大意义，而且这些数字每次都会变。结论应该是这些方法是差不多的。</span></p><h3 style=" margin-bottom: 20px; color: rgb(88, 90, 91); line-height: 1.8; word-break: break-all ; ; ; ; ; "><strong><span style="font-size: 16px;">解耦如何让我的生活变得更好？</span></strong></h3><p style=" margin-bottom: 20px; color: rgb(88, 90, 91); font-size: 1.14286rem; line-height: 1.8; word-break: break-all ; ; ; ; ; "><span style="font-size: 16px;">这个问题很好！可以说是最好的问题。我认为这最好用代码来解释，而不是空谈，所以下面我们就直接用代码开始好了。</span></p><p style=" margin-bottom: 20px; color: rgb(88, 90, 91); font-size: 1.14286rem; line-height: 1.8; word-break: break-all ; ; ; ; ; "><code style="padding: 1px 4px; background-color: rgb(242, 242, 242); border-width: 1px; border-style: solid; border-color: rgb(222, 222, 222); border-radius: 2px; font-stretch: normal; font-size: 0.8em; line-height: normal; font-family: Monaco, monospace;"><span style="font-size: 16px;">document.querySelectorAll</span></code><span style="font-size: 16px;">（以及类似的方法）不返回数组，而是返回一个 NodeList 对象，而 NodeList 对象是不包含&nbsp;</span><code style="padding: 1px 4px; background-color: rgb(242, 242, 242); border-width: 1px; border-style: solid; border-color: rgb(222, 222, 222); border-radius: 2px; font-stretch: normal; font-size: 0.8em; line-height: normal; font-family: Monaco, monospace;"><span style="font-size: 16px;">map</span></code><span style="font-size: 16px;">&nbsp;方法的。虽然你可以采用一些魔法手段，将 NodeList 转换为 Array，但是这种转换是没有必要的。因为&nbsp;</span><code style="padding: 1px 4px; background-color: rgb(242, 242, 242); border-width: 1px; border-style: solid; border-color: rgb(222, 222, 222); border-radius: 2px; font-stretch: normal; font-size: 0.8em; line-height: normal; font-family: Monaco, monospace;"><span style="font-size: 16px;">map</span></code><span style="font-size: 16px;">&nbsp;可以遍历 NodeList，就好像它是一个数组一样。</span></p><pre class="" style="margin-top: 0px; margin-bottom: 20px; padding: 1em; background-color: rgb(56, 64, 71); border-radius: 0.3em; color: rgb(248, 248, 242); direction: ltr; hyphens: none; overflow: auto; tab-size: 4; text-shadow: rgba(0, 0, 0, 0.298039) 0px 1px; word-break: normal;"><code style=" background: none; border-width: 0px; border-style: none; border-color: initial; border-radius: 0px; font-stretch: normal; font-size: 0.8rem; line-height: 1.4; ; ; "><span style="font-size: 16px;"><span class="" style="font-size: 16px; color: rgb(147, 199, 99);">const</span><span class="" style="font-size: 16px; color: rgb(241, 242, 243);"> items = document.querySelectorAll(</span><span class="" style="font-size: 16px; color: rgb(236, 118, 0);">'div'</span><span class="" style="font-size: 16px; color: rgb(241, 242, 243);">)<br>items.map(doSomething) <br></span><span class="" style="font-size: 16px; color: rgb(102, 116, 123);">// =&gt; Uncaught TypeError: items.map is not a function<br><br></span><span class="" style="font-size: 16px; color: rgb(241, 242, 243);">map(doSomething)(items) <br></span><span class="" style="font-size: 16px; color: rgb(102, 116, 123);">// =&gt; [&lt;div/&gt;, ..., &lt;div/&gt;]</span></span></code></pre><p style=" margin-bottom: 20px; color: rgb(88, 90, 91); font-size: 1.14286rem; line-height: 1.8; word-break: break-all ; ; ; ; ; "><span style="font-size: 16px;">我们甚至可以&nbsp;</span><code style="padding: 1px 4px; background-color: rgb(242, 242, 242); border-width: 1px; border-style: solid; border-color: rgb(222, 222, 222); border-radius: 2px; font-stretch: normal; font-size: 0.8em; line-height: normal; font-family: Monaco, monospace;"><span style="font-size: 16px;">map</span></code><span style="font-size: 16px;">&nbsp;一个字符串，而不需要先把它转型为字符数组。</span></p><pre class="" style="margin-top: 0px; margin-bottom: 20px; padding: 1em; background-color: rgb(56, 64, 71); border-radius: 0.3em; color: rgb(248, 248, 242); direction: ltr; hyphens: none; overflow: auto; tab-size: 4; text-shadow: rgba(0, 0, 0, 0.298039) 0px 1px; word-break: normal;"><code style=" background: none; border-width: 0px; border-style: none; border-color: initial; border-radius: 0px; font-stretch: normal; font-size: 0.8rem; line-height: 1.4; ; ; "><span style="font-size: 16px;"><span class="" style="font-size: 16px; color: rgb(147, 199, 99);">const</span><span class="" style="font-size: 16px; color: rgb(241, 242, 243);"> value = </span><span class="" style="font-size: 16px; color: rgb(236, 118, 0);">'Kitty Cat'</span><span class="" style="font-size: 16px; color: rgb(241, 242, 243);">value.map(doSomething)<br></span><span class="" style="font-size: 16px; color: rgb(102, 116, 123);">// =&gt; Uncaught TypeError: items.map is not a function<br><br></span><span class="" style="font-size: 16px; color: rgb(241, 242, 243);">map(doSomething)(value)<br></span><span class="" style="font-size: 16px; color: rgb(102, 116, 123);">// =&gt; ['K', 'i', 't', 't', 'y', ' ', 'C', 'a', 't']</span></span></code></pre><p style=" margin-bottom: 20px; color: rgb(88, 90, 91); font-size: 1.14286rem; line-height: 1.8; word-break: break-all ; ; ; ; ; "><span style="font-size: 16px;">解耦让我们可以轻松将一个对象映射转换为一个列表映射：</span></p><pre class="" style="margin-top: 0px; margin-bottom: 20px; padding: 1em; background-color: rgb(56, 64, 71); border-radius: 0.3em; color: rgb(248, 248, 242); direction: ltr; hyphens: none; overflow: auto; tab-size: 4; text-shadow: rgba(0, 0, 0, 0.298039) 0px 1px; word-break: normal;"><code style=" background: none; border-width: 0px; border-style: none; border-color: initial; border-radius: 0px; font-stretch: normal; font-size: 0.8rem; line-height: 1.4; ; ; "><span style="font-size: 16px;"><span class="" style="font-size: 16px; color: rgb(147, 199, 99);">const</span><span class="" style="font-size: 16px; color: rgb(241, 242, 243);"> getFullName = ({ first, </span><span class="" style="font-size: 16px; color: rgb(147, 199, 99);">last</span><span class="" style="font-size: 16px; color: rgb(241, 242, 243);"> }) =&gt; </span><span class="" style="font-size: 16px; color: rgb(236, 118, 0);">`${first} ${last}`<br><br></span><span class="" style="font-size: 16px; color: rgb(241, 242, 243);">getFullName({ first: </span><span class="" style="font-size: 16px; color: rgb(236, 118, 0);">'Max'</span><span class="" style="font-size: 16px; color: rgb(241, 242, 243);">, </span><span class="" style="font-size: 16px; color: rgb(147, 199, 99);">last</span><span class="" style="font-size: 16px; color: rgb(241, 242, 243);">: </span><span class="" style="font-size: 16px; color: rgb(236, 118, 0);">'Power'</span><span class="" style="font-size: 16px; color: rgb(241, 242, 243);"> })<br></span><span class="" style="font-size: 16px; color: rgb(102, 116, 123);">// =&gt; 'Max Power'<br><br></span><span class="" style="font-size: 16px; color: rgb(241, 242, 243);">map(getFullName)([
 &nbsp;{ first: </span><span class="" style="font-size: 16px; color: rgb(236, 118, 0);">'Max'</span><span class="" style="font-size: 16px; color: rgb(241, 242, 243);">, </span><span class="" style="font-size: 16px; color: rgb(147, 199, 99);">last</span><span class="" style="font-size: 16px; color: rgb(241, 242, 243);">: </span><span class="" style="font-size: 16px; color: rgb(236, 118, 0);">'Power'</span><span class="" style="font-size: 16px; color: rgb(241, 242, 243);"> },
 &nbsp;{ first: </span><span class="" style="font-size: 16px; color: rgb(236, 118, 0);">'Disco'</span><span class="" style="font-size: 16px; color: rgb(241, 242, 243);">, </span><span class="" style="font-size: 16px; color: rgb(147, 199, 99);">last</span><span class="" style="font-size: 16px; color: rgb(241, 242, 243);">: </span><span class="" style="font-size: 16px; color: rgb(236, 118, 0);">'Stu'</span><span class="" style="font-size: 16px; color: rgb(241, 242, 243);"> },
 &nbsp;{ first: </span><span class="" style="font-size: 16px; color: rgb(236, 118, 0);">'Joe'</span><span class="" style="font-size: 16px; color: rgb(241, 242, 243);">, </span><span class="" style="font-size: 16px; color: rgb(147, 199, 99);">last</span><span class="" style="font-size: 16px; color: rgb(241, 242, 243);">: </span><span class="" style="font-size: 16px; color: rgb(236, 118, 0);">'Kickass'</span><span class="" style="font-size: 16px; color: rgb(241, 242, 243);"> }<br>])<br></span><span class="" style="font-size: 16px; color: rgb(102, 116, 123);">// =&gt; ['Max Power', 'Disco Stu', 'Joe Kickass']</span></span></code></pre><p style=" margin-bottom: 20px; color: rgb(88, 90, 91); font-size: 1.14286rem; line-height: 1.8; word-break: break-all ; ; ; ; ; "><span style="font-size: 16px;">我们甚至可以对对象进行&nbsp;</span><code style="padding: 1px 4px; background-color: rgb(242, 242, 242); border-width: 1px; border-style: solid; border-color: rgb(222, 222, 222); border-radius: 2px; font-stretch: normal; font-size: 0.8em; line-height: normal; font-family: Monaco, monospace;"><span style="font-size: 16px;">map</span></code><span style="font-size: 16px;">：</span></p><pre class="" style="margin-top: 0px; margin-bottom: 20px; padding: 1em; background-color: rgb(56, 64, 71); border-radius: 0.3em; color: rgb(248, 248, 242); direction: ltr; hyphens: none; overflow: auto; tab-size: 4; text-shadow: rgba(0, 0, 0, 0.298039) 0px 1px; word-break: normal;"><code style=" background: none; border-width: 0px; border-style: none; border-color: initial; border-radius: 0px; font-stretch: normal; font-size: 0.8rem; line-height: 1.4; ; ; "><span style="font-size: 16px;"><span class="" style="font-size: 16px; color: rgb(147, 199, 99);">const</span><span class="" style="font-size: 16px; color: rgb(241, 242, 243);"> obj = {
 &nbsp;</span><span class="" style="font-size: 16px; color: rgb(250, 205, 34);">0</span><span class="" style="font-size: 16px; color: rgb(241, 242, 243);">: </span><span class="" style="font-size: 16px; color: rgb(250, 205, 34);">4</span><span class="" style="font-size: 16px; color: rgb(241, 242, 243);">,
 &nbsp;</span><span class="" style="font-size: 16px; color: rgb(250, 205, 34);">1</span><span class="" style="font-size: 16px; color: rgb(241, 242, 243);">: </span><span class="" style="font-size: 16px; color: rgb(250, 205, 34);">5</span><span class="" style="font-size: 16px; color: rgb(241, 242, 243);">,
 &nbsp;</span><span class="" style="font-size: 16px; color: rgb(250, 205, 34);">2</span><span class="" style="font-size: 16px; color: rgb(241, 242, 243);">: </span><span class="" style="font-size: 16px; color: rgb(250, 205, 34);">6</span><span class="" style="font-size: 16px; color: rgb(241, 242, 243);">,
 &nbsp;length: </span><span class="" style="font-size: 16px; color: rgb(250, 205, 34);">3<br></span><span class="" style="font-size: 16px; color: rgb(241, 242, 243);">}<br><br>map(increase)(obj)<br></span><span class="" style="font-size: 16px; color: rgb(102, 116, 123);">// =&gt; [5, 6, 7]</span></span></code></pre><p style=" margin-bottom: 20px; color: rgb(88, 90, 91); font-size: 1.14286rem; line-height: 1.8; word-break: break-all ; ; ; ; ; "><span style="font-size: 16px;">解耦允许我们组合函数：</span></p><pre class="" style="margin-top: 0px; margin-bottom: 20px; padding: 1em; background-color: rgb(56, 64, 71); border-radius: 0.3em; color: rgb(248, 248, 242); direction: ltr; hyphens: none; overflow: auto; tab-size: 4; text-shadow: rgba(0, 0, 0, 0.298039) 0px 1px; word-break: normal;"><code style=" background: none; border-width: 0px; border-style: none; border-color: initial; border-radius: 0px; font-stretch: normal; font-size: 0.8rem; line-height: 1.4; ; ; "><span style="font-size: 16px;"><span class="" style="font-size: 16px; color: rgb(147, 199, 99);">const</span><span class="" style="font-size: 16px; color: rgb(241, 242, 243);"> mapDoStuff = map(doStuff)<br> <br></span><span class="" style="font-size: 16px; color: rgb(147, 199, 99);">const</span><span class="" style="font-size: 16px; color: rgb(241, 242, 243);"> mapDoSomething = map(doSomething)<br></span><span class="" style="font-size: 16px; color: rgb(102, 116, 123);">// 组合 2 个映射<br><br></span><span class="" style="font-size: 16px; color: rgb(241, 242, 243);"></span><span class="" style="font-size: 16px; color: rgb(147, 199, 99);">const</span><span class="" style="font-size: 16px; color: rgb(241, 242, 243);"> mapDoSomethingThenStuff =
 &nbsp;compose(mapDoStuff, mapDoSomething)</span></span></code></pre><p style=" margin-bottom: 20px; color: rgb(88, 90, 91); font-size: 1.14286rem; line-height: 1.8; word-break: break-all ; ; ; ; ; "><span style="font-size: 16px;">解耦（带柯里化）允许我们偏应用函数参数，创建新函数。</span></p><pre class="" style="margin-top: 0px; margin-bottom: 20px; padding: 1em; background-color: rgb(56, 64, 71); border-radius: 0.3em; color: rgb(248, 248, 242); direction: ltr; hyphens: none; overflow: auto; tab-size: 4; text-shadow: rgba(0, 0, 0, 0.298039) 0px 1px; word-break: normal;"><code style=" background: none; border-width: 0px; border-style: none; border-color: initial; border-radius: 0px; font-stretch: normal; font-size: 0.8rem; line-height: 1.4; ; ; "><span style="font-size: 16px;"><span class="" style="font-size: 16px; color: rgb(147, 199, 99);">const</span><span class="" style="font-size: 16px; color: rgb(241, 242, 243);"> increaseOne = x =&gt; x + </span><span class="" style="font-size: 16px; color: rgb(250, 205, 34);">1<br></span><span class="" style="font-size: 16px; color: rgb(241, 242, 243);"></span><span class="" style="font-size: 16px; color: rgb(102, 116, 123);">// partially applied map increase<br><br></span><span class="" style="font-size: 16px; color: rgb(241, 242, 243);"></span><span class="" style="font-size: 16px; color: rgb(147, 199, 99);">const</span><span class="" style="font-size: 16px; color: rgb(241, 242, 243);"> increaseMany = map(increaseOne)<br> <br>increaseMany([</span><span class="" style="font-size: 16px; color: rgb(250, 205, 34);">1</span><span class="" style="font-size: 16px; color: rgb(241, 242, 243);">, </span><span class="" style="font-size: 16px; color: rgb(250, 205, 34);">2</span><span class="" style="font-size: 16px; color: rgb(241, 242, 243);">, </span><span class="" style="font-size: 16px; color: rgb(250, 205, 34);">3</span><span class="" style="font-size: 16px; color: rgb(241, 242, 243);">])<br></span><span class="" style="font-size: 16px; color: rgb(102, 116, 123);">// =&gt; [2, 3, 4]</span></span></code></pre><p style=" margin-bottom: 20px; color: rgb(88, 90, 91); font-size: 1.14286rem; line-height: 1.8; word-break: break-all ; ; ; ; ; "><span style="font-size: 16px;">和&nbsp;</span><code style="padding: 1px 4px; background-color: rgb(242, 242, 242); border-width: 1px; border-style: solid; border-color: rgb(222, 222, 222); border-radius: 2px; font-stretch: normal; font-size: 0.8em; line-height: normal; font-family: Monaco, monospace;"><span style="font-size: 16px;">this</span></code><span style="font-size: 16px;">&nbsp;说再见！！！</span></p><pre class="" style="margin-top: 0px; margin-bottom: 20px; padding: 1em; background-color: rgb(56, 64, 71); border-radius: 0.3em; color: rgb(248, 248, 242); direction: ltr; hyphens: none; overflow: auto; tab-size: 4; text-shadow: rgba(0, 0, 0, 0.298039) 0px 1px; word-break: normal;"><code style=" background: none; border-width: 0px; border-style: none; border-color: initial; border-radius: 0px; font-stretch: normal; font-size: 0.8rem; line-height: 1.4; ; ; "><span style="font-size: 16px;"><span class="" style="font-size: 16px; color: rgb(147, 199, 99);">const</span><span class="" style="font-size: 16px; color: rgb(241, 242, 243);"> cat = {
 &nbsp;sound: </span><span class="" style="font-size: 16px; color: rgb(236, 118, 0);">'meow'</span><span class="" style="font-size: 16px; color: rgb(241, 242, 243);">,
 &nbsp;speak: </span><span class="" style="font-size: 16px; color: rgb(147, 199, 99);">function</span><span class="" style="font-size: 16px; color: rgb(241, 242, 243);">() {
 &nbsp; &nbsp;console.log(</span><span class="" style="font-size: 16px; color: rgb(147, 199, 99);">this</span><span class="" style="font-size: 16px; color: rgb(241, 242, 243);">.sound)
 &nbsp;}<br>}<br></span><span class="" style="font-size: 16px; color: rgb(147, 199, 99);"><br>const</span><span class="" style="font-size: 16px; color: rgb(241, 242, 243);"> catSpeak = cat.speak

cat.speak()<br> </span><span class="" style="font-size: 16px; color: rgb(102, 116, 123);">// =&gt; 'meow'<br><br></span><span class="" style="font-size: 16px; color: rgb(241, 242, 243);">catSpeak()<br></span><span class="" style="font-size: 16px; color: rgb(102, 116, 123);">// =&gt; Uncaught TypeError: Cannot read property 'sound' of undefined</span></span></code></pre><p style=" margin-bottom: 20px; color: rgb(88, 90, 91); font-size: 1.14286rem; line-height: 1.8; word-break: break-all ; ; ; ; ; "><span style="font-size: 16px;">在本例中，</span><code style="padding: 1px 4px; background-color: rgb(242, 242, 242); border-width: 1px; border-style: solid; border-color: rgb(222, 222, 222); border-radius: 2px; font-stretch: normal; font-size: 0.8em; line-height: normal; font-family: Monaco, monospace;"><span style="font-size: 16px;">cat.speak</span></code><span style="font-size: 16px;">&nbsp;运行正常，但是&nbsp;</span><code style="padding: 1px 4px; background-color: rgb(242, 242, 242); border-width: 1px; border-style: solid; border-color: rgb(222, 222, 222); border-radius: 2px; font-stretch: normal; font-size: 0.8em; line-height: normal; font-family: Monaco, monospace;"><span style="font-size: 16px;">catSpeak</span></code><span style="font-size: 16px;">&nbsp;不行，因为&nbsp;</span><code style="padding: 1px 4px; background-color: rgb(242, 242, 242); border-width: 1px; border-style: solid; border-color: rgb(222, 222, 222); border-radius: 2px; font-stretch: normal; font-size: 0.8em; line-height: normal; font-family: Monaco, monospace;"><span style="font-size: 16px;">this</span></code><span style="font-size: 16px;">&nbsp;上下文改变了。这太烦了！如果我们把&nbsp;</span><code style="padding: 1px 4px; background-color: rgb(242, 242, 242); border-width: 1px; border-style: solid; border-color: rgb(222, 222, 222); border-radius: 2px; font-stretch: normal; font-size: 0.8em; line-height: normal; font-family: Monaco, monospace;"><span style="font-size: 16px;">speak</span></code><span style="font-size: 16px;">&nbsp;方法解耦出来，就<span style="font-size: 16px; color: rgb(26, 26, 26); font-weight: 700;">再也不用操心&nbsp;<code style="padding: 1px 4px; background-color: rgb(242, 242, 242); border-width: 1px; border-style: solid; border-color: rgb(222, 222, 222); border-radius: 2px; font-weight: normal; font-stretch: normal; font-size: 0.8em; line-height: normal; font-family: Monaco, monospace;">this</code>&nbsp;了</span>！</span></p><pre class="" style="margin-top: 0px; margin-bottom: 20px; padding: 1em; background-color: rgb(56, 64, 71); border-radius: 0.3em; color: rgb(248, 248, 242); direction: ltr; hyphens: none; overflow: auto; tab-size: 4; text-shadow: rgba(0, 0, 0, 0.298039) 0px 1px; word-break: normal;"><code style=" background: none; border-width: 0px; border-style: none; border-color: initial; border-radius: 0px; font-stretch: normal; font-size: 0.8rem; line-height: 1.4; ; ; "><span style="font-size: 16px;"><span class="" style="font-size: 16px; color: rgb(147, 199, 99);">const</span><span class="" style="font-size: 16px; color: rgb(241, 242, 243);"> cat = { sound: </span><span class="" style="font-size: 16px; color: rgb(236, 118, 0);">'meow'</span><span class="" style="font-size: 16px; color: rgb(241, 242, 243);"> }<br> <br></span><span class="" style="font-size: 16px; color: rgb(147, 199, 99);">const</span><span class="" style="font-size: 16px; color: rgb(241, 242, 243);"> speak = ({ sound }) =&gt; console.log(sound)<br> <br>speak(cat)<br></span><span class="" style="font-size: 16px; color: rgb(102, 116, 123);">// =&gt; 'meow'</span></span></code></pre><p style=" margin-bottom: 20px; color: rgb(88, 90, 91); font-size: 1.14286rem; line-height: 1.8; word-break: break-all ; ; ; ; ; "><span style="font-size: 16px;">然后我们就可以创建使用解耦过的函数的新函数。</span></p><pre class="" style="margin-top: 0px; margin-bottom: 20px; padding: 1em; background-color: rgb(56, 64, 71); border-radius: 0.3em; color: rgb(248, 248, 242); direction: ltr; hyphens: none; overflow: auto; tab-size: 4; text-shadow: rgba(0, 0, 0, 0.298039) 0px 1px; word-break: normal;"><code style=" background: none; border-width: 0px; border-style: none; border-color: initial; border-radius: 0px; font-stretch: normal; font-size: 0.8rem; line-height: 1.4; ; ; "><span style="font-size: 16px;"><span class="" style="font-size: 16px; color: rgb(147, 199, 99);">const</span><span class="" style="font-size: 16px; color: rgb(241, 242, 243);"> cat = { sound: </span><span class="" style="font-size: 16px; color: rgb(236, 118, 0);">'meow'</span><span class="" style="font-size: 16px; color: rgb(241, 242, 243);"> }<br> <br></span><span class="" style="font-size: 16px; color: rgb(147, 199, 99);">const</span><span class="" style="font-size: 16px; color: rgb(241, 242, 243);"> speak = ({ sound }) =&gt; console.log(sound)<br> <br></span><span class="" style="font-size: 16px; color: rgb(147, 199, 99);">const</span><span class="" style="font-size: 16px; color: rgb(241, 242, 243);"> speakLoudly = obj =&gt;
 &nbsp;speak({ ...obj, sound: obj.sound.toUpperCase() + </span><span class="" style="font-size: 16px; color: rgb(236, 118, 0);">'!'</span><span class="" style="font-size: 16px; color: rgb(241, 242, 243);"> })<br> <br>speak(cat)<br></span><span class="" style="font-size: 16px; color: rgb(102, 116, 123);">// =&gt; 'meow'<br><br></span><span class="" style="font-size: 16px; color: rgb(241, 242, 243);">speakLoudly(cat)<br></span><span class="" style="font-size: 16px; color: rgb(102, 116, 123);">// =&gt; 'MEOW!'</span></span></code></pre><h3 style=" margin-bottom: 20px; color: rgb(88, 90, 91); line-height: 1.8; word-break: break-all ; ; ; ; ; "><strong>总结</strong><br></h3><p style=" margin-bottom: 20px; color: rgb(88, 90, 91); font-size: 1.14286rem; line-height: 1.8; word-break: break-all ; ; ; ; ; "><span style="font-size: 16px;">本文学习了解耦方法并将其从对象中抽取出来的很多好处。解耦让我们可以把函数用在更多地方以及不同类型的对象上，同时让它可以与其它函数组合。我们还消除掉了所有对&nbsp;</span><code style="padding: 1px 4px; background-color: rgb(242, 242, 242); border-width: 1px; border-style: solid; border-color: rgb(222, 222, 222); border-radius: 2px; font-stretch: normal; font-size: 0.8em; line-height: normal; font-family: Monaco, monospace;"><span style="font-size: 16px;">this</span></code><span style="font-size: 16px;">&nbsp;上下文的引用，光这一项对我来说就足够了！</span></p><p><br></p><hr/><a href="http://mp.weixin.qq.com/s?timestamp=1493115396&src=3&ver=1&signature=7Fh7FrPufgFYYsQdXKdJ2hwwX1xhAW7LeLZcw5Upss37AoH5Q-LM*j78I8BRxXS-pfD500vEsAMevZPkTd1fUHUqBXomxGKSJkSU6ZyDMk3RLH5gXpQ5XiNn4AvvXjudAjv143mwiPufCPU39DDQwi3lPfwe-RnPZ8A8fIQji3U=">微信地址</a>
{% endraw  %}

