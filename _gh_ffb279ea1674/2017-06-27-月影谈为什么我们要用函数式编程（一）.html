---
title: 月影谈为什么我们要用函数式编程（一）
author: 月影
wechat_source: >-
  http://mp.weixin.qq.com/s?timestamp=1499131566&src=3&ver=1&signature=iU4hCwtQzyv2pey6SDTnZ3i0rC89bkAj2aXa57Pgg6dvHZBlWIj1S8FOqHe4*f6AKQ38niscoOEIajuE5ND4qw7sb8t8RswK60AM84rFim3CvJ0xLIFrOiCpZTqjuXXeoJFhTRgn8eiSUNNe266YnjLPVx1o0M4x4y53Nymd5Is=
date: '2017-06-27 00:00:00 +0000'

---

{% raw  %}
<p style="border: 0px; line-height: 1.5; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; text-overflow: ellipsis; overflow: hidden;"><strong style="max-width: 100%; color: rgb(0, 128, 255); font-family: 'Helvetica Neue'; font-size: 18px; white-space: normal; box-sizing: border-box !important; word-wrap: break-word !important;">关注奇舞周刊<span style="max-width: 100%; line-height: normal; box-sizing: border-box !important; word-wrap: break-word !important;">，</span>由<span style="max-width: 100%; line-height: normal; box-sizing: border-box !important; word-wrap: break-word !important;">360</span>前端团队奇舞团带你领略前端前沿技术</strong></p><blockquote class="" style="margin-top: 10px; margin-bottom: 10px; border-width: 0px 0px 0px 2px; border-left-color: rgb(18, 122, 230); padding-top: 10px; padding-right: 10px; padding-bottom: 10px; background-color: rgb(239, 239, 239); font-size: 14px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-variant-ligatures: normal; orphans: 2; white-space: normal; widows: 2; background-position: initial initial; background-repeat: initial initial;"><p style="border: 0px; line-height: 1.5; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; text-overflow: ellipsis; overflow: hidden;">这可能是最简单易懂的函数式编程介（扯）绍（淡）了</p></blockquote><p class="" style="margin: 15px auto; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; overflow: hidden; text-align: center; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;"><img src="http://mmbiz.qpic.cn/mmbiz_png/d8tibSEfhMMo6DQfzGRNgMWy4azNDxKLbeYXKrl24E4nicEY067jIjn8ZlFD6YenSNS1QRFZzYN91KF7cn8sNuCQ/0?wx_fmt=png" style="border: 0px; vertical-align: middle; width: 770px !important; height: 341.688px !important; visibility: visible !important;"></p><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">目前前端界（以及其他一些领域）对函数式编程大体上两种态度，一些人是觉得函数式编程特牛逼，尤其是现在许多新生的框架和库都在标榜自己的函数式特征。而另一些人，又觉得函数式编程学起来很难，而且似乎也没有什么卵用，理由是在自己经历的项目里面很难看到具体的函数式编程应用场景，甚至其中许多人认同一个观点，觉得函数式编程只适合于学术研究，很难在工程项目中实际使用。</p><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">不管你在阅读本文之前属于哪一种人，又或者你是刚接触函数式编程的新人，都没有关系。本文不是研究函数式编程范式的学术研究，而函数式编程作为一个可以说是程序设计理论中最古老的编程范式，在它几十年上百年的发展历史中，已经积累了大量的资料和素材，对于想要在学术领域里完全弄明白它的同学，完全可以在网上、书店里找到各种资料。本文的重点不在于概念，而在于实战。因此，你不会听到太多各种函数式编程的名词讨论，比如诸如 Curry、Mond 之类的专业术语。相反，我们主要来讨论函数式编程在前端领域内使用的一些实际例子，了解为什么前端需要学习函数式编程，使用函数式编程写代码能给我们带来什么。如果弄明白了这些，那么关于函数式编程不实用的谣言也就不攻自破了。</p><hr style="border: 0px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; white-space: normal; widows: 2;"><h2 style="margin-top: 22px; margin-bottom: 12px; border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(25, 128, 230); font-weight: bold; word-break: break-all; word-wrap: break-word; font-size: 20px; color: rgb(25, 128, 230); text-align: center; font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-variant-ligatures: normal; orphans: 2; white-space: normal; widows: 2;">数据抽象或过程抽象</h2><p style="margin-top: 8px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">为什么我们接受面向过程或面向对象思想很容易，而我们要完全接受函数式编程却感觉难得多？</p><p class="" style="margin: 15px auto; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; overflow: hidden; text-align: center; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;"><img src="http://mmbiz.qpic.cn/mmbiz_png/d8tibSEfhMMo6DQfzGRNgMWy4azNDxKLbcq707UBYeDx0ibX9MVTwIib324iaPmG1nhkGUuw5SaQ1W2ZvLgMdfYWJw/0?wx_fmt=png" style="border: 0px; vertical-align: middle; width: 600px !important; height: 450px !important;"></p><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">我认为这个问题大体上可以这么解释：</p><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">人脑本能地容易理解“看得见“、“摸得着”的物体，对于“运动”和“变化”一类不着形的东西，人脑理解起来要略微地费劲一些。而人类要做好一件复杂的事情，大脑有两种抽象方向，一种是对实体进行抽象，另一种是对过程进行抽象：</p><p class="" style="margin: 15px auto; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; overflow: hidden; text-align: center; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;"><img src="http://mmbiz.qpic.cn/mmbiz_jpg/d8tibSEfhMMo6DQfzGRNgMWy4azNDxKLbQJTR0GqqEogBXqznbrYwq5Xm2reias3vj9FFsEUicJgFIwByXTWmspvw/0?wx_fmt=jpeg" style="border: 0px; vertical-align: middle; width: 500px !important; height: 333px !important;"></p><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">简答来说，即在软件设计的过程中，如果要保证软件产品的功能稳定可用，同时要保证它的灵活性和可扩展性，那么系统就要有变化的部分和不变的部分。哪些部分应当设计成“不变”，哪些部分应当设计成“可变”，在这个取舍过程中，FP（函数式编程）和 OOP（面向对象编程）正是走了两条不同的路线。</p><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">面向对象对数据进行抽象，将行为以对象方法的方式封装到数据实体内部，从而降低系统的耦合度。而函数式编程，选择对过程进行抽象，将数据以输入输出流的方式封装进过程内部，从而也降低系统的耦合度。两者虽是截然不同，然而在系统设计的目标上可以说是殊途同归的。</p><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">面向对象思想和函数式编程思想也是不矛盾的，因为一个庞大的系统，可能既要对数据进行抽象，又要对过程进行抽象，或者一个局部适合进行数据抽象，另一个局部适合进行过程抽象，这都是可能的。数据抽象不一定以对象实体为形式，同样过程抽象也不是说形式上必然是 functional 的，比如流式对象（InputStream、OutputStream）、Express 的 middleware，就带有明显的过程抽象的特征。但是在通常情况下，OOP更适合用来做数据抽象，FP更适合用来做过程抽象。</p><h2 style="margin-top: 22px; margin-bottom: 12px; border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(25, 128, 230); font-weight: bold; word-break: break-all; word-wrap: break-word; font-size: 20px; color: rgb(25, 128, 230); text-align: center; font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-variant-ligatures: normal; orphans: 2; white-space: normal; widows: 2;">纯函数</h2><p style="margin-top: 8px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">再具体深入下去之前，我们先来解答一个问题，那就是为什么用 FP 或过程抽象能够降低系统的耦合度。这里我们要先理解一个概念，这个概念叫“纯函数”。</p><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">根据定义，如果一个函数符合两个条件，它被称为<strong style="border: 0px;">纯函数</strong>:</p><ul style="border: 0px; padding-left: 20px; line-height: 1.8; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; white-space: normal; widows: 2;" class="list-paddingleft-2"><li><p>此函数在相同的输入值时，总是产生相同的输出。函数的输出和当前运行环境的<strong style="border: 0px;">上下文状态</strong>无关。</p></li><li><p>此函数运行过程不影响运行环境，比如不会触发事件、更改环境中的对象、终端输出值等。</p></li></ul><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">简单来说，也就是当<strong style="border: 0px;">一个函数的输出不受外部环境影响，同时也不影响外部环境时，该函数就是纯函数。</strong></p><p class="" style="margin: 15px auto; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; overflow: hidden; text-align: center; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;"><img src="http://mmbiz.qpic.cn/mmbiz_png/d8tibSEfhMMo6DQfzGRNgMWy4azNDxKLbc1picaiaR5dSMviaUynAt5FzMRtxRgDjPBXQn8icHUSeqfEucKXIguO0pA/0?wx_fmt=png" style="border: 0px; vertical-align: middle; width: 341px !important; height: 419px !important;"></p><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">JavaScript 内置函数中有不少纯函数，也有不少非纯函数。</p><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">比如以下函数是纯函数：</p><ul style="border: 0px; padding-left: 20px; line-height: 1.8; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; white-space: normal; widows: 2;" class="list-paddingleft-2"><li><p>String.prototype.toUpperCase</p></li><li><p>Array.prototype.map</p></li><li><p>Function.prototype.bind</p></li></ul><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">以下函数不是纯函数：</p><ul style="border: 0px; padding-left: 20px; line-height: 1.8; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; white-space: normal; widows: 2;" class="list-paddingleft-2"><li><p>Math.random</p></li><li><p>Date.now</p></li><li><p>document.body.appendChild</p></li><li><p>Array.prototype.sort</p></li></ul><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">为什么要区分纯函数和非纯函数呢？因为在系统里，纯函数与非纯函数相比，在可测试性、可维护性、可移植性、并行计算和可扩展性方面都有着巨大的优势。</p><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">在这里我用可测试性来举例：</p><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">对于纯函数，因为是<strong style="border: 0px;">无状态</strong>的，测试的时候不需要构建运行时环境，也不需要用特定的顺序进行测试：</p><blockquote class="" style="border: 0px; padding-left: 0px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; white-space: normal; widows: 2;"><pre class="" style="border: 0px; padding: 1em; overflow: auto; background-color: rgb(39, 40, 34); color: rgb(248, 248, 242); font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace; max-width: 100%; word-wrap: normal; text-shadow: rgba(0, 0, 0, 0.298039) 0px 1px; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; border-top-left-radius: 0.3em; border-top-right-radius: 0.3em; border-bottom-right-radius: 0.3em; border-bottom-left-radius: 0.3em; box-sizing: border-box !important;"><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px; color: rgb(230, 219, 116);">test</span><span class="" style="border: 0px;">(</span>t&nbsp;<span class="" style="border: 0px;">=</span><span class="" style="border: 0px;">&gt;</span>&nbsp;<span class="" style="border: 0px;">{</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;&nbsp;&nbsp;t<span class="" style="border: 0px;">.</span><span class="" style="border: 0px; color: rgb(230, 219, 116);">is</span><span class="" style="border: 0px;">(</span><span class="" style="border: 0px; color: rgb(230, 219, 116);">add</span><span class="" style="border: 0px;">(</span><span class="" style="border: 0px; color: rgb(174, 129, 255);">10</span><span class="" style="border: 0px;">,</span>&nbsp;<span class="" style="border: 0px; color: rgb(174, 129, 255);">20</span><span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">,</span>&nbsp;<span class="" style="border: 0px; color: rgb(174, 129, 255);">30</span><span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">;</span>&nbsp;<span class="" spellcheck="true" style="border: 0px; color: slategray;">//add(x,y) 是个纯函数，不需要为它构建测试环境</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="" style="border: 0px;">...</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px;">}</span><span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">;</span></p></pre></blockquote><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">对于非纯函数，就比较复杂：</p><blockquote class="" style="border: 0px; padding-left: 0px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; white-space: normal; widows: 2;"><pre class="" style="border: 0px; padding: 1em; overflow: auto; background-color: rgb(39, 40, 34); color: rgb(248, 248, 242); font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace; max-width: 100%; word-wrap: normal; text-shadow: rgba(0, 0, 0, 0.298039) 0px 1px; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; border-top-left-radius: 0.3em; border-top-right-radius: 0.3em; border-bottom-right-radius: 0.3em; border-bottom-left-radius: 0.3em; box-sizing: border-box !important;"><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">test<span class="" style="border: 0px;">.</span><span class="" style="border: 0px; color: rgb(230, 219, 116);">before</span><span class="" style="border: 0px;">(</span>t&nbsp;<span class="" style="border: 0px;">=</span><span class="" style="border: 0px;">&gt;</span>&nbsp;<span class="" style="border: 0px;">{</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="" style="border: 0px; color: rgb(102, 217, 239);">let</span>&nbsp;list&nbsp;<span class="" style="border: 0px;">=</span>&nbsp;document<span class="" style="border: 0px;">.</span><span class="" style="border: 0px; color: rgb(230, 219, 116);">createElement</span><span class="" style="border: 0px;">(</span><span class="" style="border: 0px; color: rgb(166, 226, 46);">'ul'</span><span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">;</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;&nbsp;&nbsp;list<span class="" style="border: 0px;">.</span>id&nbsp;<span class="" style="border: 0px;">=</span>&nbsp;<span class="" style="border: 0px; color: rgb(166, 226, 46);">'xxxxxx'</span><span class="" style="border: 0px;">;</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="" style="border: 0px;">...</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px;">}</span><span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">;</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 0; word-break: break-word; word-wrap: break-word; font-size: 14px; height: 6px; white-space: nowrap !important;"><br style="border: 0px;"></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px; color: rgb(230, 219, 116);">test</span><span class="" style="border: 0px;">(</span>t&nbsp;<span class="" style="border: 0px;">=</span><span class="" style="border: 0px;">&gt;</span>&nbsp;<span class="" style="border: 0px;">{</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="" style="border: 0px; color: rgb(102, 217, 239);">let</span>&nbsp;list&nbsp;<span class="" style="border: 0px;">=</span>&nbsp;document<span class="" style="border: 0px;">.</span><span class="" style="border: 0px; color: rgb(230, 219, 116);">getElementById</span><span class="" style="border: 0px;">(</span><span class="" style="border: 0px; color: rgb(166, 226, 46);">'xxxxxx'</span><span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">;</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;&nbsp;&nbsp;t<span class="" style="border: 0px;">.</span><span class="" style="border: 0px; color: rgb(230, 219, 116);">is</span><span class="" style="border: 0px;">(</span><span class="" style="border: 0px; color: rgb(230, 219, 116);">sortList</span><span class="" style="border: 0px;">(</span>list<span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">.</span>innerHTML<span class="" style="border: 0px;">,</span>&nbsp;<span class="" style="border: 0px;"><span class="" style="border: 0px; color: rgb(166, 226, 46);">`&lt;ul&gt;</span></span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...</p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;&nbsp;&nbsp;&lt;/ul&gt;`<span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">;</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px;">}</span><span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">;</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 0; word-break: break-word; word-wrap: break-word; font-size: 14px; height: 6px; white-space: nowrap !important;"><br style="border: 0px;"></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">test<span class="" style="border: 0px;">.</span><span class="" style="border: 0px; color: rgb(230, 219, 116);">after</span><span class="" style="border: 0px;">(</span>t&nbsp;<span class="" style="border: 0px;">=</span><span class="" style="border: 0px;">&gt;</span>&nbsp;<span class="" style="border: 0px;">{</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="" style="border: 0px;">...</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;&nbsp;&nbsp;document<span class="" style="border: 0px;">.</span><span class="" style="border: 0px; color: rgb(230, 219, 116);">removeChild</span><span class="" style="border: 0px;">(</span>list<span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">;</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px;">}</span><span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">;</span></p></pre></blockquote><h4 style="margin-top: 8px; margin-bottom: 5px; border: 0px; font-weight: bold; word-break: break-all; word-wrap: break-word; font-size: 18px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-variant-ligatures: normal; orphans: 2; white-space: normal; widows: 2;">函数式编程能够减少系统中的非纯函数</h4><p style="margin-top: 8px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">首先我们看一个例子：</p><blockquote class="" style="border: 0px; padding-left: 0px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; white-space: normal; widows: 2;"><pre class="" style="border: 0px; padding: 1em; overflow: auto; background-color: rgb(39, 40, 34); color: rgb(248, 248, 242); font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace; max-width: 100%; word-wrap: normal; text-shadow: rgba(0, 0, 0, 0.298039) 0px 1px; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; border-top-left-radius: 0.3em; border-top-right-radius: 0.3em; border-bottom-right-radius: 0.3em; border-bottom-left-radius: 0.3em; box-sizing: border-box !important;"><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" spellcheck="true" style="border: 0px; color: slategray;">//two impure functions</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 0; word-break: break-word; word-wrap: break-word; font-size: 14px; height: 6px; white-space: nowrap !important;"><br style="border: 0px;"></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px; color: rgb(102, 217, 239);">function</span>&nbsp;<span class="" style="border: 0px; color: rgb(230, 219, 116);">setColor</span><span class="" style="border: 0px;">(</span>el<span class="" style="border: 0px;">,</span>&nbsp;color<span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">{</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;el<span class="" style="border: 0px;">.</span>style<span class="" style="border: 0px;">.</span>color&nbsp;<span class="" style="border: 0px;">=</span>&nbsp;color<span class="" style="border: 0px;">;</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px;">}</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 0; word-break: break-word; word-wrap: break-word; font-size: 14px; height: 6px; white-space: nowrap !important;"><br style="border: 0px;"></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px; color: rgb(102, 217, 239);">function</span>&nbsp;<span class="" style="border: 0px; color: rgb(230, 219, 116);">setColors</span><span class="" style="border: 0px;">(</span>els<span class="" style="border: 0px;">,</span>&nbsp;color<span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">{</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;els<span class="" style="border: 0px;">.</span><span class="" style="border: 0px; color: rgb(230, 219, 116);">forEach</span><span class="" style="border: 0px;">(</span>el&nbsp;<span class="" style="border: 0px;">=</span><span class="" style="border: 0px;">&gt;</span>&nbsp;<span class="" style="border: 0px; color: rgb(230, 219, 116);">setColor</span><span class="" style="border: 0px;">(</span>el<span class="" style="border: 0px;">,</span>&nbsp;color<span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">;</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px;">}</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 0; word-break: break-word; word-wrap: break-word; font-size: 14px; height: 6px; white-space: nowrap !important;"><br style="border: 0px;"></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px; color: rgb(102, 217, 239);">let</span>&nbsp;items1&nbsp;<span class="" style="border: 0px;">=</span>&nbsp;document<span class="" style="border: 0px;">.</span><span class="" style="border: 0px; color: rgb(230, 219, 116);">querySelectorAll</span><span class="" style="border: 0px;">(</span><span class="" style="border: 0px; color: rgb(166, 226, 46);">'ul &gt; li:nth-child(2n + 1)'</span><span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">;</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px; color: rgb(102, 217, 239);">let</span>&nbsp;items2&nbsp;<span class="" style="border: 0px;">=</span>&nbsp;document<span class="" style="border: 0px;">.</span><span class="" style="border: 0px; color: rgb(230, 219, 116);">querySelectorAll</span><span class="" style="border: 0px;">(</span><span class="" style="border: 0px; color: rgb(166, 226, 46);">'ul &gt; li:nth-child(3n + 1)'</span><span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">;</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 0; word-break: break-word; word-wrap: break-word; font-size: 14px; height: 6px; white-space: nowrap !important;"><br style="border: 0px;"></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px; color: rgb(230, 219, 116);">setColors</span><span class="" style="border: 0px;">(</span>items2<span class="" style="border: 0px;">,</span>&nbsp;<span class="" style="border: 0px; color: rgb(166, 226, 46);">'green'</span><span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">;</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px; color: rgb(230, 219, 116);">setColors</span><span class="" style="border: 0px;">(</span>items1<span class="" style="border: 0px;">,</span>&nbsp;<span class="" style="border: 0px; color: rgb(166, 226, 46);">'red'</span><span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">;</span></p></pre></blockquote><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">在这里我们有两个彼此依赖的非纯函数，setColor(el, color) 和 setColors(els, color)。在测试的时候，我们需要构建环境来测试两个函数。</p><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">现在，我们用函数式编程思想来改造这个系统：</p><blockquote class="" style="border: 0px; padding-left: 0px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; white-space: normal; widows: 2;"><pre class="" style="border: 0px; padding: 1em; overflow: auto; background-color: rgb(39, 40, 34); color: rgb(248, 248, 242); font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace; max-width: 100%; word-wrap: normal; text-shadow: rgba(0, 0, 0, 0.298039) 0px 1px; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; border-top-left-radius: 0.3em; border-top-right-radius: 0.3em; border-bottom-right-radius: 0.3em; border-bottom-left-radius: 0.3em; box-sizing: border-box !important;"><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" spellcheck="true" style="border: 0px; color: slategray;">//only one impure function</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 0; word-break: break-word; word-wrap: break-word; font-size: 14px; height: 6px; white-space: nowrap !important;"><br style="border: 0px;"></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px; color: rgb(102, 217, 239);">function</span>&nbsp;<span class="" style="border: 0px; color: rgb(230, 219, 116);">batch</span><span class="" style="border: 0px;">(</span>fn<span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">{</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;<span class="" style="border: 0px; color: rgb(102, 217, 239);">return</span>&nbsp;<span class="" style="border: 0px; color: rgb(102, 217, 239);">function</span><span class="" style="border: 0px;">(</span>target<span class="" style="border: 0px;">,</span>&nbsp;<span class="" style="border: 0px;">...</span>args<span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">{</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="" style="border: 0px; color: rgb(102, 217, 239);">if</span><span class="" style="border: 0px;">(</span>target<span class="" style="border: 0px;">.</span>length&nbsp;<span class="" style="border: 0px;">&gt;=</span>&nbsp;<span class="" style="border: 0px; color: rgb(174, 129, 255);">0</span><span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">{</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="" style="border: 0px; color: rgb(102, 217, 239);">return</span>&nbsp;Array<span class="" style="border: 0px;">.</span><span class="" style="border: 0px; color: rgb(102, 217, 239);">from</span><span class="" style="border: 0px;">(</span>target<span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">.</span><span class="" style="border: 0px; color: rgb(230, 219, 116);">map</span><span class="" style="border: 0px;">(</span>item&nbsp;<span class="" style="border: 0px;">=</span><span class="" style="border: 0px;">&gt;</span>&nbsp;fn<span class="" style="border: 0px;">.</span><span class="" style="border: 0px; color: rgb(230, 219, 116);">apply</span><span class="" style="border: 0px;">(</span><span class="" style="border: 0px; color: rgb(102, 217, 239);">this</span><span class="" style="border: 0px;">,</span>&nbsp;<span class="" style="border: 0px;">[</span>item<span class="" style="border: 0px;">,</span>&nbsp;<span class="" style="border: 0px;">...</span>args<span class="" style="border: 0px;">]</span><span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">;</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="" style="border: 0px;">}</span><span class="" style="border: 0px; color: rgb(102, 217, 239);">else</span><span class="" style="border: 0px;">{</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="" style="border: 0px; color: rgb(102, 217, 239);">return</span>&nbsp;fn<span class="" style="border: 0px;">.</span><span class="" style="border: 0px; color: rgb(230, 219, 116);">apply</span><span class="" style="border: 0px;">(</span><span class="" style="border: 0px; color: rgb(102, 217, 239);">this</span><span class="" style="border: 0px;">,</span>&nbsp;<span class="" style="border: 0px;">[</span>target<span class="" style="border: 0px;">,</span>&nbsp;<span class="" style="border: 0px;">...</span>args<span class="" style="border: 0px;">]</span><span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">;</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="" style="border: 0px;">}</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;<span class="" style="border: 0px;">}</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px;">}</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 0; word-break: break-word; word-wrap: break-word; font-size: 14px; height: 6px; white-space: nowrap !important;"><br style="border: 0px;"></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px; color: rgb(102, 217, 239);">function</span>&nbsp;<span class="" style="border: 0px; color: rgb(230, 219, 116);">setColor</span><span class="" style="border: 0px;">(</span>el<span class="" style="border: 0px;">,</span>&nbsp;color<span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">{</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;el<span class="" style="border: 0px;">.</span>style<span class="" style="border: 0px;">.</span>color&nbsp;<span class="" style="border: 0px;">=</span>&nbsp;color<span class="" style="border: 0px;">;</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px;">}</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 0; word-break: break-word; word-wrap: break-word; font-size: 14px; height: 6px; white-space: nowrap !important;"><br style="border: 0px;"></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px; color: rgb(102, 217, 239);">let</span>&nbsp;setColors&nbsp;<span class="" style="border: 0px;">=</span>&nbsp;<span class="" style="border: 0px; color: rgb(230, 219, 116);">batch</span><span class="" style="border: 0px;">(</span>setColor<span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">;</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 0; word-break: break-word; word-wrap: break-word; font-size: 14px; height: 6px; white-space: nowrap !important;"><br style="border: 0px;"></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px; color: rgb(102, 217, 239);">let</span>&nbsp;items1&nbsp;<span class="" style="border: 0px;">=</span>&nbsp;document<span class="" style="border: 0px;">.</span><span class="" style="border: 0px; color: rgb(230, 219, 116);">querySelectorAll</span><span class="" style="border: 0px;">(</span><span class="" style="border: 0px; color: rgb(166, 226, 46);">'ul &gt; li:nth-child(2n + 1)'</span><span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">;</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px; color: rgb(102, 217, 239);">let</span>&nbsp;items2&nbsp;<span class="" style="border: 0px;">=</span>&nbsp;document<span class="" style="border: 0px;">.</span><span class="" style="border: 0px; color: rgb(230, 219, 116);">querySelectorAll</span><span class="" style="border: 0px;">(</span><span class="" style="border: 0px; color: rgb(166, 226, 46);">'ul &gt; li:nth-child(3n + 1)'</span><span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">;</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 0; word-break: break-word; word-wrap: break-word; font-size: 14px; height: 6px; white-space: nowrap !important;"><br style="border: 0px;"></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px; color: rgb(230, 219, 116);">setColors</span><span class="" style="border: 0px;">(</span>items2<span class="" style="border: 0px;">,</span>&nbsp;<span class="" style="border: 0px; color: rgb(166, 226, 46);">'green'</span><span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">;</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px; color: rgb(230, 219, 116);">setColors</span><span class="" style="border: 0px;">(</span>items1<span class="" style="border: 0px;">,</span>&nbsp;<span class="" style="border: 0px; color: rgb(166, 226, 46);">'red'</span><span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">;</span></p></pre></blockquote><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">在这里，我们建立一个过程抽象的高阶函数 batch(fn)，这个函数的作用是，对它的输入函数返回一个新的函数，这个函数与输入函数的区别是，如果调用的第一个实参是一个数组，那么将这个数组展开，用每一个值依次调用输入函数，返回一个数组，包活每次调用返回的结果。</p><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">batch(fn) 本身虽然看似复杂，但是有意思的事，这个函数无疑是纯函数，所以 batch(fn) 自身的测试是非常简单的：</p><blockquote class="" style="border: 0px; padding-left: 0px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; white-space: normal; widows: 2;"><pre class="" style="border: 0px; padding: 1em; overflow: auto; background-color: rgb(39, 40, 34); color: rgb(248, 248, 242); font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace; max-width: 100%; word-wrap: normal; text-shadow: rgba(0, 0, 0, 0.298039) 0px 1px; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; border-top-left-radius: 0.3em; border-top-right-radius: 0.3em; border-bottom-right-radius: 0.3em; border-bottom-left-radius: 0.3em; box-sizing: border-box !important;"><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px; color: rgb(230, 219, 116);">test</span><span class="" style="border: 0px;">(</span>t&nbsp;<span class="" style="border: 0px;">=</span><span class="" style="border: 0px;">&gt;</span>&nbsp;<span class="" style="border: 0px;">{</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;<span class="" style="border: 0px; color: rgb(102, 217, 239);">let</span>&nbsp;add&nbsp;<span class="" style="border: 0px;">=</span>&nbsp;<span class="" style="border: 0px;">(</span>x<span class="" style="border: 0px;">,</span>&nbsp;y<span class="" style="border: 0px;">)</span>&nbsp;<span class="" style="border: 0px;">=</span><span class="" style="border: 0px;">&gt;</span>&nbsp;x&nbsp;<span class="" style="border: 0px;">+</span>&nbsp;y<span class="" style="border: 0px;">;</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;<span class="" style="border: 0px; color: rgb(102, 217, 239);">let</span>&nbsp;listAdd&nbsp;<span class="" style="border: 0px;">=</span>&nbsp;<span class="" style="border: 0px; color: rgb(230, 219, 116);">batch</span><span class="" style="border: 0px;">(</span>add<span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">;</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 0; word-break: break-word; word-wrap: break-word; font-size: 14px; height: 6px; white-space: nowrap !important;"><br style="border: 0px;"></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;t<span class="" style="border: 0px;">.</span><span class="" style="border: 0px; color: rgb(230, 219, 116);">deepEqual</span><span class="" style="border: 0px;">(</span><span class="" style="border: 0px; color: rgb(230, 219, 116);">listAdd</span><span class="" style="border: 0px;">(</span><span class="" style="border: 0px;">[</span><span class="" style="border: 0px; color: rgb(174, 129, 255);">1</span><span class="" style="border: 0px;">,</span><span class="" style="border: 0px; color: rgb(174, 129, 255);">2</span><span class="" style="border: 0px;">,</span><span class="" style="border: 0px; color: rgb(174, 129, 255);">3</span><span class="" style="border: 0px;">]</span><span class="" style="border: 0px;">,</span>&nbsp;<span class="" style="border: 0px; color: rgb(174, 129, 255);">1</span><span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">,</span>&nbsp;<span class="" style="border: 0px;">[</span><span class="" style="border: 0px; color: rgb(174, 129, 255);">2</span><span class="" style="border: 0px;">,</span><span class="" style="border: 0px; color: rgb(174, 129, 255);">3</span><span class="" style="border: 0px;">,</span><span class="" style="border: 0px; color: rgb(174, 129, 255);">4</span><span class="" style="border: 0px;">]</span><span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">;</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px;">}</span><span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">;</span></p></pre></blockquote><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">由于我们上面举的例子 setColor 和 setColors 虽然不是纯函数，但是却非常简单，因此似乎设计 batch(fn) 的意义不大，有把系统变得更复杂的嫌疑。然而，对于有许多操作 DOM 的函数的框架或库，有了 batch(fn)，我们就可以实现很简单的接口（对单一元素操作），然后利用 batch(fn) 获得更复杂接口（对元素进行批量操作），从而大大降低系统本身的复杂的，提升可维护性。</p><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">注意一点，batch(fn) 输出的函数有副作用，然而 batch(fn) 用闭包将输出的函数的副作用限制在了 batch(fn) 的作用域内。</p><h4 style="margin-top: 8px; margin-bottom: 5px; border: 0px; font-weight: bold; word-break: break-all; word-wrap: break-word; font-size: 18px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-variant-ligatures: normal; orphans: 2; white-space: normal; widows: 2;"><span class="" style="border: 0px; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; font-size: inherit !important;">Ramda.js</span>&nbsp;的 lift 方法</h4><p style="margin-top: 8px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">Ramda.js 的 lift 方法和 batch 有一点点类似，不过功能更强大。让我们来用它实现一个有一点点“烧脑”的效果，来作为这篇文章的结尾：</p><blockquote class="" style="border: 0px; padding-left: 0px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; white-space: normal; widows: 2;"><pre class="" style="border: 0px; padding: 1em; overflow: auto; background-color: rgb(39, 40, 34); color: rgb(248, 248, 242); font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace; max-width: 100%; word-wrap: normal; text-shadow: rgba(0, 0, 0, 0.298039) 0px 1px; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; border-top-left-radius: 0.3em; border-top-right-radius: 0.3em; border-bottom-right-radius: 0.3em; border-bottom-left-radius: 0.3em; box-sizing: border-box !important;"><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px; color: rgb(102, 217, 239);">async</span>&nbsp;<span class="" style="border: 0px; color: rgb(102, 217, 239);">function</span>&nbsp;<span class="" style="border: 0px; color: rgb(230, 219, 116);">reducer</span><span class="" style="border: 0px;">(</span>promise<span class="" style="border: 0px;">,</span>&nbsp;action<span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">{</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;<span class="" style="border: 0px; color: rgb(102, 217, 239);">let</span>&nbsp;res&nbsp;<span class="" style="border: 0px;">=</span>&nbsp;<span class="" style="border: 0px; color: rgb(102, 217, 239);">await</span>&nbsp;promise<span class="" style="border: 0px;">;</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;<span class="" style="border: 0px; color: rgb(102, 217, 239);">return</span>&nbsp;<span class="" style="border: 0px; color: rgb(230, 219, 116);">action</span><span class="" style="border: 0px;">(</span>res<span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">;</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px;">}</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 0; word-break: break-word; word-wrap: break-word; font-size: 14px; height: 6px; white-space: nowrap !important;"><br style="border: 0px;"></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px; color: rgb(102, 217, 239);">function</span>&nbsp;<span class="" style="border: 0px; color: rgb(230, 219, 116);">continuous</span><span class="" style="border: 0px;">(</span><span class="" style="border: 0px;">...</span>functors<span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">{</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;<span class="" style="border: 0px; color: rgb(102, 217, 239);">return</span>&nbsp;<span class="" style="border: 0px; color: rgb(102, 217, 239);">async</span>&nbsp;<span class="" style="border: 0px; color: rgb(102, 217, 239);">function</span><span class="" style="border: 0px;">(</span>input<span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">{</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="" style="border: 0px; color: rgb(102, 217, 239);">return</span>&nbsp;<span class="" style="border: 0px; color: rgb(102, 217, 239);">await</span>&nbsp;functors<span class="" style="border: 0px;">.</span><span class="" style="border: 0px; color: rgb(230, 219, 116);">reduce</span><span class="" style="border: 0px;">(</span>reducer<span class="" style="border: 0px;">,</span>&nbsp;input<span class="" style="border: 0px;">)</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;<span class="" style="border: 0px;">}</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px;">}</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 0; word-break: break-word; word-wrap: break-word; font-size: 14px; height: 6px; white-space: nowrap !important;"><br style="border: 0px;"></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px; color: rgb(102, 217, 239);">function</span>&nbsp;<span class="" style="border: 0px; color: rgb(230, 219, 116);">sleep</span><span class="" style="border: 0px;">(</span>ms<span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">{</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;<span class="" style="border: 0px; color: rgb(102, 217, 239);">return</span>&nbsp;<span class="" style="border: 0px; color: rgb(102, 217, 239);">new</span>&nbsp;<span class="" style="border: 0px;">Promise</span><span class="" style="border: 0px;">(</span>resolve&nbsp;<span class="" style="border: 0px;">=</span><span class="" style="border: 0px;">&gt;</span>&nbsp;<span class="" style="border: 0px; color: rgb(230, 219, 116);">setTimeout</span><span class="" style="border: 0px;">(</span>resolve<span class="" style="border: 0px;">,</span>&nbsp;ms<span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">;</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px;">}</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 0; word-break: break-word; word-wrap: break-word; font-size: 14px; height: 6px; white-space: nowrap !important;"><br style="border: 0px;"></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px; color: rgb(102, 217, 239);">async</span>&nbsp;<span class="" style="border: 0px; color: rgb(102, 217, 239);">function</span>&nbsp;<span class="" style="border: 0px; color: rgb(230, 219, 116);">setColor</span><span class="" style="border: 0px;">(</span>item<span class="" style="border: 0px;">,</span>&nbsp;color<span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">{</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;<span class="" style="border: 0px; color: rgb(102, 217, 239);">await</span>&nbsp;<span class="" style="border: 0px; color: rgb(230, 219, 116);">sleep</span><span class="" style="border: 0px;">(</span><span class="" style="border: 0px; color: rgb(174, 129, 255);">500</span><span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">;</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;item<span class="" style="border: 0px;">.</span>style<span class="" style="border: 0px;">.</span>color&nbsp;<span class="" style="border: 0px;">=</span>&nbsp;color<span class="" style="border: 0px;">;</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px;">}</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 0; word-break: break-word; word-wrap: break-word; font-size: 14px; height: 6px; white-space: nowrap !important;"><br style="border: 0px;"></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px; color: rgb(102, 217, 239);">let</span>&nbsp;comb&nbsp;<span class="" style="border: 0px;">=</span>&nbsp;R<span class="" style="border: 0px;">.</span><span class="" style="border: 0px; color: rgb(230, 219, 116);">lift</span><span class="" style="border: 0px;">(</span><span class="" style="border: 0px;">(</span>el<span class="" style="border: 0px;">,</span>&nbsp;color<span class="" style="border: 0px;">)</span>&nbsp;<span class="" style="border: 0px;">=</span><span class="" style="border: 0px;">&gt;</span>&nbsp;<span class="" style="border: 0px;">{</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;<span class="" style="border: 0px; color: rgb(102, 217, 239);">return</span>&nbsp;<span class="" style="border: 0px;">[</span>el<span class="" style="border: 0px;">,</span>&nbsp;color<span class="" style="border: 0px;">]</span><span class="" style="border: 0px;">;</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px;">}</span><span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">;</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 0; word-break: break-word; word-wrap: break-word; font-size: 14px; height: 6px; white-space: nowrap !important;"><br style="border: 0px;"></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px; color: rgb(102, 217, 239);">let</span>&nbsp;changeColorTo&nbsp;<span class="" style="border: 0px;">=</span>&nbsp;<span class="" style="border: 0px;">(</span>args<span class="" style="border: 0px;">)</span>&nbsp;<span class="" style="border: 0px;">=</span><span class="" style="border: 0px;">&gt;</span>&nbsp;R<span class="" style="border: 0px;">.</span><span class="" style="border: 0px; color: rgb(230, 219, 116);">partial</span><span class="" style="border: 0px;">(</span>setColor<span class="" style="border: 0px;">,</span>&nbsp;args<span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">;</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 0; word-break: break-word; word-wrap: break-word; font-size: 14px; height: 6px; white-space: nowrap !important;"><br style="border: 0px;"></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px; color: rgb(102, 217, 239);">let</span>&nbsp;items&nbsp;<span class="" style="border: 0px;">=</span>&nbsp;Array<span class="" style="border: 0px;">.</span><span class="" style="border: 0px; color: rgb(102, 217, 239);">from</span><span class="" style="border: 0px;">(</span>list<span class="" style="border: 0px;">.</span>children<span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">;</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 0; word-break: break-word; word-wrap: break-word; font-size: 14px; height: 6px; white-space: nowrap !important;"><br style="border: 0px;"></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px; color: rgb(102, 217, 239);">let</span>&nbsp;task&nbsp;<span class="" style="border: 0px;">=</span>&nbsp;R<span class="" style="border: 0px;">.</span><span class="" style="border: 0px; color: rgb(230, 219, 116);">map</span><span class="" style="border: 0px;">(</span>changeColorTo<span class="" style="border: 0px;">,</span>&nbsp;<span class="" style="border: 0px; color: rgb(230, 219, 116);">comb</span><span class="" style="border: 0px;">(</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;items<span class="" style="border: 0px;">,</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;<span class="" style="border: 0px;">[</span><span class="" style="border: 0px; color: rgb(166, 226, 46);">'red'</span><span class="" style="border: 0px;">,</span>&nbsp;<span class="" style="border: 0px; color: rgb(166, 226, 46);">'orange'</span><span class="" style="border: 0px;">,</span>&nbsp;<span class="" style="border: 0px; color: rgb(166, 226, 46);">'yellow'</span><span class="" style="border: 0px;">]</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">;</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 0; word-break: break-word; word-wrap: break-word; font-size: 14px; height: 6px; white-space: nowrap !important;"><br style="border: 0px;"></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px; color: rgb(230, 219, 116);">continuous</span><span class="" style="border: 0px;">(</span><span class="" style="border: 0px;">...</span>task<span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">(</span><span class="" style="border: 0px; color: rgb(174, 129, 255);">0</span><span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">;</span></p></pre></blockquote><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 25.6px; white-space: pre-wrap; word-break: break-word; font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); background-color: rgb(255, 255, 255); word-wrap: break-word !important; box-sizing: border-box !important;"><span style="border: 0px; max-width: 100%; line-height: 1.6; color: rgb(68, 68, 68); box-sizing: border-box !important; word-wrap: break-word !important;"><br style="border: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"></span></p><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 25.6px; white-space: pre-wrap; word-break: break-word; font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); background-color: rgb(255, 255, 255); word-wrap: break-word !important; box-sizing: border-box !important;"><span style="border: 0px; max-width: 100%; line-height: 1.6; color: rgb(68, 68, 68); box-sizing: border-box !important; word-wrap: break-word !important;"></span></p><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 25.6px; white-space: pre-wrap; word-break: break-word; font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); text-align: center; background-color: rgb(255, 255, 255); word-wrap: break-word !important; box-sizing: border-box !important;"><span style="border: 0px; max-width: 100%; color: rgb(68, 68, 68); box-sizing: border-box !important; word-wrap: break-word !important;">奇舞周刊</span></p><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 25.6px; white-space: pre-wrap; word-break: break-word; font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); text-align: center; background-color: rgb(255, 255, 255); word-wrap: break-word !important; box-sizing: border-box !important;"><span style="border: 0px; max-width: 100%; color: rgb(68, 68, 68); box-sizing: border-box !important; word-wrap: break-word !important;">———<span style="border: 0px; max-width: 100%; color: rgb(136, 136, 136); line-height: 25.6px; box-sizing: border-box !important; word-wrap: break-word !important;">————————————</span>———</span></p><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 25.6px; white-space: pre-wrap; word-break: break-word; font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); text-align: center; background-color: rgb(255, 255, 255); word-wrap: break-word !important; box-sizing: border-box !important;"><span style="border: 0px; max-width: 100%; color: rgb(68, 68, 68); box-sizing: border-box !important; word-wrap: break-word !important;">领略前端技术 阅读奇舞周刊</span></p><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 25.6px; white-space: pre-wrap; word-break: break-word; font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); text-align: center; background-color: rgb(255, 255, 255); word-wrap: break-word !important; box-sizing: border-box !important;"><br style="border: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"></p><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 1.5em; white-space: pre-wrap; word-break: break-word; font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); text-align: center; background-color: rgb(255, 255, 255); word-wrap: break-word !important; box-sizing: border-box !important;"><span style="border: 0px; max-width: 100%; font-size: 13px; color: rgb(68, 68, 68); box-sizing: border-box !important; word-wrap: break-word !important;">长按二维码，关注奇舞周刊</span></p><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: normal; white-space: pre-wrap; word-break: break-word; font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; max-width: 100%; min-height: 1em; color: rgb(32, 32, 32); text-align: center; background-color: rgb(255, 255, 255); word-wrap: break-word !important; box-sizing: border-box !important;"><span style="border: 0px; max-width: 100%; font-size: 10px; color: rgb(68, 68, 68); box-sizing: border-box !important; word-wrap: break-word !important;"><strong style="border: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;">▼</strong></span></p><p class="" style="margin: 15px auto; border: 0px; line-height: 25.6px; white-space: normal; word-break: break-word; overflow: hidden; text-align: center; font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); background-color: rgb(255, 255, 255); word-wrap: break-word !important; box-sizing: border-box !important;"><img src="http://mmbiz.qpic.cn/mmbiz/d8tibSEfhMMpC84jhdw7cmZFzrDoG5IsHcpRcls0Ahx6PhRMAicM1gc2ZmG68Tb8t3cyaia5lFicoY8kWXWibCb609A/640?wx_fmt=jpeg" style="border: 0px; vertical-align: middle; box-sizing: border-box !important; word-wrap: break-word !important; visibility: visible !important; width: 200px !important; height: 200px !important;"></p><hr/><a href="http://mp.weixin.qq.com/s?timestamp=1499131566&src=3&ver=1&signature=iU4hCwtQzyv2pey6SDTnZ3i0rC89bkAj2aXa57Pgg6dvHZBlWIj1S8FOqHe4*f6AKQ38niscoOEIajuE5ND4qw7sb8t8RswK60AM84rFim3CvJ0xLIFrOiCpZTqjuXXeoJFhTRgn8eiSUNNe266YnjLPVx1o0M4x4y53Nymd5Is=">微信地址</a> | <a href="https://www.h5jun.com/post/js-functional-1.html">阅读原文</a>
{% endraw  %}

