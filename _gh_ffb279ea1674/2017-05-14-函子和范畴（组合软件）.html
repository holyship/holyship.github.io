---
title: 函子和范畴（组合软件）
author: 网络埋伏纪事 译
wechat_source: >-
  http://mp.weixin.qq.com/s?timestamp=1494856895&src=3&ver=1&signature=4I3jFq9pbfB-s2UPACb8j7UIiNLg6wJ1Dv0P8XkB*fwGO7cJuXBsMc8Jdhjf9CeUb708FatsAvz9H0qMEnwq36jyf7EmK4qhVOEbIL31*W7bGSjybCZTZoR7swgIEufxE*1huKYZH4n709d8MyeP5ytVEDVzbhK2H8m*ukl1Cng=
date: '2017-05-14 00:00:00 +0000'

---

{% raw  %}
<p style="text-align: center;"><img src="/gh_ffb279ea1674/images/8a30137ce3ee07678fecf33efe98bf3eb68e662d.gif" style="width: 350px !important; height: 320px !important; visibility: visible !important;"></p><p style="text-align: center;"><span style="color: rgb(136, 136, 136); font-size: 15px; font-variant-ligatures: normal; orphans: 2; text-align: center; white-space: pre-wrap; widows: 2; background-color: rgb(255, 255, 255);">（图片来源：giphy.com）</span></p><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;"><span style="color: rgb(255, 255, 255); font-size: 16px; font-variant-ligatures: normal; orphans: 2; text-align: justify; white-space: pre-wrap; widows: 2; background-color: rgb(100, 159, 12);">编者按：本文由网络埋伏纪事在众成翻译平台上翻译。今天是母亲节，各位记得给母后请安哦～我们继续学习组合软件系列：函子和范畴。</span></p><p><span style="color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2;  widows: 2;">一个</span><strong style="border: 0px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; white-space: normal; widows: 2;">函子（Functor）</strong><span style="color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2;  widows: 2;">是可以映射的某个事物。也就是说，函子是一个带有接口的容器，这个接口可以用于将一个函数应用到容器内的值。看到函子（functor）这个词时，就应该想到</span><em style="border: 0px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; white-space: normal; widows: 2;">可映射</em><span style="color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2;  widows: 2;">。</span></p><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">术语<strong style="border: 0px;">函子</strong>来自范畴论。在范畴论中，函子是范畴之间的映射。粗略地讲，<strong style="border: 0px;">范畴（Category）</strong>是一组事物，这里每个事物都可以是任何值。在代码中，函子有时候被表示为一个带有 <span class="" style="margin-right: 2px; margin-left: 2px; border: 1px solid rgb(225, 225, 232); padding: 2px 4px; font-size: 14px; font-family: monospace; color: rgb(221, 17, 68); background-color: rgb(247, 247, 249); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; word-break: break-word; word-wrap: break-word;">.map()</span> 方法的对象，这个 <span class="" style="margin-right: 2px; margin-left: 2px; border: 1px solid rgb(225, 225, 232); padding: 2px 4px; font-size: 14px; font-family: monospace; color: rgb(221, 17, 68); background-color: rgb(247, 247, 249); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; word-break: break-word; word-wrap: break-word;">.map()</span> 方法用来将一组值映射为另一组值。</p><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">函子为其内部的零到多个事物提供了一个盒子，以及一个映射接口。数组就是函子的一个不错的例子，但是很多其它类型的对象也可以被映射，包括单值对象、流、树、对象等等。</p><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">对集合（数组、流等）而言，<span class="" style="margin-right: 2px; margin-left: 2px; border: 1px solid rgb(225, 225, 232); padding: 2px 4px; font-size: 14px; font-family: monospace; color: rgb(221, 17, 68); background-color: rgb(247, 247, 249); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; word-break: break-word; word-wrap: break-word;">.map()</span> 通常会遍历集合，并且将指定函数应用到集合中的每个值，但是并非所有函子都可以迭代。</p><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">在 JavaScript 中，数组和 Promise 都是函子（<span class="" style="margin-right: 2px; margin-left: 2px; border: 1px solid rgb(225, 225, 232); padding: 2px 4px; font-size: 14px; font-family: monospace; color: rgb(221, 17, 68); background-color: rgb(247, 247, 249); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; word-break: break-word; word-wrap: break-word;">.then()</span> 是遵从函子定律的），不过有很多库也可以把各种其它事物转换为函子。</p><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">在 Haskell中，函子类型被定义为：</p><blockquote class="" style="border: 0px; padding-left: 0px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; white-space: normal; widows: 2;"><pre class="" style="border: 0px; padding: 1em; overflow: auto; background-color: rgb(39, 40, 34); color: rgb(248, 248, 242); font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace; max-width: 100%; word-wrap: normal; text-shadow: rgba(0, 0, 0, 0.298039) 0px 1px; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; border-top-left-radius: 0.3em; border-top-right-radius: 0.3em; border-bottom-right-radius: 0.3em; border-bottom-left-radius: 0.3em; box-sizing: border-box !important;"><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">fmap&nbsp;<span class="" style="border: 0px;">:</span><span class="" style="border: 0px;">:</span>&nbsp;<span class="" style="border: 0px;">(</span>a&nbsp;<span class="" style="border: 0px;">-</span><span class="" style="border: 0px;">&gt;</span>&nbsp;b<span class="" style="border: 0px;">)</span>&nbsp;<span class="" style="border: 0px;">-</span><span class="" style="border: 0px;">&gt;</span>&nbsp;f a&nbsp;<span class="" style="border: 0px;">-</span><span class="" style="border: 0px;">&gt;</span>&nbsp;f b</p></pre></blockquote><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">给出一个函数，该函数有一个参数 <span class="" style="margin-right: 2px; margin-left: 2px; border: 1px solid rgb(225, 225, 232); padding: 2px 4px; font-size: 14px; font-family: monospace; color: rgb(221, 17, 68); background-color: rgb(247, 247, 249); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; word-break: break-word; word-wrap: break-word;">a</span>，并返回一个 <span class="" style="margin-right: 2px; margin-left: 2px; border: 1px solid rgb(225, 225, 232); padding: 2px 4px; font-size: 14px; font-family: monospace; color: rgb(221, 17, 68); background-color: rgb(247, 247, 249); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; word-break: break-word; word-wrap: break-word;">b</span> 和一个有零到多个 <span class="" style="margin-right: 2px; margin-left: 2px; border: 1px solid rgb(225, 225, 232); padding: 2px 4px; font-size: 14px; font-family: monospace; color: rgb(221, 17, 68); background-color: rgb(247, 247, 249); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; word-break: break-word; word-wrap: break-word;">a</span> 在其中的函子：<span class="" style="margin-right: 2px; margin-left: 2px; border: 1px solid rgb(225, 225, 232); padding: 2px 4px; font-size: 14px; font-family: monospace; color: rgb(221, 17, 68); background-color: rgb(247, 247, 249); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; word-break: break-word; word-wrap: break-word;">fmap</span> 返回一个其中有零到多个 <span class="" style="margin-right: 2px; margin-left: 2px; border: 1px solid rgb(225, 225, 232); padding: 2px 4px; font-size: 14px; font-family: monospace; color: rgb(221, 17, 68); background-color: rgb(247, 247, 249); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; word-break: break-word; word-wrap: break-word;">b</span> 的盒子。<span class="" style="margin-right: 2px; margin-left: 2px; border: 1px solid rgb(225, 225, 232); padding: 2px 4px; font-size: 14px; font-family: monospace; color: rgb(221, 17, 68); background-color: rgb(247, 247, 249); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; word-break: break-word; word-wrap: break-word;">f a</span> 和 <span class="" style="margin-right: 2px; margin-left: 2px; border: 1px solid rgb(225, 225, 232); padding: 2px 4px; font-size: 14px; font-family: monospace; color: rgb(221, 17, 68); background-color: rgb(247, 247, 249); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; word-break: break-word; word-wrap: break-word;">f b</span> 位可以被读为 <span class="" style="margin-right: 2px; margin-left: 2px; border: 1px solid rgb(225, 225, 232); padding: 2px 4px; font-size: 14px; font-family: monospace; color: rgb(221, 17, 68); background-color: rgb(247, 247, 249); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; word-break: break-word; word-wrap: break-word;">a</span> 的函子和 <span class="" style="margin-right: 2px; margin-left: 2px; border: 1px solid rgb(225, 225, 232); padding: 2px 4px; font-size: 14px; font-family: monospace; color: rgb(221, 17, 68); background-color: rgb(247, 247, 249); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; word-break: break-word; word-wrap: break-word;">b</span> 的函子，意思是 <span class="" style="margin-right: 2px; margin-left: 2px; border: 1px solid rgb(225, 225, 232); padding: 2px 4px; font-size: 14px; font-family: monospace; color: rgb(221, 17, 68); background-color: rgb(247, 247, 249); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; word-break: break-word; word-wrap: break-word;">f a</span> 的盒子中有 <span class="" style="margin-right: 2px; margin-left: 2px; border: 1px solid rgb(225, 225, 232); padding: 2px 4px; font-size: 14px; font-family: monospace; color: rgb(221, 17, 68); background-color: rgb(247, 247, 249); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; word-break: break-word; word-wrap: break-word;">a</span>，<span class="" style="margin-right: 2px; margin-left: 2px; border: 1px solid rgb(225, 225, 232); padding: 2px 4px; font-size: 14px; font-family: monospace; color: rgb(221, 17, 68); background-color: rgb(247, 247, 249); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; word-break: break-word; word-wrap: break-word;">f b</span> 的盒子中有 <span class="" style="margin-right: 2px; margin-left: 2px; border: 1px solid rgb(225, 225, 232); padding: 2px 4px; font-size: 14px; font-family: monospace; color: rgb(221, 17, 68); background-color: rgb(247, 247, 249); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; word-break: break-word; word-wrap: break-word;">b</span>。</p><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">使用函子很简单 - 只要调用 <span class="" style="margin-right: 2px; margin-left: 2px; border: 1px solid rgb(225, 225, 232); padding: 2px 4px; font-size: 14px; font-family: monospace; color: rgb(221, 17, 68); background-color: rgb(247, 247, 249); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; word-break: break-word; word-wrap: break-word;">map()</span> 即可：</p><blockquote class="" style="border: 0px; padding-left: 0px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; white-space: normal; widows: 2;"><pre class="" style="border: 0px; padding: 1em; overflow: auto; background-color: rgb(39, 40, 34); color: rgb(248, 248, 242); font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace; max-width: 100%; word-wrap: normal; text-shadow: rgba(0, 0, 0, 0.298039) 0px 1px; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; border-top-left-radius: 0.3em; border-top-right-radius: 0.3em; border-bottom-right-radius: 0.3em; border-bottom-left-radius: 0.3em; box-sizing: border-box !important;"><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px; color: rgb(102, 217, 239);">const</span>&nbsp;f&nbsp;<span class="" style="border: 0px;">=</span>&nbsp;<span class="" style="border: 0px;">[</span><span class="" style="border: 0px; color: rgb(174, 129, 255);">1</span><span class="" style="border: 0px;">,</span>&nbsp;<span class="" style="border: 0px; color: rgb(174, 129, 255);">2</span><span class="" style="border: 0px;">,</span>&nbsp;<span class="" style="border: 0px; color: rgb(174, 129, 255);">3</span><span class="" style="border: 0px;">]</span><span class="" style="border: 0px;">;</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">f<span class="" style="border: 0px;">.</span><span class="" style="border: 0px; color: rgb(230, 219, 116);">map</span><span class="" style="border: 0px;">(</span>double<span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">;</span>&nbsp;<span class="" spellcheck="true" style="border: 0px; color: slategray;">// [2, 4, 6]</span></p></pre></blockquote><h2 style="margin-top: 20px; margin-bottom: 12px; border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(100, 159, 12); font-weight: bold; word-break: break-all; word-wrap: break-word; font-size: 18px; color: rgb(100, 159, 12); text-align: center; font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-variant-ligatures: normal; orphans: 2; white-space: normal; widows: 2;">函子定律</h2><p style="margin-top: 8px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">范畴有两个重要的属性：</p><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">1. 恒等（Identity）
2. 组合（Composition）</p><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">既然函子是范畴之间的映射，那么函子就必须遵从恒等和组合。二者在一起称为函子定律。</p><h3 style="margin-top: 12px; margin-bottom: 8px; border: 0px; font-weight: bold; word-break: break-all; word-wrap: break-word; font-size: 20px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-variant-ligatures: normal; orphans: 2; white-space: normal; widows: 2;">恒等</h3><p style="margin-top: 8px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">如果将恒等函数（<span class="" style="margin-right: 2px; margin-left: 2px; border: 1px solid rgb(225, 225, 232); padding: 2px 4px; font-size: 14px; font-family: monospace; color: rgb(221, 17, 68); background-color: rgb(247, 247, 249); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; word-break: break-word; word-wrap: break-word;">x =&gt; x</span>）传递给 <span class="" style="margin-right: 2px; margin-left: 2px; border: 1px solid rgb(225, 225, 232); padding: 2px 4px; font-size: 14px; font-family: monospace; color: rgb(221, 17, 68); background-color: rgb(247, 247, 249); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; word-break: break-word; word-wrap: break-word;">f.map()</span>，这里 <span class="" style="margin-right: 2px; margin-left: 2px; border: 1px solid rgb(225, 225, 232); padding: 2px 4px; font-size: 14px; font-family: monospace; color: rgb(221, 17, 68); background-color: rgb(247, 247, 249); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; word-break: break-word; word-wrap: break-word;">f</span> 是任何函子，那么结果应该等价于 <span class="" style="margin-right: 2px; margin-left: 2px; border: 1px solid rgb(225, 225, 232); padding: 2px 4px; font-size: 14px; font-family: monospace; color: rgb(221, 17, 68); background-color: rgb(247, 247, 249); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; word-break: break-word; word-wrap: break-word;">f</span>（即与 <span class="" style="margin-right: 2px; margin-left: 2px; border: 1px solid rgb(225, 225, 232); padding: 2px 4px; font-size: 14px; font-family: monospace; color: rgb(221, 17, 68); background-color: rgb(247, 247, 249); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; word-break: break-word; word-wrap: break-word;">f</span> 有相同含义）：</p><blockquote class="" style="border: 0px; padding-left: 0px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; white-space: normal; widows: 2;"><pre class="" style="border: 0px; padding: 1em; overflow: auto; background-color: rgb(39, 40, 34); color: rgb(248, 248, 242); font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace; max-width: 100%; word-wrap: normal; text-shadow: rgba(0, 0, 0, 0.298039) 0px 1px; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; border-top-left-radius: 0.3em; border-top-right-radius: 0.3em; border-bottom-right-radius: 0.3em; border-bottom-left-radius: 0.3em; box-sizing: border-box !important;"><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px; color: rgb(102, 217, 239);">const</span>&nbsp;f&nbsp;<span class="" style="border: 0px;">=</span>&nbsp;<span class="" style="border: 0px;">[</span><span class="" style="border: 0px; color: rgb(174, 129, 255);">1</span><span class="" style="border: 0px;">,</span>&nbsp;<span class="" style="border: 0px; color: rgb(174, 129, 255);">2</span><span class="" style="border: 0px;">,</span>&nbsp;<span class="" style="border: 0px; color: rgb(174, 129, 255);">3</span><span class="" style="border: 0px;">]</span><span class="" style="border: 0px;">;</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">f<span class="" style="border: 0px;">.</span><span class="" style="border: 0px; color: rgb(230, 219, 116);">map</span><span class="" style="border: 0px;">(</span>x&nbsp;<span class="" style="border: 0px;">=</span><span class="" style="border: 0px;">&gt;</span>&nbsp;x<span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">;</span>&nbsp;<span class="" spellcheck="true" style="border: 0px; color: slategray;">// [1, 2, 3]</span></p></pre></blockquote><h3 style="margin-top: 12px; margin-bottom: 8px; border: 0px; font-weight: bold; word-break: break-all; word-wrap: break-word; font-size: 20px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-variant-ligatures: normal; orphans: 2; white-space: normal; widows: 2;">组合</h3><p style="margin-top: 8px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">函子必须遵从组合定律：<span class="" style="margin-right: 2px; margin-left: 2px; border: 1px solid rgb(225, 225, 232); padding: 2px 4px; font-size: 14px; font-family: monospace; color: rgb(221, 17, 68); background-color: rgb(247, 247, 249); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; word-break: break-word; word-wrap: break-word;">F.map(x =&gt; f(g(x)))</span> 等同于 <span class="" style="margin-right: 2px; margin-left: 2px; border: 1px solid rgb(225, 225, 232); padding: 2px 4px; font-size: 14px; font-family: monospace; color: rgb(221, 17, 68); background-color: rgb(247, 247, 249); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; word-break: break-word; word-wrap: break-word;">F.map(g).map(f)</span>。</p><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">函数组合就是将一个函数应用到另一个函数的结果上，例如，给出一个 <span class="" style="margin-right: 2px; margin-left: 2px; border: 1px solid rgb(225, 225, 232); padding: 2px 4px; font-size: 14px; font-family: monospace; color: rgb(221, 17, 68); background-color: rgb(247, 247, 249); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; word-break: break-word; word-wrap: break-word;">x</span> 和函数 <span class="" style="margin-right: 2px; margin-left: 2px; border: 1px solid rgb(225, 225, 232); padding: 2px 4px; font-size: 14px; font-family: monospace; color: rgb(221, 17, 68); background-color: rgb(247, 247, 249); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; word-break: break-word; word-wrap: break-word;">f</span> 以及 <span class="" style="margin-right: 2px; margin-left: 2px; border: 1px solid rgb(225, 225, 232); padding: 2px 4px; font-size: 14px; font-family: monospace; color: rgb(221, 17, 68); background-color: rgb(247, 247, 249); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; word-break: break-word; word-wrap: break-word;">g</span>，组合 <span class="" style="margin-right: 2px; margin-left: 2px; border: 1px solid rgb(225, 225, 232); padding: 2px 4px; font-size: 14px; font-family: monospace; color: rgb(221, 17, 68); background-color: rgb(247, 247, 249); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; word-break: break-word; word-wrap: break-word;">(f ∘ g)(x)</span>（通常简写为 <span class="" style="margin-right: 2px; margin-left: 2px; border: 1px solid rgb(225, 225, 232); padding: 2px 4px; font-size: 14px; font-family: monospace; color: rgb(221, 17, 68); background-color: rgb(247, 247, 249); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; word-break: break-word; word-wrap: break-word;">f ∘ g</span> -- <span class="" style="margin-right: 2px; margin-left: 2px; border: 1px solid rgb(225, 225, 232); padding: 2px 4px; font-size: 14px; font-family: monospace; color: rgb(221, 17, 68); background-color: rgb(247, 247, 249); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; word-break: break-word; word-wrap: break-word;">(x)</span> 被隐含）即指 <span class="" style="margin-right: 2px; margin-left: 2px; border: 1px solid rgb(225, 225, 232); padding: 2px 4px; font-size: 14px; font-family: monospace; color: rgb(221, 17, 68); background-color: rgb(247, 247, 249); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; word-break: break-word; word-wrap: break-word;">f(g(x))</span>。</p><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">很多函数式编程术语都来自于范畴学，范畴学的精髓就是组合。范畴学是最开始很可怕，但是很简单，就像从跳水板跳下或者坐过山车一样。如下是范畴学基础的几个要点：</p><ul style="border: 0px; padding-left: 20px; line-height: 1.8; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; white-space: normal; widows: 2;" class="list-paddingleft-2"><li><p>一个范畴是对象以及对象之间箭头的一个集合（这里对象从字面上可以是指任何东西）。</p></li><li><p>箭头被称为态射（morphism）。态射可以被认为就是函数，并且可以在代码中表示为函数。</p></li><li><p>对于任何连接的对象组，<span class="" style="margin-right: 2px; margin-left: 2px; border: 1px solid rgb(225, 225, 232); padding: 2px 4px; font-size: 14px; font-family: monospace; color: rgb(221, 17, 68); background-color: rgb(247, 247, 249); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; white-space: pre-wrap; word-break: break-word; word-wrap: break-word;">a -&gt; b -&gt; c</span>，必定有一个组合可以直接从&nbsp;<span class="" style="margin-right: 2px; margin-left: 2px; border: 1px solid rgb(225, 225, 232); padding: 2px 4px; font-size: 14px; font-family: monospace; color: rgb(221, 17, 68); background-color: rgb(247, 247, 249); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; white-space: pre-wrap; word-break: break-word; word-wrap: break-word;">a -&gt; c</span>。</p></li><li><p>所有箭头都可以被表示为组合（即使它只是一个带有对象的恒等箭头的组合）。一个范畴中的所有对象都有恒等箭头。</p></li></ul><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">假设有函数 <span class="" style="margin-right: 2px; margin-left: 2px; border: 1px solid rgb(225, 225, 232); padding: 2px 4px; font-size: 14px; font-family: monospace; color: rgb(221, 17, 68); background-color: rgb(247, 247, 249); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; word-break: break-word; word-wrap: break-word;">g</span>，该函数有一个参数 <span class="" style="margin-right: 2px; margin-left: 2px; border: 1px solid rgb(225, 225, 232); padding: 2px 4px; font-size: 14px; font-family: monospace; color: rgb(221, 17, 68); background-color: rgb(247, 247, 249); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; word-break: break-word; word-wrap: break-word;">a</span>，并返回 <span class="" style="margin-right: 2px; margin-left: 2px; border: 1px solid rgb(225, 225, 232); padding: 2px 4px; font-size: 14px; font-family: monospace; color: rgb(221, 17, 68); background-color: rgb(247, 247, 249); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; word-break: break-word; word-wrap: break-word;">b</span>；还有另一个函数 <span class="" style="margin-right: 2px; margin-left: 2px; border: 1px solid rgb(225, 225, 232); padding: 2px 4px; font-size: 14px; font-family: monospace; color: rgb(221, 17, 68); background-color: rgb(247, 247, 249); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; word-break: break-word; word-wrap: break-word;">f</span>，该函数有一个参数 <span class="" style="margin-right: 2px; margin-left: 2px; border: 1px solid rgb(225, 225, 232); padding: 2px 4px; font-size: 14px; font-family: monospace; color: rgb(221, 17, 68); background-color: rgb(247, 247, 249); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; word-break: break-word; word-wrap: break-word;">b</span>，并返回一个 <span class="" style="margin-right: 2px; margin-left: 2px; border: 1px solid rgb(225, 225, 232); padding: 2px 4px; font-size: 14px; font-family: monospace; color: rgb(221, 17, 68); background-color: rgb(247, 247, 249); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; word-break: break-word; word-wrap: break-word;">c</span>；那么就一定还有一个函数 <span class="" style="margin-right: 2px; margin-left: 2px; border: 1px solid rgb(225, 225, 232); padding: 2px 4px; font-size: 14px; font-family: monospace; color: rgb(221, 17, 68); background-color: rgb(247, 247, 249); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; word-break: break-word; word-wrap: break-word;">h</span> 代表 <span class="" style="margin-right: 2px; margin-left: 2px; border: 1px solid rgb(225, 225, 232); padding: 2px 4px; font-size: 14px; font-family: monospace; color: rgb(221, 17, 68); background-color: rgb(247, 247, 249); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; word-break: break-word; word-wrap: break-word;">f</span> 和 <span class="" style="margin-right: 2px; margin-left: 2px; border: 1px solid rgb(225, 225, 232); padding: 2px 4px; font-size: 14px; font-family: monospace; color: rgb(221, 17, 68); background-color: rgb(247, 247, 249); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; word-break: break-word; word-wrap: break-word;">g</span> 的组合。所以，从 <span class="" style="margin-right: 2px; margin-left: 2px; border: 1px solid rgb(225, 225, 232); padding: 2px 4px; font-size: 14px; font-family: monospace; color: rgb(221, 17, 68); background-color: rgb(247, 247, 249); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; word-break: break-word; word-wrap: break-word;">a -&gt; c</span> 的组合就是组合 <span class="" style="margin-right: 2px; margin-left: 2px; border: 1px solid rgb(225, 225, 232); padding: 2px 4px; font-size: 14px; font-family: monospace; color: rgb(221, 17, 68); background-color: rgb(247, 247, 249); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; word-break: break-word; word-wrap: break-word;">f ∘ g</span>（<span class="" style="margin-right: 2px; margin-left: 2px; border: 1px solid rgb(225, 225, 232); padding: 2px 4px; font-size: 14px; font-family: monospace; color: rgb(221, 17, 68); background-color: rgb(247, 247, 249); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; word-break: break-word; word-wrap: break-word;">f</span> 在 <span class="" style="margin-right: 2px; margin-left: 2px; border: 1px solid rgb(225, 225, 232); padding: 2px 4px; font-size: 14px; font-family: monospace; color: rgb(221, 17, 68); background-color: rgb(247, 247, 249); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; word-break: break-word; word-wrap: break-word;">g</span> 之后）。于是，<span class="" style="margin-right: 2px; margin-left: 2px; border: 1px solid rgb(225, 225, 232); padding: 2px 4px; font-size: 14px; font-family: monospace; color: rgb(221, 17, 68); background-color: rgb(247, 247, 249); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; word-break: break-word; word-wrap: break-word;">h(x) = f(g(x))</span>。函数组合是从右向左组合，而不是从左向右，这就是为什么 <span class="" style="margin-right: 2px; margin-left: 2px; border: 1px solid rgb(225, 225, 232); padding: 2px 4px; font-size: 14px; font-family: monospace; color: rgb(221, 17, 68); background-color: rgb(247, 247, 249); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; word-break: break-word; word-wrap: break-word;">f ∘ g</span> 经常被称 <span class="" style="margin-right: 2px; margin-left: 2px; border: 1px solid rgb(225, 225, 232); padding: 2px 4px; font-size: 14px; font-family: monospace; color: rgb(221, 17, 68); background-color: rgb(247, 247, 249); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; word-break: break-word; word-wrap: break-word;">f</span> 在 <span class="" style="margin-right: 2px; margin-left: 2px; border: 1px solid rgb(225, 225, 232); padding: 2px 4px; font-size: 14px; font-family: monospace; color: rgb(221, 17, 68); background-color: rgb(247, 247, 249); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; word-break: break-word; word-wrap: break-word;">g</span> 之后。</p><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">组合是可结合的。这基本上意味着在组合多个函数（如果你觉得喜欢，也可以称为态射）时，不需要圆括号：</p><blockquote class="" style="border: 0px; padding-left: 0px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; white-space: normal; widows: 2;"><pre class="" style="border: 0px; padding: 1em; overflow: auto; background-color: rgb(39, 40, 34); color: rgb(248, 248, 242); font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace; max-width: 100%; word-wrap: normal; text-shadow: rgba(0, 0, 0, 0.298039) 0px 1px; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; border-top-left-radius: 0.3em; border-top-right-radius: 0.3em; border-bottom-right-radius: 0.3em; border-bottom-left-radius: 0.3em; box-sizing: border-box !important;"><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px; color: rgb(230, 219, 116);">h∘</span><span class="" style="border: 0px;">(</span>g∘f<span class="" style="border: 0px;">)</span>&nbsp;<span class="" style="border: 0px;">=</span>&nbsp;<span class="" style="border: 0px;">(</span>h∘g<span class="" style="border: 0px;">)</span>∘f&nbsp;<span class="" style="border: 0px;">=</span>&nbsp;h∘g∘f</p></pre></blockquote><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">下面我们用 JavaScript 再看看组合：</p><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">给出一个函子 <span class="" style="margin-right: 2px; margin-left: 2px; border: 1px solid rgb(225, 225, 232); padding: 2px 4px; font-size: 14px; font-family: monospace; color: rgb(221, 17, 68); background-color: rgb(247, 247, 249); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; word-break: break-word; word-wrap: break-word;">F</span>：</p><blockquote class="" style="border: 0px; padding-left: 0px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; white-space: normal; widows: 2;"><pre class="" style="border: 0px; padding: 1em; overflow: auto; background-color: rgb(39, 40, 34); color: rgb(248, 248, 242); font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace; max-width: 100%; word-wrap: normal; text-shadow: rgba(0, 0, 0, 0.298039) 0px 1px; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; border-top-left-radius: 0.3em; border-top-right-radius: 0.3em; border-bottom-right-radius: 0.3em; border-bottom-left-radius: 0.3em; box-sizing: border-box !important;"><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px; color: rgb(102, 217, 239);">const</span>&nbsp;F&nbsp;<span class="" style="border: 0px;">=</span>&nbsp;<span class="" style="border: 0px;">[</span><span class="" style="border: 0px; color: rgb(174, 129, 255);">1</span><span class="" style="border: 0px;">,</span>&nbsp;<span class="" style="border: 0px; color: rgb(174, 129, 255);">2</span><span class="" style="border: 0px;">,</span>&nbsp;<span class="" style="border: 0px; color: rgb(174, 129, 255);">3</span><span class="" style="border: 0px;">]</span><span class="" style="border: 0px;">;</span></p></pre></blockquote><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">如下的语句都是等同的：</p><blockquote class="" style="border: 0px; padding-left: 0px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; white-space: normal; widows: 2;"><pre class="" style="border: 0px; padding: 1em; overflow: auto; background-color: rgb(39, 40, 34); color: rgb(248, 248, 242); font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace; max-width: 100%; word-wrap: normal; text-shadow: rgba(0, 0, 0, 0.298039) 0px 1px; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; border-top-left-radius: 0.3em; border-top-right-radius: 0.3em; border-bottom-right-radius: 0.3em; border-bottom-left-radius: 0.3em; box-sizing: border-box !important;"><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">F<span class="" style="border: 0px;">.</span><span class="" style="border: 0px; color: rgb(230, 219, 116);">map</span><span class="" style="border: 0px;">(</span>x&nbsp;<span class="" style="border: 0px;">=</span><span class="" style="border: 0px;">&gt;</span>&nbsp;<span class="" style="border: 0px; color: rgb(230, 219, 116);">f</span><span class="" style="border: 0px;">(</span><span class="" style="border: 0px; color: rgb(230, 219, 116);">g</span><span class="" style="border: 0px;">(</span>x<span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">;</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 0; word-break: break-word; word-wrap: break-word; font-size: 14px; height: 6px; white-space: nowrap !important;"><br style="border: 0px;"></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" spellcheck="true" style="border: 0px; color: slategray;">// 等同于...</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 0; word-break: break-word; word-wrap: break-word; font-size: 14px; height: 6px; white-space: nowrap !important;"><br style="border: 0px;"></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">F<span class="" style="border: 0px;">.</span><span class="" style="border: 0px; color: rgb(230, 219, 116);">map</span><span class="" style="border: 0px;">(</span>g<span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">.</span><span class="" style="border: 0px; color: rgb(230, 219, 116);">map</span><span class="" style="border: 0px;">(</span>f<span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">;</span></p></pre></blockquote><h2 style="margin-top: 20px; margin-bottom: 12px; border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(100, 159, 12); font-weight: bold; word-break: break-all; word-wrap: break-word; font-size: 18px; color: rgb(100, 159, 12); text-align: center; font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-variant-ligatures: normal; orphans: 2; white-space: normal; widows: 2;">自函子</h2><p style="margin-top: 8px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">自函子（endofunctor）是一个将范畴映射回自身的函子。</p><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">一个函子可以将一个范畴映射到另一个范畴：<span class="" style="margin-right: 2px; margin-left: 2px; border: 1px solid rgb(225, 225, 232); padding: 2px 4px; font-size: 14px; font-family: monospace; color: rgb(221, 17, 68); background-color: rgb(247, 247, 249); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; word-break: break-word; word-wrap: break-word;">F a -&gt; F b</span>。</p><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">一个自函子将一个范畴映射到同一个范畴：<span class="" style="margin-right: 2px; margin-left: 2px; border: 1px solid rgb(225, 225, 232); padding: 2px 4px; font-size: 14px; font-family: monospace; color: rgb(221, 17, 68); background-color: rgb(247, 247, 249); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; word-break: break-word; word-wrap: break-word;">F a -&gt; F a</span>。</p><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">这里 <span class="" style="margin-right: 2px; margin-left: 2px; border: 1px solid rgb(225, 225, 232); padding: 2px 4px; font-size: 14px; font-family: monospace; color: rgb(221, 17, 68); background-color: rgb(247, 247, 249); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; word-break: break-word; word-wrap: break-word;">F</span> 代表一种函子类型，<span class="" style="margin-right: 2px; margin-left: 2px; border: 1px solid rgb(225, 225, 232); padding: 2px 4px; font-size: 14px; font-family: monospace; color: rgb(221, 17, 68); background-color: rgb(247, 247, 249); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; word-break: break-word; word-wrap: break-word;">a</span> 代表一个范畴变量（意思是它可以表示任何范畴，包括一个集合或者一个同一类数据类型的所有可能值的范畴）。</p><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">一个单子（monad）就是一个自函子。记住：</p><blockquote class="" style="margin-top: 10px; margin-bottom: 10px; border-width: 0px 0px 0px 2px; border-left-color: rgb(18, 122, 230); padding-top: 10px; padding-right: 10px; padding-bottom: 10px; background-color: rgb(239, 239, 239); font-size: 14px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-variant-ligatures: normal; orphans: 2; white-space: normal; widows: 2; background-position: initial initial; background-repeat: initial initial;"><p style="border: 0px; line-height: 1.5; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; text-overflow: ellipsis; overflow: hidden;"><em style="border: 0px;">“一个单子（Monad）说白了不过就是自函子（Endofunctor）范畴上的一个幺半群（Monoid）而已，这有什么难以理解的？”</em></p></blockquote><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">希望这个引证开始变得更好懂点。我们稍后将开始接触幺半群和单子。</p><h2 style="margin-top: 20px; margin-bottom: 12px; border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(100, 159, 12); font-weight: bold; word-break: break-all; word-wrap: break-word; font-size: 18px; color: rgb(100, 159, 12); text-align: center; font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-variant-ligatures: normal; orphans: 2; white-space: normal; widows: 2;">创建你自己的函子</h2><p style="margin-top: 8px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">如下是一个函子的简单示例：</p><blockquote class="" style="border: 0px; padding-left: 0px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; white-space: normal; widows: 2;"><pre class="" style="border: 0px; padding: 1em; overflow: auto; background-color: rgb(39, 40, 34); color: rgb(248, 248, 242); font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace; max-width: 100%; word-wrap: normal; text-shadow: rgba(0, 0, 0, 0.298039) 0px 1px; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; border-top-left-radius: 0.3em; border-top-right-radius: 0.3em; border-bottom-right-radius: 0.3em; border-bottom-left-radius: 0.3em; box-sizing: border-box !important;"><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px; color: rgb(102, 217, 239);">const</span>&nbsp;Identity&nbsp;<span class="" style="border: 0px;">=</span>&nbsp;value&nbsp;<span class="" style="border: 0px;">=</span><span class="" style="border: 0px;">&gt;</span>&nbsp;<span class="" style="border: 0px;">(</span><span class="" style="border: 0px;">{</span>&nbsp;map<span class="" style="border: 0px;">:</span>&nbsp;fn&nbsp;<span class="" style="border: 0px;">=</span><span class="" style="border: 0px;">&gt;</span>&nbsp;<span class="" style="border: 0px; color: rgb(230, 219, 116);">Identity</span><span class="" style="border: 0px;">(</span><span class="" style="border: 0px; color: rgb(230, 219, 116);">fn</span><span class="" style="border: 0px;">(</span>value<span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">}</span><span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">;</span></p></pre></blockquote><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">正如你所见，它满足函子定律：</p><blockquote class="" style="border: 0px; padding-left: 0px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; white-space: normal; widows: 2;"><pre class="" style="border: 0px; padding: 1em; overflow: auto; background-color: rgb(39, 40, 34); color: rgb(248, 248, 242); font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace; max-width: 100%; word-wrap: normal; text-shadow: rgba(0, 0, 0, 0.298039) 0px 1px; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; border-top-left-radius: 0.3em; border-top-right-radius: 0.3em; border-bottom-right-radius: 0.3em; border-bottom-left-radius: 0.3em; box-sizing: border-box !important;"><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" spellcheck="true" style="border: 0px; color: slategray;">// trace() 是一个让我们更容易检测内容的实用程序</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px; color: rgb(102, 217, 239);">const</span>&nbsp;trace&nbsp;<span class="" style="border: 0px;">=</span>&nbsp;x&nbsp;<span class="" style="border: 0px;">=</span><span class="" style="border: 0px;">&gt;</span>&nbsp;<span class="" style="border: 0px;">{</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;console<span class="" style="border: 0px;">.</span><span class="" style="border: 0px; color: rgb(230, 219, 116);">log</span><span class="" style="border: 0px;">(</span>x<span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">;</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;<span class="" style="border: 0px; color: rgb(102, 217, 239);">return</span>&nbsp;x<span class="" style="border: 0px;">;</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px;">}</span><span class="" style="border: 0px;">;</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 0; word-break: break-word; word-wrap: break-word; font-size: 14px; height: 6px; white-space: nowrap !important;"><br style="border: 0px;"></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px; color: rgb(102, 217, 239);">const</span>&nbsp;u&nbsp;<span class="" style="border: 0px;">=</span>&nbsp;<span class="" style="border: 0px; color: rgb(230, 219, 116);">Identity</span><span class="" style="border: 0px;">(</span><span class="" style="border: 0px; color: rgb(174, 129, 255);">2</span><span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">;</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 0; word-break: break-word; word-wrap: break-word; font-size: 14px; height: 6px; white-space: nowrap !important;"><br style="border: 0px;"></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" spellcheck="true" style="border: 0px; color: slategray;">// 恒等定律</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">u<span class="" style="border: 0px;">.</span><span class="" style="border: 0px; color: rgb(230, 219, 116);">map</span><span class="" style="border: 0px;">(</span>trace<span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">;</span>&nbsp;<span class="" spellcheck="true" style="border: 0px; color: slategray;">// 2</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">u<span class="" style="border: 0px;">.</span><span class="" style="border: 0px; color: rgb(230, 219, 116);">map</span><span class="" style="border: 0px;">(</span>x&nbsp;<span class="" style="border: 0px;">=</span><span class="" style="border: 0px;">&gt;</span>&nbsp;x<span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">.</span><span class="" style="border: 0px; color: rgb(230, 219, 116);">map</span><span class="" style="border: 0px;">(</span>trace<span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">;</span>&nbsp;<span class="" spellcheck="true" style="border: 0px; color: slategray;">// 2</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 0; word-break: break-word; word-wrap: break-word; font-size: 14px; height: 6px; white-space: nowrap !important;"><br style="border: 0px;"></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px; color: rgb(102, 217, 239);">const</span>&nbsp;f&nbsp;<span class="" style="border: 0px;">=</span>&nbsp;n&nbsp;<span class="" style="border: 0px;">=</span><span class="" style="border: 0px;">&gt;</span>&nbsp;n&nbsp;<span class="" style="border: 0px;">+</span>&nbsp;<span class="" style="border: 0px; color: rgb(174, 129, 255);">1</span><span class="" style="border: 0px;">;</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px; color: rgb(102, 217, 239);">const</span>&nbsp;g&nbsp;<span class="" style="border: 0px;">=</span>&nbsp;n&nbsp;<span class="" style="border: 0px;">=</span><span class="" style="border: 0px;">&gt;</span>&nbsp;n&nbsp;<span class="" style="border: 0px;">*</span>&nbsp;<span class="" style="border: 0px; color: rgb(174, 129, 255);">2</span><span class="" style="border: 0px;">;</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 0; word-break: break-word; word-wrap: break-word; font-size: 14px; height: 6px; white-space: nowrap !important;"><br style="border: 0px;"></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" spellcheck="true" style="border: 0px; color: slategray;">// 组合定律</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px; color: rgb(102, 217, 239);">const</span>&nbsp;r1&nbsp;<span class="" style="border: 0px;">=</span>&nbsp;u<span class="" style="border: 0px;">.</span><span class="" style="border: 0px; color: rgb(230, 219, 116);">map</span><span class="" style="border: 0px;">(</span>x&nbsp;<span class="" style="border: 0px;">=</span><span class="" style="border: 0px;">&gt;</span>&nbsp;<span class="" style="border: 0px; color: rgb(230, 219, 116);">f</span><span class="" style="border: 0px;">(</span><span class="" style="border: 0px; color: rgb(230, 219, 116);">g</span><span class="" style="border: 0px;">(</span>x<span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">;</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px; color: rgb(102, 217, 239);">const</span>&nbsp;r2&nbsp;<span class="" style="border: 0px;">=</span>&nbsp;u<span class="" style="border: 0px;">.</span><span class="" style="border: 0px; color: rgb(230, 219, 116);">map</span><span class="" style="border: 0px;">(</span>g<span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">.</span><span class="" style="border: 0px; color: rgb(230, 219, 116);">map</span><span class="" style="border: 0px;">(</span>f<span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">;</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 0; word-break: break-word; word-wrap: break-word; font-size: 14px; height: 6px; white-space: nowrap !important;"><br style="border: 0px;"></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">r1<span class="" style="border: 0px;">.</span><span class="" style="border: 0px; color: rgb(230, 219, 116);">map</span><span class="" style="border: 0px;">(</span>trace<span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">;</span>&nbsp;<span class="" spellcheck="true" style="border: 0px; color: slategray;">// 5</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">r2<span class="" style="border: 0px;">.</span><span class="" style="border: 0px; color: rgb(230, 219, 116);">map</span><span class="" style="border: 0px;">(</span>trace<span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">;</span>&nbsp;<span class="" spellcheck="true" style="border: 0px; color: slategray;">// 5</span></p></pre></blockquote><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">现在我们就可以映射任何数据类型，就跟映射数据一样。很不错！</p><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">这跟在 JavaScript 中创建函子一样简单，不过 JavaScript 中缺失一些我们想要的数据类型的特性。下面我们就添加这些特性。如果 <span class="" style="margin-right: 2px; margin-left: 2px; border: 1px solid rgb(225, 225, 232); padding: 2px 4px; font-size: 14px; font-family: monospace; color: rgb(221, 17, 68); background-color: rgb(247, 247, 249); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; word-break: break-word; word-wrap: break-word;">+</span> 运算符可以对数字和字符串值都起作用，那是不是很酷？</p><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">要让这玩意儿生效的话，我们要做的就是实现 <span class="" style="margin-right: 2px; margin-left: 2px; border: 1px solid rgb(225, 225, 232); padding: 2px 4px; font-size: 14px; font-family: monospace; color: rgb(221, 17, 68); background-color: rgb(247, 247, 249); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; word-break: break-word; word-wrap: break-word;">.valueOf()</span> -- 这个方法也看起来像将值从函子中打开的一种简便方法：</p><blockquote class="" style="border: 0px; padding-left: 0px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; white-space: normal; widows: 2;"><pre class="" style="border: 0px; padding: 1em; overflow: auto; background-color: rgb(39, 40, 34); color: rgb(248, 248, 242); font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace; max-width: 100%; word-wrap: normal; text-shadow: rgba(0, 0, 0, 0.298039) 0px 1px; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; border-top-left-radius: 0.3em; border-top-right-radius: 0.3em; border-bottom-right-radius: 0.3em; border-bottom-left-radius: 0.3em; box-sizing: border-box !important;"><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px; color: rgb(102, 217, 239);">const</span>&nbsp;Identity&nbsp;<span class="" style="border: 0px;">=</span>&nbsp;value&nbsp;<span class="" style="border: 0px;">=</span><span class="" style="border: 0px;">&gt;</span>&nbsp;<span class="" style="border: 0px;">(</span><span class="" style="border: 0px;">{</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;map<span class="" style="border: 0px;">:</span>&nbsp;fn&nbsp;<span class="" style="border: 0px;">=</span><span class="" style="border: 0px;">&gt;</span>&nbsp;<span class="" style="border: 0px; color: rgb(230, 219, 116);">Identity</span><span class="" style="border: 0px;">(</span><span class="" style="border: 0px; color: rgb(230, 219, 116);">fn</span><span class="" style="border: 0px;">(</span>value<span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">,</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 0; word-break: break-word; word-wrap: break-word; font-size: 14px; height: 6px; white-space: nowrap !important;"><br style="border: 0px;"></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;valueOf<span class="" style="border: 0px;">:</span>&nbsp;<span class="" style="border: 0px;">(</span><span class="" style="border: 0px;">)</span>&nbsp;<span class="" style="border: 0px;">=</span><span class="" style="border: 0px;">&gt;</span>&nbsp;value<span class="" style="border: 0px;">,</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px;">}</span><span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">;</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 0; word-break: break-word; word-wrap: break-word; font-size: 14px; height: 6px; white-space: nowrap !important;"><br style="border: 0px;"></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px; color: rgb(102, 217, 239);">const</span>&nbsp;ints&nbsp;<span class="" style="border: 0px;">=</span>&nbsp;<span class="" style="border: 0px;">(</span><span class="" style="border: 0px; color: rgb(230, 219, 116);">Identity</span><span class="" style="border: 0px;">(</span><span class="" style="border: 0px; color: rgb(174, 129, 255);">2</span><span class="" style="border: 0px;">)</span>&nbsp;<span class="" style="border: 0px;">+</span>&nbsp;<span class="" style="border: 0px; color: rgb(230, 219, 116);">Identity</span><span class="" style="border: 0px;">(</span><span class="" style="border: 0px; color: rgb(174, 129, 255);">4</span><span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">;</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px; color: rgb(230, 219, 116);">trace</span><span class="" style="border: 0px;">(</span>ints<span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">;</span>&nbsp;<span class="" spellcheck="true" style="border: 0px; color: slategray;">// 6</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 0; word-break: break-word; word-wrap: break-word; font-size: 14px; height: 6px; white-space: nowrap !important;"><br style="border: 0px;"></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px; color: rgb(102, 217, 239);">const</span>&nbsp;hi&nbsp;<span class="" style="border: 0px;">=</span>&nbsp;<span class="" style="border: 0px;">(</span><span class="" style="border: 0px; color: rgb(230, 219, 116);">Identity</span><span class="" style="border: 0px;">(</span><span class="" style="border: 0px; color: rgb(166, 226, 46);">'h'</span><span class="" style="border: 0px;">)</span>&nbsp;<span class="" style="border: 0px;">+</span>&nbsp;<span class="" style="border: 0px; color: rgb(230, 219, 116);">Identity</span><span class="" style="border: 0px;">(</span><span class="" style="border: 0px; color: rgb(166, 226, 46);">'i'</span><span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">;</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px; color: rgb(230, 219, 116);">trace</span><span class="" style="border: 0px;">(</span>hi<span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">;</span>&nbsp;<span class="" spellcheck="true" style="border: 0px; color: slategray;">// "hi"</span></p></pre></blockquote><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">不错。不过，如果我们想在控制台中检测一个 <span class="" style="margin-right: 2px; margin-left: 2px; border: 1px solid rgb(225, 225, 232); padding: 2px 4px; font-size: 14px; font-family: monospace; color: rgb(221, 17, 68); background-color: rgb(247, 247, 249); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; word-break: break-word; word-wrap: break-word;">Identity</span> 实例又该怎么办呢？如果控制台中能说 <span class="" style="margin-right: 2px; margin-left: 2px; border: 1px solid rgb(225, 225, 232); padding: 2px 4px; font-size: 14px; font-family: monospace; color: rgb(221, 17, 68); background-color: rgb(247, 247, 249); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; word-break: break-word; word-wrap: break-word;">"Identity(value)"</span> 就很棒了，对吧。下面我们添加一个 <span class="" style="margin-right: 2px; margin-left: 2px; border: 1px solid rgb(225, 225, 232); padding: 2px 4px; font-size: 14px; font-family: monospace; color: rgb(221, 17, 68); background-color: rgb(247, 247, 249); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; word-break: break-word; word-wrap: break-word;">.toString()</span> 方法：</p><blockquote class="" style="border: 0px; padding-left: 0px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; white-space: normal; widows: 2;"><pre class="" style="border: 0px; padding: 1em; overflow: auto; background-color: rgb(39, 40, 34); color: rgb(248, 248, 242); font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace; max-width: 100%; word-wrap: normal; text-shadow: rgba(0, 0, 0, 0.298039) 0px 1px; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; border-top-left-radius: 0.3em; border-top-right-radius: 0.3em; border-bottom-right-radius: 0.3em; border-bottom-left-radius: 0.3em; box-sizing: border-box !important;"><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">toString<span class="" style="border: 0px;">:</span>&nbsp;<span class="" style="border: 0px;">(</span><span class="" style="border: 0px;">)</span>&nbsp;<span class="" style="border: 0px;">=</span><span class="" style="border: 0px;">&gt;</span>&nbsp;<span class="" style="border: 0px;"><span class="" style="border: 0px; color: rgb(166, 226, 46);">`Identity(</span><span class="" style="border: 0px;"><span class="" style="border: 0px;">${</span>value<span class="" style="border: 0px;">}</span></span><span class="" style="border: 0px; color: rgb(166, 226, 46);">)`</span></span><span class="" style="border: 0px;">,</span></p></pre></blockquote><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">酷！我们可能还应该启用标准 JS 迭代协议。我们可以通过添加一个自定义的迭代器来实现：</p><blockquote class="" style="border: 0px; padding-left: 0px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; white-space: normal; widows: 2;"><pre class="" style="border: 0px; padding: 1em; overflow: auto; background-color: rgb(39, 40, 34); color: rgb(248, 248, 242); font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace; max-width: 100%; word-wrap: normal; text-shadow: rgba(0, 0, 0, 0.298039) 0px 1px; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; border-top-left-radius: 0.3em; border-top-right-radius: 0.3em; border-bottom-right-radius: 0.3em; border-bottom-left-radius: 0.3em; box-sizing: border-box !important;"><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px;">[</span>Symbol<span class="" style="border: 0px;">.</span>iterator<span class="" style="border: 0px;">]</span><span class="" style="border: 0px;">:</span>&nbsp;<span class="" style="border: 0px;">(</span><span class="" style="border: 0px;">)</span>&nbsp;<span class="" style="border: 0px;">=</span><span class="" style="border: 0px;">&gt;</span>&nbsp;<span class="" style="border: 0px;">{</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="" style="border: 0px; color: rgb(102, 217, 239);">let</span>&nbsp;first&nbsp;<span class="" style="border: 0px;">=</span>&nbsp;<span class="" style="border: 0px; color: rgb(174, 129, 255);">true</span><span class="" style="border: 0px;">;</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="" style="border: 0px; color: rgb(102, 217, 239);">return</span>&nbsp;<span class="" style="border: 0px;">(</span><span class="" style="border: 0px;">{</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next<span class="" style="border: 0px;">:</span>&nbsp;<span class="" style="border: 0px;">(</span><span class="" style="border: 0px;">)</span>&nbsp;<span class="" style="border: 0px;">=</span><span class="" style="border: 0px;">&gt;</span>&nbsp;<span class="" style="border: 0px;">{</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="" style="border: 0px; color: rgb(102, 217, 239);">if</span>&nbsp;<span class="" style="border: 0px;">(</span>first<span class="" style="border: 0px;">)</span>&nbsp;<span class="" style="border: 0px;">{</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;first&nbsp;<span class="" style="border: 0px;">=</span>&nbsp;<span class="" style="border: 0px; color: rgb(174, 129, 255);">false</span><span class="" style="border: 0px;">;</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="" style="border: 0px; color: rgb(102, 217, 239);">return</span>&nbsp;<span class="" style="border: 0px;">(</span><span class="" style="border: 0px;">{</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;done<span class="" style="border: 0px;">:</span>&nbsp;<span class="" style="border: 0px; color: rgb(174, 129, 255);">false</span><span class="" style="border: 0px;">,</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value</p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="" style="border: 0px;">}</span><span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">;</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="" style="border: 0px;">}</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="" style="border: 0px; color: rgb(102, 217, 239);">return</span>&nbsp;<span class="" style="border: 0px;">(</span><span class="" style="border: 0px;">{</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;done<span class="" style="border: 0px;">:</span>&nbsp;<span class="" style="border: 0px; color: rgb(174, 129, 255);">true</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="" style="border: 0px;">}</span><span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">;</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="" style="border: 0px;">}</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="" style="border: 0px;">}</span><span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">;</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;<span class="" style="border: 0px;">}</span><span class="" style="border: 0px;">,</span></p></pre></blockquote><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">现在下面的代码就可以运行了：</p><blockquote class="" style="border: 0px; padding-left: 0px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; white-space: normal; widows: 2;"><pre class="" style="border: 0px; padding: 1em; overflow: auto; background-color: rgb(39, 40, 34); color: rgb(248, 248, 242); font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace; max-width: 100%; word-wrap: normal; text-shadow: rgba(0, 0, 0, 0.298039) 0px 1px; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; border-top-left-radius: 0.3em; border-top-right-radius: 0.3em; border-bottom-right-radius: 0.3em; border-bottom-left-radius: 0.3em; box-sizing: border-box !important;"><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" spellcheck="true" style="border: 0px; color: slategray;">// [Symbol.iterator] 启用标准 JS 迭代</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px; color: rgb(102, 217, 239);">const</span>&nbsp;arr&nbsp;<span class="" style="border: 0px;">=</span>&nbsp;<span class="" style="border: 0px;">[</span><span class="" style="border: 0px; color: rgb(174, 129, 255);">6</span><span class="" style="border: 0px;">,</span>&nbsp;<span class="" style="border: 0px; color: rgb(174, 129, 255);">7</span><span class="" style="border: 0px;">,</span>&nbsp;<span class="" style="border: 0px;">...</span><span class="" style="border: 0px; color: rgb(230, 219, 116);">Identity</span><span class="" style="border: 0px;">(</span><span class="" style="border: 0px; color: rgb(174, 129, 255);">8</span><span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">]</span><span class="" style="border: 0px;">;</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px; color: rgb(230, 219, 116);">trace</span><span class="" style="border: 0px;">(</span>arr<span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">;</span>&nbsp;<span class="" spellcheck="true" style="border: 0px; color: slategray;">// [6, 7, 8]</span></p></pre></blockquote><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">如果我们想以 <span class="" style="margin-right: 2px; margin-left: 2px; border: 1px solid rgb(225, 225, 232); padding: 2px 4px; font-size: 14px; font-family: monospace; color: rgb(221, 17, 68); background-color: rgb(247, 247, 249); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; word-break: break-word; word-wrap: break-word;">Identity(n)</span> 为参数，并返回一个包含 <span class="" style="margin-right: 2px; margin-left: 2px; border: 1px solid rgb(225, 225, 232); padding: 2px 4px; font-size: 14px; font-family: monospace; color: rgb(221, 17, 68); background-color: rgb(247, 247, 249); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; word-break: break-word; word-wrap: break-word;">n + 1</span>、<span class="" style="margin-right: 2px; margin-left: 2px; border: 1px solid rgb(225, 225, 232); padding: 2px 4px; font-size: 14px; font-family: monospace; color: rgb(221, 17, 68); background-color: rgb(247, 247, 249); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; word-break: break-word; word-wrap: break-word;">n + 2</span> 等等的 Identity 数组该怎么办？很简单，对吧？</p><blockquote class="" style="border: 0px; padding-left: 0px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; white-space: normal; widows: 2;"><pre class="" style="border: 0px; padding: 1em; overflow: auto; background-color: rgb(39, 40, 34); color: rgb(248, 248, 242); font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace; max-width: 100%; word-wrap: normal; text-shadow: rgba(0, 0, 0, 0.298039) 0px 1px; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; border-top-left-radius: 0.3em; border-top-right-radius: 0.3em; border-bottom-right-radius: 0.3em; border-bottom-left-radius: 0.3em; box-sizing: border-box !important;"><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px; color: rgb(102, 217, 239);">const</span>&nbsp;fRange&nbsp;<span class="" style="border: 0px;">=</span>&nbsp;<span class="" style="border: 0px;">(</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;start<span class="" style="border: 0px;">,</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;end</p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px;">)</span>&nbsp;<span class="" style="border: 0px;">=</span><span class="" style="border: 0px;">&gt;</span>&nbsp;Array<span class="" style="border: 0px;">.</span><span class="" style="border: 0px; color: rgb(102, 217, 239);">from</span><span class="" style="border: 0px;">(</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;<span class="" style="border: 0px;">{</span>&nbsp;length<span class="" style="border: 0px;">:</span>&nbsp;end&nbsp;<span class="" style="border: 0px;">-</span>&nbsp;start&nbsp;<span class="" style="border: 0px;">+</span>&nbsp;<span class="" style="border: 0px; color: rgb(174, 129, 255);">1</span>&nbsp;<span class="" style="border: 0px;">}</span><span class="" style="border: 0px;">,</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;<span class="" style="border: 0px;">(</span>x<span class="" style="border: 0px;">,</span>&nbsp;i<span class="" style="border: 0px;">)</span>&nbsp;<span class="" style="border: 0px;">=</span><span class="" style="border: 0px;">&gt;</span>&nbsp;<span class="" style="border: 0px; color: rgb(230, 219, 116);">Identity</span><span class="" style="border: 0px;">(</span>i&nbsp;<span class="" style="border: 0px;">+</span>&nbsp;start<span class="" style="border: 0px;">)</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">;</span></p></pre></blockquote><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">对，不过如果我们想让这可以作用于任何函子该怎么办？如果有一个规定说，一个数据类型的每个实例必须有一个对其构造器的引用，该怎么办？可以这样做：</p><blockquote class="" style="border: 0px; padding-left: 0px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; white-space: normal; widows: 2;"><pre class="" style="border: 0px; padding: 1em; overflow: auto; background-color: rgb(39, 40, 34); color: rgb(248, 248, 242); font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace; max-width: 100%; word-wrap: normal; text-shadow: rgba(0, 0, 0, 0.298039) 0px 1px; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; border-top-left-radius: 0.3em; border-top-right-radius: 0.3em; border-bottom-right-radius: 0.3em; border-bottom-left-radius: 0.3em; box-sizing: border-box !important;"><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px; color: rgb(102, 217, 239);">const</span>&nbsp;fRange&nbsp;<span class="" style="border: 0px;">=</span>&nbsp;<span class="" style="border: 0px;">(</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;start<span class="" style="border: 0px;">,</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;end</p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px;">)</span>&nbsp;<span class="" style="border: 0px;">=</span><span class="" style="border: 0px;">&gt;</span>&nbsp;Array<span class="" style="border: 0px;">.</span><span class="" style="border: 0px; color: rgb(102, 217, 239);">from</span><span class="" style="border: 0px;">(</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;<span class="" style="border: 0px;">{</span>&nbsp;length<span class="" style="border: 0px;">:</span>&nbsp;end&nbsp;<span class="" style="border: 0px;">-</span>&nbsp;start&nbsp;<span class="" style="border: 0px;">+</span>&nbsp;<span class="" style="border: 0px; color: rgb(174, 129, 255);">1</span>&nbsp;<span class="" style="border: 0px;">}</span><span class="" style="border: 0px;">,</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 0; word-break: break-word; word-wrap: break-word; font-size: 14px; height: 6px; white-space: nowrap !important;"><br style="border: 0px;"></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;<span class="" spellcheck="true" style="border: 0px; color: slategray;">// 将 `Identity` 变为 `start.constructor`</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;<span class="" style="border: 0px;">(</span>x<span class="" style="border: 0px;">,</span>&nbsp;i<span class="" style="border: 0px;">)</span>&nbsp;<span class="" style="border: 0px;">=</span><span class="" style="border: 0px;">&gt;</span>&nbsp;start<span class="" style="border: 0px;">.</span><span class="" style="border: 0px; color: rgb(230, 219, 116);">constructor</span><span class="" style="border: 0px;">(</span>i&nbsp;<span class="" style="border: 0px;">+</span>&nbsp;start<span class="" style="border: 0px;">)</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">;</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 0; word-break: break-word; word-wrap: break-word; font-size: 14px; height: 6px; white-space: nowrap !important;"><br style="border: 0px;"></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px; color: rgb(102, 217, 239);">const</span>&nbsp;range&nbsp;<span class="" style="border: 0px;">=</span>&nbsp;<span class="" style="border: 0px; color: rgb(230, 219, 116);">fRange</span><span class="" style="border: 0px;">(</span><span class="" style="border: 0px; color: rgb(230, 219, 116);">Identity</span><span class="" style="border: 0px;">(</span><span class="" style="border: 0px; color: rgb(174, 129, 255);">2</span><span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">,</span>&nbsp;<span class="" style="border: 0px; color: rgb(174, 129, 255);">4</span><span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">;</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">range<span class="" style="border: 0px;">.</span><span class="" style="border: 0px; color: rgb(230, 219, 116);">map</span><span class="" style="border: 0px;">(</span>x&nbsp;<span class="" style="border: 0px;">=</span><span class="" style="border: 0px;">&gt;</span>&nbsp;x<span class="" style="border: 0px;">.</span><span class="" style="border: 0px; color: rgb(230, 219, 116);">map</span><span class="" style="border: 0px;">(</span>trace<span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">;</span>&nbsp;<span class="" spellcheck="true" style="border: 0px; color: slategray;">// 2, 3, 4</span></p></pre></blockquote><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">如果我们想测试看看一个值是否是一个函子该怎么办？我们可以在 <span class="" style="margin-right: 2px; margin-left: 2px; border: 1px solid rgb(225, 225, 232); padding: 2px 4px; font-size: 14px; font-family: monospace; color: rgb(221, 17, 68); background-color: rgb(247, 247, 249); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; word-break: break-word; word-wrap: break-word;">Identity</span> 上添加一个静态方法来检测。这样做时，我们应该插入一个静态的 <span class="" style="margin-right: 2px; margin-left: 2px; border: 1px solid rgb(225, 225, 232); padding: 2px 4px; font-size: 14px; font-family: monospace; color: rgb(221, 17, 68); background-color: rgb(247, 247, 249); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; word-break: break-word; word-wrap: break-word;">.toString()</span>：</p><blockquote class="" style="border: 0px; padding-left: 0px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; white-space: normal; widows: 2;"><pre class="" style="border: 0px; padding: 1em; overflow: auto; background-color: rgb(39, 40, 34); color: rgb(248, 248, 242); font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace; max-width: 100%; word-wrap: normal; text-shadow: rgba(0, 0, 0, 0.298039) 0px 1px; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; border-top-left-radius: 0.3em; border-top-right-radius: 0.3em; border-bottom-right-radius: 0.3em; border-bottom-left-radius: 0.3em; box-sizing: border-box !important;"><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">Object<span class="" style="border: 0px;">.</span><span class="" style="border: 0px; color: rgb(230, 219, 116);">assign</span><span class="" style="border: 0px;">(</span>Identity<span class="" style="border: 0px;">,</span>&nbsp;<span class="" style="border: 0px;">{</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;toString<span class="" style="border: 0px;">:</span>&nbsp;<span class="" style="border: 0px;">(</span><span class="" style="border: 0px;">)</span>&nbsp;<span class="" style="border: 0px;">=</span><span class="" style="border: 0px;">&gt;</span>&nbsp;<span class="" style="border: 0px; color: rgb(166, 226, 46);">'Identity'</span><span class="" style="border: 0px;">,</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;is<span class="" style="border: 0px;">:</span>&nbsp;x&nbsp;<span class="" style="border: 0px;">=</span><span class="" style="border: 0px;">&gt;</span>&nbsp;<span class="" style="border: 0px; color: rgb(102, 217, 239);">typeof</span>&nbsp;x<span class="" style="border: 0px;">.</span>map&nbsp;<span class="" style="border: 0px;">===</span>&nbsp;<span class="" style="border: 0px; color: rgb(166, 226, 46);">'function'</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px;">}</span><span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">;</span></p></pre></blockquote><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">下面我们把所有东西放在一起：</p><blockquote class="" style="border: 0px; padding-left: 0px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; white-space: normal; widows: 2;"><pre class="" style="border: 0px; padding: 1em; overflow: auto; background-color: rgb(39, 40, 34); color: rgb(248, 248, 242); font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace; max-width: 100%; word-wrap: normal; text-shadow: rgba(0, 0, 0, 0.298039) 0px 1px; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; border-top-left-radius: 0.3em; border-top-right-radius: 0.3em; border-bottom-right-radius: 0.3em; border-bottom-left-radius: 0.3em; box-sizing: border-box !important;"><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px; color: rgb(102, 217, 239);">const</span>&nbsp;Identity&nbsp;<span class="" style="border: 0px;">=</span>&nbsp;value&nbsp;<span class="" style="border: 0px;">=</span><span class="" style="border: 0px;">&gt;</span>&nbsp;<span class="" style="border: 0px;">(</span><span class="" style="border: 0px;">{</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;map<span class="" style="border: 0px;">:</span>&nbsp;fn&nbsp;<span class="" style="border: 0px;">=</span><span class="" style="border: 0px;">&gt;</span>&nbsp;<span class="" style="border: 0px; color: rgb(230, 219, 116);">Identity</span><span class="" style="border: 0px;">(</span><span class="" style="border: 0px; color: rgb(230, 219, 116);">fn</span><span class="" style="border: 0px;">(</span>value<span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">,</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 0; word-break: break-word; word-wrap: break-word; font-size: 14px; height: 6px; white-space: nowrap !important;"><br style="border: 0px;"></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;valueOf<span class="" style="border: 0px;">:</span>&nbsp;<span class="" style="border: 0px;">(</span><span class="" style="border: 0px;">)</span>&nbsp;<span class="" style="border: 0px;">=</span><span class="" style="border: 0px;">&gt;</span>&nbsp;value<span class="" style="border: 0px;">,</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 0; word-break: break-word; word-wrap: break-word; font-size: 14px; height: 6px; white-space: nowrap !important;"><br style="border: 0px;"></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;toString<span class="" style="border: 0px;">:</span>&nbsp;<span class="" style="border: 0px;">(</span><span class="" style="border: 0px;">)</span>&nbsp;<span class="" style="border: 0px;">=</span><span class="" style="border: 0px;">&gt;</span>&nbsp;<span class="" style="border: 0px;"><span class="" style="border: 0px; color: rgb(166, 226, 46);">`Identity(</span><span class="" style="border: 0px;"><span class="" style="border: 0px;">${</span>value<span class="" style="border: 0px;">}</span></span><span class="" style="border: 0px; color: rgb(166, 226, 46);">)`</span></span><span class="" style="border: 0px;">,</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 0; word-break: break-word; word-wrap: break-word; font-size: 14px; height: 6px; white-space: nowrap !important;"><br style="border: 0px;"></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;<span class="" style="border: 0px;">[</span>Symbol<span class="" style="border: 0px;">.</span>iterator<span class="" style="border: 0px;">]</span><span class="" style="border: 0px;">:</span>&nbsp;<span class="" style="border: 0px;">(</span><span class="" style="border: 0px;">)</span>&nbsp;<span class="" style="border: 0px;">=</span><span class="" style="border: 0px;">&gt;</span>&nbsp;<span class="" style="border: 0px;">{</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="" style="border: 0px; color: rgb(102, 217, 239);">let</span>&nbsp;first&nbsp;<span class="" style="border: 0px;">=</span>&nbsp;<span class="" style="border: 0px; color: rgb(174, 129, 255);">true</span><span class="" style="border: 0px;">;</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="" style="border: 0px; color: rgb(102, 217, 239);">return</span>&nbsp;<span class="" style="border: 0px;">(</span><span class="" style="border: 0px;">{</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next<span class="" style="border: 0px;">:</span>&nbsp;<span class="" style="border: 0px;">(</span><span class="" style="border: 0px;">)</span>&nbsp;<span class="" style="border: 0px;">=</span><span class="" style="border: 0px;">&gt;</span>&nbsp;<span class="" style="border: 0px;">{</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="" style="border: 0px; color: rgb(102, 217, 239);">if</span>&nbsp;<span class="" style="border: 0px;">(</span>first<span class="" style="border: 0px;">)</span>&nbsp;<span class="" style="border: 0px;">{</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;first&nbsp;<span class="" style="border: 0px;">=</span>&nbsp;<span class="" style="border: 0px; color: rgb(174, 129, 255);">false</span><span class="" style="border: 0px;">;</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="" style="border: 0px; color: rgb(102, 217, 239);">return</span>&nbsp;<span class="" style="border: 0px;">(</span><span class="" style="border: 0px;">{</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;done<span class="" style="border: 0px;">:</span>&nbsp;<span class="" style="border: 0px; color: rgb(174, 129, 255);">false</span><span class="" style="border: 0px;">,</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value</p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="" style="border: 0px;">}</span><span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">;</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="" style="border: 0px;">}</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="" style="border: 0px; color: rgb(102, 217, 239);">return</span>&nbsp;<span class="" style="border: 0px;">(</span><span class="" style="border: 0px;">{</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;done<span class="" style="border: 0px;">:</span>&nbsp;<span class="" style="border: 0px; color: rgb(174, 129, 255);">true</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="" style="border: 0px;">}</span><span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">;</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="" style="border: 0px;">}</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="" style="border: 0px;">}</span><span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">;</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;<span class="" style="border: 0px;">}</span><span class="" style="border: 0px;">,</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 0; word-break: break-word; word-wrap: break-word; font-size: 14px; height: 6px; white-space: nowrap !important;"><br style="border: 0px;"></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;constructor<span class="" style="border: 0px;">:</span>&nbsp;Identity</p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px;">}</span><span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">;</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 0; word-break: break-word; word-wrap: break-word; font-size: 14px; height: 6px; white-space: nowrap !important;"><br style="border: 0px;"></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">Object<span class="" style="border: 0px;">.</span><span class="" style="border: 0px; color: rgb(230, 219, 116);">assign</span><span class="" style="border: 0px;">(</span>Identity<span class="" style="border: 0px;">,</span>&nbsp;<span class="" style="border: 0px;">{</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;toString<span class="" style="border: 0px;">:</span>&nbsp;<span class="" style="border: 0px;">(</span><span class="" style="border: 0px;">)</span>&nbsp;<span class="" style="border: 0px;">=</span><span class="" style="border: 0px;">&gt;</span>&nbsp;<span class="" style="border: 0px; color: rgb(166, 226, 46);">'Identity'</span><span class="" style="border: 0px;">,</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;is<span class="" style="border: 0px;">:</span>&nbsp;x&nbsp;<span class="" style="border: 0px;">=</span><span class="" style="border: 0px;">&gt;</span>&nbsp;<span class="" style="border: 0px; color: rgb(102, 217, 239);">typeof</span>&nbsp;x<span class="" style="border: 0px;">.</span>map&nbsp;<span class="" style="border: 0px;">===</span>&nbsp;<span class="" style="border: 0px; color: rgb(166, 226, 46);">'function'</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px;">}</span><span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">;</span></p></pre></blockquote><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">注意，要成为一个函子或者自函子，并不需要所有这些额外的东西。这只是为了方便。对于函子来说，所有我们所需要的就是符合函子定律的一个 <span class="" style="margin-right: 2px; margin-left: 2px; border: 1px solid rgb(225, 225, 232); padding: 2px 4px; font-size: 14px; font-family: monospace; color: rgb(221, 17, 68); background-color: rgb(247, 247, 249); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; word-break: break-word; word-wrap: break-word;">.map()</span> 接口。</p><h2 style="margin-top: 20px; margin-bottom: 12px; border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(100, 159, 12); font-weight: bold; word-break: break-all; word-wrap: break-word; font-size: 18px; color: rgb(100, 159, 12); text-align: center; font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-variant-ligatures: normal; orphans: 2; white-space: normal; widows: 2;">为什么要用函子？</h2><p style="margin-top: 8px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">函子之所以牛叉，是有很多原因的。最重要的是，它们是一种抽象，我们可以用它们以作用于任何数据类型的方式来实现很多有用的事情。比如，如果我们想启动一连串操作，但是这些操作要排除掉函子内值为 <span class="" style="margin-right: 2px; margin-left: 2px; border: 1px solid rgb(225, 225, 232); padding: 2px 4px; font-size: 14px; font-family: monospace; color: rgb(221, 17, 68); background-color: rgb(247, 247, 249); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; word-break: break-word; word-wrap: break-word;">undefined</span> 或者 <span class="" style="margin-right: 2px; margin-left: 2px; border: 1px solid rgb(225, 225, 232); padding: 2px 4px; font-size: 14px; font-family: monospace; color: rgb(221, 17, 68); background-color: rgb(247, 247, 249); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; word-break: break-word; word-wrap: break-word;">null</span> 的，该怎么办呢？</p><blockquote class="" style="border: 0px; padding-left: 0px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; white-space: normal; widows: 2;"><pre class="" style="border: 0px; padding: 1em; overflow: auto; background-color: rgb(39, 40, 34); color: rgb(248, 248, 242); font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace; max-width: 100%; word-wrap: normal; text-shadow: rgba(0, 0, 0, 0.298039) 0px 1px; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; border-top-left-radius: 0.3em; border-top-right-radius: 0.3em; border-bottom-right-radius: 0.3em; border-bottom-left-radius: 0.3em; box-sizing: border-box !important;"><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" spellcheck="true" style="border: 0px; color: slategray;">// 创建断言</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px; color: rgb(102, 217, 239);">const</span>&nbsp;exists&nbsp;<span class="" style="border: 0px;">=</span>&nbsp;x&nbsp;<span class="" style="border: 0px;">=</span><span class="" style="border: 0px;">&gt;</span>&nbsp;<span class="" style="border: 0px;">(</span>x<span class="" style="border: 0px;">.</span><span class="" style="border: 0px; color: rgb(230, 219, 116);">valueOf</span><span class="" style="border: 0px;">(</span><span class="" style="border: 0px;">)</span>&nbsp;<span class="" style="border: 0px;">!==</span>&nbsp;undefined&nbsp;<span class="" style="border: 0px;">&amp;&amp;</span>&nbsp;x<span class="" style="border: 0px;">.</span><span class="" style="border: 0px; color: rgb(230, 219, 116);">valueOf</span><span class="" style="border: 0px;">(</span><span class="" style="border: 0px;">)</span>&nbsp;<span class="" style="border: 0px;">!==</span>&nbsp;<span class="" style="border: 0px; color: rgb(102, 217, 239);">null</span><span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">;</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 0; word-break: break-word; word-wrap: break-word; font-size: 14px; height: 6px; white-space: nowrap !important;"><br style="border: 0px;"></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px; color: rgb(102, 217, 239);">const</span>&nbsp;ifExists&nbsp;<span class="" style="border: 0px;">=</span>&nbsp;x&nbsp;<span class="" style="border: 0px;">=</span><span class="" style="border: 0px;">&gt;</span>&nbsp;<span class="" style="border: 0px;">(</span><span class="" style="border: 0px;">{</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;map<span class="" style="border: 0px;">:</span>&nbsp;fn&nbsp;<span class="" style="border: 0px;">=</span><span class="" style="border: 0px;">&gt;</span>&nbsp;<span class="" style="border: 0px; color: rgb(230, 219, 116);">exists</span><span class="" style="border: 0px;">(</span>x<span class="" style="border: 0px;">)</span>&nbsp;<span class="" style="border: 0px;">?</span>&nbsp;x<span class="" style="border: 0px;">.</span><span class="" style="border: 0px; color: rgb(230, 219, 116);">map</span><span class="" style="border: 0px;">(</span>fn<span class="" style="border: 0px;">)</span>&nbsp;<span class="" style="border: 0px;">:</span>&nbsp;x</p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px;">}</span><span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">;</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 0; word-break: break-word; word-wrap: break-word; font-size: 14px; height: 6px; white-space: nowrap !important;"><br style="border: 0px;"></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px; color: rgb(102, 217, 239);">const</span>&nbsp;add1&nbsp;<span class="" style="border: 0px;">=</span>&nbsp;n&nbsp;<span class="" style="border: 0px;">=</span><span class="" style="border: 0px;">&gt;</span>&nbsp;n&nbsp;<span class="" style="border: 0px;">+</span>&nbsp;<span class="" style="border: 0px; color: rgb(174, 129, 255);">1</span><span class="" style="border: 0px;">;</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px; color: rgb(102, 217, 239);">const</span>&nbsp;double&nbsp;<span class="" style="border: 0px;">=</span>&nbsp;n&nbsp;<span class="" style="border: 0px;">=</span><span class="" style="border: 0px;">&gt;</span>&nbsp;n&nbsp;<span class="" style="border: 0px;">*</span>&nbsp;<span class="" style="border: 0px; color: rgb(174, 129, 255);">2</span><span class="" style="border: 0px;">;</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 0; word-break: break-word; word-wrap: break-word; font-size: 14px; height: 6px; white-space: nowrap !important;"><br style="border: 0px;"></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" spellcheck="true" style="border: 0px; color: slategray;">// 什么都没有发生...</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px; color: rgb(230, 219, 116);">ifExists</span><span class="" style="border: 0px;">(</span><span class="" style="border: 0px; color: rgb(230, 219, 116);">Identity</span><span class="" style="border: 0px;">(</span>undefined<span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">.</span><span class="" style="border: 0px; color: rgb(230, 219, 116);">map</span><span class="" style="border: 0px;">(</span>trace<span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">;</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" spellcheck="true" style="border: 0px; color: slategray;">// 依然是什么都没有发生...</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px; color: rgb(230, 219, 116);">ifExists</span><span class="" style="border: 0px;">(</span><span class="" style="border: 0px; color: rgb(230, 219, 116);">Identity</span><span class="" style="border: 0px;">(</span><span class="" style="border: 0px; color: rgb(102, 217, 239);">null</span><span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">.</span><span class="" style="border: 0px; color: rgb(230, 219, 116);">map</span><span class="" style="border: 0px;">(</span>trace<span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">;</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 0; word-break: break-word; word-wrap: break-word; font-size: 14px; height: 6px; white-space: nowrap !important;"><br style="border: 0px;"></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" spellcheck="true" style="border: 0px; color: slategray;">// 42</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px; color: rgb(230, 219, 116);">ifExists</span><span class="" style="border: 0px;">(</span><span class="" style="border: 0px; color: rgb(230, 219, 116);">Identity</span><span class="" style="border: 0px;">(</span><span class="" style="border: 0px; color: rgb(174, 129, 255);">20</span><span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">)</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;<span class="" style="border: 0px;">.</span><span class="" style="border: 0px; color: rgb(230, 219, 116);">map</span><span class="" style="border: 0px;">(</span>add1<span class="" style="border: 0px;">)</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;<span class="" style="border: 0px;">.</span><span class="" style="border: 0px; color: rgb(230, 219, 116);">map</span><span class="" style="border: 0px;">(</span>double<span class="" style="border: 0px;">)</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;<span class="" style="border: 0px;">.</span><span class="" style="border: 0px; color: rgb(230, 219, 116);">map</span><span class="" style="border: 0px;">(</span>trace<span class="" style="border: 0px;">)</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px;">;</span></p></pre></blockquote><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">当然，函数式编程都是组合小函数，来创建更高层的抽象。如果我们想有一个可以作用域任何函子的通用映射该怎么办？通过这种方式，我们可以偏应用参数来创建新函数。</p><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">很简单。捡起你喜欢的自动柯里化，或者就使用之前的这个魔咒：</p><blockquote class="" style="border: 0px; padding-left: 0px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; white-space: normal; widows: 2;"><pre class="" style="border: 0px; padding: 1em; overflow: auto; background-color: rgb(39, 40, 34); color: rgb(248, 248, 242); font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace; max-width: 100%; word-wrap: normal; text-shadow: rgba(0, 0, 0, 0.298039) 0px 1px; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; border-top-left-radius: 0.3em; border-top-right-radius: 0.3em; border-bottom-right-radius: 0.3em; border-bottom-left-radius: 0.3em; box-sizing: border-box !important;"><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px; color: rgb(102, 217, 239);">const</span>&nbsp;curry&nbsp;<span class="" style="border: 0px;">=</span>&nbsp;<span class="" style="border: 0px;">(</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;f<span class="" style="border: 0px;">,</span>&nbsp;arr&nbsp;<span class="" style="border: 0px;">=</span>&nbsp;<span class="" style="border: 0px;">[</span><span class="" style="border: 0px;">]</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px;">)</span>&nbsp;<span class="" style="border: 0px;">=</span><span class="" style="border: 0px;">&gt;</span>&nbsp;<span class="" style="border: 0px;">(</span><span class="" style="border: 0px;">...</span>args<span class="" style="border: 0px;">)</span>&nbsp;<span class="" style="border: 0px;">=</span><span class="" style="border: 0px;">&gt;</span>&nbsp;<span class="" style="border: 0px;">(</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;a&nbsp;<span class="" style="border: 0px;">=</span><span class="" style="border: 0px;">&gt;</span>&nbsp;a<span class="" style="border: 0px;">.</span>length&nbsp;<span class="" style="border: 0px;">===</span>&nbsp;f<span class="" style="border: 0px;">.</span>length&nbsp;<span class="" style="border: 0px;">?</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="" style="border: 0px; color: rgb(230, 219, 116);">f</span><span class="" style="border: 0px;">(</span><span class="" style="border: 0px;">...</span>a<span class="" style="border: 0px;">)</span>&nbsp;<span class="" style="border: 0px;">:</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="" style="border: 0px; color: rgb(230, 219, 116);">curry</span><span class="" style="border: 0px;">(</span>f<span class="" style="border: 0px;">,</span>&nbsp;a<span class="" style="border: 0px;">)</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">(</span><span class="" style="border: 0px;">[</span><span class="" style="border: 0px;">...</span>arr<span class="" style="border: 0px;">,</span>&nbsp;<span class="" style="border: 0px;">...</span>args<span class="" style="border: 0px;">]</span><span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">;</span></p></pre></blockquote><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">现在我们可以定制 map：</p><blockquote class="" style="border: 0px; padding-left: 0px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; white-space: normal; widows: 2;"><pre class="" style="border: 0px; padding: 1em; overflow: auto; background-color: rgb(39, 40, 34); color: rgb(248, 248, 242); font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace; max-width: 100%; word-wrap: normal; text-shadow: rgba(0, 0, 0, 0.298039) 0px 1px; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; border-top-left-radius: 0.3em; border-top-right-radius: 0.3em; border-bottom-right-radius: 0.3em; border-bottom-left-radius: 0.3em; box-sizing: border-box !important;"><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px; color: rgb(102, 217, 239);">const</span>&nbsp;map&nbsp;<span class="" style="border: 0px;">=</span>&nbsp;<span class="" style="border: 0px; color: rgb(230, 219, 116);">curry</span><span class="" style="border: 0px;">(</span><span class="" style="border: 0px;">(</span>fn<span class="" style="border: 0px;">,</span>&nbsp;F<span class="" style="border: 0px;">)</span>&nbsp;<span class="" style="border: 0px;">=</span><span class="" style="border: 0px;">&gt;</span>&nbsp;F<span class="" style="border: 0px;">.</span><span class="" style="border: 0px; color: rgb(230, 219, 116);">map</span><span class="" style="border: 0px;">(</span>fn<span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">;</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 0; word-break: break-word; word-wrap: break-word; font-size: 14px; height: 6px; white-space: nowrap !important;"><br style="border: 0px;"></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px; color: rgb(102, 217, 239);">const</span>&nbsp;double&nbsp;<span class="" style="border: 0px;">=</span>&nbsp;n&nbsp;<span class="" style="border: 0px;">=</span><span class="" style="border: 0px;">&gt;</span>&nbsp;n&nbsp;<span class="" style="border: 0px;">*</span>&nbsp;<span class="" style="border: 0px; color: rgb(174, 129, 255);">2</span><span class="" style="border: 0px;">;</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 0; word-break: break-word; word-wrap: break-word; font-size: 14px; height: 6px; white-space: nowrap !important;"><br style="border: 0px;"></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px; color: rgb(102, 217, 239);">const</span>&nbsp;mdouble&nbsp;<span class="" style="border: 0px;">=</span>&nbsp;<span class="" style="border: 0px; color: rgb(230, 219, 116);">map</span><span class="" style="border: 0px;">(</span>double<span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">;</span></p><p class="" style="margin-top: 3px; margin-bottom: 3px; border: 0px; line-height: 16px; word-break: break-word; word-wrap: break-word; font-size: 14px; white-space: nowrap !important;"><span class="" style="border: 0px; color: rgb(230, 219, 116);">mdouble</span><span class="" style="border: 0px;">(</span><span class="" style="border: 0px; color: rgb(230, 219, 116);">Identity</span><span class="" style="border: 0px;">(</span><span class="" style="border: 0px; color: rgb(174, 129, 255);">4</span><span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">.</span><span class="" style="border: 0px; color: rgb(230, 219, 116);">map</span><span class="" style="border: 0px;">(</span>trace<span class="" style="border: 0px;">)</span><span class="" style="border: 0px;">;</span>&nbsp;<span class="" spellcheck="true" style="border: 0px; color: slategray;">// 8</span></p></pre></blockquote><h2 style="margin-top: 20px; margin-bottom: 12px; border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(100, 159, 12); font-weight: bold; word-break: break-all; word-wrap: break-word; font-size: 18px; color: rgb(100, 159, 12); text-align: center; font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-variant-ligatures: normal; orphans: 2; white-space: normal; widows: 2;">总结</h2><p style="margin-top: 8px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">函子是我们可以映射的事物。更具体地说，一个函数是从范畴到范畴的一个映射。一个函子甚至可以将一个范畴映射到同一范畴（即，自函子）。</p><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">范畴是对象的集合，对象之间有箭头。箭头代表态射（即函数，即组合）。范畴中的每个对象都有一个恒等态射（<span class="" style="margin-right: 2px; margin-left: 2px; border: 1px solid rgb(225, 225, 232); padding: 2px 4px; font-size: 14px; font-family: monospace; color: rgb(221, 17, 68); background-color: rgb(247, 247, 249); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; word-break: break-word; word-wrap: break-word;">x =&gt; x</span>）。对于任何对象链 <span class="" style="margin-right: 2px; margin-left: 2px; border: 1px solid rgb(225, 225, 232); padding: 2px 4px; font-size: 14px; font-family: monospace; color: rgb(221, 17, 68); background-color: rgb(247, 247, 249); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; word-break: break-word; word-wrap: break-word;">A -&gt;B -&gt; C</span>，必然存在组合 <span class="" style="margin-right: 2px; margin-left: 2px; border: 1px solid rgb(225, 225, 232); padding: 2px 4px; font-size: 14px; font-family: monospace; color: rgb(221, 17, 68); background-color: rgb(247, 247, 249); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; word-break: break-word; word-wrap: break-word;">A -&gt; C</span>。</p><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">函子是更高层的抽象，允许我们创建各种作用于任何数据类型的通用函数。</p><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 25.6px; white-space: pre-wrap; word-break: break-word; font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); background-color: rgb(255, 255, 255); word-wrap: break-word !important; box-sizing: border-box !important;"><span style="border: 0px; max-width: 100%; line-height: 1.6; color: rgb(68, 68, 68); box-sizing: border-box !important; word-wrap: break-word !important;"><br style="border: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"></span></p><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 25.6px; white-space: pre-wrap; word-break: break-word; font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); background-color: rgb(255, 255, 255); word-wrap: break-word !important; box-sizing: border-box !important;"><span style="border: 0px; max-width: 100%; line-height: 1.6; color: rgb(68, 68, 68); box-sizing: border-box !important; word-wrap: break-word !important;"></span></p><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 25.6px; white-space: pre-wrap; word-break: break-word; font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); text-align: center; background-color: rgb(255, 255, 255); word-wrap: break-word !important; box-sizing: border-box !important;"><span style="border: 0px; max-width: 100%; color: rgb(68, 68, 68); box-sizing: border-box !important; word-wrap: break-word !important;">奇舞周刊</span></p><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 25.6px; white-space: pre-wrap; word-break: break-word; font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); text-align: center; background-color: rgb(255, 255, 255); word-wrap: break-word !important; box-sizing: border-box !important;"><span style="border: 0px; max-width: 100%; color: rgb(68, 68, 68); box-sizing: border-box !important; word-wrap: break-word !important;">———<span style="border: 0px; max-width: 100%; color: rgb(136, 136, 136); line-height: 25.6px; box-sizing: border-box !important; word-wrap: break-word !important;">————————————</span>———</span></p><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 25.6px; white-space: pre-wrap; word-break: break-word; font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); text-align: center; background-color: rgb(255, 255, 255); word-wrap: break-word !important; box-sizing: border-box !important;"><span style="border: 0px; max-width: 100%; color: rgb(68, 68, 68); box-sizing: border-box !important; word-wrap: break-word !important;">领略前端技术 阅读奇舞周刊</span></p><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 25.6px; white-space: pre-wrap; word-break: break-word; font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); text-align: center; background-color: rgb(255, 255, 255); word-wrap: break-word !important; box-sizing: border-box !important;"><br style="border: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"></p><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 1.5em; white-space: pre-wrap; word-break: break-word; font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); text-align: center; background-color: rgb(255, 255, 255); word-wrap: break-word !important; box-sizing: border-box !important;"><span style="border: 0px; max-width: 100%; font-size: 13px; color: rgb(68, 68, 68); box-sizing: border-box !important; word-wrap: break-word !important;">长按二维码，关注奇舞周刊</span></p><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: normal; white-space: pre-wrap; word-break: break-word; font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; max-width: 100%; min-height: 1em; color: rgb(32, 32, 32); text-align: center; background-color: rgb(255, 255, 255); word-wrap: break-word !important; box-sizing: border-box !important;"><span style="border: 0px; max-width: 100%; font-size: 10px; color: rgb(68, 68, 68); box-sizing: border-box !important; word-wrap: break-word !important;"><strong style="border: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;">▼</strong></span></p><p class="" style="margin: 15px auto; border: 0px; line-height: 25.6px; white-space: normal; word-break: break-word; overflow: hidden; text-align: center; font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); background-color: rgb(255, 255, 255); word-wrap: break-word !important; box-sizing: border-box !important;"><img src="/gh_ffb279ea1674/images/c90ddd430cc349648caf4c4ff107fc8767904250.jpeg" style="border: 0px; vertical-align: middle; box-sizing: border-box !important; word-wrap: break-word !important; visibility: visible !important; width: 200px !important; height: 200px !important;"></p><p><br></p><hr/><a href="http://mp.weixin.qq.com/s?timestamp=1494856895&src=3&ver=1&signature=4I3jFq9pbfB-s2UPACb8j7UIiNLg6wJ1Dv0P8XkB*fwGO7cJuXBsMc8Jdhjf9CeUb708FatsAvz9H0qMEnwq36jyf7EmK4qhVOEbIL31*W7bGSjybCZTZoR7swgIEufxE*1huKYZH4n709d8MyeP5ytVEDVzbhK2H8m*ukl1Cng=">微信地址</a> | <a href="http://zcfy.cc/article/functors-amp-categories-javascript-scene-medium-2698.html">阅读原文</a>
{% endraw  %}

