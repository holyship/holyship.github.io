---
title: 通用应用是神马？
author: 我是搬运工 译
wechat_source: >-
  http://mp.weixin.qq.com/s?timestamp=1498052478&src=3&ver=1&signature=nULoNfhbsabgcFJEB9PUQ4YQZyPtwDZOFsP0df7wWEoFqqfodm*XCkax*P8kROgMGi1FfkjBD5n9etaZoGHJFVKUKaN0qODhshb1fmdqD9uaxnVhfYVRMCd-J2uxIVEizijXuNQpo*0pWa25Q-9j4WiBWc4ARZFn18rKmPZIDCI=
date: '2017-06-18 00:00:00 +0000'

---

{% raw  %}
<p><span style="color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2;  widows: 2;"></span></p><p><span style="color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; orphans: 2; white-space: pre-wrap; widows: 2; background-color: rgb(255, 254, 213);">编者按：本文由我是搬运工在众成翻译平台上翻译。已经听说“服务端渲染”，“同构”等术语很久了，总是闹不明白，今天咱们来一探究竟～</span></p><p><img src="http://mmbiz.qpic.cn/mmbiz_gif/d8tibSEfhMMrG5qX68PyUho3gS0AH1FaAJfwRviaeynLNa6H3RrNkrnFGwVdUeRicHrovpXyJV0iaFq5wicFv0TjdLg/0?wx_fmt=gif" style="width: 770px !important; height: 577.5px !important; visibility: visible !important;"></p><p style="text-align: center;"><span style="color: rgb(136, 136, 136); font-size: 15px;">（图片来自网络）</span></p><p><span style="color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2;  widows: 2;">长话短说：本文是通用（之前叫同构）Web应用系列的第一篇。这一系列介绍：</span><em style="border: 0px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; white-space: normal; widows: 2;">什么是通用Web应用？为什么它们很重要？通用Web应用有什么好处？如何创建一个模板以开始一个通用Web应用项目？</em><span style="color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2;  widows: 2;">注意，由于JavaScript的生态系统极其庞大，并且由于我们几乎可以用任何框架和库来创建Web应用，在这个系列中我们选择用&nbsp;</span><span class="" style="border: 0px; color: rgb(25, 128, 230); white-space: pre-wrap; word-break: break-word; word-wrap: break-word; font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">React</span><span style="color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2;  widows: 2;">，</span><span class="" style="border: 0px; color: rgb(25, 128, 230); white-space: pre-wrap; word-break: break-word; word-wrap: break-word; font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">Redux</span><span style="color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2;  widows: 2;">&nbsp;and&nbsp;</span><span class="" style="border: 0px; color: rgb(25, 128, 230); white-space: pre-wrap; word-break: break-word; word-wrap: break-word; font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">Webpack</span><span style="color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2;  widows: 2;">。</span></p><hr style="border: 0px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; white-space: normal; widows: 2;"><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">Web正以前所未有的速度发展着，主要归功于JavaScript语言的演变和改进。同时，NodeJs项目使得在服务器端使用JavaScript成为现实，这充分证明了JS是<em style="border: 0px;">一流语言</em>，就像Java，PHP，Python一样好（或坏）。与它们不同的是，我们既可以在服务器端也可以在客户端使用JS，JS可以说是相当特别，这使得我们能够创建<em style="border: 0px;">通用应用</em>（之前叫<em style="border: 0px;">同构应用</em>）。</p><h2 style="margin-top: 20px; margin-bottom: 12px; border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(25, 128, 230); font-weight: bold; word-break: break-all; word-wrap: break-word; font-size: 18px; color: rgb(25, 128, 230); text-align: center; font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-variant-ligatures: normal; orphans: 2; white-space: normal; widows: 2;">在客户端的JavaScript</h2><p style="margin-top: 8px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">这门语言最初存在的理由便是在浏览器端的使用。它的用途已经从当初用几行代码验证输入的文本演化到构建非常复杂的应用。如今每个人都用<span class="" style="border: 0px; color: rgb(25, 128, 230); word-break: break-word; word-wrap: break-word;">RIA</span>（富网络应用）：邮件，社交网络，照片分享等。
总结一下，RIA以如下方式运行：</p><ul style="border: 0px; padding-left: 20px; line-height: 1.8; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; white-space: normal; widows: 2;" class="list-paddingleft-2"><li><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word;">浏览器加载一个HTML文件。这个文件通常像下面这样组织：</p></li><ul style="list-style-type: square;" class="list-paddingleft-2"><li><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word;">HTML文档的<span class="" style="margin-right: 2px; margin-left: 2px; border: 1px solid rgb(225, 225, 232); padding: 2px 4px; font-size: 14px; font-family: monospace; color: rgb(221, 17, 68); background-color: rgb(247, 247, 249); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; word-break: break-word; word-wrap: break-word;">&lt;head&gt;</span>标签包含了所有需要的CSS代码，用于给应用的DOM元素添加样式。</p></li><li><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word;"><span class="" style="margin-right: 2px; margin-left: 2px; border: 1px solid rgb(225, 225, 232); padding: 2px 4px; font-size: 14px; font-family: monospace; color: rgb(221, 17, 68); background-color: rgb(247, 247, 249); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; word-break: break-word; word-wrap: break-word;">&lt;body&gt;</span>标签几乎不包含DOM元素（里面元素都由JS动态创建），</p></li><li><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word;">最后，<span class="" style="margin-right: 2px; margin-left: 2px; border: 1px solid rgb(225, 225, 232); padding: 2px 4px; font-size: 14px; font-family: monospace; color: rgb(221, 17, 68); background-color: rgb(247, 247, 249); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; word-break: break-word; word-wrap: break-word;">&lt; script&gt;</span>标签里面包含应用所需的全部JS代码。</p></li></ul><li><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word;">此时客户端（浏览器）包含了运行所需的所有代码。在<span class="" style="margin-right: 2px; margin-left: 2px; border: 1px solid rgb(225, 225, 232); padding: 2px 4px; font-size: 14px; font-family: monospace; color: rgb(221, 17, 68); background-color: rgb(247, 247, 249); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; word-break: break-word; word-wrap: break-word;">&lt;script&gt;</span>中加载的Javascript代码负责增加或者删除DOM元素（像模态框，菜单，列表项等），异步加载数据，验证，等等。</p><h3 style="margin-top: 12px; margin-bottom: 8px; border: 0px; font-weight: bold; word-break: break-all; word-wrap: break-word; font-size: 20px;">RIA应用的优缺点</h3></li></ul><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">RIA是Web应用发展历程中一次重大的进步。我记得GMail出现时，在用户体验上不知超越了竞争者多少倍。GMail一旦加载，任何的变化或者数据加载都会被异步处理，而不必重新刷新页面。这可能是RIA最重要的一点，即，相似于原生应用。
但事实上RIA有一个问题，让我们测试下RIA的流程：</p><ul style="border: 0px; padding-left: 20px; line-height: 1.8; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; white-space: normal; widows: 2;" class="list-paddingleft-2"><li><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word;">首先你需要访问一个URL直到app加载完</p></li><li><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word;">然后，app会异步的请求数据，用户必须等待它加载完毕然后添加到页面上。</p></li></ul><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">正如你所看到的，在这个流程里<strong style="border: 0px;">用户需要等待两倍的时间去获取初始化的内容</strong>。</p><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">之前, 随着HTML5的横空出世，很多公司从开发原生移动应用转向开发<span class="" style="border: 0px; color: rgb(25, 128, 230); word-break: break-word; word-wrap: break-word;">混合应用（hybrid app）</span>。 他们很快就发现用户不喜欢在获得到内容之前等待很长时间。 参见 <span class="" style="border: 0px; color: rgb(25, 128, 230); word-break: break-word; word-wrap: break-word;">How Loading Time Affects Your Bottom Line</span>._</p><h2 style="margin-top: 20px; margin-bottom: 12px; border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(25, 128, 230); font-weight: bold; word-break: break-all; word-wrap: break-word; font-size: 18px; color: rgb(25, 128, 230); text-align: center; font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-variant-ligatures: normal; orphans: 2; white-space: normal; widows: 2;">服务器端的JavaScript</h2><p style="margin-top: 8px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">在服务器端运行Javscript有一些可选方案，但是NodeJS项目最终打败了所有选手。</p><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">基于Google <span class="" style="border: 0px; color: rgb(25, 128, 230); word-break: break-word; word-wrap: break-word;">V8 JavaScript Engine</span>，NodeJS允许在服务器端运行JavaScript。由于JavaScript的特性，创建一个异步的事件驱动的应用非常简单，这些比开发传统的并发的应用要容易的多。</p><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">在服务器端开发JavaScript应用就跟用其他的语言和技术一样</p><ul style="border: 0px; padding-left: 20px; line-height: 1.8; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; white-space: normal; widows: 2;" class="list-paddingleft-2"><li><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word;">客户端向服务端发起一个请求</p></li><li><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word;">服务端处理接收的数据，计算和查询任何需要的值，构建一个HTML页面作为响应返回给客户端。</p></li><li><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word;">客户端解析返回的HTML页面，加载所需要的图像，CSS，或者JavaScript代码</p></li></ul><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">这就像是以前的Email客户端的工作方式，每个动作（点击链接或者按钮）都对应了一个服务端请求URL，用户必须等待服务器处理并且返回新的HTML 代码给浏览器。</p><h3 style="margin-top: 12px; margin-bottom: 8px; border: 0px; font-weight: bold; word-break: break-all; word-wrap: break-word; font-size: 20px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-variant-ligatures: normal; orphans: 2; white-space: normal; widows: 2;">服务器端应用的优缺点</h3><p style="margin-top: 8px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">随着Web的发展，每个人都知道服务器端Web应用不是个好主意，因为每个客户端行为都要等待服务端的响应。</p><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">这是对的，但是服务端应用从另一方面来讲很重要： <strong style="border: 0px;">可以返回带有内容的页面</strong>，也就是说当你请求URL时，你得到的网页包含了你所期望的内容。</p><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">在构建通用应用时，这一点体现了服务端处理的重要性。当用户访问一些URL时，需要提高app的加载速度，提高用户体验，返回尽可能多的内容。</p><h2 style="margin-top: 20px; margin-bottom: 12px; border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(25, 128, 230); font-weight: bold; word-break: break-all; word-wrap: break-word; font-size: 18px; color: rgb(25, 128, 230); text-align: center; font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-variant-ligatures: normal; orphans: 2; white-space: normal; widows: 2;">通用应用</h2><p style="margin-top: 8px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">一个通用应用是客户端与服务端的混合。它的理念是，当我们初次访问一个网站时，服务端返回所有代码以及用户期待的内容，例如，在初次访问一个电子商务站点的时候，服务端的返回能包含初始化的20个列表项，之后让用户继续异步加载更多的内容。这种行为可以通过几乎所有语言和技术做到。例如，我们有一个Java+JSP的Tomcat的服务器，返回初始化的HTML代码，包括一些JavaScript打包文件，这些文件包含了在客户端运行应用所需的代码。这种方式也能工作，但是这不是一个通用应用。</p><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;"><strong style="border: 0px;">要成为一个通用应用，应用必须在客户端和服务端用同样的代码渲染应用组件</strong>。
这意味着， 接着上一个电子商务站点的例子，当用户第一次访问时，服务器端用来向API请求并渲染列表项（转换为DOM元素）的代码和客户端中用户想加载更多列表项的代码必须是一样。 这种方式下，应用的JavaScript的代码是<em style="border: 0px;">通用的</em>，因为两端都能运行。</p><h3 style="margin-top: 12px; margin-bottom: 8px; border: 0px; font-weight: bold; word-break: break-all; word-wrap: break-word; font-size: 20px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-variant-ligatures: normal; orphans: 2; white-space: normal; widows: 2;">执行的流程</h3><p style="margin-top: 8px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">好了，我已经介绍了通用应用是如何工作的，但是一图胜千言。</p><p class="" style="margin: 15px auto; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; overflow: hidden; text-align: center; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;"><img src="http://mmbiz.qpic.cn/mmbiz_png/d8tibSEfhMMqqM7bPACic0A96BpAhnEEEczKDzbWoGoIoicic4FmyNN1W0qf2h7Xjg53ZThcxHQiaBUk1GHJtO4g5kg/0?wx_fmt=png" style="border: 0px; vertical-align: middle; width: 682px !important; height: 425px !important;"></p><ol style="border: 0px; padding-left: 20px; line-height: 1.8; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; white-space: normal; widows: 2;" class="list-paddingleft-2"><li><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word;"><strong style="border: 0px;">请求</strong>：浏览器向服务器发起一个请求。这是初始化的请求，也是主要的请求，因为针对用户的请求，服务器会返回一个Web页面，外链了Javascript和CSS代码打包文件，除此之外还有尽可能多的内容（包括页面上的DOM元素）。</p></li><li><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word;"><strong style="border: 0px;">处理和渲染</strong>：服务端处理请求。服务端必须获取到用户正在请求页面（主页，关于我们，列表详情）的路由，必须查询所需的数据来渲染HTML页面元素。</p></li><li><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word;"><strong style="border: 0px;">响应</strong>：服务器返回之前构建好的HTML页面给客户端，客户端加载文档中的图片，CSS，和JavaScript文件。</p></li><li><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word;"><strong style="border: 0px;">交互</strong>：客户端有一个RIA应用所需的全部代码。页面初始化的内容已经被服务端渲染了，带给了用户更好的体验，之后你的应用不用刷新整个页面就可以异步请求新的内容。</p></li></ol><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">记住你写的代码必须能在客户端和服务端都能运行，举几个例子：</p><ul style="border: 0px; padding-left: 20px; line-height: 1.8; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; white-space: normal; widows: 2;" class="list-paddingleft-2"><li><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word;">所需的代码获取到当前的路由然后渲染正确的内容。假如这个app应用有三个标签页：<em style="border: 0px;">主页</em>，<em style="border: 0px;">帮助中心</em>，<em style="border: 0px;">关于我们</em>， 如果在浏览器中，通过绝对的URL到<em style="border: 0px;">关于我们</em>，我们期望应用能够启用<em style="border: 0px;">关于我们</em>的页面。之后，一旦应用在浏览器中加载完成，如果我们要到<em style="border: 0px;">帮助中心</em>，组件一定要发生改变。在这两种情况下，识别访问路由和渲染页面的代码必须是一样的。</p></li><li><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word;">代码需要获取数据。因为数据既可以被服务器获取到，当浏览器加载完整个应用后，也可以被客户端获取，你用来获取数据的代码在两端要都能运行。因此，通用应用一般会向一个API服务器来请求数据。</p></li></ul><h2 style="margin-top: 20px; margin-bottom: 12px; border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(25, 128, 230); font-weight: bold; word-break: break-all; word-wrap: break-word; font-size: 18px; color: rgb(25, 128, 230); text-align: center; font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-variant-ligatures: normal; orphans: 2; white-space: normal; widows: 2;">结论</h2><p style="margin-top: 8px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">一个通用应用必须满足一个要求： 代码在客户端和服务器端必须一样，当前只有JavaScript能达到要求。</p><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">为了提升用户体验，我们第一次访问服务端加载应用的时候，HTML应该包含页面需要的所有DOM元素。这种方式减少了首屏内容加载完成的等待时间。
JavaScript代码必须在客户端和服务器端是<em style="border: 0px;">兼容的</em>。例如，你不能直接访问一个数据库来获取数据，因为这些代码在客户端不能工作。</p><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 2; white-space: pre-wrap; word-break: break-word; word-wrap: break-word; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2;">棒极了 !! 现在你知道了通用应用工作的基础。从这里开始，离在项目中真正运用，还有一段很长，却很棒的路要走。</p><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 25.6px; white-space: pre-wrap; word-break: break-word; font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); background-color: rgb(255, 255, 255); word-wrap: break-word !important; box-sizing: border-box !important;"><span style="border: 0px; max-width: 100%; line-height: 1.6; color: rgb(68, 68, 68); box-sizing: border-box !important; word-wrap: break-word !important;"><br style="border: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"></span></p><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 25.6px; white-space: pre-wrap; word-break: break-word; font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); background-color: rgb(255, 255, 255); word-wrap: break-word !important; box-sizing: border-box !important;"><span style="border: 0px; max-width: 100%; line-height: 1.6; color: rgb(68, 68, 68); box-sizing: border-box !important; word-wrap: break-word !important;"></span></p><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 25.6px; white-space: pre-wrap; word-break: break-word; font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); text-align: center; background-color: rgb(255, 255, 255); word-wrap: break-word !important; box-sizing: border-box !important;"><span style="border: 0px; max-width: 100%; color: rgb(68, 68, 68); box-sizing: border-box !important; word-wrap: break-word !important;">奇舞周刊</span></p><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 25.6px; white-space: pre-wrap; word-break: break-word; font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); text-align: center; background-color: rgb(255, 255, 255); word-wrap: break-word !important; box-sizing: border-box !important;"><span style="border: 0px; max-width: 100%; color: rgb(68, 68, 68); box-sizing: border-box !important; word-wrap: break-word !important;">———<span style="border: 0px; max-width: 100%; color: rgb(136, 136, 136); line-height: 25.6px; box-sizing: border-box !important; word-wrap: break-word !important;">————————————</span>———</span></p><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 25.6px; white-space: pre-wrap; word-break: break-word; font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); text-align: center; background-color: rgb(255, 255, 255); word-wrap: break-word !important; box-sizing: border-box !important;"><span style="border: 0px; max-width: 100%; color: rgb(68, 68, 68); box-sizing: border-box !important; word-wrap: break-word !important;">领略前端技术 阅读奇舞周刊</span></p><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 25.6px; white-space: pre-wrap; word-break: break-word; font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); text-align: center; background-color: rgb(255, 255, 255); word-wrap: break-word !important; box-sizing: border-box !important;"><br style="border: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"></p><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: 1.5em; white-space: pre-wrap; word-break: break-word; font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); text-align: center; background-color: rgb(255, 255, 255); word-wrap: break-word !important; box-sizing: border-box !important;"><span style="border: 0px; max-width: 100%; font-size: 13px; color: rgb(68, 68, 68); box-sizing: border-box !important; word-wrap: break-word !important;">长按二维码，关注奇舞周刊</span></p><p style="margin-top: 10px; margin-bottom: 10px; border: 0px; line-height: normal; white-space: pre-wrap; word-break: break-word; font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; max-width: 100%; min-height: 1em; color: rgb(32, 32, 32); text-align: center; background-color: rgb(255, 255, 255); word-wrap: break-word !important; box-sizing: border-box !important;"><span style="border: 0px; max-width: 100%; font-size: 10px; color: rgb(68, 68, 68); box-sizing: border-box !important; word-wrap: break-word !important;"><strong style="border: 0px; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;">▼</strong></span></p><p class="" style="margin: 15px auto; border: 0px; line-height: 25.6px; white-space: normal; word-break: break-word; overflow: hidden; text-align: center; font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei'; font-size: 16px; font-variant-ligatures: normal; orphans: 2; widows: 2; max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); background-color: rgb(255, 255, 255); word-wrap: break-word !important; box-sizing: border-box !important;"><img src="http://mmbiz.qpic.cn/mmbiz/d8tibSEfhMMpC84jhdw7cmZFzrDoG5IsHcpRcls0Ahx6PhRMAicM1gc2ZmG68Tb8t3cyaia5lFicoY8kWXWibCb609A/640?wx_fmt=jpeg" style="border: 0px; vertical-align: middle; box-sizing: border-box !important; word-wrap: break-word !important; visibility: visible !important; width: 200px !important; height: 200px !important;"></p><p><br></p><hr/><a href="http://mp.weixin.qq.com/s?timestamp=1498052478&src=3&ver=1&signature=nULoNfhbsabgcFJEB9PUQ4YQZyPtwDZOFsP0df7wWEoFqqfodm*XCkax*P8kROgMGi1FfkjBD5n9etaZoGHJFVKUKaN0qODhshb1fmdqD9uaxnVhfYVRMCd-J2uxIVEizijXuNQpo*0pWa25Q-9j4WiBWc4ARZFn18rKmPZIDCI=">微信地址</a> | <a href="http://www.zcfy.cc/article/3210">阅读原文</a>
{% endraw  %}

