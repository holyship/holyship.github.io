---
title: 不懂这个，难成钻石王老五
author: 陈老师
wechat_source: >-
  http://mp.weixin.qq.com/s?timestamp=1512886541&src=3&ver=1&signature=0dsH*cvrb7sDcdE*f0PtKI8QLZCQSt-CLKoPdmBqn5lrtn1cO*r4AVvRFgVcZDGC*n0PbbPqrVwVdeZkCWCyN946-WwWhck*WjG56PYcD3J8RNdNm1**NUyQ62ThDp8nNA*VrWpg-FvJz9ASjpK6PbOtBLru9H0j4gGEhtJlEk4=
date: '2017-11-25 00:00:00 +0000'

---

{% raw  %}
<p>钻石王老五，可能没那么好成的，怪不得寥寥无几。不信，看看下面这道拿到了最大的钻石就能成为钻石王老五的经典思考题。</p><p><br></p><blockquote><p>在一个豪华的四季酒店，一楼到十楼的每层电梯门口都放着一颗钻石，钻石大小不一，每个钻石后面都是一个待字闺中的美女，拿到了钻石，就能赢得美女的芳心。你乘坐电梯从一楼到十楼，每层楼电梯门都会打开一次，只能拿一次钻石，和美女打一次招呼，问怎样才能拿到最大的一颗，赢得美女的芳心？</p></blockquote><p><br></p><p>简单么？看着简单，好像又不简单。对吧，I told you，钻石王老五不好成为，因为，不懂后面的数学和模型。<br></p><p><br></p><p>你可能会说，管它呢，蚊子再小也是肉，简单点，要么一楼，要么十楼，或是哪楼心情好就哪楼的。那么，来看看拿到最大钻石，娶到最好美女的概率。</p><p><br></p><p>首先，让问题简单点。假设只有三层楼，三个钻石的大小分别为1，2，3，那么，可能的排列有：</p><p><br></p><blockquote><p>1，2，3</p><p>1，3，2</p><p>2，1，3</p><p>2，3，1</p><p>3，1，2</p><p>3，2，1</p></blockquote><p><br></p><p>如果采用最简单的策略，第一层，或是最后一层，或是随机，拿到最大的钻石的概率是六种情形中的两种，所以是2/6=1/3。</p><p><br></p><p>这时，可能有人说，先看看前面的，但不拿，等到后面再决定，如果一旦比前面的好，就拿。实在运气不好，就只好拿最后一个了。假设，只看和拒绝前面一个，从第二个开始决定要不要拿。使用这个策略，看看前面的六种情况。</p><p><br></p><blockquote><p>1，3，2（拿3，3比1大）</p><p>2，1，3（1比2小，拒绝；3比2大，拿3）</p><p>2，3，1（拿3，3比2 大）</p></blockquote><p><br></p><p>神奇吧，这时，有三种情况，能拿到最大的，拿到最大的概率变成了3/6=1/2。是不是比1/3好多了？看来还是有学问的。下面，来看看通用情形。</p><p><br></p><p>假设有N个钻石，前面准备查看但不选择M个钻石，就有可能后面拿到最好的钻石。那么这个M应该是多少呢？</p><p><br></p><p>把1到N个钻石（数字既是钻石的编号，也是钻石的价值）进行排列，共有N!种可能。对于某个固定的M，如果最适合的钻石出现在了第P个位置（M&lt; P≤N），要想让它有幸正好被选中，就必须得满足前P-1个钻石中的最好的钻石在前M个位置里，这有M/(P-1) 的可能。那么可归纳为：</p><p><br></p><p>当数字N出现在第P位置（M≤N），如果使上述策略在第一次选择接受时遇到的是N，排列需要满足下面两个条件：</p><p><br></p><blockquote><p>1、N在第P位置&nbsp;</p><p>2、从M+1到P-1位置的数字要比前M位置的最大数字要小</p></blockquote><p><br></p><p>考虑所有可能的位置P，便得到了试探前M个位置能选中最大钻石的总概率P(M)：</p><p><br></p><p><img src="https://mmbiz.qpic.cn/mmbiz_png/uVhqWvaiaiaPNswWHiaibOqicophEH0Kymia1ibicmLHBJnt9XfSJeCeHGIicWvlAicvBibQ0DGP6njCp8mAhHibUBfzq7amvw/0?wx_fmt=png" style="width: 346px !important; height: 82px !important;"></p><p>用 x 来表示 M/N 的值，并且假设N充分大，则上述公式可以写成：</p><p><br></p><p><img src="https://mmbiz.qpic.cn/mmbiz_png/uVhqWvaiaiaPNswWHiaibOqicophEH0Kymia1ib7icP5QjcKib6vE8X9EqsoCuyt7c7FXgKDFpevOTibtFbzG8Qh3q79atcg/0?wx_fmt=png" style="width: 190px !important; height: 56px !important;"></p><p>对 -x · ln x 求导，并令这个导数为 0，可以解出 x 的最优值，它就是欧拉研究的神秘常数的倒数—— 1/e ！即此时 M=N/e。</p><p><br></p><p>试探前M=[N/e]或者[N/e]+1个钻石，当其后的钻石比前M个钻石更大时则拿下，否则不要。</p><p><br></p><p>由于 1/e 大约等于 37%，因此这个策略也叫做 37% 法则！</p><p><br></p><p>噢，原来是这样的。看来，钻石王老五的背后是有深奥的科学的。又学了一招吧。</p><hr/><a href="http://mp.weixin.qq.com/s?timestamp=1512886541&src=3&ver=1&signature=0dsH*cvrb7sDcdE*f0PtKI8QLZCQSt-CLKoPdmBqn5lrtn1cO*r4AVvRFgVcZDGC*n0PbbPqrVwVdeZkCWCyN946-WwWhck*WjG56PYcD3J8RNdNm1**NUyQ62ThDp8nNA*VrWpg-FvJz9ASjpK6PbOtBLru9H0j4gGEhtJlEk4=">微信地址</a>
{% endraw  %}

