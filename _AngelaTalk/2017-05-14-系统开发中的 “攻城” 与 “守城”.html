---
title: 系统开发中的 “攻城” 与 “守城”
author: 朱赟
wechat_source: >-
  http://mp.weixin.qq.com/s?timestamp=1494850157&src=3&ver=1&signature=4I3jFq9pbfB-s2UPACb8j-sMu76BjfF9vz8Yzmzp69FAJLO1hMcQ89tJaW5WQf2WlKt8VY9ymf7V86LgOEs5AvEth77TCg*TDpxiI-ZFW*pWi0V38SeyyxF0ApBci5tRg2k7L2hhdnQIjiwtrhAOkw5f0Vgd3qD5rjaRgS2JacM=
date: '2017-05-14 00:00:00 +0000'

---

{% raw  %}
<p><img src="/AngelaTalk/images/ac566c354c27b2fa280046d13c794a9eba6d99c2.jpeg" style="width: 770px !important; height: 545.016px !important; visibility: visible !important;"></p><p><span style="color: rgb(136, 136, 136);">题图：Rene Magritte</span></p><p><br></p><p>先说两件最近发生的事情。真事隐去，假语村言。</p><p><br></p><p>一</p><p><br></p><p>工程师张三，差不多一两年前负责了一个 X 项目的设计和开发。其中一个关于并发的处理和设计，使用了一个方案。一年后，系统基本完工，张三转移到另一个项目上，李四接手了 X 项目的持续开发和维护。但是在一些特定的情形下，张三的方案会因为实现中的问题（不是设计的问题），引起很麻烦的并发错误。</p><p><br></p><p>于是李四提出一套新的并发处理方案，并希望重写部分系统。原因有好几个，但是部分原因，是李四对自己的方案更有经验，而对当初张三的方案没有那么熟悉。</p><p><br></p><p>那么问题来了，如果重新实现有很多不可知的风险，且工作量比较大。但是这个系统现在在李四手上，他确实认为现在的方案存在的问题他的方案可以解决。</p><p><br></p><p>张三却觉得李四的方案其实有更多问题，但是张三已经撤离这个项目。那么问题来了，要不要让李四重写呢？毕竟现在他是系统的主要维护人。问题要怎么解决？</p><p><br></p><p>二</p><p><br></p><p>工程师赵五和王六，都是同一等级、比较资深的工程师。</p><p><br></p><p>赵五更多再各种系统设计中有声音，更像一个架构师。王六有极强的执行力。系统里大部分代码他都经手过。</p><p><br></p><p>有时候，大家觉得很尊敬赵五，因为他的名字在很多设计文档上。</p><p><br></p><p>但是真的有问题，实际需要考虑项目的负责人时，大家更愿意去找王六。而王六在实际工作中，似乎又更重要。</p><p><br></p><p><br></p><p>分割线。<br></p><p><br></p><p>一</p><p><br></p><p>房子建完了，不管建的如何，你后来需要打交道更多的，是修房子的人，不是盖房子的人。</p><p><br></p><p>如果房子哪里出了问题，修房子的人如果真的理解房屋设计，那么很可能，这个修理就不会太复杂。如果修房子的人完全不理解当初设计的初衷，当然，也不排除当初设计就是有缺陷，那么，很容易提出 “扒了重来” 这样的方案。</p><p><br></p><p>但有的时候，扒了一看，地板上那块以为设计的很糟糕的地砖，其实是为了防护一个更大的坑，或者管道，就傻眼了。又原样给人家铺回去。</p><p><br></p><p>但也有可能，扒了重来，比在地面上修修补补的代价和精力要小得多。</p><p><br></p><p>一个实实在在存在的小区，你见到过它的垃圾桶、下水道的堵塞，也见过它不同天气中、不同居民遇到的各种不合理。而一个小区设计蓝图，你能看到的、听到的，永远是它的鸟语花香。如果有人拿他的蓝图去说他的设计比现有的要怎么怎么好，希望重修，你怎么看？</p><p><br></p><p style="white-space: normal;">如果是我们的系统，又该如何呢？</p><p style="white-space: normal;"><br></p><p>二</p><p><br></p><p>如果认真算起来，我工作过的公司和项目，有一些是我一手从设计到初始开发开始的；更多的是我中途接手，或者以修 bug、或者以加新 feature 的姿态开始慢慢做起来的。</p><p><br></p><p>如果说哪一种经历与我更有益，其实是后者。我对我们整个支付系统的了解，大部分是从打杂、修 bug 中一点点积累出来的。看别人的设计文档，还是自己凭空想象，都没有去应对实际系统中的问题更长经验。</p><p><br></p><p>经常会有别人的设计文档来征求我的意见，并不因为我一定在计算机相关技术上有多强。更多是因为我能指出，他的设计什么情况下可能行不通。</p><p><br></p><p>早些年，我会在乎我的名字出现在哪些文档上。后来发现，别人不在乎这些，我也根本不在乎了。因为大家在乎的是，谁真的懂这个系统。真让你去从头做，你是不是能做个经得起推敲的系统出来。真的让你去修去维护，你能不能理解设计初衷，正确地处理各种棘手的情况。</p><p><br></p><p>话不多说，能从这点文字里读出多少、悟出多少，就是多少吧。</p><p><br></p><hr><p><br></p><p>插播个广而告之。</p><p><br></p><p>很多熟悉这个公众号的人，都知道我有几个 “哥哥”。一位 MacTalk 的池哥和极客邦的亲哥泰稳，是 2015 年极客邦的硅谷行认识的，后来还有位小道消息的冯爷，在 2016 年极客邦的硅谷行也再次见了面。</p><p><br></p><p>今年极客邦的技术开放日增加了欧洲，6月23日至7月4日，行程包括德国、法国、和荷兰。参与的是各大小企业知名领导人。我也应该会随行前往。当然，我还不是知名领导人，但也许去一次，就离目标更近一步了。关于该活动，直接抄一段：</p><p><br></p><blockquote><p style="box-sizing: border-box; margin-bottom: 35px; list-style: none; line-height: 32px; font-size: 16px; color: rgb(55, 58, 60); font-family: 'PingFang SC', 'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, 'Lantinghei SC', 'Hiragino Sans GB', STHeiti, 'Microsoft Sans Serif', sans-serif; font-variant-ligatures: normal; orphans: 2; white-space: normal; widows: 2; background-color: rgb(255, 255, 255);">本次欧洲之行以揭秘“大企业创新崛起新思路”为主题，携手中国十余位知名CEO、CTO，深入法国、德国、荷兰三国，访问全球100强企业。涵盖汽车、时尚、金融、电子、零售、制造多个产业，涉及人工智能、VR、AR、金融科技、物联网、区块链、云计算众多热门领域。以企业最佳实践为案例，通过一系列的分析讨论，推动中国企业创新转型、技术升级，从而使自己的企业和团队解决实际问题，在战略方向和技术水平等多方面不断得到改进和发展，在激烈的全球竞争中拉开距离脱颖而出。</p></blockquote><p>目前确定的嘉宾名单：</p><p><br></p><p>魏红梅 &nbsp; 法国巴黎银行创新中心亚太区／总经理&nbsp;<br></p><p>平苹 &nbsp; &nbsp; &nbsp;成为资本／董事总经理&nbsp;</p><p>霍泰稳 &nbsp; 极客邦科技 ／创始人</p><p>周炜 &nbsp; &nbsp; &nbsp; XNode创极无限／创始人 &amp; CEO&nbsp;</p><p>冯大辉 &nbsp; 无码科技／创始人 &amp; 技术专家&nbsp;</p><p>李晓冬 &nbsp; 长虹／软件与服务中心副总经理 &amp; 技术专家&nbsp;</p><p>陆继军 &nbsp; &nbsp;全国高校技术市场／总经理</p><p>于浩 &nbsp; &nbsp; &nbsp; 迅达云／CEO&nbsp;</p><p>朱赟 &nbsp; &nbsp; &nbsp; Airbnb／高级工程师（Tech Lead）&nbsp;</p><p>林文 &nbsp; &nbsp; &nbsp; 高盛香港／技术VP&nbsp;</p><p>刘海锋 &nbsp; 京东／京东商城总架构师&nbsp;</p><p>徐晨 &nbsp; &nbsp; &nbsp;戈壁创投／管理合伙人</p><p>池建强 &nbsp; 极客邦科技／总裁 &amp; 技术专家&nbsp;</p><p>庄剑伟 &nbsp; 普华永道全球金融服务创新中心／亚太区／总经理&nbsp;</p><p>许式伟 &nbsp; 七牛／CEO &amp; 技术专家&nbsp;</p><p>姜梦笔 &nbsp; 金杜律师事务所合伙人 / 金杜创新委员会负责人</p><p>陈强 &nbsp; &nbsp; &nbsp; 鸵鸟电台／创始人</p><p><br></p><p>更多详情，请点击「阅读原文」。</p><p><br></p><p><img src="/AngelaTalk/images/50068761b12ca9c05728c04ad551781ec550f7e8.jpeg" style="width: 770px !important; height: 427.778px !important;"></p><p><br></p><hr/><a href="http://mp.weixin.qq.com/s?timestamp=1494850157&src=3&ver=1&signature=4I3jFq9pbfB-s2UPACb8j-sMu76BjfF9vz8Yzmzp69FAJLO1hMcQ89tJaW5WQf2WlKt8VY9ymf7V86LgOEs5AvEth77TCg*TDpxiI-ZFW*pWi0V38SeyyxF0ApBci5tRg2k7L2hhdnQIjiwtrhAOkw5f0Vgd3qD5rjaRgS2JacM=">微信地址</a> | <a href="http://www.chinatechday.com/2017eur">阅读原文</a>
{% endraw  %}

