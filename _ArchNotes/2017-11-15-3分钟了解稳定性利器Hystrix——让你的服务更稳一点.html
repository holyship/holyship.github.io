---
title: 3分钟了解稳定性利器Hystrix——让你的服务更稳一点
author: 周强
wechat_source: >-
  http://mp.weixin.qq.com/s?timestamp=1512886763&src=3&ver=1&signature=0dsH*cvrb7sDcdE*f0PtKJUDUFKlbb6VywqjlK3uTSWtr8RVx-1LemRqytQdjf*jBPkUjuP20fZj2d2CNyttCD6lznnI11ASyh3S0YoAvbeya4MwLWYa-SzFDurOzw-nLSOJP47JphdZC4djUg10BacEhedqosC4L9M9FK9UkcI=
date: '2017-11-15 00:00:00 +0000'

---

{% raw  %}
<section class="" data-tools="135编辑器" data-id="86134"><section><blockquote><p><strong><span style="font-size: 14px;">活动预告：</span></strong><strong><span style="font-size: 14px;">12月22~23，GIAC全球互联网架构大会将于上海举行，参看文末了解更多详情。</span></strong></p></blockquote><p><br></p></section><section style="max-width: 100%;text-align: center;box-sizing: border-box !important;word-wrap: break-word !important;"><p style="padding-right: 10px;padding-left: 10px;max-width: 100%;box-sizing: border-box;display: inline-block;background-color: rgb(254, 254, 254);word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 28px;box-sizing: border-box !important;word-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;">1</strong></span></p><section style="margin-top: -1.2em;margin-bottom: 0.65em;max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"><section data-width="20%" style="margin-right: auto;margin-left: auto;max-width: 100%;box-sizing: border-box;border-top: 1px solid rgb(33, 33, 34);border-right-color: rgb(33, 33, 34);border-bottom-color: rgb(33, 33, 34);border-left-color: rgb(33, 33, 34);width: 134px;word-wrap: break-word !important;"></section></section><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;color: rgb(84, 141, 212);box-sizing: border-box !important;word-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;">为什么要用Hystrix</strong></span></p></section></section><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 14px;box-sizing: border-box !important;word-wrap: break-word !important;"></span></p><p><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 14px;box-sizing: border-box !important;word-wrap: break-word !important;">在分布式服务环境下，服务之间的调用关系变得错综复杂，你是否担心依赖的服务延迟导致自己的服务也被拖跨呢？是否在苦苦思考如何优雅的对依赖服务进行异步调用呢？是否希望当流量高峰时自动进行服务降级避免把自己线程耗尽而宕机？<strong style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;">以上的问题，Hystrix能有效的解决。</strong></span></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 14px;box-sizing: border-box !important;word-wrap: break-word !important;"></span></p><section class="" data-tools="135编辑器" data-id="86134" style="max-width: 100%;box-sizing: border-box;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);border-width: 0px;border-style: none;border-color: initial;word-wrap: break-word !important;"><section style="max-width: 100%;text-align: center;box-sizing: border-box !important;word-wrap: break-word !important;"><section style="padding-right: 10px;padding-left: 10px;max-width: 100%;box-sizing: border-box;display: inline-block;background-color: rgb(254, 254, 254);word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 28px;box-sizing: border-box !important;word-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;">2</strong></span></section><section style="margin-top: -1.2em;margin-bottom: 0.65em;max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"><section data-width="20%" style="margin-right: auto;margin-left: auto;max-width: 100%;box-sizing: border-box;border-top: 1px solid rgb(33, 33, 34);border-right-color: rgb(33, 33, 34);border-bottom-color: rgb(33, 33, 34);border-left-color: rgb(33, 33, 34);width: 134px;word-wrap: break-word !important;"></section></section><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;color: rgb(84, 141, 212);box-sizing: border-box !important;word-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;">什么是Hystrix</span></strong></span></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;word-wrap: break-word !important;"><br></p></section></section><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 14px;box-sizing: border-box !important;word-wrap: break-word !important;"></span></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);text-align: center;box-sizing: border-box !important;word-wrap: break-word !important;"><img src="http://mmbiz.qpic.cn/mmbiz_png/NIoply441qAWsib7W7rtEziaJ8YWSqZKPdv9fSAovaA4BeuLfdXcQjVnALeHM52ybxGKcz0TC15lx9TsjdEVregw/640?wx_fmt=png" style="box-sizing: border-box !important; word-wrap: break-word !important; visibility: visible !important; width: 316px !important; height: 115px !important;"></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);text-align: right;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;color: rgb(136, 136, 136);font-size: 14px;text-align: center;box-sizing: border-box !important;word-wrap: break-word !important;">【注*】</span></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);text-align: center;box-sizing: border-box !important;word-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 14px;box-sizing: border-box !important;word-wrap: break-word !important;">Hystrix由Netflix于2011年创立的项目，最初是用于解决系统快速恢复的需求，其特性能保证在分布式服务中，防止服务失败引起的级联失败，项目的熔断机制能够使依赖服务的调用快速失败并且自动恢复，有效避免对失败的服务进行请求。同时对每个接口进行线程池隔离（或按信号量隔离），避免因为高峰流量或服务延迟导致线程耗尽而宕机。</span></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 14px;box-sizing: border-box !important;word-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></span></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 14px;box-sizing: border-box !important;word-wrap: break-word !important;"></span></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);text-align: center;box-sizing: border-box !important;word-wrap: break-word !important;"><img src="http://mmbiz.qpic.cn/mmbiz_png/NIoply441qAWsib7W7rtEziaJ8YWSqZKPdmKsAvlZ6HtkpHaibYicTc2jS4V5ku0XIv2hQ3DSEJC8LXlWmPeiaCvJWw/640?wx_fmt=png" style="box-sizing: border-box !important; word-wrap: break-word !important; visibility: visible !important; width: 441px !important; height: 401px !important;"></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);text-align: right;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;color: rgb(136, 136, 136);font-size: 14px;text-align: center;box-sizing: border-box !important;word-wrap: break-word !important;">【注*】</span></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);text-indent: 28px;text-align: center;box-sizing: border-box !important;word-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></p><p><br></p><section class="" data-tools="135编辑器" data-id="86134" style="max-width: 100%;box-sizing: border-box;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);border-width: 0px;border-style: none;border-color: initial;word-wrap: break-word !important;"><section style="max-width: 100%;text-align: center;box-sizing: border-box !important;word-wrap: break-word !important;"><section style="padding-right: 10px;padding-left: 10px;max-width: 100%;box-sizing: border-box;display: inline-block;background-color: rgb(254, 254, 254);word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 28px;box-sizing: border-box !important;word-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;">3</strong></span></section><section style="margin-top: -1.2em;margin-bottom: 0.65em;max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"><section data-width="20%" style="margin-right: auto;margin-left: auto;max-width: 100%;box-sizing: border-box;border-top: 1px solid rgb(33, 33, 34);border-right-color: rgb(33, 33, 34);border-bottom-color: rgb(33, 33, 34);border-left-color: rgb(33, 33, 34);width: 134px;word-wrap: break-word !important;"></section></section><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;color: rgb(84, 141, 212);box-sizing: border-box !important;word-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;">Hystrix入门介绍</strong></span></p></section></section><p><br></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 14px;box-sizing: border-box !important;word-wrap: break-word !important;">Hystrix使用HystrixCommand和HystrixObservableCommand进行对调用接口的封装，从而使接口的调用自动实现了线程隔离以及调用熔断机制，通过执行execute()&nbsp;或者queue()&nbsp;就能完成接口的同步或者异步调用。使用上手相当轻松，那么我们就先以一个简单程序来认识Hystrix：</span></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 14px;box-sizing: border-box !important;word-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></span></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;text-indent: 0em;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 14px;box-sizing: border-box !important;word-wrap: break-word !important;">a)&nbsp;项目加入Hystrix依赖</span></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);text-indent: 2em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 14px;box-sizing: border-box !important;word-wrap: break-word !important;">&nbsp;</span></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);text-align: center;box-sizing: border-box !important;word-wrap: break-word !important;"><img src="http://mmbiz.qpic.cn/mmbiz_png/NIoply441qAWsib7W7rtEziaJ8YWSqZKPdrgibwJdf9o3hiaf3ACldakOuKKbj0kKWmmMIUbSA7rbHwGIvmnQSrX5Q/640?wx_fmt=png" style="box-sizing: border-box !important; word-wrap: break-word !important; visibility: visible !important; width: 264px !important; height: 86px !important;"></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);text-indent: 2em;box-sizing: border-box !important;word-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 14px;box-sizing: border-box !important;word-wrap: break-word !important;"></span></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;text-indent: 0em;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 14px;box-sizing: border-box !important;word-wrap: break-word !important;">b)&nbsp;创建一个用来被调用的方法, HelloWorldService</span></p><p style="margin-left: 28px;max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);text-indent: 28px;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 11px;box-sizing: border-box !important;word-wrap: break-word !important;">&nbsp;</span></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);text-align: center;box-sizing: border-box !important;word-wrap: break-word !important;"><img src="http://mmbiz.qpic.cn/mmbiz_png/NIoply441qAWsib7W7rtEziaJ8YWSqZKPd932jToCB8zBk4WrNaOA4wVuRC7FiaDmL3M03YcZIbKAN72VKCMLL4iaQ/640?wx_fmt=png" style="box-sizing: border-box !important; word-wrap: break-word !important; visibility: visible !important; width: 263px !important; height: 118px !important;"></p><p style="margin-left: 28px;max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);text-indent: 28px;box-sizing: border-box !important;word-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 11px;box-sizing: border-box !important;word-wrap: break-word !important;"></span></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;text-indent: 0em;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 14px;box-sizing: border-box !important;word-wrap: break-word !important;">c)&nbsp;创建一个使用HystrixCommand包装的调用, HelloWorldInvoker</span></p><p style="margin-left: 28px;max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);text-indent: 28px;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 11px;box-sizing: border-box !important;word-wrap: break-word !important;">&nbsp;</span></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);text-align: center;box-sizing: border-box !important;word-wrap: break-word !important;"><img src="http://mmbiz.qpic.cn/mmbiz_png/NIoply441qAWsib7W7rtEziaJ8YWSqZKPdrBibml85HmK434CUJq0ib3yWtFBZrFSjkmnXTad7MFx6kf8QWLxSiaZibQ/640?wx_fmt=png" style="box-sizing: border-box !important; word-wrap: break-word !important; visibility: visible !important; width: 389px !important; height: 213px !important;"></p><p style="margin-left: 28px;max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);text-indent: 28px;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 11px;box-sizing: border-box !important;word-wrap: break-word !important;"></span><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;text-indent: 0em;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 14px;box-sizing: border-box !important;word-wrap: break-word !important;">d)&nbsp;进行调用测试</span></p><p style="margin-left: 28px;max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);text-indent: 28px;box-sizing: border-box !important;word-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 11px;box-sizing: border-box !important;word-wrap: break-word !important;">&nbsp;</span></strong></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);text-align: center;box-sizing: border-box !important;word-wrap: break-word !important;"><img src="http://mmbiz.qpic.cn/mmbiz_png/NIoply441qAWsib7W7rtEziaJ8YWSqZKPdib5E7W4Uj3hyBzfmTyK2iavCicCPh2f4hBxxSBkxoiaCtCjZU3zBy6Ql7Q/640?wx_fmt=png" style="box-sizing: border-box !important; word-wrap: break-word !important; visibility: visible !important; width: 382px !important; height: 162px !important;"></p><p style="margin-left: 28px;max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);text-indent: 28px;box-sizing: border-box !important;word-wrap: break-word !important;"><br></p><section class="" data-tools="135编辑器" data-id="86134" style="max-width: 100%;box-sizing: border-box;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);border-width: 0px;border-style: none;border-color: initial;word-wrap: break-word !important;"><section style="max-width: 100%;text-align: center;box-sizing: border-box !important;word-wrap: break-word !important;"><section style="padding-right: 10px;padding-left: 10px;max-width: 100%;box-sizing: border-box;display: inline-block;background-color: rgb(254, 254, 254);word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 28px;box-sizing: border-box !important;word-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;">4</strong></span></section><section style="margin-top: -1.2em;margin-bottom: 0.65em;max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"><section data-width="20%" style="margin-right: auto;margin-left: auto;max-width: 100%;box-sizing: border-box;border-top: 1px solid rgb(33, 33, 34);border-right-color: rgb(33, 33, 34);border-bottom-color: rgb(33, 33, 34);border-left-color: rgb(33, 33, 34);width: 134px;word-wrap: break-word !important;"></section></section><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;color: rgb(84, 141, 212);box-sizing: border-box !important;word-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;">Hystrix核心框架(HystrixCommand)</strong></span></p></section></section><p><br></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);text-indent: 28px;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 11px;box-sizing: border-box !important;word-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></span></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 14px;box-sizing: border-box !important;word-wrap: break-word !important;">HystrixCommand是框架的流程核心类，主要承担封装接口的调用执行，将接口调用进行命令分组，调用执行进行线程池隔离，请求的结果缓存命中，判断熔断，以及执行错误或熔断后的结果FallBack机制流程，主要工作流程如下图：</span></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 14px;box-sizing: border-box !important;word-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></span></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);text-align: center;box-sizing: border-box !important;word-wrap: break-word !important;"><img src="http://mmbiz.qpic.cn/mmbiz_png/NIoply441qAWsib7W7rtEziaJ8YWSqZKPd3yyx5Ma4yOPRnbec7JUkicGKzXfJOtX0QBT0U6EdmWHLqs3T3z44VRw/640?wx_fmt=png" style="box-sizing: border-box !important; word-wrap: break-word !important; visibility: visible !important; width: 505px !important; height: 245px !important;"></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);text-align: right;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;color: rgb(136, 136, 136);font-size: 14px;text-align: center;box-sizing: border-box !important;word-wrap: break-word !important;">【注*】</span></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;text-shadow: rgb(255, 255, 255) 2px 2px 10px;box-sizing: border-box !important;word-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 14px;box-sizing: border-box !important;word-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></span></strong></span></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;text-shadow: rgb(255, 255, 255) 2px 2px 10px;box-sizing: border-box !important;word-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 14px;box-sizing: border-box !important;word-wrap: break-word !important;">4.1 HystrixCommand创建</span></strong></span></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 14px;text-shadow: rgb(84, 141, 212) 2px 2px 10px;box-sizing: border-box !important;word-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></span></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 14px;box-sizing: border-box !important;word-wrap: break-word !important;">HystrixCommand创建需要两个必填参数：HystrixCommandGroupKey和HystrixThreadPoolKey，HystrixCommandGroupKey用于进行command分组，便于调用统计。HystrixThreadPoolKey用于线程池隔离，相同的线程池key的接口调用，将会使用相同的线程池，线程池大小默认为10个线程，其余参数将会一并初始化。</span></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 14px;box-sizing: border-box !important;word-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></span></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);text-indent: 28px;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 11px;box-sizing: border-box !important;word-wrap: break-word !important;"></span></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);text-align: center;box-sizing: border-box !important;word-wrap: break-word !important;"><img src="http://mmbiz.qpic.cn/mmbiz_png/NIoply441qAWsib7W7rtEziaJ8YWSqZKPdoQGltPLq3wKibm9ZedhHiaMHuflHiaMqjwgN2rVkhSum4Z1nB3ib8gYvtw/640?wx_fmt=png" style="box-sizing: border-box !important; word-wrap: break-word !important; visibility: visible !important; width: 464px !important; height: 156px !important;"></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);text-indent: 28px;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 11px;box-sizing: border-box !important;word-wrap: break-word !important;">&nbsp;</span><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;text-shadow: rgb(255, 255, 255) 2px 2px 10px;box-sizing: border-box !important;word-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 14px;box-sizing: border-box !important;word-wrap: break-word !important;">4.2 HystrixCommand执行</span></strong></span></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 14px;box-sizing: border-box !important;word-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></span></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 14px;box-sizing: border-box !important;word-wrap: break-word !important;">分别可使用execute()，queue()，observe()，toObservable()完成接口调用并包装上述工作全流程,&nbsp;四种执行方式区别如下：</span></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 14px;box-sizing: border-box !important;word-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></span></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;text-indent: 0em;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 14px;color: rgb(136, 136, 136);box-sizing: border-box !important;word-wrap: break-word !important;">a)&nbsp;execute：command执行后进行同步等待，直到结果返回</span></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;text-indent: 0em;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 14px;color: rgb(136, 136, 136);box-sizing: border-box !important;word-wrap: break-word !important;">b)&nbsp;queue：command执行后返回一个Future对象，Future对象可以进行异步的结果获取</span></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;text-indent: 0em;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 14px;color: rgb(136, 136, 136);box-sizing: border-box !important;word-wrap: break-word !important;">c)&nbsp;observe：command立即执行，进行接口调用后并返回observable，外部subscriber进行数据读取</span></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;text-indent: 0em;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 14px;color: rgb(136, 136, 136);box-sizing: border-box !important;word-wrap: break-word !important;">d)&nbsp;toObservable：command不会立即执行，接口调用仅当有外部subscriber进行订阅后，接口才会被调用</span></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);text-indent: 2em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 14px;box-sizing: border-box !important;word-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></span></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 14px;box-sizing: border-box !important;word-wrap: break-word !important;">前三种执行方式都是toObservable的变种，command底层均是执行toObservable方法得到一个Observable对象，然后该对象被订阅的Subscriber进行结果获取。过程如下：</span></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 14px;box-sizing: border-box !important;word-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></span></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);text-align: center;box-sizing: border-box !important;word-wrap: break-word !important;"><img src="http://mmbiz.qpic.cn/mmbiz_png/NIoply441qAWsib7W7rtEziaJ8YWSqZKPdbLIZ3YDPho5fZcmAS8k2ALMsMbs4AoWLznNibFpcUpUvRvGxw7100vQ/640?wx_fmt=png" style="box-sizing: border-box !important; word-wrap: break-word !important; visibility: visible !important; width: 480px !important; height: 157px !important;"></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);text-align: right;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;color: rgb(136, 136, 136);font-size: 14px;text-align: center;box-sizing: border-box !important;word-wrap: break-word !important;">【注*】</span></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);text-align: center;box-sizing: border-box !important;word-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></p><p><br></p><section class="" data-tools="135编辑器" data-id="86134" style="max-width: 100%;box-sizing: border-box;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);border-width: 0px;border-style: none;border-color: initial;word-wrap: break-word !important;"><section style="max-width: 100%;text-align: center;box-sizing: border-box !important;word-wrap: break-word !important;"><section style="padding-right: 10px;padding-left: 10px;max-width: 100%;box-sizing: border-box;display: inline-block;background-color: rgb(254, 254, 254);word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 28px;box-sizing: border-box !important;word-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;">5</strong></span></section><section style="margin-top: -1.2em;margin-bottom: 0.65em;max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"><section data-width="20%" style="margin-right: auto;margin-left: auto;max-width: 100%;box-sizing: border-box;border-top: 1px solid rgb(33, 33, 34);border-right-color: rgb(33, 33, 34);border-bottom-color: rgb(33, 33, 34);border-left-color: rgb(33, 33, 34);width: 134px;word-wrap: break-word !important;"></section></section><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;color: rgb(84, 141, 212);box-sizing: border-box !important;word-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;">Hystrix核心框架(HystrixCircuitBreaker)</strong></span></p></section></section><p><br></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 14px;box-sizing: border-box !important;word-wrap: break-word !important;">5.1&nbsp;熔断器HystrixCircuitBreaker，是保证调用接口延迟或失败情况下自动熔断，保证服务不被外部调用的失败而拖跨。熔断器和每个HystrixCommand绑定，为每个独立的command进行失败计数和熔断状态控制。在创建command时对熔断器进行初始化</span></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 14px;box-sizing: border-box !important;word-wrap: break-word !important;">&nbsp;</span></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);text-align: center;box-sizing: border-box !important;word-wrap: break-word !important;"><img src="http://mmbiz.qpic.cn/mmbiz_png/NIoply441qAWsib7W7rtEziaJ8YWSqZKPduaicTzJOXhZ5Eoibj7L7x8SKKF3gUv9DUtEyUDe4sjRHRKue5MJtw2mQ/640?wx_fmt=png" style="box-sizing: border-box !important; word-wrap: break-word !important; visibility: visible !important; width: 509px !important; height: 148px !important;"></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 14px;box-sizing: border-box !important;word-wrap: break-word !important;"></span><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 14px;box-sizing: border-box !important;word-wrap: break-word !important;">5.2&nbsp;HystrixCircuitBreaker&nbsp;通过HealthCountsStream维护一个command调用的健康计数器，如果计数器的线程堆积数大于允许的阙值或者调用失败比例大于允许的百分比，则进行熔断处理，后续接口调用均会被短路并降级调用fallBack()返回。</span></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 14px;box-sizing: border-box !important;word-wrap: break-word !important;">&nbsp;</span></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;"><img src="http://mmbiz.qpic.cn/mmbiz_png/NIoply441qAWsib7W7rtEziaJ8YWSqZKPdCibERmTHBWMicRUmialuSM4Rta5E3ibKxkymFJRFChicI9FTrvJQutTfGDA/640?wx_fmt=png" style="box-sizing: border-box !important; word-wrap: break-word !important; visibility: visible !important; width: 707px !important; height: 433px !important;"></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 14px;box-sizing: border-box !important;word-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></span></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 14px;box-sizing: border-box !important;word-wrap: break-word !important;">5.3 HystrixCircuitBreaker将在熔断后的一段时间内，允许部分请求进行接口调用，若返回接口正确，则熔断器将关闭，服务进行正常请求，若此时接口调用仍旧失败，则熔断器保持熔断，并重新进行半熔断状态倒计时。</span></p><p><br></p><section class="" data-tools="135编辑器" data-id="86134" style="max-width: 100%;box-sizing: border-box;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);border-width: 0px;border-style: none;border-color: initial;word-wrap: break-word !important;"><section style="max-width: 100%;text-align: center;box-sizing: border-box !important;word-wrap: break-word !important;"><section style="padding-right: 10px;padding-left: 10px;max-width: 100%;box-sizing: border-box;display: inline-block;background-color: rgb(254, 254, 254);word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 28px;box-sizing: border-box !important;word-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;">6</strong></span></section><section style="margin-top: -1.2em;margin-bottom: 0.65em;max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"><section data-width="20%" style="margin-right: auto;margin-left: auto;max-width: 100%;box-sizing: border-box;border-top: 1px solid rgb(33, 33, 34);border-right-color: rgb(33, 33, 34);border-bottom-color: rgb(33, 33, 34);border-left-color: rgb(33, 33, 34);width: 134px;word-wrap: break-word !important;"></section></section><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;color: rgb(84, 141, 212);box-sizing: border-box !important;word-wrap: break-word !important;">Hystrix核心框架(RequestCache)</span></strong></span></p></section></section><p><br></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 14px;box-sizing: border-box !important;word-wrap: break-word !important;"></span></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 14px;box-sizing: border-box !important;word-wrap: break-word !important;">接口调用中，如果不是高频次修改的数据查询结果，可以使用请求缓存来减少服务调用的网络开销，Hystrix会基于调用的key进行结果命中，当能匹配到结果是则直接返回结果而避免进行接口调用。</span></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 14px;box-sizing: border-box !important;word-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></span></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 14px;box-sizing: border-box !important;word-wrap: break-word !important;">a)&nbsp;请求缓存是基于command中的getCacheKey()方法判断是否是相同请求，所以需重写该方法</span></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 14px;box-sizing: border-box !important;word-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></span></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);text-align: center;box-sizing: border-box !important;word-wrap: break-word !important;"><img src="http://mmbiz.qpic.cn/mmbiz_png/NIoply441qAWsib7W7rtEziaJ8YWSqZKPdR0OMwZtHe5ib38evaHl4gJeApyib2z14kP2Rbbn8rKtdrJUxvGFXIkng/640?wx_fmt=png" style="box-sizing: border-box !important; word-wrap: break-word !important; visibility: visible !important; width: 479px !important; height: 330px !important;"></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 14px;box-sizing: border-box !important;word-wrap: break-word !important;"></span><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 14px;box-sizing: border-box !important;word-wrap: break-word !important;">b)&nbsp;确保在调用之前开启HystrixRequestContext，可以使用统一的拦截器来进行拦截开启。</span></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 14px;box-sizing: border-box !important;word-wrap: break-word !important;">&nbsp;</span></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);text-align: center;box-sizing: border-box !important;word-wrap: break-word !important;"><img src="http://mmbiz.qpic.cn/mmbiz_png/NIoply441qAWsib7W7rtEziaJ8YWSqZKPdYYQMBBmLhnW6FklXIMunT4VE5LzQvnoEQ5kY0uNTAJudy5c8gonjxg/640?wx_fmt=png" style="box-sizing: border-box !important; word-wrap: break-word !important; visibility: visible !important; width: 500px !important; height: 255px !important;"></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);text-align: center;box-sizing: border-box !important;word-wrap: break-word !important;"><br></p><section class="" data-tools="135编辑器" data-id="86134" style="max-width: 100%;box-sizing: border-box;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);border-width: 0px;border-style: none;border-color: initial;word-wrap: break-word !important;"><section style="max-width: 100%;text-align: center;box-sizing: border-box !important;word-wrap: break-word !important;"><section style="padding-right: 10px;padding-left: 10px;max-width: 100%;box-sizing: border-box;display: inline-block;background-color: rgb(254, 254, 254);word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 28px;box-sizing: border-box !important;word-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;">7</strong></span></section><section style="margin-top: -1.2em;margin-bottom: 0.65em;max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"><section data-width="20%" style="margin-right: auto;margin-left: auto;max-width: 100%;box-sizing: border-box;border-top: 1px solid rgb(33, 33, 34);border-right-color: rgb(33, 33, 34);border-bottom-color: rgb(33, 33, 34);border-left-color: rgb(33, 33, 34);width: 134px;word-wrap: break-word !important;"></section></section><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;word-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;color: rgb(84, 141, 212);box-sizing: border-box !important;word-wrap: break-word !important;">Hystrix核心框架(FallBack)</span></strong></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;word-wrap: break-word !important;"><br></p></section></section><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 14px;box-sizing: border-box !important;word-wrap: break-word !important;">当接口调用超时或者直接出现异常，框架将对接口调用进行降级处理，调用fallBack进行结果返回。接口调用的降级只需要在HystrixCommand中重写getFallBack()方法，方法同接口调用一样的返回，用于直接书写接口返回，或者在fallBack中继续调用HystrixCommand进行接口的降级调用</span></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 14px;box-sizing: border-box !important;word-wrap: break-word !important;">&nbsp;</span></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);text-align: center;box-sizing: border-box !important;word-wrap: break-word !important;"><img src="http://mmbiz.qpic.cn/mmbiz_png/NIoply441qAWsib7W7rtEziaJ8YWSqZKPd1G8j4CRddqlgQu9AhkKHIomYTdbGWg63KOSrVNXkn3aQSzngI1o0bA/640?wx_fmt=png" style="box-sizing: border-box !important; word-wrap: break-word !important; visibility: visible !important; width: 563px !important; height: 346px !important;"></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;"><br></p><section class="" data-tools="135编辑器" data-id="86134" style="max-width: 100%;box-sizing: border-box;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);border-width: 0px;border-style: none;border-color: initial;word-wrap: break-word !important;"><section style="max-width: 100%;text-align: center;box-sizing: border-box !important;word-wrap: break-word !important;"><section style="padding-right: 10px;padding-left: 10px;max-width: 100%;box-sizing: border-box;display: inline-block;background-color: rgb(254, 254, 254);word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 28px;box-sizing: border-box !important;word-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;">8</strong></span></section><section style="margin-top: -1.2em;margin-bottom: 0.65em;max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"><section data-width="20%" style="margin-right: auto;margin-left: auto;max-width: 100%;box-sizing: border-box;border-top: 1px solid rgb(33, 33, 34);border-right-color: rgb(33, 33, 34);border-bottom-color: rgb(33, 33, 34);border-left-color: rgb(33, 33, 34);width: 134px;word-wrap: break-word !important;"></section></section><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;color: rgb(84, 141, 212);font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;">总结</strong></span></p></section></section><p><br></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 14px;box-sizing: border-box !important;word-wrap: break-word !important;"></span></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 14px;box-sizing: border-box !important;word-wrap: break-word !important;">Hystrix对于接口调用具有很好的保护，能在多服务依赖的分布式系统中，有效的提供应用的可用性，并且对失败应用进行熔断和恢复检查，让应用在复杂的环境中也能各种稳。</span></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 14px;box-sizing: border-box !important;word-wrap: break-word !important;">&nbsp;</span></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 14px;box-sizing: border-box !important;word-wrap: break-word !important;">注* :&nbsp;图片转载于Hystrix的项目wiki,&nbsp;https://github.com/Netflix/Hystrix/wiki</span></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></p><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);text-align: center;box-sizing: border-box !important;word-wrap: break-word !important;"><img src="http://mmbiz.qpic.cn/mmbiz_png/NIoply441qAWsib7W7rtEziaJ8YWSqZKPdHX7tAsp9EdJ0nLusPBLBU4LBtibApmmGvzHSPdtR8BicAFBHnYDYGrLw/640?wx_fmt=png" style="box-sizing: border-box !important; word-wrap: break-word !important; visibility: visible !important; width: 770px !important; height: 438.103px !important;"></p><p><span style="max-width: 100%;color: rgb(136, 136, 136);font-size: 14px;box-sizing: border-box !important;word-wrap: break-word !important;">本文作者周强，由点融黑帮公众号（微信id: DianrongMafia）授权高可用架构发表，技术原创及架构实践文章，欢迎通过公众号菜单「联系我们」进行投稿。</span></p><p><span style="max-width: 100%;color: rgb(136, 136, 136);font-size: 14px;box-sizing: border-box !important;word-wrap: break-word !important;"><br></span></p><p style="text-align: center;"><strong><span style="font-size: 20px;">活动预告</span></strong></p><p><span style="max-width: 100%;color: rgb(136, 136, 136);font-size: 14px;box-sizing: border-box !important;word-wrap: break-word !important;"><br></span></p><p style="text-align: justify;"><span style="max-width: 100%;color: rgb(136, 136, 136);font-size: 14px;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="color: rgb(62, 62, 62);font-size: 15px;text-align: justify;background-color: rgb(255, 255, 255);">12月22~23日，GIAC 全球互联网架构大会将于上海举行。GIAC 全球互联网架构大会 是高可用架构技术社区推广的面向架构师、技术负责人及高端技术从业人员的技术架构大会。GIAC于2016年12月成功举办了第一届，而今年的 GIAC 已经有腾讯、阿里巴巴、百度、平安、饿了么、携程、七牛、蚂蚁金服、罗辑思维、摩拜、唯品会，LinkedIn, Pivotal, Mesosphere, AdMaster, Hulu 等公司专家出席。</span></span></p><p><span style="max-width: 100%;color: rgb(136, 136, 136);font-size: 14px;box-sizing: border-box !important;word-wrap: break-word !important;"><br></span></p><p><span style="max-width: 100%;color: rgb(136, 136, 136);font-size: 14px;box-sizing: border-box !important;word-wrap: break-word !important;"><strong style="max-width: 100%;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 14px;box-sizing: border-box !important;word-wrap: break-word !important;">参加 GIAC，盘点年底最新技术，目前单人购买优惠600元，多人购买有更多优惠，</span></strong><strong style="max-width: 100%;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 14px;box-sizing: border-box !important;word-wrap: break-word !important;">点击阅读原文了解大会详细议程。</span></strong></span></p><p><span style="max-width: 100%;color: rgb(136, 136, 136);font-size: 14px;box-sizing: border-box !important;word-wrap: break-word !important;"></span></p><p><img src="https://mmbiz.qpic.cn/mmbiz_png/8XkvNnTiapONVcFx7zpLwgml8sAsL4XkUyP28r6ibkEqIqXTZPDmqgjbaxI656hCB0A6vXwBWolIsU2hES2POZCA/0?wx_fmt=png" style="width: 770px !important; height: 340.078px !important;"></p><p><span style="max-width: 100%;color: rgb(136, 136, 136);font-size: 14px;box-sizing: border-box !important;word-wrap: break-word !important;"></span><br></p><hr/><a href="http://mp.weixin.qq.com/s?timestamp=1512886763&src=3&ver=1&signature=0dsH*cvrb7sDcdE*f0PtKJUDUFKlbb6VywqjlK3uTSWtr8RVx-1LemRqytQdjf*jBPkUjuP20fZj2d2CNyttCD6lznnI11ASyh3S0YoAvbeya4MwLWYa-SzFDurOzw-nLSOJP47JphdZC4djUg10BacEhedqosC4L9M9FK9UkcI=">微信地址</a> | <a href="https://2017.thegiac.com/schedule.html">阅读原文</a>
{% endraw  %}

