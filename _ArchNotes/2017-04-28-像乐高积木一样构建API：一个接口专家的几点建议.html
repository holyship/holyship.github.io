---
title: 像乐高积木一样构建API：一个接口专家的几点建议
author: Art Anthony
wechat_source: >-
  http://mp.weixin.qq.com/s?timestamp=1493342427&src=3&ver=1&signature=L9XD8GAQyzHEmNm3CARkqdiBak3LCAmIzPqaFlutSEzKVJEKz5KN5My*jr-6bBEedyFXj8pYJyJ0RJ0Mhavw8xJUoe3ltAEEm8*yRWaN9TYBauJiBvIGH*mx9HtO7eOOi2*qqLf1ylwXAjbf3JYjL26KmsML2dPsHb-W5ie9W-Q=
date: '2017-04-28 00:00:00 +0000'

---

{% raw  %}
<p><span style="font-size: 14px; color: rgb(136, 136, 136);">本文基于 Matthias Biehl 在 2016 Nordic API平台峰会的演讲，视频请参看 [9]</span></p><p><br></p><p>笔者之前写了很多篇关于 API 的文章 [1][2]，今天这篇将着重于如何结合业务模型来构建 API。<br><br>显然，这个话题对于不同的公司而言是完全不同的。在一些公司，API 是他们最核心的产品。然而对于大多数企业，API 并不被重视，就像业务的边缘产品。<br><br>来自 API University（http://www.api-university.com） 的 API 咨询师 Matthias Biehl 认为，对于业务发展，API 是一个非常关键的驱动因素，<strong>甚至直接影响公司的商业变现模型</strong>。</p><p><br></p><h2><strong><span style="font-size: 18px;">API 和乐高积木有什么相似之处？</span></strong></h2><p><strong><span style="font-size: 18px;"><br></span></strong></p><p>相信我们大多数人在儿童时期都喜欢玩乐高积木。乐高积木的真正乐趣和吸引力在于，尽管包装盒外面都带有示意图片，但你最终都可以随心所欲得搭出各种样子或造型。<br><br>引用前一篇文章[3]，“……对 API 的最佳解释就是它们像乐高积木一样……”。我们可以用创造性的方式来组合它们，而不用在意它们原本的设计和实现意图。<br><br>你可以发现很多 API 和乐高积木的相似之处：</p><p><br></p><ul class="list-paddingleft-2"><li><p><strong>标准化</strong>：通用、标准化的组件，作为基本的构建块（building blocks）；</p></li><li><p><strong>可用性</strong>：强调可用性，附有文档或使用说明；</p></li><li><p><strong>可定制</strong>：为不同功能使用不同的 API；</p></li><li><p><strong>创造性</strong>：能够组合不同的 API 来创造混搭的结果；</p></li></ul><p><br></p><blockquote><p>乐高和 API 都有超简单的界面/接口，并且借助这样简单的界面/接口，它可以非常直观、容易、快速得构建。</p></blockquote><p><br></p><p>虽然乐高和 API 一样可能附带示意图片或使用文档，大概描述了推荐玩法或用途，<strong>但真正令人兴奋的结果或收获恰恰是通过创造力产生的</strong>。<br><br>让我们仔细地思考下上述的提法。在很多情况下，API 的使用者构建出了 API 的构建者超出预期的服务或产品，API 使用者想要的，和 API 构建者认为使用者想要的，这二者之间通常有个断层。事实也确实如此，在 IoT 领域，我们使用 API 创造出了一些非常有创造性的使用场景[4]。</p><h2><br></h2><h2><span style="font-size: 18px;"><strong>API 和价值链</strong></span></h2><p><br></p><p>Matthias 建议，使用 API 创造价值的最简单的方法，就是看看 API 在价值链中适合或可能适用什么位置，也就是 API 在业务的哪方面会产生广泛影响。</p><p><br></p><blockquote><p>API 使用者的目标是将一个移动应用或者在线服务组合在一起，并将其提供给最终用户。</p></blockquote><p><br></p><p>以 Uber 为例，它依赖多种 API[5]：</p><p><br></p><ul class="list-paddingleft-2"><li><p>地图服务：Google 地图；</p></li><li><p>VoIP 和短信通知服务：Twilio；</p></li><li><p>支付服务：Braintree；</p></li><li><p>人脸识别：Microsoft Face API[6]</p></li></ul><p><br></p><p>API 的所有者不仅需要考虑他们的 API 可以直接用来做些什么，还要考虑一些潜在的组合下的场景。只有这样，他们才能确保 API 更易于使用和集成。这能帮助 API 使用者也就是应用程序开发人员更好地发挥创造性，也会使得 API 在价值链中价值最大化。</p><p><br></p><h2><span style="font-size: 18px;"><strong>API 和设计思维</strong></span></h2><p><br></p><p>Matthias 列出了 API 开发人员最关心的两个问题：<br></p><p><br></p><ul class="list-paddingleft-2"><li><p>我如何通过我的 API 赚钱？</p></li><li><p>我如何使我的 API 容易使用？</p></li></ul><p><br></p><p>同时，他也补充了一个他认为更应该关心的问题：<br></p><p><br></p><ul class="list-paddingleft-2"><li><p>我创建的 API 是否是开发人员真正需要的？</p></li></ul><p><br></p><p>可以看出来，后两个问题是解决第一个问题的关键所在。<br><br>就像产品开发中的需求分析一样，首先我们要了解开发人员真正需要的 API 是什么样，Matthias 建议可以遵循下面步骤：</p><p><br></p><p><img src="/ArchNotes/images/d692d1964430dcd00e7afafdc1fd8f8037c3508a.png" style="width: 770px !important; height: 433.125px !important;"></p><p><br></p><p>上图是 API 业务生命周期模型，看起来像很多 Lean Startup 中提到的模型。这样往复思考－尝试－验证－回顾的过程缓慢且充满坎坷，但是请记住 “没有任何有用的东西是在 Hackathon 上创造出来的”。</p><p><br></p><h2><span style="font-size: 18px;"><strong>API 和业务模型白板</strong></span></h2><p><br></p><p>一旦确定了 API 使用者的需求，就可以更容易地确定 API 适合的商业模式。这里我们建议使用业务模型白板（Business Model Canvas[7]）以可视化的方式来迭代执行整个模型。</p><p><br></p><p><img src="/ArchNotes/images/f1ee8949d6a77d9a7d7763c7c88c01c52a50f0b1.png" style="width: 770px !important; height: 544.715px !important;"></p><p><br></p><p>业务模型白板是一种与 Lean Startup 相关的方法论，它使用标准化模板以最简单的术语来定义和描述业务模式。<br><br>这里使用一个电信企业的例子，来展示如何使用业务模型白板来设计 API：</p><p><img src="/ArchNotes/images/0073f7756ac066507e7f3350d174b7cb21ed3065.jpeg" style="width: 770px !important; height: 513.133px !important;"></p><p><br></p><p>API 的业务模型由两部分组成：API 提供方的业务模型和 API 使用方的业务模型。这二者是紧密相连的，寻找 API 为使用方的业务模式提供的价值所在，能进一步帮助 API 提供方确定赚钱的方式。</p><p><br></p><h2><span style="font-size: 18px;"><strong>最后的想法</strong></span></h2><p><br></p><p>当前构建 API 的一个重要问题是，许多公司在考虑清楚 API 在价值链中的位置以及业务模型之前，就先将 API 与其产品一起构建出来。<br><br>正如所有商业人士都清楚的那样，在没有进行任何市场调查和规划前，就启动一个项目[8]，是一个非常错误的做法。<br><br>在规划新 API 时应关注这些问题：<br></p><p><br></p><ul class="list-paddingleft-2"><li><p>构建的 API 是否是开发人员所需要的？</p></li><li><p>如何构建一个可以解决这些需求的 API？</p></li></ul><p><br></p><p>好的 API 就像乐高积木：易于使用，小朋友喜爱它。如果你正在构建新的 API 或重构现有的 API，在你的桌面放一块乐高积木，希望它可以时刻提醒着你。</p><p><br></p><p><span style="font-size: 18px;"><strong>参考链接</strong></span></p><p><br></p><ul class="list-paddingleft-2" style="list-style-type: disc;"><li><p>[1] http://nordicapis.com/top-5-api-monetization-models/&nbsp;</p></li><li><p>[2]&nbsp;http://nordicapis.com/how-to-grow-and-profit-using-a-freemium-api-monetization-model/</p></li><li><p>[3]&nbsp;http://nordicapis.com/legos-api-strategy-resourcing-developers-building-business-case/</p></li><li><p>[4]&nbsp;http://nordicapis.com/the-power-of-unexpected-iot-apis/</p></li><li><p>[5] https://nordicapis.com/4-apps-rely-apis-survival/</p></li><li><p>[6]&nbsp;https://www.microsoft.com/cognitive-services/en-us/uber</p></li><li><p>[7]&nbsp;https://en.wikipedia.org/wiki/Business_Model_Canvas</p></li><li><p>[8]&nbsp;http://nordicapis.com/7-lessons-learned-building-an-api-startup/</p></li><li><p>[9]&nbsp;https://youtu.be/OioGGOU9RQc<br></p><p><br></p></li></ul><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background-color: rgb(255, 255, 255); text-align: center; box-sizing: border-box !important; word-wrap: break-word !important;"><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 20px; box-sizing: border-box !important; word-wrap: break-word !important;">推荐阅读</span></strong></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;"><br style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"></p><ul class="list-paddingleft-2" style="max-width: 100%; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;"><li><p><a href="http://mp.weixin.qq.com/s?__biz=MzAwMDU1MTE1OQ==&amp;mid=2653548504&amp;idx=1&amp;sn=45d644f561c5fbf1d8d782324a2a3239&amp;chksm=813a7e40b64df75675f8c5a9e3186fd0286a485ae7a5755c1987f15cf69634bed68d29059ae3&amp;scene=21#wechat_redirect" target="_blank" data_ue_src="http://mp.weixin.qq.com/s?__biz=MzAwMDU1MTE1OQ==&amp;mid=2653548504&amp;idx=1&amp;sn=45d644f561c5fbf1d8d782324a2a3239&amp;chksm=813a7e40b64df75675f8c5a9e3186fd0286a485ae7a5755c1987f15cf69634bed68d29059ae3&amp;scene=21#wechat_redirect" style="text-decoration: underline; font-size: 14px; color: rgb(0, 82, 255);"><span style="font-size: 14px; color: rgb(0, 82, 255);">如何设计API的限流(Rate Limit)功能：4种类型限流器图解</span></a></p></li><li><p><a href="http://mp.weixin.qq.com/s?__biz=MzAwMDU1MTE1OQ==&amp;mid=2653548321&amp;idx=1&amp;sn=e44e0717405865c1acb8a2f2788b9d56&amp;chksm=813a7eb9b64df7afacdb415dab29bcfb3d933a399c4070eb80b596b596ff8c65aefabe205d9d&amp;scene=21#wechat_redirect" target="_blank" data_ue_src="http://mp.weixin.qq.com/s?__biz=MzAwMDU1MTE1OQ==&amp;mid=2653548321&amp;idx=1&amp;sn=e44e0717405865c1acb8a2f2788b9d56&amp;chksm=813a7eb9b64df7afacdb415dab29bcfb3d933a399c4070eb80b596b596ff8c65aefabe205d9d&amp;scene=21#wechat_redirect" style="text-decoration: underline; font-size: 14px; color: rgb(0, 82, 255);"><span style="font-size: 14px; color: rgb(0, 82, 255);">从单体应用走向微服务:一次API Gateway升级的启示</span></a></p></li><li><p><a href="http://mp.weixin.qq.com/s?__biz=MzAwMDU1MTE1OQ==&amp;mid=2653548665&amp;idx=1&amp;sn=c0d489dcacd0c7c05e579ed74c9050c9&amp;chksm=813a61e1b64de8f7677783315c8f9a80cabe055c1473804fca7c9dce5d96401fbbe608135717&amp;scene=21#wechat_redirect" target="_blank" data_ue_src="http://mp.weixin.qq.com/s?__biz=MzAwMDU1MTE1OQ==&amp;mid=2653548665&amp;idx=1&amp;sn=c0d489dcacd0c7c05e579ed74c9050c9&amp;chksm=813a61e1b64de8f7677783315c8f9a80cabe055c1473804fca7c9dce5d96401fbbe608135717&amp;scene=21#wechat_redirect" style="text-decoration: underline; font-size: 14px; color: rgb(0, 82, 255);"><span style="font-size: 14px; color: rgb(0, 82, 255);">我们如何使用HAProxy实现单机200万SSL连接</span></a><br></p></li></ul><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;"><br style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; color: rgb(136, 136, 136); font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">本文作者 Art Anthony，由 James 翻译，转载请注明出处，技术原创及架构实践文章，欢迎通过公众号菜单「联系我们」进行投稿。</span><br style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; color: rgb(136, 136, 136); font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><br style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; line-height: 25.6px; text-align: center; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 18px; box-sizing: border-box !important; word-wrap: break-word !important;"><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;">高可用架构</strong></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; line-height: 25.6px; text-align: center; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 18px; box-sizing: border-box !important; word-wrap: break-word !important;"><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;">改变互联网的构建方式</strong></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; line-height: 25.6px; text-align: center; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 18px; box-sizing: border-box !important; word-wrap: break-word !important;"><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><img src="/ArchNotes/images/f6d330d516dce1ccc8afa78eadcccb86f8851363.jpeg" style="box-sizing: border-box !important; word-wrap: break-word !important; visibility: visible !important; width: 200px !important; height: 200px !important;"><br style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"></strong></span><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">长按二维码 关注「高可用架构」公众号</span></p><p><br></p><hr/><a href="http://mp.weixin.qq.com/s?timestamp=1493342427&src=3&ver=1&signature=L9XD8GAQyzHEmNm3CARkqdiBak3LCAmIzPqaFlutSEzKVJEKz5KN5My*jr-6bBEedyFXj8pYJyJ0RJ0Mhavw8xJUoe3ltAEEm8*yRWaN9TYBauJiBvIGH*mx9HtO7eOOi2*qqLf1ylwXAjbf3JYjL26KmsML2dPsHb-W5ie9W-Q=">微信地址</a> | <a href="http://nordicapis.com/great-apis-like-lego-bricks/"/>阅读原文</a>
{% endraw  %}

