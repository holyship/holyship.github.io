---
title: 'Akka 使用系列之三: 层次结构'
author: lietal
date: '2017-02-28 00:00:00 +0000'

---

{% raw  %}
<p style=" background: rgb(255, 255, 255); border-width: 0px; border-style: initial; border-color: initial; margin-bottom: 24px; vertical-align: baseline; color: rgb(51, 51, 51); ; ; ; ; ">&nbsp; &nbsp; &nbsp; Akka 是用层次结构组织 Actors 的。<span style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline;"></span></p><p><a rel="attachment wp-att-3677" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(116, 51, 153);"><img src="/AlgorithmDog/images/78b591024347057b2e704a3a3e5727c5f57997c3.png" style="background: transparent; border-width: initial; border-style: none; border-color: initial; vertical-align: baseline; width: 770px !important; height: 331.209px !important; visibility: visible !important;"></a></p><p style=" background: rgb(255, 255, 255); border-width: 0px; border-style: initial; border-color: initial; margin-bottom: 24px; vertical-align: baseline; color: rgb(51, 51, 51); ; ; ; ; ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p><p style=" background: rgb(255, 255, 255); border-width: 0px; border-style: initial; border-color: initial; margin-bottom: 24px; vertical-align: baseline; color: rgb(51, 51, 51); ; ; ; ; ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;我们需要实现一个翻译模块，其功能是输入中文输出多国语言。我们可以让一个 Master Actor 负责接收外界输入，多个 Worker Actor 负责将输入翻译成特定语言，Master Actor 和 Worker Actor 之间是上下级层次关系。下图展示了这种层级结构。</p><p><a rel="attachment wp-att-3889" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(116, 51, 153);"><img src="/AlgorithmDog/images/e976a869d7d49053fa2a38e3bac6c5e08759ee98.png" style="background: transparent; border-width: initial; border-style: none; border-color: initial; vertical-align: baseline; width: 426px !important; height: 225px !important; visibility: visible !important;"></a></p><p style=" background: rgb(255, 255, 255); border-width: 0px; border-style: initial; border-color: initial; margin-bottom: 24px; vertical-align: baseline; color: rgb(51, 51, 51); ; ; ; ; ">具体代码实现如下所示。</p><pre class="" style=" background-color: rgb(247, 247, 247); border-width: 1px; border-style: solid; border-color: rgb(204, 204, 204); margin-top: 6px; margin-bottom: 24px; padding: 2px 7px; vertical-align: baseline ; ; ; ; ; ; ; ; ; ; "><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"></span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 136);">class</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">Master</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 136);">extends</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">Actor</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 136);">with</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">ActorLogging</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">{</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">
 &nbsp; &nbsp;val english2chinese 
 &nbsp; &nbsp;</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">=</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> context</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">.</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">actorOf</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">(</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">Props</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">[</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">English2Chinese</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">],</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 136, 0);">"English2Chinese"</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">)</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">
 &nbsp; &nbsp;val english2cat &nbsp; &nbsp; 
 &nbsp; &nbsp;</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">=</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> context</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">.</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">actorOf</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">(</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">Props</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">[</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">English2Cat</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">],</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 136, 0);">"English2Cat"</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">)</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">

 &nbsp; &nbsp;</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 136);">def</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> receive </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">=</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">{</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">
 &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 136);">case</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> eng1</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">:</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">String</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">=&gt;{</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;english2chinese </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">!</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> eng1
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;english2cat &nbsp; &nbsp; </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">!</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> eng1<br></span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);"> &nbsp; &nbsp; &nbsp; &nbsp;}</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">
 &nbsp; &nbsp;</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">}<br></span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">}<br><br></span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"></span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 136);">class</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">English2Chinese</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 136);">extends</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">Actor</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 136);">with</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">ActorLogging</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">{</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">
 &nbsp; &nbsp;</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 136);">def</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> receive </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">=</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">{</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">
 &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 136);">case</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> eng</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">:</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">String</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">=&gt;</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">{</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;println</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">(</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 136, 0);">"我翻译不出来!"</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">)</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">
 &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">}</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">
 &nbsp; &nbsp;</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">}<br></span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">}<br><br></span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"></span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 136);">class</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">English2Cat</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 136);">extends</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">Actor</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 136);">with</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">ActorLogging</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">{</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">
 &nbsp; &nbsp;</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 136);">def</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> receive </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">=</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">{</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">
 &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 136);">case</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> eng</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">:</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">String</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">=&gt;{</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; println</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">(</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 136, 0);">"喵喵喵!"</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">)</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">
 &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">}</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">
 &nbsp; &nbsp;</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">}<br></span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"></span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">}<br><br></span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"></span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 136);">object</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">Main</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">{</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">
 &nbsp; &nbsp;</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 136);">def</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> main</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">(</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">args</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">:</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">Array</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">[</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">String</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">])</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">=</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">{</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">
 &nbsp; &nbsp; &nbsp; &nbsp;val sys </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">=</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">ActorSystem</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">(</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 136, 0);">"system"</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">)</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">
 &nbsp; &nbsp; &nbsp; &nbsp;val master </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">=</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> sys</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">.</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">actorOf</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">(</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">Props</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">[</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">Master</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">],</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 136, 0);">"Master"</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">)</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">
 &nbsp; &nbsp; &nbsp; &nbsp;master </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">!</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 136, 0);">"Hello,world!"</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">
 &nbsp; &nbsp;</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">}<br></span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"></span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">}</span></pre><p style=" background: rgb(255, 255, 255); border-width: 0px; border-style: initial; border-color: initial; margin-bottom: 24px; vertical-align: baseline; color: rgb(51, 51, 51); ; ; ; ; ">我们在 Master Actor 中使用 context.actorOf 实例化 English2Chinese 和 English2Cat，便可以在它们之间形成层次关系。这点通过它们的 actor 地址得到证实。</p><p><a rel="attachment wp-att-3891" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(116, 51, 153);"><img src="/AlgorithmDog/images/085634a1052606ba555aafe4095adbc915244259.png" style="background: transparent; border-width: initial; border-style: none; border-color: initial; vertical-align: baseline; width: 398px !important; height: 55px !important;"></a></p><p style=" background: rgb(255, 255, 255); border-width: 0px; border-style: initial; border-color: initial; margin-bottom: 24px; vertical-align: baseline; color: rgb(51, 51, 51); ; ; ; ; ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p><p style=" background: rgb(255, 255, 255); border-width: 0px; border-style: initial; border-color: initial; margin-bottom: 24px; vertical-align: baseline; color: rgb(51, 51, 51); ; ; ; ; ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;上面的 Actors 层次结构是我们程序里 Actor 的层次结构。这个层次结构是 Actor System 层次结构的一部分。Actor System 层次结构从根节点出来有两个子节点：UserGuardian 和 SystemGuardian。用户程序产生的所有 Actor 都在 UserGuardian 节点下，SystemGuardian 节点则包含系统中的一些 Actor，比如 deadLetterListener。如果一个 Actor 已经 stop 了，发送给这个 Actor 的消息就会被转送到 deadLetterListener。因此完整的 Actor 层次结构如下所示。</p><p><a rel="attachment wp-att-3895" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(116, 51, 153);"><img src="/AlgorithmDog/images/2ef4385ba3426d153ca7d797a712ff34614c7f8c.png" style="background: transparent; border-width: initial; border-style: none; border-color: initial; vertical-align: baseline; width: 757px !important; height: 382px !important;"></a></p><p style=" background: rgb(255, 255, 255); border-width: 0px; border-style: initial; border-color: initial; margin-bottom: 24px; vertical-align: baseline; color: rgb(51, 51, 51); ; ; ; ; ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p><p style=" background: rgb(255, 255, 255); border-width: 0px; border-style: initial; border-color: initial; margin-bottom: 24px; vertical-align: baseline; color: rgb(51, 51, 51); ; ; ; ; ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 我们使用 Akka 开发并行程序时，可以使用层级结构组织 Actors。层次结构不仅比较符合人类直觉，还为容错提供了机制保障。我们将会在下一篇文章介绍容错机制。本文的代码已经上传到 https://github.com/algorithmdog/AkkaUsageLearner。欢迎关注 AlgorithmDog 公众号，每两周的更新会有推送哦。</p><p><a rel="attachment wp-att-2360" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(116, 51, 153);"><img src="/AlgorithmDog/images/eb33a2f79669ea2345d3f07cd71b28c400579001.png" style="background: transparent; border-width: initial; border-style: none; border-color: initial; vertical-align: baseline; width: 709px !important; height: 324px !important;"></a></p><p><br></p>
{% endraw  %}

