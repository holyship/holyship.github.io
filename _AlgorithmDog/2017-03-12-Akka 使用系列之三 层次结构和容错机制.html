---
title: 'Akka 使用系列之三: 层次结构和容错机制'
author: lietal
date: '2017-03-12 00:00:00 +0000'

---

{% raw  %}
<p style=" background: rgb(255, 255, 255); border-width: 0px; border-style: initial; border-color: initial; margin-bottom: 24px; vertical-align: baseline; color: rgb(51, 51, 51); ; ; ; ; ">&nbsp; &nbsp; &nbsp; 这篇文章介绍 Akka 层次结构，以及基于层次结构的容错机制。<span style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline;"></span></p><p><a rel="attachment wp-att-3677" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(116, 51, 153);"><img src="/AlgorithmDog/images/78b591024347057b2e704a3a3e5727c5f57997c3.png" style="background: transparent; border-width: initial; border-style: none; border-color: initial; vertical-align: baseline; width: 770px !important; height: 49.8561px !important; visibility: visible !important;"></a></p><h3 style=" background: rgb(255, 255, 255); border-width: 0px; border-style: initial; border-color: initial; margin-bottom: 10px; vertical-align: baseline; clear: both; line-height: 1.5em; ; ; ; "><span style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline;">1. Akka 的层次结构</span></h3><p style=" background: rgb(255, 255, 255); border-width: 0px; border-style: initial; border-color: initial; margin-bottom: 24px; vertical-align: baseline; color: rgb(51, 51, 51); ; ; ; ; ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;我们需要实现一个翻译模块，其功能是输入中文输出多国语言。我们可以让一个 Master Actor 负责接收外界输入，多个 Worker Actor 负责将输入翻译成特定语言，Master Actor 和 Worker Actor 之间是上下级层次关系。下图展示了这种层级结构。</p><p><a rel="attachment wp-att-3889" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(116, 51, 153);"><img src="/AlgorithmDog/images/e976a869d7d49053fa2a38e3bac6c5e08759ee98.png" style="background: transparent; border-width: initial; border-style: none; border-color: initial; vertical-align: baseline; width: 426px !important; height: 36px !important; visibility: visible !important;"></a></p><p style=" background: rgb(255, 255, 255); border-width: 0px; border-style: initial; border-color: initial; margin-bottom: 24px; vertical-align: baseline; color: rgb(51, 51, 51); ; ; ; ; ">具体代码实现如下所示。</p><pre class="" style=" background-color: rgb(247, 247, 247); border-width: 1px; border-style: solid; border-color: rgb(204, 204, 204); margin-top: 6px; margin-bottom: 24px; padding: 2px 7px; vertical-align: baseline ; ; ; ; ; ; ; ; ; ; "><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"></span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 136);">class</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">Master</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 136);">extends</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">Actor</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 136);">with</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">ActorLogging</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">{</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">
 &nbsp;val english2chinese 
 &nbsp;</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">=</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> context</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">.</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">actorOf</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">(</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">Props</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">[</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">English2Chinese</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">],</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 136, 0);">"English2Chinese"</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">)<br></span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">
 &nbsp;val english2cat &nbsp; &nbsp; 
 &nbsp;</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">=</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> context</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">.</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">actorOf</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">(</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">Props</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">[</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">English2Cat</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">],</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 136, 0);">"English2Cat"</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">)<br></span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">
 &nbsp;</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 136);">def</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> receive </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">=</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">{</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">
 &nbsp; &nbsp; </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 136);">case</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> eng1</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">:</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">String</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">=&gt;{</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">
 &nbsp; &nbsp; &nbsp; &nbsp;english2chinese </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">!</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> eng1
 &nbsp; &nbsp; &nbsp; &nbsp;english2cat &nbsp; &nbsp; </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">!</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> eng1 &nbsp; <br></span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);"> &nbsp; &nbsp; }<br></span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);"> &nbsp;}<br></span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">}<br><br></span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"></span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 136);">class</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">English2Chinese</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 136);">extends</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">Actor</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 136);">with</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">ActorLogging</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">{</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">
 &nbsp;</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 136);">def</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> receive </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">=</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">{</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">
 &nbsp; &nbsp; </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 136);">case</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> eng</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">:</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">String</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">=&gt;</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">{</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">
 &nbsp; &nbsp; &nbsp; println</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">(</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 136, 0);">"我翻译不出来!"</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">)</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">
 &nbsp; &nbsp; </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">}</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">
 &nbsp;</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">}<br></span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"></span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">}<br></span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"></span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 136);">class</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">English2Cat</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 136);">extends</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">Actor</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 136);">with</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">ActorLogging</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">{</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">
 &nbsp;</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 136);">def</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> receive </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">=</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">{</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">
 &nbsp; &nbsp; </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 136);">case</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> eng</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">:</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">String</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">=&gt;{</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">
 &nbsp; &nbsp; &nbsp; println</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">(</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 136, 0);">"喵喵喵!"</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">)</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">
 &nbsp; &nbsp; </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">}</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">
 &nbsp;</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">}<br></span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"></span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">}<br></span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"></span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 136);">object</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">Main</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">{</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">
 &nbsp;</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 136);">def</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> main</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">(</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">args</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">:</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">Array</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">[</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">String</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">]) </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">=</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">{</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">
 &nbsp; &nbsp;val sys <br></span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);"> &nbsp; &nbsp;=</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">ActorSystem</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">(</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 136, 0);">"system"</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">)</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">
 &nbsp; &nbsp;val master <br></span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);"> &nbsp; &nbsp;=</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> sys</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">.</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">actorOf</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">(</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">Props</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">[</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">Master</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">],</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 136, 0);">"Master"</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">)<br></span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">
 &nbsp; &nbsp;master </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">!</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 136, 0);">"Hello,world!"</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">
 &nbsp;</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">}<br></span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"></span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">}</span></pre><p style=" background: rgb(255, 255, 255); border-width: 0px; border-style: initial; border-color: initial; margin-bottom: 24px; vertical-align: baseline; color: rgb(51, 51, 51); ; ; ; ; ">我们在 Master Actor 中使用 context.actorOf 实例化 English2Chinese 和 English2Cat，便可以在它们之间形成层次关系。这点通过它们的 actor 地址得到证实。</p><p><a rel="attachment wp-att-3891" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(116, 51, 153);"><img src="/AlgorithmDog/images/085634a1052606ba555aafe4095adbc915244259.png" style="background: transparent; border-width: initial; border-style: none; border-color: initial; vertical-align: baseline; width: 398px !important; height: 36px !important;"></a></p><p style=" background: rgb(255, 255, 255); border-width: 0px; border-style: initial; border-color: initial; margin-bottom: 24px; vertical-align: baseline; color: rgb(51, 51, 51); ; ; ; ; ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p><p style=" background: rgb(255, 255, 255); border-width: 0px; border-style: initial; border-color: initial; margin-bottom: 24px; vertical-align: baseline; color: rgb(51, 51, 51); ; ; ; ; ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;上面的 Actors 层次结构是我们程序里 Actor 的层次结构。这个层次结构是 Actor System 层次结构的一部分。Actor System 层次结构从根节点出来有两个子节点：UserGuardian 和 SystemGuardian。用户程序产生的所有 Actor 都在 UserGuardian 节点下，SystemGuardian 节点则包含系统中的一些 Actor，比如 deadLetterListener。如果一个 Actor 已经 stop 了，发送给这个 Actor 的消息就会被转送到 deadLetterListener。因此完整的 Actor 层次结构如下所示。</p><p><a rel="attachment wp-att-3895" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(116, 51, 153);"><img src="/AlgorithmDog/images/2ef4385ba3426d153ca7d797a712ff34614c7f8c.png" style="background: transparent; border-width: initial; border-style: none; border-color: initial; vertical-align: baseline; width: 770px !important; height: 49.8561px !important;"></a></p><p style=" background: rgb(255, 255, 255); border-width: 0px; border-style: initial; border-color: initial; margin-bottom: 24px; vertical-align: baseline; color: rgb(51, 51, 51); ; ; ; ; ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p><h3 style=" background: rgb(255, 255, 255); border-width: 0px; border-style: initial; border-color: initial; margin-bottom: 10px; vertical-align: baseline; clear: both; line-height: 1.5em; ; ; ; "><span style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline;">2. Akka 的容错机制</span></h3><p style=" background: rgb(255, 255, 255); border-width: 0px; border-style: initial; border-color: initial; margin-bottom: 24px; vertical-align: baseline; color: rgb(51, 51, 51); ; ; ; ; ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;对于分布式系统来说，容错机制是很重要的指标。那么 Akka 是怎么实现容错的呢？Akka 的容错机制是基于层次结构: Akka 在 Actor 加一个监控策略，对其子 Actor 进行监控。下面的代码是给 Actor 加了一个监控策略，其监控策略内容：如果子 Actor 在运行过程中抛出 Exception，对该子 Actor 执行停止动作 (即停止该子 Actor)。</p><pre class="" style=" background-color: rgb(247, 247, 247); border-width: 1px; border-style: solid; border-color: rgb(204, 204, 204); margin-top: 6px; margin-bottom: 24px; padding: 2px 7px; vertical-align: baseline ; ; ; ; ; ; ; ; ; ; "><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 136);">override</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> val supervisorStrategy <br></span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">=</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">OneForOneStrategy</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">(){<br></span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 136);"> &nbsp; &nbsp;case</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> _</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">:</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">Exception</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">=&gt;</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">Stop<br></span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"></span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">}</span></pre><p style=" background: rgb(255, 255, 255); border-width: 0px; border-style: initial; border-color: initial; margin-bottom: 24px; vertical-align: baseline; color: rgb(51, 51, 51); ; ; ; ; ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Akka 的监控策略一共支持四种动作：Stop, Resume, Restart 和 Escalate。</p><blockquote style=" background: rgb(255, 255, 255); border-width: 0px; border-style: initial; border-color: initial; padding-right: 3em; padding-left: 3em; vertical-align: baseline; quotes: none; font-style: italic; color: rgb(51, 51, 51); ; ; ; ; "><p style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; margin-bottom: 24px; vertical-align: baseline;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1. Stop</p><p style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; margin-bottom: 24px; vertical-align: baseline;">子 Actor 停止。</p><p style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; margin-bottom: 24px; vertical-align: baseline;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2. Resume</p><p style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; margin-bottom: 24px; vertical-align: baseline;">子 Actor 忽略引发异常的消息，继续处理后续消息。</p><p style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; margin-bottom: 24px; vertical-align: baseline;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3. Restart</p><p style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; margin-bottom: 24px; vertical-align: baseline;">子 Actor 停止，重新初始化一个子 Actor 处理后续消息</p><p style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; margin-bottom: 24px; vertical-align: baseline;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4. Escalate</p><p style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; margin-bottom: 24px; vertical-align: baseline;">错误太严重，自己已经无法处理，将错误信息上报给父 Actor。</p></blockquote><p style=" background: rgb(255, 255, 255); border-width: 0px; border-style: initial; border-color: initial; margin-bottom: 24px; vertical-align: baseline; color: rgb(51, 51, 51); ; ; ; ; ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Akka 的监控策略分为两种。一种是 OneForOne。这种策略只对抛出 Exception 的子 Actor 执行相应动作。还是拿上面的翻译模块做例子，我们加入一个 OneForOne 的 Stop 的监控策略。</p><pre class="" style=" background-color: rgb(247, 247, 247); border-width: 1px; border-style: solid; border-color: rgb(204, 204, 204); margin-top: 6px; margin-bottom: 24px; padding: 2px 7px; vertical-align: baseline ; ; ; ; ; ; ; ; ; ; "><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 136);">class</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">Master1</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 136);">extends</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">Actor</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 136);">with</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">ActorLogging</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">{</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">
 &nbsp;val english2Chinese</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">= </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> 
 &nbsp;context</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">.</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">actorOf</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">(</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">Props</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">[</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">English2Chinese1</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">],</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 136, 0);">"English2Chinese"</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">)</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">
 &nbsp;val english2Cat </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">=</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> 
 &nbsp;context</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">.</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">actorOf</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">(</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">Props</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">[</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">English2Cat1</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">],</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 136, 0);">"English2Cat"</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">)<br></span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">
 &nbsp;</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 136);">override</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> val supervisorStrategy <br></span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);"> &nbsp;=</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">OneForOneStrategy</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">(){</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">
 &nbsp; &nbsp;</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 136);">case</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> _</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">:</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">Exception</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">=&gt;</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">Stop</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">
 &nbsp;</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">}<br></span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">
 &nbsp;</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 136);">override</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 136);">def</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> receive </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">=</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">{</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">
 &nbsp; &nbsp;</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 136);">case</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> eng</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">:</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">String</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">=&gt;</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">{</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">
 &nbsp; &nbsp; &nbsp;english2Cat </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">!</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> eng</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">;</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">
 &nbsp; &nbsp; &nbsp;english2Chinese </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">!</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> eng</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">;</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">
 &nbsp; &nbsp; }</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">
 &nbsp;</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">}<br></span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"></span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">}<br><br></span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"></span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 136);">class</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">English2Chinese1</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 136);">extends</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">Actor</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 136);">with</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">ActorLogging</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">{</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">
 &nbsp;</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 136);">override</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 136);">def</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> receive </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">=</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">{</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">
 &nbsp; &nbsp;</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 136);">case</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> eng</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">:</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">String</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">=&gt;</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">{</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">
 &nbsp; &nbsp; &nbsp;println</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">(</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 136, 0);">"翻译不出来"</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">)</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">
 &nbsp; &nbsp;</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">}</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">
 &nbsp;</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">}<br></span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"></span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">}<br><br></span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"></span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 136);">class</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">English2Cat1</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 136);">extends</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">Actor</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 136);">with</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">ActorLogging</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">{</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">
 &nbsp;</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 136);">override</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 136);">def</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> receive </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">=</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">{</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">
 &nbsp; &nbsp;</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 136);">case</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> eng</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">:</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">String</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">=&gt;</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">{</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">
 &nbsp; &nbsp; &nbsp;</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 136);">throw</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 136);">new</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">Exception</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">(</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 136, 0);">"Exception in English2Cat1"</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">)</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">
 &nbsp; &nbsp;</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">}</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">
 &nbsp;</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">}<br></span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"></span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">}<br><br></span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"></span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 136);">object</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> hierarchy1 </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">{</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">
 &nbsp;</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 136);">def</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> main</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">(</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">args</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">:</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">Array</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">[</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">String</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">])</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">=</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">{</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">
 &nbsp; &nbsp;val system <br></span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);"> &nbsp; &nbsp;=</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">ActorSystem</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">(</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 136, 0);">"system"</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">)</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">
 &nbsp; &nbsp;val master<br></span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);"> &nbsp; &nbsp;=</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> system</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">.</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">actorOf</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">(</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">Props</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">[</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">Master1</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">],</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 136, 0);">"Master"</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">)<br></span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">
 &nbsp; &nbsp;master </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">!</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 136, 0);">"Hello, world"</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">
 &nbsp; &nbsp;</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">Thread</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">.</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">sleep</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">(</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 102, 102);">1000</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">)</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">
 &nbsp; &nbsp;master </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">!</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 136, 0);">"Hello, world"</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">
 &nbsp;</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">}<br></span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"></span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">}</span></pre><p style=" background: rgb(255, 255, 255); border-width: 0px; border-style: initial; border-color: initial; margin-bottom: 24px; vertical-align: baseline; color: rgb(51, 51, 51); ; ; ; ; ">运行这段代码，我们得到下面结果。从下面的结果，我们可以看出:第一轮 English2Cat1 抛出了 Exception, English2Chinese1 正常工作；第二轮，English2Cat1 已经死了，English2Chinese1 还在正常工作。</p><p style=" background: rgb(255, 255, 255); border-width: 0px; border-style: initial; border-color: initial; margin-bottom: 24px; vertical-align: baseline; color: rgb(51, 51, 51); ; ; ; ; "><a rel="attachment wp-att-3909" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(116, 51, 153);"><img src="/AlgorithmDog/images/9a0871807fe19bed49fc9d6b7de890ae6e77a458.png" style="background: transparent; border-width: initial; border-style: none; border-color: initial; vertical-align: baseline; width: 770px !important; height: 49.8561px !important;"></a></p><p style=" background: rgb(255, 255, 255); border-width: 0px; border-style: initial; border-color: initial; margin-bottom: 24px; vertical-align: baseline; color: rgb(51, 51, 51); ; ; ; ; ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;另一种是 AllForOne。如果有子 Actor 抛出 Exception，这种监控策略对所有子 Actor 执行动作。</p><pre class="" style=" background-color: rgb(247, 247, 247); border-width: 1px; border-style: solid; border-color: rgb(204, 204, 204); margin-top: 6px; margin-bottom: 24px; padding: 2px 7px; vertical-align: baseline ; ; ; ; ; ; ; ; ; ; "><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 136);">class</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">Master2</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 136);">extends</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">Actor</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 136);">with</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">ActorLogging</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">{</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">
 &nbsp;val english2Chinese <br></span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);"> &nbsp;=</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> context</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">.</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">actorOf</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">(</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">Props</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">[</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">English2Chinese2</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">],</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 136, 0);">"English2Chinese"</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">)</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">
 &nbsp;val english2Cat &nbsp; &nbsp; <br></span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);"> &nbsp;=</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> context</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">.</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">actorOf</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">(</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">Props</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">[</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">English2Cat2</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">],</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 136, 0);">"English2Cat"</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">)</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">

 &nbsp;</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 136);">override</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> val supervisorStrategy</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">=</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">AllForOneStrategy</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">()</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">{</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">
 &nbsp; &nbsp;</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 136);">case</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> _</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">:</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">Exception</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">=&gt;</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">Stop</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">
 &nbsp;</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">}</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">

 &nbsp;</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 136);">override</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 136);">def</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> receive </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">=</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">{</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">
 &nbsp; &nbsp;</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 136);">case</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> eng</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">:</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 0, 102);">String</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">=&gt;</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">{</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">
 &nbsp; &nbsp; &nbsp;english2Cat </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">!</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> eng</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">;</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">
 &nbsp; &nbsp; &nbsp;english2Chinese </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">!</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"> eng</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">;</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">
 &nbsp; &nbsp; </span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">}</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);">
 &nbsp;</span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">}<br></span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(0, 0, 0);"></span><span class="" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(102, 102, 0);">}</span></pre><p style=" background: rgb(255, 255, 255); border-width: 0px; border-style: initial; border-color: initial; margin-bottom: 24px; vertical-align: baseline; color: rgb(51, 51, 51); ; ; ; ; ">运行这段代码，我们得到下面结果。从下面的结果，我们可以看出:第一轮 English2Cat1 抛出了 Exception, English2Chinese1 正常工作；第二轮，English2Cat1 已经死了，English2Chinese1 也已经死亡了。这个结果说明监控策略已经将 MasterActor 的所有子 Actor 停止了。</p><p style=" background: rgb(255, 255, 255); border-width: 0px; border-style: initial; border-color: initial; margin-bottom: 24px; vertical-align: baseline; color: rgb(51, 51, 51); ; ; ; ; "><a rel="attachment wp-att-3910" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(116, 51, 153);"><img src="/AlgorithmDog/images/30bd90b5ce396e001799d13f304161d6986e9fc6.png" style="background: transparent; border-width: initial; border-style: none; border-color: initial; vertical-align: baseline; width: 770px !important; height: 49.8561px !important;"></a></p><h3 style=" background: rgb(255, 255, 255); border-width: 0px; border-style: initial; border-color: initial; margin-bottom: 10px; vertical-align: baseline; clear: both; line-height: 1.5em; ; ; ; "><span style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline;">3. 总结</span></h3><p style=" background: rgb(255, 255, 255); border-width: 0px; border-style: initial; border-color: initial; margin-bottom: 24px; vertical-align: baseline; color: rgb(51, 51, 51); ; ; ; ; ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 我们使用 Akka 开发并行程序时，可以使用层级结构组织 Actors。层次结构不仅比较符合人类直觉，还为容错提供了机制保障。本文的所有代码已经上传到<a style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(116, 51, 153);">&nbsp;GitHub</a>&nbsp;。欢迎关注 AlgorithmDog 公众号，每两周的更新会有推送哦。</p><p><a rel="attachment wp-att-2360" style="background: transparent; border-width: 0px; border-style: initial; border-color: initial; vertical-align: baseline; color: rgb(116, 51, 153);"><img src="/AlgorithmDog/images/eb33a2f79669ea2345d3f07cd71b28c400579001.png" style="background: transparent; border-width: initial; border-style: none; border-color: initial; vertical-align: baseline; width: 709px !important; height: 324px !important;"></a></p><p><br></p>
{% endraw  %}

