---
title: SparkSQL-有必要坐下来聊聊Join
author: 范欣欣 数据管理
wechat_source: >-
  http://mp.weixin.qq.com/s?timestamp=1496458980&src=3&ver=1&signature=Nemr66ffk*GtagkzYwHqqlmJ5WeSmafIdPJ-alsq-dcTEXbo3POrqRzZvse3RZLBvKN5rYTYQKlsSCm23cgEIFDbuoJ4gODzaiUMovIEek*cvjZFdwQHapI5YaPzyNIuVQT2Ed9dUJ0rLC6s9QNTj83TQta6mqMlE1ovmW9Tsbo=
date: '2017-06-02 00:00:00 +0000'

---

{% raw  %}
<p>这个系列是我偶然从数据管理公众号读到得，讲查询优化是怎么做得。写得很好。虽然查询优化是本行也是我现在每天要做的事情。我自问自己来写，没办法写得做这样这样的通俗易懂。我问作者要了授权。感谢数据管理公众号的授权。</p><p><br></p><section class="" data-source="bj.96weixin.com" style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><section style="margin: 5px auto; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><p style="margin: 5px auto; max-width: 100%; color: rgb(61, 167, 66); font-size: 16px; line-height: 35px; height: 35px; text-align: left; text-indent: 0em; box-sizing: border-box !important; word-wrap: break-word !important;"><br></p><section class="" style="margin: 5px auto; max-width: 100%; color: rgb(61, 167, 66); font-size: 16px; line-height: 35px; height: 35px; text-align: center; box-sizing: border-box !important; word-wrap: break-word !important;"><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; color: rgb(0, 176, 240); font-size: 18px; box-sizing: border-box !important; word-wrap: break-word !important;">Join背景介绍</span></strong><span class="" style="max-width: 100%; color: rgb(0, 176, 240); box-sizing: border-box !important; word-wrap: break-word !important;"></span></section><section class="" style="margin-bottom: -5px; max-width: 100%; border-top: 2px solid rgb(0, 176, 240); height: 2px; width: 670px; box-sizing: border-box !important; word-wrap: break-word !important;"></section><section style="margin-right: auto; margin-left: auto; max-width: 100%; width: 120.597px; background: none 0% 0% repeat scroll rgb(255, 255, 255); height: 8px; box-sizing: border-box !important; word-wrap: break-word !important;"><section style="margin-right: auto; margin-left: auto; max-width: 100%; width: 30.142px; float: left; text-align: center; display: inline-block; box-sizing: border-box !important; word-wrap: break-word !important;"><section class="" style="margin-right: auto; margin-left: auto; max-width: 100%; width: 8px; height: 8px; border-radius: 100%; background: none 0% 0% repeat scroll rgb(0, 176, 240); box-sizing: border-box !important; word-wrap: break-word !important;"></section></section><section style="margin-right: auto; margin-left: auto; max-width: 100%; width: 30.142px; float: left; text-align: center; display: inline-block; box-sizing: border-box !important; word-wrap: break-word !important;"><section class="" style="margin-right: auto; margin-left: auto; max-width: 100%; width: 8px; height: 8px; border-radius: 100%; background: none 0% 0% repeat scroll rgb(0, 176, 240); box-sizing: border-box !important; word-wrap: break-word !important;"></section></section><section style="margin-right: auto; margin-left: auto; max-width: 100%; width: 30.142px; float: left; text-align: center; display: inline-block; box-sizing: border-box !important; word-wrap: break-word !important;"><section class="" style="margin-right: auto; margin-left: auto; max-width: 100%; width: 8px; height: 8px; border-radius: 100%; background: none 0% 0% repeat scroll rgb(0, 176, 240); box-sizing: border-box !important; word-wrap: break-word !important;"></section></section><section style="margin-right: auto; margin-left: auto; max-width: 100%; width: 30.142px; float: left; text-align: center; display: inline-block; box-sizing: border-box !important; word-wrap: break-word !important;"><section class="" style="margin-right: auto; margin-left: auto; max-width: 100%; width: 8px; height: 8px; border-radius: 100%; background: none 0% 0% repeat scroll rgb(0, 176, 240); box-sizing: border-box !important; word-wrap: break-word !important;"><br style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"></section></section></section></section></section><p><br></p><p><br></p><p style="margin-bottom: 10px; max-width: 100%; box-sizing: border-box; min-height: 1em; color: rgb(107, 107, 107); line-height: 1.75em; word-wrap: break-word !important;"><span class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;"></span><br style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"></p><p style="margin-bottom: 10px; max-width: 100%; box-sizing: border-box; min-height: 1em; color: rgb(107, 107, 107); line-height: 1.75em; word-wrap: break-word !important;"><span style="max-width: 100%; box-sizing: border-box; font-size: 15px; color: rgb(136, 136, 136); word-wrap: break-word !important;">Join是数据库查询永远绕不开的话题，传统查询SQL技术总体可以分为简单操作（过滤操作-where、排序操作-limit等），聚合操作-groupBy等以及Join操作等。其中Join操作是其中最复杂、代价最大的操作类型，也是OLAP场景中使用相对较多的操作。因此很有必要聊聊这个话题。</span></p><p style="margin-bottom: 10px; max-width: 100%; box-sizing: border-box; min-height: 1em; color: rgb(107, 107, 107); line-height: 1.75em; word-wrap: break-word !important;"><span style="max-width: 100%; box-sizing: border-box; font-size: 15px; color: rgb(136, 136, 136); word-wrap: break-word !important;"></span></p><p style="margin-bottom: 10px; max-width: 100%; box-sizing: border-box; min-height: 1em; color: rgb(107, 107, 107); line-height: 1.75em; word-wrap: break-word !important;"><span style="max-width: 100%; box-sizing: border-box; font-size: 15px; color: rgb(136, 136, 136); word-wrap: break-word !important;">另外，从业务层面来讲，用户在数仓建设的时候也会涉及Join使用的问题。通常情况下，数据仓库中的表一般会分为”低层次表”和“高层次表”。</span></p><p style="margin-bottom: 10px; max-width: 100%; box-sizing: border-box; min-height: 1em; color: rgb(107, 107, 107); line-height: 1.75em; word-wrap: break-word !important;"><span style="max-width: 100%; box-sizing: border-box; font-size: 15px; color: rgb(136, 136, 136); word-wrap: break-word !important;"></span></p><p style="margin-bottom: 10px; max-width: 100%; box-sizing: border-box; min-height: 1em; color: rgb(107, 107, 107); line-height: 1.75em; word-wrap: break-word !important;"><span style="max-width: 100%; box-sizing: border-box; font-size: 15px; color: rgb(136, 136, 136); word-wrap: break-word !important;">所谓”低层次表”，就是数据源导入数仓之后直接生成的表，单表列值较少，一般可以明显归为维度表或者事实表，表和表之间大多存在外健依赖，所以查询起来会遇到大量Join运算，查询效率相对比较差。而“高层次表”是在”低层次表”的基础上加工转换而来，通常做法是使用SQL语句将需要Join的表预先进行合并形成“宽表”，在宽表上的查询因为不需要执行大量Join因而效率相对较高，很明显，宽表缺点是数据会有大量冗余，而且生成相对比较滞后，查询结果可能并不及时。</span></p><p style="margin-bottom: 10px; max-width: 100%; box-sizing: border-box; min-height: 1em; color: rgb(107, 107, 107); line-height: 1.75em; word-wrap: break-word !important;"><span style="max-width: 100%; box-sizing: border-box; font-size: 15px; color: rgb(136, 136, 136); word-wrap: break-word !important;"></span></p><p style="margin-bottom: 10px; max-width: 100%; box-sizing: border-box; min-height: 1em; color: rgb(107, 107, 107); line-height: 1.75em; word-wrap: break-word !important;"><span style="max-width: 100%; box-sizing: border-box; font-size: 15px; color: rgb(136, 136, 136); word-wrap: break-word !important;">因此，为了获得实效性更高的查询结果，大多数场景还是需要进行复杂的Join操作。Join操作之所以复杂，不仅仅因为通常情况下其时间空间复杂度高，更重要的是它有很多算法，在不同场景下需要选择特定算法才能获得最好的优化效果。关系型数据库也有关于Join的各种用法，关注公众号InsideMySQL并回复join可以查看相关文章，这里面详细介绍了MySQL Join的各种算法以及调优方案。本文接下来会介绍SparkSQL所支持的几种常见的Join算法以及其适用场景。</span></p><p style="margin-bottom: 10px; max-width: 100%; box-sizing: border-box; min-height: 1em; color: rgb(107, 107, 107); line-height: 1.75em; word-wrap: break-word !important;"><span class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;"></span></p><p><br></p><p><br></p><section class="" data-source="bj.96weixin.com" style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><section style="margin: 5px auto; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><section class="" style="margin: 5px auto; max-width: 100%; color: rgb(61, 167, 66); font-size: 16px; line-height: 35px; height: 35px; text-align: center; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 18px; box-sizing: border-box !important; word-wrap: break-word !important;"><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span class="" style="max-width: 100%; color: rgb(0, 176, 240); box-sizing: border-box !important; word-wrap: break-word !important;"></span></strong></span><span class="" style="max-width: 100%; color: rgb(0, 176, 240); box-sizing: border-box !important; word-wrap: break-word !important;"><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 18px; box-sizing: border-box !important; word-wrap: break-word !important;">Join常见分类以及基本实现机制</span></strong></span></section><section class="" style="margin-bottom: -5px; max-width: 100%; border-top: 2px solid rgb(0, 176, 240); height: 2px; width: 670px; box-sizing: border-box !important; word-wrap: break-word !important;"></section><section style="margin-right: auto; margin-left: auto; max-width: 100%; width: 120.597px; background: none 0% 0% repeat scroll rgb(255, 255, 255); height: 8px; box-sizing: border-box !important; word-wrap: break-word !important;"><section style="margin-right: auto; margin-left: auto; max-width: 100%; width: 30.142px; float: left; text-align: center; display: inline-block; box-sizing: border-box !important; word-wrap: break-word !important;"><section class="" style="margin-right: auto; margin-left: auto; max-width: 100%; width: 8px; height: 8px; border-radius: 100%; background: none 0% 0% repeat scroll rgb(0, 176, 240); box-sizing: border-box !important; word-wrap: break-word !important;"></section></section><section style="margin-right: auto; margin-left: auto; max-width: 100%; width: 30.142px; float: left; text-align: center; display: inline-block; box-sizing: border-box !important; word-wrap: break-word !important;"><section class="" style="margin-right: auto; margin-left: auto; max-width: 100%; width: 8px; height: 8px; border-radius: 100%; background: none 0% 0% repeat scroll rgb(0, 176, 240); box-sizing: border-box !important; word-wrap: break-word !important;"></section></section><section style="margin-right: auto; margin-left: auto; max-width: 100%; width: 30.142px; float: left; text-align: center; display: inline-block; box-sizing: border-box !important; word-wrap: break-word !important;"><section class="" style="margin-right: auto; margin-left: auto; max-width: 100%; width: 8px; height: 8px; border-radius: 100%; background: none 0% 0% repeat scroll rgb(0, 176, 240); box-sizing: border-box !important; word-wrap: break-word !important;"></section></section><section style="margin-right: auto; margin-left: auto; max-width: 100%; width: 30.142px; float: left; text-align: center; display: inline-block; box-sizing: border-box !important; word-wrap: break-word !important;"><section class="" style="margin-right: auto; margin-left: auto; max-width: 100%; width: 8px; height: 8px; border-radius: 100%; background: none 0% 0% repeat scroll rgb(0, 176, 240); box-sizing: border-box !important; word-wrap: break-word !important;"><br style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"></section></section></section></section></section><p><br></p><p><br></p><p style="margin-bottom: 10px; max-width: 100%; box-sizing: border-box; min-height: 1em; color: rgb(107, 107, 107); line-height: 1.75em; word-wrap: break-word !important;"><span class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;"><br style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"></span></p><p style="margin-bottom: 10px; max-width: 100%; box-sizing: border-box; min-height: 1em; color: rgb(107, 107, 107); line-height: 1.75em; word-wrap: break-word !important;"><span style="max-width: 100%; box-sizing: border-box; color: rgb(136, 136, 136); font-size: 15px; word-wrap: break-word !important;">当前SparkSQL支持三种Join算法－shuffle hash join、broadcast hash join以及sort merge join。其中前两者归根到底都属于hash join，只不过在hash join之前需要先shuffle还是先broadcast。<strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;">其实，这些算法并不是什么新鲜玩意，都是数据库几十年前的老古董了（参考），只不过换上了分布式的皮而已。</strong>不过话说回来，SparkSQL/Hive…等等，所有这些大数据技术哪一样不是来自于传统数据库技术，什么语法解析AST、基于规则优化（CRO）、基于代价优化（CBO）、列存，都来自于传统数据库。就拿shuffle hash join和broadcast hash join来说，hash join算法就来自于传统数据库，而shuffle和broadcast是大数据的皮，两者一结合就成了大数据的算法了。因此可以这样说，大数据的根就是传统数据库，传统数据库人才可以很快的转型到大数据。好吧，这些都是闲篇。</span></p><p><br></p><p><br></p><section class="" data-source="bj.96weixin.com" style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><section style="margin: 5px auto; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"></section></section><section class="" data-source="bj.96weixin.com" style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><section style="margin: 5px auto; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"></section></section><p><br></p><p><br></p><p style="margin-bottom: 10px; max-width: 100%; box-sizing: border-box; min-height: 1em; color: rgb(107, 107, 107); line-height: 1.75em; word-wrap: break-word !important;"><span style="max-width: 100%; box-sizing: border-box; color: rgb(136, 136, 136); font-size: 15px; word-wrap: break-word !important;"></span></p><p style="margin-bottom: 10px; max-width: 100%; box-sizing: border-box; min-height: 1em; color: rgb(107, 107, 107); line-height: 1.75em; word-wrap: break-word !important;"><span style="max-width: 100%; box-sizing: border-box; color: rgb(136, 136, 136); font-size: 15px; word-wrap: break-word !important;">继续来看技术，既然hash join是“内核”，那就刨出来看看，看完把“皮”再分析一下。</span></p><p><br></p><p><br></p><section class="" data-source="bj.96weixin.com" style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><section class="" style="max-width: 100%; line-height: 25px; font-family: 微软雅黑; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;"><p style="margin-bottom: 10px; max-width: 100%; box-sizing: border-box; min-height: 1em; color: rgb(107, 107, 107); line-height: 1.75em; word-wrap: break-word !important;"><span class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;"></span></p><section class="" data-source="bj.96weixin.com" style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><section style="margin: 5px auto; max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><section class="" style="margin: 5px; max-width: 100%; width: 8px; border-radius: 5px; display: inline-block; height: 25px; float: left; color: rgb(255, 255, 255); background-color: rgb(95, 170, 255); box-sizing: border-box !important; word-wrap: break-word !important;"></section><section style="padding: 5px; max-width: 100%; display: inline-block; box-sizing: border-box !important; word-wrap: break-word !important;"><p style="max-width: 100%; min-height: 1em; box-sizing: border-box !important; word-wrap: break-word !important;"><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span class="" style="max-width: 100%; font-size: 18px; color: rgb(95, 170, 255); box-sizing: border-box !important; word-wrap: break-word !important;">Hash Join</span></strong><span class="" style="max-width: 100%; font-size: 18px; color: rgb(95, 170, 255); box-sizing: border-box !important; word-wrap: break-word !important;"><br style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"></span><span class="" style="max-width: 100%; color: rgb(95, 170, 255); font-size: 12px; box-sizing: border-box !important; word-wrap: break-word !important;"></span></p></section></section></section><p style="margin-bottom: 10px; max-width: 100%; box-sizing: border-box; min-height: 1em; color: rgb(107, 107, 107); line-height: 1.75em; word-wrap: break-word !important;"><span style="max-width: 100%; box-sizing: border-box; color: rgb(136, 136, 136); font-size: 15px; word-wrap: break-word !important;">先来看看这样一条SQL语句：select * from order,item where item.id = order.i_id，很简单一个Join节点，参与join的两张表是item和order，join key分别是item.id以及order.i_id。现在假设这个Join采用的是hash join算法，整个过程会经历三步：</span></p></section></section><p><br></p><p><br></p><p style="margin-bottom: 10px; max-width: 100%; box-sizing: border-box; min-height: 1em; color: rgb(107, 107, 107); line-height: 1.75em; word-wrap: break-word !important;"><span style="max-width: 100%; box-sizing: border-box; color: rgb(136, 136, 136); font-size: 15px; word-wrap: break-word !important;">1. 确定Build Table以及Probe Table：这个概念比较重要，Build Table使用join key构建Hash Table，而Probe Table使用join key进行探测，探测成功就可以join在一起。通常情况下，小表会作为Build Table，大表作为Probe Table。此事例中item为Build Table，order为Probe Table；</span></p><p style="margin-bottom: 10px; max-width: 100%; box-sizing: border-box; min-height: 1em; color: rgb(107, 107, 107); line-height: 1.75em; word-wrap: break-word !important;"><span style="max-width: 100%; box-sizing: border-box; color: rgb(136, 136, 136); font-size: 15px; word-wrap: break-word !important;">2. 构建Hash Table：依次读取Build Table（item）的数据，对于每一行数据根据join key（item.id）进行hash，hash到对应的Bucket，生成hash table中的一条记录。数据缓存在内存中，如果内存放不下需要dump到外存；</span></p><p style="margin-bottom: 10px; max-width: 100%; box-sizing: border-box; min-height: 1em; color: rgb(107, 107, 107); line-height: 1.75em; word-wrap: break-word !important;"><span style="max-width: 100%; box-sizing: border-box; color: rgb(136, 136, 136); font-size: 15px; word-wrap: break-word !important;">3. 探测：再依次扫描Probe Table（order）的数据，使用相同的hash函数映射Hash Table中的记录，映射成功之后再检查join条件（item.id = order.i_id），如果匹配成功就可以将两者join在一起。</span></p><p style="margin-bottom: 10px; max-width: 100%; box-sizing: border-box; min-height: 1em; color: rgb(107, 107, 107); line-height: 1.75em; word-wrap: break-word !important;"><span class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;"></span></p><p style="max-width: 100%; min-height: 1em; line-height: 1.75em; box-sizing: border-box !important; word-wrap: break-word !important;"><br></p><p style="margin-bottom: 10px; max-width: 100%; box-sizing: border-box; min-height: 1em; color: rgb(107, 107, 107); line-height: 1.75em; word-wrap: break-word !important;"><span style="max-width: 100%; color: rgb(136, 136, 136); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">基本流程可以参考上图，这里有两个小问题需要关注：</span></p><p style="margin-bottom: 10px; max-width: 100%; box-sizing: border-box; min-height: 1em; color: rgb(107, 107, 107); line-height: 1.75em; word-wrap: break-word !important;"><span style="max-width: 100%; box-sizing: border-box; color: rgb(136, 136, 136); font-size: 15px; word-wrap: break-word !important;">1. hash join性能如何？很显然，hash join基本都只扫描两表一次，可以认为o(a+b)，较之最极端的笛卡尔集运算a*b，不知甩了多少条街；</span></p><p style="margin-bottom: 10px; max-width: 100%; box-sizing: border-box; min-height: 1em; color: rgb(107, 107, 107); line-height: 1.75em; word-wrap: break-word !important;"><span style="max-width: 100%; box-sizing: border-box; color: rgb(136, 136, 136); font-size: 15px; word-wrap: break-word !important;">2. 为什么Build Table选择小表？道理很简单，因为构建的Hash Table最好能全部加载在内存，效率最高；这也决定了hash join算法只适合至少一个小表的join场景，对于两个大表的join场景并不适用。</span></p><p style="margin-bottom: 10px; max-width: 100%; box-sizing: border-box; min-height: 1em; color: rgb(107, 107, 107); line-height: 1.75em; word-wrap: break-word !important;"><span style="max-width: 100%; box-sizing: border-box; color: rgb(136, 136, 136); font-size: 15px; word-wrap: break-word !important;"></span></p><p style="margin-bottom: 10px; max-width: 100%; box-sizing: border-box; min-height: 1em; color: rgb(107, 107, 107); line-height: 1.75em; word-wrap: break-word !important;"><span style="max-width: 100%; box-sizing: border-box; color: rgb(136, 136, 136); font-size: 15px; word-wrap: break-word !important;">上文说过，hash join是传统数据库中的单机join算法，在分布式环境下需要经过一定的分布式改造，说到底就是尽可能利用分布式计算资源进行并行化计算，提高总体效率。hash join分布式改造一般有两种经典方案：</span></p><p style="margin-bottom: 10px; max-width: 100%; box-sizing: border-box; min-height: 1em; color: rgb(107, 107, 107); line-height: 1.75em; word-wrap: break-word !important;"><span style="max-width: 100%; box-sizing: border-box; color: rgb(136, 136, 136); font-size: 15px; word-wrap: break-word !important;">1. broadcast hash join：将其中一张小表广播分发到另一张大表所在的分区节点上，分别并发地与其上的分区记录进行hash join。broadcast适用于小表很小，可以直接广播的场景；</span></p><p style="margin-bottom: 10px; max-width: 100%; box-sizing: border-box; min-height: 1em; color: rgb(107, 107, 107); line-height: 1.75em; word-wrap: break-word !important;"><span style="max-width: 100%; box-sizing: border-box; color: rgb(136, 136, 136); font-size: 15px; word-wrap: break-word !important;">2. shuffler hash join：一旦小表数据量较大，此时就不再适合进行广播分发。这种情况下，可以根据join key相同必然分区相同的原理，将两张表分别按照join key进行重新组织分区，这样就可以将join分而治之，划分为很多小join，充分利用集群资源并行化。</span></p><p><br></p><p><br></p><section class="" data-source="bj.96weixin.com" style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><section class="" style="max-width: 100%; line-height: 25px; font-family: 微软雅黑; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;"><p style="margin-bottom: 10px; max-width: 100%; box-sizing: border-box; min-height: 1em; color: rgb(107, 107, 107); line-height: 1.75em; word-wrap: break-word !important;"><span class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;"></span></p><section class="" data-source="bj.96weixin.com" style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><section style="margin: 5px auto; max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><section class="" style="margin: 5px; max-width: 100%; width: 8px; border-radius: 5px; display: inline-block; height: 25px; float: left; color: rgb(255, 255, 255); background-color: rgb(95, 170, 255); box-sizing: border-box !important; word-wrap: break-word !important;"></section><section style="padding: 5px; max-width: 100%; display: inline-block; box-sizing: border-box !important; word-wrap: break-word !important;"><p style="max-width: 100%; min-height: 1em; box-sizing: border-box !important; word-wrap: break-word !important;"><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span class="" style="max-width: 100%; font-size: 18px; color: rgb(95, 170, 255); box-sizing: border-box !important; word-wrap: break-word !important;">Broadcast Hash Join</span></strong><span class="" style="max-width: 100%; font-size: 18px; color: rgb(95, 170, 255); box-sizing: border-box !important; word-wrap: break-word !important;"><br style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"></span></p></section></section></section><p style="margin-bottom: 10px; max-width: 100%; box-sizing: border-box; min-height: 1em; color: rgb(107, 107, 107); line-height: 1.75em; word-wrap: break-word !important;"><span style="max-width: 100%; box-sizing: border-box; color: rgb(136, 136, 136); font-size: 15px; word-wrap: break-word !important;">如下图所示，broadcast hash join可以分为两步：</span></p></section></section><p><br></p><p><br></p><p style="margin-bottom: 10px; max-width: 100%; box-sizing: border-box; min-height: 1em; color: rgb(107, 107, 107); line-height: 1.75em; word-wrap: break-word !important;"><span style="max-width: 100%; box-sizing: border-box; color: rgb(136, 136, 136); font-size: 15px; word-wrap: break-word !important;">1. broadcast阶段：将小表广播分发到大表所在的所有主机。广播算法可以有很多，最简单的是先发给driver，driver再统一分发给所有executor；要不就是基于bittorrete的p2p思路；</span></p><p style="margin-bottom: 10px; max-width: 100%; box-sizing: border-box; min-height: 1em; color: rgb(107, 107, 107); line-height: 1.75em; word-wrap: break-word !important;"><span style="max-width: 100%; box-sizing: border-box; color: rgb(136, 136, 136); font-size: 15px; word-wrap: break-word !important;">2. hash join阶段：在每个executor上执行单机版hash join，小表映射，大表试探；</span></p><p style="margin-bottom: 10px; max-width: 100%; box-sizing: border-box; min-height: 1em; color: rgb(107, 107, 107); line-height: 1.75em; word-wrap: break-word !important;"><span class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;"></span></p><p style="max-width: 100%; min-height: 1em; line-height: 1.75em; box-sizing: border-box !important; word-wrap: break-word !important;"><br></p><p style="margin-bottom: 10px; max-width: 100%; box-sizing: border-box; min-height: 1em; color: rgb(107, 107, 107); line-height: 1.75em; word-wrap: break-word !important;"><span style="max-width: 100%; box-sizing: border-box; color: rgb(136, 136, 136); font-size: 15px; word-wrap: break-word !important;">SparkSQL规定broadcast hash join执行的基本条件为被广播小表必须小于参数spark.sql.autoBroadcastJoinThreshold，默认为10M。</span></p><p><br></p><p><br></p><section class="" data-source="bj.96weixin.com" style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><section class="" style="max-width: 100%; line-height: 25px; font-family: 微软雅黑; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;"><p style="max-width: 100%; min-height: 1em; line-height: 1.75em; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; box-sizing: border-box; color: rgb(136, 136, 136); word-wrap: break-word !important;"></span></p><section class="" data-source="bj.96weixin.com" style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><section style="margin: 5px auto; max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><section class="" style="margin: 5px; max-width: 100%; width: 8px; border-radius: 5px; display: inline-block; height: 25px; float: left; color: rgb(255, 255, 255); background-color: rgb(95, 170, 255); box-sizing: border-box !important; word-wrap: break-word !important;"></section><section style="padding: 5px; max-width: 100%; display: inline-block; box-sizing: border-box !important; word-wrap: break-word !important;"><p style="max-width: 100%; min-height: 1em; box-sizing: border-box !important; word-wrap: break-word !important;"><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span class="" style="max-width: 100%; font-size: 18px; color: rgb(95, 170, 255); box-sizing: border-box !important; word-wrap: break-word !important;">Shuffle Hash Join</span></strong><span class="" style="max-width: 100%; font-size: 18px; color: rgb(95, 170, 255); box-sizing: border-box !important; word-wrap: break-word !important;"><br style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"></span><span class="" style="max-width: 100%; color: rgb(95, 170, 255); font-size: 12px; box-sizing: border-box !important; word-wrap: break-word !important;"></span></p></section></section></section><p style="max-width: 100%; min-height: 1em; line-height: 1.75em; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; box-sizing: border-box; color: rgb(136, 136, 136); font-size: 15px; word-wrap: break-word !important;">在大数据条件下如果一张表很小，执行join操作最优的选择无疑是broadcast hash join，效率最高。但是一旦小表数据量增大，广播所需内存、带宽等资源必然就会太大，broadcast hash join就不再是最优方案。此时可以按照join key进行分区，根据key相同必然分区相同的原理，就可以将大表join分而治之，划分为很多小表的join，充分利用集群资源并行化。如下图所示，shuffle hash join也可以分为两步：</span></p></section></section><p><br></p><p><br></p><p style="margin-bottom: 10px; max-width: 100%; box-sizing: border-box; min-height: 1em; color: rgb(107, 107, 107); line-height: 1.75em; word-wrap: break-word !important;"><span style="max-width: 100%; box-sizing: border-box; color: rgb(136, 136, 136); font-size: 15px; word-wrap: break-word !important;">1. shuffle阶段：分别将两个表按照join key进行分区，将相同join key的记录重分布到同一节点，两张表的数据会被重分布到集群中所有节点。这个过程称为shuffle</span></p><p style="margin-bottom: 10px; max-width: 100%; box-sizing: border-box; min-height: 1em; color: rgb(107, 107, 107); line-height: 1.75em; word-wrap: break-word !important;"><span style="max-width: 100%; box-sizing: border-box; color: rgb(136, 136, 136); font-size: 15px; word-wrap: break-word !important;">2. hash join阶段：每个分区节点上的数据单独执行单机hash join算法。</span></p><p style="max-width: 100%; min-height: 1em; line-height: 1.75em; box-sizing: border-box !important; word-wrap: break-word !important;"><img src="/feiitworld/images/efcff172fa60d090dc1fa11feb09bbea0b8f16fa.png" style="box-sizing: border-box !important; word-wrap: break-word !important; visibility: visible !important; width: 640px !important; height: 214px !important;"></p><p style="margin-bottom: 10px; max-width: 100%; box-sizing: border-box; min-height: 1em; color: rgb(107, 107, 107); line-height: 1.75em; word-wrap: break-word !important;"><span class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;"></span></p><p style="margin-bottom: 10px; max-width: 100%; box-sizing: border-box; min-height: 1em; color: rgb(107, 107, 107); line-height: 1.75em; word-wrap: break-word !important;"><span class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;"></span></p><p style="margin-bottom: 10px; max-width: 100%; box-sizing: border-box; min-height: 1em; color: rgb(107, 107, 107); line-height: 1.75em; word-wrap: break-word !important;"><span class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;"></span></p><p style="margin-bottom: 10px; max-width: 100%; box-sizing: border-box; min-height: 1em; color: rgb(107, 107, 107); line-height: 1.75em; word-wrap: break-word !important;"><span style="max-width: 100%; box-sizing: border-box; color: rgb(136, 136, 136); font-size: 15px; word-wrap: break-word !important;">看到这里，可以初步总结出来如果两张小表join可以直接使用单机版hash join；如果一张大表join一张极小表，可以选择broadcast hash join算法；而如果是一张大表join一张小表，则可以选择shuffle hash join算法；那如果是两张大表进行join呢？</span></p><p style="margin-bottom: 10px; max-width: 100%; box-sizing: border-box; min-height: 1em; color: rgb(107, 107, 107); line-height: 1.75em; word-wrap: break-word !important;"><span class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;"></span></p><p><br></p><p><br></p><section class="" data-source="bj.96weixin.com" style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><section style="margin: 5px auto; max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><section class="" style="margin: 5px; max-width: 100%; width: 8px; border-radius: 5px; display: inline-block; height: 25px; float: left; color: rgb(255, 255, 255); background-color: rgb(95, 170, 255); box-sizing: border-box !important; word-wrap: break-word !important;"></section><section style="padding: 5px; max-width: 100%; display: inline-block; box-sizing: border-box !important; word-wrap: break-word !important;"><p style="max-width: 100%; min-height: 1em; box-sizing: border-box !important; word-wrap: break-word !important;"><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span class="" style="max-width: 100%; font-size: 18px; color: rgb(95, 170, 255); box-sizing: border-box !important; word-wrap: break-word !important;">Sort-Merge Join</span></strong><span class="" style="max-width: 100%; font-size: 18px; color: rgb(95, 170, 255); box-sizing: border-box !important; word-wrap: break-word !important;"><br style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"></span><span class="" style="max-width: 100%; color: rgb(95, 170, 255); font-size: 12px; box-sizing: border-box !important; word-wrap: break-word !important;"></span></p></section></section></section><p><br></p><p><br></p><p style="margin-bottom: 10px; max-width: 100%; box-sizing: border-box; min-height: 1em; color: rgb(107, 107, 107); line-height: 1.75em; word-wrap: break-word !important;"><span style="max-width: 100%; box-sizing: border-box; color: rgb(136, 136, 136); font-size: 15px; word-wrap: break-word !important;">SparkSQL对两张大表join采用了全新的算法－sort-merge join，如下图所示，整个过程分为三个步骤：</span></p><p style="margin-bottom: 10px; max-width: 100%; box-sizing: border-box; min-height: 1em; color: rgb(107, 107, 107); line-height: 1.75em; word-wrap: break-word !important;"><span class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;"></span></p><p style="max-width: 100%; min-height: 1em; line-height: 1.75em; box-sizing: border-box !important; word-wrap: break-word !important;"><img src="/feiitworld/images/6080dbaffa4968027612c0547df805a95f742b2b.png" style="box-sizing: border-box !important; word-wrap: break-word !important; visibility: visible !important; width: 640px !important; height: 330px !important;"></p><p style="margin-bottom: 10px; max-width: 100%; box-sizing: border-box; min-height: 1em; color: rgb(107, 107, 107); line-height: 1.75em; word-wrap: break-word !important;"><span style="max-width: 100%; box-sizing: border-box; color: rgb(136, 136, 136); font-size: 15px; word-wrap: break-word !important;">1. shuffle阶段：将两张大表根据join key进行重新分区，两张表数据会分布到整个集群，以便分布式并行处理；</span></p><p style="margin-bottom: 10px; max-width: 100%; box-sizing: border-box; min-height: 1em; color: rgb(107, 107, 107); line-height: 1.75em; word-wrap: break-word !important;"><span style="max-width: 100%; box-sizing: border-box; color: rgb(136, 136, 136); font-size: 15px; word-wrap: break-word !important;">2. sort阶段：对单个分区节点的两表数据，分别进行排序；</span></p><p style="margin-bottom: 10px; max-width: 100%; box-sizing: border-box; min-height: 1em; color: rgb(107, 107, 107); line-height: 1.75em; word-wrap: break-word !important;"><span style="max-width: 100%; box-sizing: border-box; color: rgb(136, 136, 136); font-size: 15px; word-wrap: break-word !important;">3. merge阶段：对排好序的两张分区表数据执行join操作。join操作很简单，分别遍历两个有序序列，碰到相同join key就merge输出，否则取更小一边，见下图示意：</span></p><p style="margin-bottom: 10px; max-width: 100%; box-sizing: border-box; min-height: 1em; color: rgb(107, 107, 107); line-height: 1.75em; word-wrap: break-word !important;"><span class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;"></span></p><p style="max-width: 100%; min-height: 1em; line-height: 1.75em; box-sizing: border-box !important; word-wrap: break-word !important;"><img src="/feiitworld/images/e9e96f2f3691d50cd7246030caebb00fbcfd5083.png" style="box-sizing: border-box !important; word-wrap: break-word !important; visibility: visible !important; width: 395px !important; height: 237px !important;"></p><p style="margin-bottom: 10px; max-width: 100%; box-sizing: border-box; min-height: 1em; color: rgb(107, 107, 107); line-height: 1.75em; word-wrap: break-word !important;"><span class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;"><span style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;"></span><span style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;">经过上文的分析，可以明确每种Join算法都有自己的适用场景，数据仓库设计时最好避免大表与大表的join查询，SparkSQL也可以根据内存资源、带宽资源适量将参数spark.sql.autoBroadcastJoinThreshold调大，让更多join实际执行为broadcast hash join。</span></span></p><p style="margin-bottom: 10px; max-width: 100%; box-sizing: border-box; min-height: 1em; color: rgb(107, 107, 107); line-height: 1.75em; word-wrap: break-word !important;"><span class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;"></span></p><p><br></p><p><br></p><section class="" data-source="bj.96weixin.com" style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><section style="margin: 5px auto; max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><section class="" style="margin: 5px auto; max-width: 100%; color: rgb(61, 167, 66); font-size: 16px; line-height: 35px; height: 35px; text-align: center; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 18px; box-sizing: border-box !important; word-wrap: break-word !important;"><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span class="" style="max-width: 100%; color: rgb(0, 176, 240); box-sizing: border-box !important; word-wrap: break-word !important;">总&nbsp;&nbsp;&nbsp; 结</span></strong></span><span class="" style="max-width: 100%; color: rgb(0, 176, 240); box-sizing: border-box !important; word-wrap: break-word !important;"><br style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"></span></section><section class="" style="margin-bottom: -5px; max-width: 100%; border-top: 2px solid rgb(0, 176, 240); height: 2px; width: 670px; box-sizing: border-box !important; word-wrap: break-word !important;"></section><section style="margin-right: auto; margin-left: auto; max-width: 100%; width: 120.597px; background: none 0% 0% repeat scroll rgb(255, 255, 255); height: 8px; box-sizing: border-box !important; word-wrap: break-word !important;"><section style="margin-right: auto; margin-left: auto; max-width: 100%; width: 30.142px; float: left; text-align: center; display: inline-block; box-sizing: border-box !important; word-wrap: break-word !important;"><section class="" style="margin-right: auto; margin-left: auto; max-width: 100%; width: 8px; height: 8px; border-radius: 100%; background: none 0% 0% repeat scroll rgb(0, 176, 240); box-sizing: border-box !important; word-wrap: break-word !important;"></section></section><section style="margin-right: auto; margin-left: auto; max-width: 100%; width: 30.142px; float: left; text-align: center; display: inline-block; box-sizing: border-box !important; word-wrap: break-word !important;"><section class="" style="margin-right: auto; margin-left: auto; max-width: 100%; width: 8px; height: 8px; border-radius: 100%; background: none 0% 0% repeat scroll rgb(0, 176, 240); box-sizing: border-box !important; word-wrap: break-word !important;"></section></section><section style="margin-right: auto; margin-left: auto; max-width: 100%; width: 30.142px; float: left; text-align: center; display: inline-block; box-sizing: border-box !important; word-wrap: break-word !important;"><section class="" style="margin-right: auto; margin-left: auto; max-width: 100%; width: 8px; height: 8px; border-radius: 100%; background: none 0% 0% repeat scroll rgb(0, 176, 240); box-sizing: border-box !important; word-wrap: break-word !important;"></section></section><section style="margin-right: auto; margin-left: auto; max-width: 100%; width: 30.142px; float: left; text-align: center; display: inline-block; box-sizing: border-box !important; word-wrap: break-word !important;"><section class="" style="margin-right: auto; margin-left: auto; max-width: 100%; width: 8px; height: 8px; border-radius: 100%; background: none 0% 0% repeat scroll rgb(0, 176, 240); box-sizing: border-box !important; word-wrap: break-word !important;"><span class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;"></span><br style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;"></span></section></section></section></section></section><p><br></p><p><br></p><p style="margin-bottom: 10px; max-width: 100%; box-sizing: border-box; min-height: 1em; color: rgb(107, 107, 107); line-height: 1.75em; word-wrap: break-word !important;"><span class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;"><br style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"></span></p><p style="margin-bottom: 10px; max-width: 100%; box-sizing: border-box; min-height: 1em; color: rgb(107, 107, 107); line-height: 1.75em; word-wrap: break-word !important;"><span class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;"></span><span style="max-width: 100%; color: rgb(136, 136, 136); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"><span class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;">Join操作是传统数据库中的一个高级特性，尤其对于当前MySQL数据库更是如此，原因很简单，MySQL对Join的支持目前还比较有限，只支持</span><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;">Nested-Loop Join算法，因此在OLAP场景下MySQL是很难吃的消的，不要去用MySQL去跑任何OLAP业务，结果真的很难看。</span></strong><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;"></span></strong><span class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;">不过好消息是MySQL在新版本要开始支持Hash Join了，这样也许在将来也可以用MySQL来处理一些小规模的OLAP业务。</span></span></p><p style="margin-bottom: 10px; max-width: 100%; box-sizing: border-box; min-height: 1em; color: rgb(107, 107, 107); line-height: 1.75em; word-wrap: break-word !important;"><span style="max-width: 100%; box-sizing: border-box; color: rgb(136, 136, 136); font-size: 15px; word-wrap: break-word !important;"></span></p><p style="margin-bottom: 10px; max-width: 100%; box-sizing: border-box; min-height: 1em; color: rgb(107, 107, 107); line-height: 1.75em; word-wrap: break-word !important;"><span style="max-width: 100%; box-sizing: border-box; color: rgb(136, 136, 136); font-size: 15px; word-wrap: break-word !important;">和MySQL相比，PostgreSQL、SQLServer、Oracle等这些数据库对Join支持更加全面一些，都支持Hash Join算法。由PostgreSQL作为内核构建的分布式系统Greenplum更是在数据仓库中占有一席之地，这和PostgreSQL对Join算法的支持其实有很大关系。</span></p><p style="margin-bottom: 10px; max-width: 100%; box-sizing: border-box; min-height: 1em; color: rgb(107, 107, 107); line-height: 1.75em; word-wrap: break-word !important;"><span style="max-width: 100%; box-sizing: border-box; color: rgb(136, 136, 136); font-size: 15px; word-wrap: break-word !important;"></span></p><p style="margin-bottom: 10px; max-width: 100%; box-sizing: border-box; min-height: 1em; color: rgb(107, 107, 107); line-height: 1.75em; word-wrap: break-word !important;"><span style="max-width: 100%; box-sizing: border-box; color: rgb(136, 136, 136); font-size: 15px; word-wrap: break-word !important;">总体而言，传统数据库单机模式做Join的场景毕竟有限，也建议尽量减少使用Join。<strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;">然而大数据领域就完全不同，Join是标配，OLAP业务根本无法离开表与表之间的关联，对Join的支持成熟度一定程度上决定了系统的性能，夸张点说，“<span style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;"><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;">得Join者得天下</strong></span>”。</strong>本文只是试图带大家真正走进Join的世界，了解常用的几种Join算法以及各自的适用场景。如果大家有兴趣的，可以查看Spark相关代码进行更深入的学习。</span></p><p><span style="max-width: 100%; box-sizing: border-box; color: rgb(136, 136, 136); font-size: 15px; word-wrap: break-word !important;"><br></span></p><section class="" powered-by="xiumi.us" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;"><section class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;"><section class="" style="max-width: 100%; box-sizing: border-box; text-align: center; font-size: 18px; line-height: 2; letter-spacing: 1px; word-wrap: break-word !important;"><p style="max-width: 100%; box-sizing: border-box; min-height: 1em; word-wrap: break-word !important;"><strong style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;">欢迎打赏支持飞总的写作</strong></p></section></section></section><p><br></p><section class="" powered-by="xiumi.us" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;"><section class="" style="margin-top: 10px; margin-bottom: 10px; max-width: 100%; box-sizing: border-box; text-align: center; word-wrap: break-word !important;"><img src="/feiitworld/images/eb07149d782bd7223baa19381349a44cdbecfbc9.png" style="box-sizing: border-box; vertical-align: middle; word-wrap: break-word !important; visibility: visible !important; width: 640px !important; height: 845px !important;"></section></section><section class="" powered-by="xiumi.us" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;"><section class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;"><p style="max-width: 100%; box-sizing: border-box; min-height: 1em; display: inline-block; width: 670px; vertical-align: top; word-wrap: break-word !important;">&nbsp;往期精选</p></section><section class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;"><p style="max-width: 100%; box-sizing: border-box; min-height: 1em; display: inline-block; width: 670px; vertical-align: top; word-wrap: break-word !important;"><a href="http://mp.weixin.qq.com/s?__biz=MzI5OTM3MjMyNA==&amp;mid=2247484224&amp;idx=1&amp;sn=9fced8d0ae82ab9b5a312beef90f76a2&amp;chksm=ec96d90bdbe1501d3b95a1d5aa7624f02f23c1c0f3c954a732daee20d16c41ffc8a308e9735c&amp;scene=21#wechat_redirect" target="_blank" data_ue_src="http://mp.weixin.qq.com/s?__biz=MzI5OTM3MjMyNA==&amp;mid=2247484224&amp;idx=1&amp;sn=9fced8d0ae82ab9b5a312beef90f76a2&amp;chksm=ec96d90bdbe1501d3b95a1d5aa7624f02f23c1c0f3c954a732daee20d16c41ffc8a308e9735c&amp;scene=21#wechat_redirect" style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;">修Bug的罪与罚(1)</a><br style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"></p></section><section class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;"><a href="http://mp.weixin.qq.com/s?__biz=MzI5OTM3MjMyNA==&amp;mid=2247484209&amp;idx=1&amp;sn=31d449c3455262b67af730633a987e2d&amp;chksm=ec96d97adbe1506c627190ee2680aa5c2caa43269d6e3effd08c37f9bcc7dc7b7a5419f8187a&amp;scene=21#wechat_redirect" target="_blank" data_ue_src="http://mp.weixin.qq.com/s?__biz=MzI5OTM3MjMyNA==&amp;mid=2247484209&amp;idx=1&amp;sn=31d449c3455262b67af730633a987e2d&amp;chksm=ec96d97adbe1506c627190ee2680aa5c2caa43269d6e3effd08c37f9bcc7dc7b7a5419f8187a&amp;scene=21#wechat_redirect" style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;">做人不能太无耻之微软build大会的宇宙数据库</a><br></section><section class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;"><p style="max-width: 100%; box-sizing: border-box; min-height: 1em; display: inline-block; width: 670px; vertical-align: top; word-wrap: break-word !important;"><a href="http://mp.weixin.qq.com/s?__biz=MzI5OTM3MjMyNA==&amp;mid=2247484060&amp;idx=1&amp;sn=975148338bf2296a6c0f89fa3c94bae1&amp;chksm=ec96d8d7dbe151c155f417ee05c22b8cb15797bfd7ad891771e5bdecf6ddbc1ca9f89b87eb90&amp;scene=21#wechat_redirect" target="_blank" data_ue_src="http://mp.weixin.qq.com/s?__biz=MzI5OTM3MjMyNA==&amp;mid=2247484060&amp;idx=1&amp;sn=975148338bf2296a6c0f89fa3c94bae1&amp;chksm=ec96d8d7dbe151c155f417ee05c22b8cb15797bfd7ad891771e5bdecf6ddbc1ca9f89b87eb90&amp;scene=21#wechat_redirect" style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;">缺失的价值回报体系</a><br style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"></p></section><section class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;"><p style="max-width: 100%; box-sizing: border-box; min-height: 1em; display: inline-block; width: 670px; vertical-align: top; word-wrap: break-word !important;"><a href="http://mp.weixin.qq.com/s?__biz=MzI5OTM3MjMyNA==&amp;mid=2247484047&amp;idx=1&amp;sn=4efac37195a779579ddfa999e13e8079&amp;chksm=ec96d8c4dbe151d2042d9bce729537b2c6d71b12c0dc4f3e7a6c74b14ef4e87b07a8cd265ace&amp;scene=21#wechat_redirect" target="_blank" data_ue_src="http://mp.weixin.qq.com/s?__biz=MzI5OTM3MjMyNA==&amp;mid=2247484047&amp;idx=1&amp;sn=4efac37195a779579ddfa999e13e8079&amp;chksm=ec96d8c4dbe151d2042d9bce729537b2c6d71b12c0dc4f3e7a6c74b14ef4e87b07a8cd265ace&amp;scene=21#wechat_redirect" style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;">血淋淋的Cloudera上市路</a><br style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"></p></section><section class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;"><a href="http://mp.weixin.qq.com/s?__biz=MzI5OTM3MjMyNA==&amp;mid=2247483893&amp;idx=1&amp;sn=7a0251137bcca186d5fac0e0eb669f53&amp;chksm=ec96dbbedbe152a8e83b3c2684ef693d5ebf14da9fe7ac1c6f9e209c72a13f9642fd3ee96554&amp;scene=21#wechat_redirect" target="_blank" data_ue_src="http://mp.weixin.qq.com/s?__biz=MzI5OTM3MjMyNA==&amp;mid=2247483893&amp;idx=1&amp;sn=7a0251137bcca186d5fac0e0eb669f53&amp;chksm=ec96dbbedbe152a8e83b3c2684ef693d5ebf14da9fe7ac1c6f9e209c72a13f9642fd3ee96554&amp;scene=21#wechat_redirect">陆奇为什么去百度？</a><br></section><section class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;"><p style="max-width: 100%; box-sizing: border-box; min-height: 1em; display: inline-block; width: 670px; vertical-align: top; word-wrap: break-word !important;"><a href="http://mp.weixin.qq.com/s?__biz=MzI5OTM3MjMyNA==&amp;mid=2247484099&amp;idx=1&amp;sn=a18b7f0e9dd0fe596bdf80e3a1f9709e&amp;chksm=ec96d888dbe1519ec1d69a1e9bd4081eb6492ed99e93387a59e8d2438abf27a537a468252889&amp;scene=21#wechat_redirect" target="_blank" data_ue_src="http://mp.weixin.qq.com/s?__biz=MzI5OTM3MjMyNA==&amp;mid=2247484099&amp;idx=1&amp;sn=a18b7f0e9dd0fe596bdf80e3a1f9709e&amp;chksm=ec96d888dbe1519ec1d69a1e9bd4081eb6492ed99e93387a59e8d2438abf27a537a468252889&amp;scene=21#wechat_redirect">Log:被BigData遗忘的奠基者</a><br style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"></p></section><section class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;"><p style="max-width: 100%; box-sizing: border-box; min-height: 1em; display: inline-block; width: 670px; vertical-align: top; word-wrap: break-word !important;"><a href="http://mp.weixin.qq.com/s?__biz=MzI5OTM3MjMyNA==&amp;mid=2247483786&amp;idx=1&amp;sn=94b99648f9c2761ecc3fe0205e4ae575&amp;chksm=ec96dbc1dbe152d7ed246eac13807e627d1d8b89742460fefcd7a01eedc4d0daec3fb9c54ae1&amp;scene=21#wechat_redirect" target="_blank" data_ue_src="http://mp.weixin.qq.com/s?__biz=MzI5OTM3MjMyNA==&amp;mid=2247483786&amp;idx=1&amp;sn=94b99648f9c2761ecc3fe0205e4ae575&amp;chksm=ec96dbc1dbe152d7ed246eac13807e627d1d8b89742460fefcd7a01eedc4d0daec3fb9c54ae1&amp;scene=21#wechat_redirect">大数据的那些事（1）：Google的后悔药</a><br></p></section><section class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;"><p style="max-width: 100%; box-sizing: border-box; min-height: 1em; display: inline-block; width: 670px; vertical-align: top; word-wrap: break-word !important;"><a href="http://mp.weixin.qq.com/s?__biz=MzI5OTM3MjMyNA==&amp;mid=2247483757&amp;idx=1&amp;sn=78d24e0bc43c1e27627b59d3adb1c236&amp;chksm=ec96db26dbe152300bc8320c215368d8a2ae5baa45ca474240bc27ed28c9454e666b577a4da2&amp;scene=21#wechat_redirect" target="_blank" data_ue_src="http://mp.weixin.qq.com/s?__biz=MzI5OTM3MjMyNA==&amp;mid=2247483757&amp;idx=1&amp;sn=78d24e0bc43c1e27627b59d3adb1c236&amp;chksm=ec96db26dbe152300bc8320c215368d8a2ae5baa45ca474240bc27ed28c9454e666b577a4da2&amp;scene=21#wechat_redirect">SAP HANA神话（一）：Michael Stonebraker梦碎</a></p></section></section><section class="" powered-by="xiumi.us" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;"><section class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;"><section class="" style="max-width: 100%; box-sizing: border-box; text-align: center; font-size: 18px; line-height: 2; letter-spacing: 1px; word-wrap: break-word !important;"><p style="max-width: 100%; box-sizing: border-box; min-height: 1em; word-wrap: break-word !important;"><strong style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;">加飞总小密圈和大咖嘉宾聊天</strong></p></section></section></section><section class="" powered-by="xiumi.us" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;"><section class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;"><section class="" style="max-width: 100%; box-sizing: border-box; display: inline-block; width: 670px; vertical-align: top; word-wrap: break-word !important;"><section class="" powered-by="xiumi.us" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;"><section class="" style="margin-top: 10px; margin-bottom: 10px; max-width: 100%; box-sizing: border-box; text-align: center; word-wrap: break-word !important;"><img src="/feiitworld/images/c0e4ed134075d1e75ad1b0deda4e12f05de1e907.jpeg" style="box-sizing: border-box; vertical-align: middle; word-wrap: break-word !important; visibility: visible !important; width: 401.984px !important; height: 416.753px !important;"></section></section></section></section></section><section class="" powered-by="xiumi.us" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;"><section class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;"><section class="" style="max-width: 100%; box-sizing: border-box; display: inline-block; width: 670px; vertical-align: top; word-wrap: break-word !important;"><section class="" powered-by="xiumi.us" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;"><section class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;"><section class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;"><p style="max-width: 100%; box-sizing: border-box; min-height: 1em; word-wrap: break-word !important;"><br style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;"></p></section></section></section><section class="" powered-by="xiumi.us" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;"><section class="" style="margin-top: 10px; margin-bottom: 10px; max-width: 100%; box-sizing: border-box; text-align: center; word-wrap: break-word !important;"><img src="/feiitworld/images/e167ac491157b1876062b9aeef3e035ffb6dc1a2.jpeg" style="box-sizing: border-box; vertical-align: middle; word-wrap: break-word !important; visibility: visible !important; width: 66.9844px !important; height: 56.8784px !important;"></section></section></section></section></section><section class="" powered-by="xiumi.us" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;"><section class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;"></section></section><p><br></p><p><br></p><hr/><a href="http://mp.weixin.qq.com/s?timestamp=1496458980&src=3&ver=1&signature=Nemr66ffk*GtagkzYwHqqlmJ5WeSmafIdPJ-alsq-dcTEXbo3POrqRzZvse3RZLBvKN5rYTYQKlsSCm23cgEIFDbuoJ4gODzaiUMovIEek*cvjZFdwQHapI5YaPzyNIuVQT2Ed9dUJ0rLC6s9QNTj83TQta6mqMlE1ovmW9Tsbo=">微信地址</a>
{% endraw  %}

